var $header = ` <div>
                <header v-bind:class="{ pagina }">
                    <div class="container">
                        <img v-if="pagina == 'lp1' || pagina == 'rgm' || pagina == 'get-trial'" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        <img v-if="pagina == 'lp2' && mobile >= 961" src="/arquivos/iqoslogobl.png" alt="iqos" title="iqos" />
                        <img v-if="pagina == 'lp2' && mobile < 961" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        <div v-if="pagina != 'get-trial'">
                            <a href="tel:8001476769" data-category="Clicks" data-action="Telephone link" data-label="tel:8001476769" data-event="Clic" class="tel"><svg viewBox="0 0 55 65"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h48.323v51.323H0z"/></clipPath></defs><g transform="rotate(28 12.047 48.32)" clip-path="url(#prefix__a)"><g data-name="Grupo 4"><path data-name="Trazado 3" d="M45.639 35.641a28.936 28.936 0 01-9.584-1.625 2.583 2.583 0 00-2.725.7L27.424 41A41.77 41.77 0 019.732 22.226l5.906-6.3a2.988 2.988 0 00.662-2.896 34.3 34.3 0 01-1.53-10.179A2.762 2.762 0 0012.081 0h-9.4A2.771 2.771 0 000 2.851c0 26.774 20.43 48.472 45.639 48.472a2.762 2.762 0 002.685-2.851v-9.98a2.762 2.762 0 00-2.685-2.851z" fill="#272a33"/></g></g></svg> <span>(800 1 476769)</span></a>
                        </div>
                    </div>
                </header>
                <transition name="fade">
                    <section class="iqos geoFencing" v-if="!geoFencingmodal">
                        <div class="info"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Este sitio contiene información sobre un producto electrónico para el consumo de tabaco y está reservado para fumadores mayores de 18 años que viven en México. Haz click aquí para ser redirigido a tu página local.</p>
                            <a href="https://www.iqos.com/" class="btn negro" data-eventdata-category="home" data-eventaction="country" data-eventlabel="Continuar" clicC="ntryRedirect">Continuar <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg></a>
                        </div>
                    </section>
                </transition>
                <transition name="fade">
                    <section class="iqos ageverification" v-if="!popupIqos">
                        <div class="info" v-if="!range"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>¿Eres fumador o usuario IQOS mayor de 18 años?</p>
                            <div class="fechaNacimiento">
                                <div class="dropbox">
                                    <select name="mes" data-category="Dialog (Age Verification)" data-action="Month" data-label="MX" data-event="Clic" id="mes">
                                        <option value="" disabled selected="selected">Mes</option>   
                                        <option v-for="{mes, val} in meses" :value="val">{{mes}}</option> 
                                    </select>
                                </div>
                                <span class="separador"></span>
                                <div class="dropbox">
                                    <select data-category="Dialog (Age Verification)" data-action="Year" data-label="MX" data-event="Clic" name="ano" id="ano">
                                        <option value="" disabled selected="selected">Año</option>
                                    </select>
                                </div>
                            </div>
                            
                            <transition name="fade">
                                <div v-if="errorPopup.length" class="errors">
                                    <a href="#" @click.prevent="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errorPopup">{{error}}</li>
                                    </ul>
                                </div>
                            </transition>
                            <a href="#" data-category="Dialog (Age Verification)" data-action="Button Click - yes" data-label="MX" data-event="Clic" @click.prevent="iqosPopUp($event, 'si')" class="btn si">SÍ <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"/></svg></a>
                        </div>
                        <div class="info" v-else> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Debe ser mayor de 18 años para acceder al contenido de este sitio.</p>
                            <small>Este sitio contiene información sobre un producto usado con tabaco. Está reservado para personas mayores de 18 años que residen en México.</small>
                        </div>
                    </section>
                </transition>
                </div>`;
Vue.component('header-component', {
    'template': $header,
    'data': function() {

        return {
            "pagina": "lp1",
            "mobile": window.innerWidth,
            "geoFencingmodal": true,
            "popupIqos": this.$cookies.get('popupIqos'),
            "range": false,
            "meses": [{mes: 'Enero',val: "01"},{mes: 'Febrero',val: "02"},{mes: 'Marzo',val: "03"},{mes: 'Abril',val: "04"},{mes: 'Mayo',val: "05"},{mes: 'Junio',val: "06"},{mes: 'Julio',val: "07"},{mes: 'Agosto',val: "08"},{mes: 'Septiembre',val: "09"},{mes: 'Octubre',val: "10"},{mes: 'Noviembre',val: "11"},{mes: 'Diciembre',val: "12"}],
            "errorPopup": [],
        };

    },
    'methods': {
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                var countrycode = data.country_code;
                var parseParam = location.search;

                if ( parseParam == "?gr=false" ) {
                    _self.geoFencingmodal = true
                } else {
                    if( countrycode != 'MX') {
                        _self.geoFencingmodal = false
                    }
                }
            })
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            } else if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "iqosPopUp": function(event,responta) {
            event.preventDefault();
            this.errorPopup = [];
            
            window.mes = $(".ageverification #mes option:selected").val()
            window.ano = $(".ageverification #ano option:selected").val()

            if (window.mes == "" && window.ano == "" ) {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.mes == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.ano == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else {
                var date = new Date();
                var ano = date.getFullYear();
                var mes = date.getMonth();

                if (ano - parseFloat(window.ano) == 17 && parseFloat($(".ageverification #mes option:selected").val()) <= mes) {
                    sucess()
                } else if (ano - parseFloat(window.ano) < 18) {
                    this.range = true
                    try {
                        window.dataLayer.push({
                            "category": "Dialog (Age Verification)",
                            "action": "Button Click - No",
                            "label": "MX",
                            "event": "eventunder18"
                        })
                    } catch (e) {console.log(e)}
                        
                } else {
                    sucess()
                }                    
                        
                function sucess () {
                    this.$cookies.set('popupIqos', responta, '90d')
                    this.$cookies.set('mes', $(".ageverification #mes option:selected").val(), '90d')
                    this.$cookies.set('ano', $(".ageverification #ano option:selected").val(), '90d')

                    $(".ageverification").fadeOut()
                    $("html, body").css({"overflow":"auto"});

                    VueEvent.$emit('mes', window.mes)
                    VueEvent.$emit('ano', window.ano)

                    $("footer .btn.disabled").removeClass("disabled")
                }
                
            }
            
        },
        "contagemAno": function () {
            var date = new Date();
            var ano = date.getFullYear();
     
            for (let i = 1900; i < ano; i++) {
                $("#ano").append(
                    $('<option />')
                    .text([i])
                    .val([i])
                )
            }
            
        },
        "closePopUp": function(e) {
            this.errorPopup = [];
            e.preventDefault();
        },
        "bodySemrolagem": function () {
            console.log("bodysemrolaged called")
            console.log("popUpiqos",this.popupIqos)
            if (this.popupIqos == true || (this.$cookies.get('mes') && this.$cookies.get('ano'))) {
                console.log("first condition when tru overflow auto")
                $("html, body").css({"overflow":"auto"});
            } else if(this.popupIqos == 'si') {
                console.log("second condition when tru overflow auto popUp = si becuause comming from iqos.com")
                $("html, body").css({"overflow":"auto"});
            } else {
                console.log("last condition when tru overflow hidden")
                $("html, body").css({"overflow":"hidden"});
            }
        },
        "noMostrarPopup": function () {
            var _self =  this
            console.log(document.referrer, "referrer")
            var commingFrom = document.referrer.slice(0,20)
            console.log("commingFrom", commingFrom)
            console.log(document.referrer.indexOf("_ga"), "referrerindex")
            if (commingFrom == "https://www.iqos.com" ) {
                this.popupIqos = true
                this.$cookies.set('popupIqos', 'si', '90d')
                $("html, body").css({"overflow":"auto"});
                _self.bodySemrolagem()
            }
        }
    },
    'mounted': function(){
        this.contagemAno()
        // this.bodySemrolagem()
        window.onresize = () => {
            this.mobile = window.innerWidth;
        };
    },
    "watch": {},
    'computed': {},
    "created":function(){ 
        var _self = this
        
        _self.geoFencing()
        _self.paginaStatus()
        _self.bodySemrolagem()
        _self.noMostrarPopup()
    }
});









var $headerAdopta = ` <div>
                <header v-bind:class="{ pagina }">
                    <div class="container">
                        <img v-if="pagina == 'lp1' || pagina == 'rgm' || pagina == 'get-trial'" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        <img v-if="pagina == 'lp2' && mobile >= 961" src="/arquivos/iqoslogobl.png" alt="iqos" title="iqos" />
                        <img v-if="pagina == 'lp2' && mobile < 961" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        <div v-if="pagina != 'get-trial'">
                            <a href="tel:8001476769" data-category="Clicks" data-action="Telephone link" data-label="tel:8001476769" data-event="Clic" class="tel"><svg viewBox="0 0 55 65"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h48.323v51.323H0z"/></clipPath></defs><g transform="rotate(28 12.047 48.32)" clip-path="url(#prefix__a)"><g data-name="Grupo 4"><path data-name="Trazado 3" d="M45.639 35.641a28.936 28.936 0 01-9.584-1.625 2.583 2.583 0 00-2.725.7L27.424 41A41.77 41.77 0 019.732 22.226l5.906-6.3a2.988 2.988 0 00.662-2.896 34.3 34.3 0 01-1.53-10.179A2.762 2.762 0 0012.081 0h-9.4A2.771 2.771 0 000 2.851c0 26.774 20.43 48.472 45.639 48.472a2.762 2.762 0 002.685-2.851v-9.98a2.762 2.762 0 00-2.685-2.851z" fill="#272a33"/></g></g></svg> <span>(800 1 476769)</span></a>
                        </div>
                    </div>
                </header>
                <transition name="fade">
                    <section class="iqos geoFencing" v-if="!geoFencingmodal">
                        <div class="info"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Este sitio contiene información sobre un producto electrónico para el consumo de tabaco y está reservado para fumadores mayores de 18 años que viven en México. Haz click aquí para ser redirigido a tu página local.</p>
                            <a href="https://www.iqos.com/" class="btn negro" data-eventdata-category="home" data-eventaction="country" data-eventlabel="Continuar" clicC="ntryRedirect">Continuar <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg></a>
                        </div>
                    </section>
                </transition>
                <transition name="fade">
                    <section class="iqos ageverification" v-if="!popupIqos">
                        <div class="info" v-if="!range"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>¿Eres fumador o usuario IQOS mayor de 18 años?</p>
                            <div class="fechaNacimiento">
                                <div class="dropbox" >
                                    <select @click="buttonMonthClicked()" name="mes" data-category="Dialog (Age Verification)" data-action="Month" data-label="MX" data-event="Clic" id="mes">
                                        <option value="" disabled selected="selected">Mes</option>   
                                        <option v-for="{mes, val} in meses" :value="val">{{mes}}</option> 
                                    </select>
                                </div>
                                <span class="separador"></span>
                                <div class="dropbox" >
                                    <select @click="buttonYearClicked()" data-category="Dialog (Age Verification)" data-action="Year" data-label="MX" data-event="Clic" name="ano" id="ano">
                                        <option value="" disabled selected="selected">Año</option>
                                    </select>
                                </div>
                            </div>
                            
                            <transition name="fade">
                                <div v-if="errorPopup.length" class="errors">
                                    <a href="#" @click.prevent="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errorPopup">{{error}}</li>
                                    </ul>
                                </div>
                            </transition>
                            <a href="#" data-category="Dialog (Age Verification)" data-action="Button Click - yes" data-label="MX" data-event="Clic" @click.prevent="iqosPopUp($event, 'si')" class="btn si">SÍ <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"/></svg></a>
                        </div>
                        <div class="info" v-else> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Debe ser mayor de 18 años para acceder al contenido de este sitio.</p>
                            <small>Este sitio contiene información sobre un producto usado con tabaco. Está reservado para personas mayores de 18 años que residen en México.</small>
                        </div>
                    </section>
                </transition>
                </div>`;
Vue.component('header-adopta-component', {
    'template': $headerAdopta,
    'data': function() {

        return {
            "pagina": "lp1",
            "mobile": window.innerWidth,
            "geoFencingmodal": true,
            "popupIqos": this.$cookies.get('popupIqos'),
            "range": false,
            "meses": [{mes: 'Enero',val: "01"},{mes: 'Febrero',val: "02"},{mes: 'Marzo',val: "03"},{mes: 'Abril',val: "04"},{mes: 'Mayo',val: "05"},{mes: 'Junio',val: "06"},{mes: 'Julio',val: "07"},{mes: 'Agosto',val: "08"},{mes: 'Septiembre',val: "09"},{mes: 'Octubre',val: "10"},{mes: 'Noviembre',val: "11"},{mes: 'Diciembre',val: "12"}],
            "errorPopup": [],
        };

    },
    'methods': {
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                var countrycode = data.country_code;
                var parseParam = location.search;

                if ( parseParam == "?gr=false" ) {
                    _self.geoFencingmodal = true
                } else {
                    if( countrycode != 'MX') {
                        _self.geoFencingmodal = false
                    }
                }
            })
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            } else if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "buttonSiClicked": function (){
            console.log("si clic")
            try {
                window.dataLayer.push({
                    "category": "Dialog (Age Verification)",
                    "action": "Button Click-yes",
                    "label": "MX",
                    "event": "clic"
                })
            } catch (e) {console.log(e)}
        },
        "buttonMonthClicked": function (){
            console.log("month clic")
            try {
                window.dataLayer.push({
                    "category": "Dialog (Age Verification)",
                    "action": "Month",
                    "label": "MX",
                    "event": "clic"
                })
            } catch (e) {console.log(e)}
        },
        "buttonYearClicked": function (){
            console.log("year clic")
            try {
                window.dataLayer.push({
                    "category": "Dialog (Age Verification)",
                    "action": "Year",
                    "label": "MX",
                    "event": "clic"
                })
            } catch (e) {console.log(e)}
        },
        "iqosPopUp": function(event,responta) {
            event.preventDefault();
            this.errorPopup = [];
            console.log("si clic")
            try {
                window.dataLayer.push({
                    "category": "Dialog (Age Verification)",
                    "action": "Button Click-yes",
                    "label": "MX",
                    "event": "clic"
                })
            } catch (e) {console.log(e)}
            window.mes = $(".ageverification #mes option:selected").val()
            window.ano = $(".ageverification #ano option:selected").val()

            if (window.mes == "" && window.ano == "" ) {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.mes == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.ano == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else {
                var date = new Date();
                var ano = date.getFullYear();
                var mes = date.getMonth();

                if (ano - parseFloat(window.ano) == 17 && parseFloat($(".ageverification #mes option:selected").val()) <= mes) {
                    sucess()
                } else if (ano - parseFloat(window.ano) < 18) {
                    this.range = true
                    try {
                        window.dataLayer.push({
                            "category": "Dialog (Age Verification)",
                            "action": "Button Click - No",
                            "label": "MX",
                            "event": "eventunder18"
                        })
                    } catch (e) {console.log(e)}
                        
                } else {
                    sucess()
                }                    
                        
                function sucess () {
                    this.$cookies.set('popupIqos', responta, '90d')
                    this.$cookies.set('mes', $(".ageverification #mes option:selected").val(), '90d')
                    this.$cookies.set('ano', $(".ageverification #ano option:selected").val(), '90d')

                    $(".ageverification").fadeOut()
                    $("html, body").css({"overflow":"auto"});

                    VueEvent.$emit('mes', window.mes)
                    VueEvent.$emit('ano', window.ano)

                    $("footer .btn.disabled").removeClass("disabled")
                    try {
                        window.dataLayer.push({
                            "pageName": "home",
                            "event": "pv"
                        })
                    } catch (e) {console.log(e)}
                }
                
            }
            
        },
        "contagemAno": function () {
            var date = new Date();
            var ano = date.getFullYear();
     
            for (let i = 1900; i < ano; i++) {
                $("#ano").append(
                    $('<option />')
                    .text([i])
                    .val([i])
                )
            }
            
        },
        "closePopUp": function(e) {
            this.errorPopup = [];
            e.preventDefault();
        },
        "bodySemrolagem": function () {
            console.log("bodysemrolaged called")
            console.log("popUpiqos",this.popupIqos)
            if(this.popupIqos == null){
                try {
                    window.dataLayer.push({
                        "pageName": "Dialog (Age Verification)",
                        "category": "Dialog (Age Verification)",
                        "action": "Display",
                        "label": "MX",
                        "event": "ageverification"
                    })
                } catch (e) {console.log(e)}   
            }
            else if (this.popupIqos == true || (this.$cookies.get('mes') && this.$cookies.get('ano'))) {
                console.log("first condition when tru overflow auto")
                $("html, body").css({"overflow":"auto"});
            } else if(this.popupIqos == 'si') {
                console.log("second condition when tru overflow auto popUp = si becuause comming from iqos.com")
                $("html, body").css({"overflow":"auto"});
            } else {
                console.log("last condition when tru overflow hidden")
                $("html, body").css({"overflow":"hidden"});
            }
        },
        "noMostrarPopup": function () {
            var _self =  this
            console.log(document.referrer, "referrer")
            var commingFrom = document.referrer.slice(0,20)
            console.log("commingFrom", commingFrom)
            console.log(document.referrer.indexOf("_ga"), "referrerindex")
            if (commingFrom == "https://www.iqos.com" ) {
                this.popupIqos = true
                this.$cookies.set('popupIqos', 'si', '90d')
                $("html, body").css({"overflow":"auto"});
                _self.bodySemrolagem()
            }
        }
    },
    'mounted': function(){
        this.contagemAno()
        // this.bodySemrolagem()
        window.onresize = () => {
            this.mobile = window.innerWidth;
        };
    },
    "watch": {},
    'computed': {},
    "created":function(){ 
        var _self = this
        console.log(_self.popupIqos, "popupIqos")
        _self.geoFencing()
        _self.paginaStatus()
        _self.bodySemrolagem()
        _self.noMostrarPopup()
    }
});
var $footerAdopta = `<div>
                <section class="bottom" style="align-items:flex-end" v-if="pagina != 'get-trial'">
                    <div class="marco">
                        IQOS es un dispositivo electrónico que, al calentar tabaco, entrega nicotina, la cual es adictiva, y no está libre de riesgo. Prohibida su venta a menores de edad.
                    </div>
                </section>
                <section class="bottom" v-else>
                    <span>¿Tienes dudas? Llámamos y con gusto te ayudaremos </span>
                    <a @click="phoneCall()" href="tel:8001476769" data-category="Clicks" data-action="Telephone link" data-label="tel:8001476769" data-event="Clic" class="tel"><svg viewBox="0 0 55 65"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h48.323v51.323H0z"/></clipPath></defs><g transform="rotate(28 12.047 48.32)" clip-path="url(#prefix__a)"><g data-name="Grupo 4"><path data-name="Trazado 3" d="M45.639 35.641a28.936 28.936 0 01-9.584-1.625 2.583 2.583 0 00-2.725.7L27.424 41A41.77 41.77 0 019.732 22.226l5.906-6.3a2.988 2.988 0 00.662-2.896 34.3 34.3 0 01-1.53-10.179A2.762 2.762 0 0012.081 0h-9.4A2.771 2.771 0 000 2.851c0 26.774 20.43 48.472 45.639 48.472a2.762 2.762 0 002.685-2.851v-9.98a2.762 2.762 0 00-2.685-2.851z" fill="#272a33"/></g></g></svg> <span>(800 1 476769)</span></a>
                        <div class="marco">
                            IQOS es un dispositivo electrónico que, al calentar tabaco, entrega nicotina, la cual es adictiva, y no está libre de riesgo. Prohibida su venta a menores de edad.
                        </div>
                </section>
                <footer>
                    <div class="container" :style="width_get_trial">
                        <div>
                            <img src="/arquivos/newIqosLogoWhite.png" alt="iqos" title="iqos" class="iqosBranco" />
                            <p>© 2021 Philip Morris Products SA <br />
                            Todos los derechos reservados</p>
                        </div>
                        <div class="footerPrueba" >
                            <ul class="legal">
                                <li class="title">Legal</li>
                                <li><a @click="linkClicks('aviso')" data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.pmiprivacy.com/es-la/consumer" data-event="Clic" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>
                                </li>
                                <li><a @click="linkClicks('terminos')" data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/terminos-condiciones.html" data-event="Clic" href="https://www.iqos.com/mx/es/terminos-condiciones.html" target="_blank">Términos y Condiciones</a>
                                </li>
                                <li><a @click="linkClicks('cookies')" data-category="Navigation (bottom)" data-action="Click link" data-label="/cookie" data-event="Clic" href="/cookie">Política de Cookies</a>
                                </li>
                                <li><a @click="linkClicks('reglas')" data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" data-event="Clic" href="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" target="_blank">Reglas de uso de Redes Sociales</a>
                                </li>
                                <li><a @click="linkClicks('terminosugc')" data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html" data-event="Clic" href="https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html" target="_blank">Términos y Condiciones UGC</a>
                                </li>
                                <li><a @click="linkClicks('informacion')" data-category="Navigation (bottom)" data-action="Click link" data-label="/informacion" data-event="Clic" href="/informacion">Información Importante</a>
                                </li>
                            </ul>
                            <ul v-if="pagina == 'get-trial'" class="servicio_cliente">
                                <li class="title">Servicio al Cliente</li>
                                <li style="flex:auto;"><a @click="linkClicks('preguntas')" data-action="Click link" data-label="/preguntas-frecuentes" data-event="Clic" href="/preguntas-frecuentes">Preguntas Frecuentes</a>
                                </li>
                            </ul>
                            <ul class="redes footerPrueba">
                                <li class="title footerPrueba">SÍGUENOS</li>
                                <li><a @click="linkClicks('instagram')" href="https://www.instagram.com/iqos_mx/" data-category="Outbound Link Clicks" data-action="https://www.instagram.com/iqos_mx/" :data-label="''+ pageTitle +' | https://www.instagram.com/iqos_mx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 34.204 34.204" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h34.204v34.204H0z"/></clipPath></defs><g clip-path="url(#prefix__a)" fill="#fff"><path data-name="Trazado 51" d="M24.014 0H10.19A10.2 10.2 0 000 10.19v13.824A10.2 10.2 0 0010.19 34.2h13.824A10.2 10.2 0 0034.2 24.014V10.19A10.2 10.2 0 0024.014 0zm6.749 24.014a6.749 6.749 0 01-6.749 6.749H10.19a6.749 6.749 0 01-6.749-6.749V10.19a6.749 6.749 0 016.749-6.749h13.824a6.749 6.749 0 016.749 6.749v13.824z"/><path data-name="Trazado 52" d="M17.102 11.28a5.822 5.822 0 105.822 5.822 5.829 5.829 0 00-5.822-5.822zm0 9.38a3.557 3.557 0 113.557-3.557 3.557 3.557 0 01-3.557 3.557z"/><circle data-name="Elipse 7" cx="2.896" cy="2.896" r="2.896" transform="translate(22.61 5.881)"/></g></svg> Instagram</a></li>
                                <li><a @click="linkClicks('facebook')" href="https://www.facebook.com/iqosmx/" data-category="Outbound Link Clicks" data-action="https://www.facebook.com/iqosmx/" :data-label="''+ pageTitle +' | https://www.facebook.com/iqosmx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 33 45" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h43.998v43.998H0z"/></clipPath></defs><g clip-path="url(#prefix__a)"><path data-name="facebook" d="M28.113 11.506H4.378a4.378 4.378 0 00-4.38 4.378V39.62a4.378 4.378 0 004.38 4.378h11.706l.02-11.611h-3.016a.712.712 0 01-.712-.709l-.014-3.743a.712.712 0 01.712-.714h3.011v-3.615c0-4.2 2.563-6.482 6.307-6.482h3.072a.712.712 0 01.712.712v3.154a.712.712 0 01-.711.712h-1.887c-2.036 0-2.43.967-2.43 2.387v3.131h4.474a.712.712 0 01.707.8l-.444 3.743a.712.712 0 01-.707.628h-4.01l-.02 11.611h6.965a4.378 4.378 0 004.378-4.378v-23.74a4.378 4.378 0 00-4.378-4.378z" fill="#fff"/></g></svg> Facebook</a></li>
                                <li><a @click="linkClicks('youtube')" href="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" data-category="Outbound Link Clicks" data-action="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" :data-label="''+ pageTitle +' | https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA'" data-event="Clic" target="_blank"><svg viewBox="0 0 47 33" width="25px"><path data-name="youtube" d="M36.038 0H9.446A9.446 9.446 0 000 9.446v13.293a9.446 9.446 0 009.446 9.446h26.592a9.446 9.446 0 009.446-9.446V9.446A9.446 9.446 0 0036.038 0zm-6.389 16.74l-12.438 5.932a.5.5 0 01-.714-.451V9.986a.5.5 0 01.725-.445l12.438 6.3a.5.5 0 01-.011.899z" fill="#fff"/></svg> Youtube</a></li>
                                <li><a @click="linkClicks('cuentanos')" href="https://app.keysurvey.com/f/1451448/12ed/" target="_blank"> Cuéntanos de ti</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="container cookie" v-if="!acepto">
                        <p>Utilizamos cookies para brindarte una experiencia personalizada (para que se adapte a tu comportamiento en línea en éste y otros sitios) para nuestros anuncios, contenido y comunicaciones; para mejorar el sitio; y recordar tus preferencias. Haz clic en &quot;Más información&quot; para más detalles o para modificar tus preferencias. Puedes cambiar de opinión en cualquier momento visitando &quot;Preferencias de cookies&quot;. Cualquier información personal sobre ti se utilizará como se describe en nuestro <a style="background:transparent;padding:0px;color:#fff;margin:0px;" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank" >Aviso de Privacidad.</a></p>
                        <a @click="reload()" class="btn cookie-btn" href="#" data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Acepto</a>
                        <a @click="cookieSettingsClicked()" style="color:#fff;" :class="{ 'btn' : !popupIqos, 'btn' : popupIqos == 'si'}" href="/cookie" data-value="no" data-category="Dialog (Cookie Policy)" data-action="Button Click - cookie settings" data-label="MX" data-event="Clic" target="_blank">Más información</a>
                    </div>
                </footer>
                </div>`;
Vue.component('footer-adopta-component', {
    'template': $footerAdopta,
    'data': function() {

        return {
            "acepto": false,
            "pageTitle": "",
            "pagina": "",
            "popupIqos": this.$cookies.get('popupIqos'),
            "width_get_trial": "width:90%",
        };

    },
    'methods': {
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
                this.width_get_trial= "width:95%"
            }
        },
        "cookieSettingsClicked": function (){
            console.log("year clic")
            try {
                window.dataLayer.push({
                    "category": "Dialog (Age Verification)",
                    "action": "Button Click-cookie settings",
                    "label": "MX",
                    "event": "clic"
                })
            } catch (e) {console.log(e)}
        },
        "linkClicks": function(type) {
            if(type == "aviso"){
                try {
                    window.dataLayer.push({
                        "category": "Outbound Link Clicks",
                        "action": "https://www.pmiprivacy.com/es-la/consumer",
                        "label": "Programa de Préstamo | IQOS México | https://www.pmiprivacy.com/es-la/consumer",
                        "event": "clic"
                    })
                } catch (e) {console.log(e)}
            }
            if(type == "terminos"){
                try {
                    window.dataLayer.push({
                        "category": "Outbound Link Clicks",
                        "action": "https://www.iqos.com/mx/es/terminos-condiciones.html",
                        "label": "Programa de Préstamo | IQOS México | https://www.iqos.com/mx/es/terminos-condiciones.html",
                        "event": "clic"
                    })
                } catch (e) {console.log(e)}
            }
            if(type == "cookies"){
                try {
                    window.dataLayer.push({
                        "category": "Outbound Link Clicks",
                        "action": "https://www.adoptasinhumo.com/cookie",
                        "label": "Programa de Préstamo | IQOS México | https://www.adoptasinhumo.com/cookie",
                        "event": "clic"
                    })
                } catch (e) {console.log(e)}
            }
            if(type == "terminosugc"){
                try {
                    window.dataLayer.push({
                        "category": "Outbound Link Clicks",
                        "action": "https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html",
                        "label": "Programa de Préstamo | IQOS México | https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html",
                        "event": "clic"
                    })
                } catch (e) {console.log(e)}
            }
            if(type == "informacion"){
                try {
                    window.dataLayer.push({
                        "category": "Outbound Link Clicks",
                        "action": "https://www.adoptasinhumo.com/informacion",
                        "label": "Programa de Préstamo | IQOS México | https://www.adoptasinhumo.com/informacion",
                        "event": "clic"
                    })
                } catch (e) {console.log(e)}
            }
            if(type == "preguntas"){
                try {
                    window.dataLayer.push({
                        "category": "Outbound Link Clicks",
                        "action": "https://www.adoptasinhumo.com/preguntas-frecuentes",
                        "label": "Programa de Préstamo | IQOS México | https://www.adoptasinhumo.com/preguntas-frecuentes",
                        "event": "clic"
                    })
                } catch (e) {console.log(e)}
            }
            if(type == "instagram"){
                try {
                    window.dataLayer.push({
                        "category": "Outbound Link Clicks",
                        "action": "https://www.instagram.com/iqos_mx/",
                        "label": "Programa de Préstamo | IQOS México | https://www.instagram.com/iqos_mx/",
                        "event": "clic"
                    })
                } catch (e) {console.log(e)}
            }
            if(type == "facebook"){
                try {
                    window.dataLayer.push({
                        "category": "Outbound Link Clicks",
                        "action": "https://www.facebook.com/iqosmx/",
                        "label": "Programa de Préstamo | IQOS México | https://www.facebook.com/iqosmx/",
                        "event": "clic"
                    })
                } catch (e) {console.log(e)}
            }
            if(type == "youtube"){
                try {
                    window.dataLayer.push({
                        "category": "Outbound Link Clicks",
                        "action": "https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA",
                        "label": "Programa de Préstamo | IQOS México | https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA",
                        "event": "clic"
                    })
                } catch (e) {console.log(e)}
            }
            if(type == "cuentanos"){
                try {
                    window.dataLayer.push({
                        "category": "Outbound Link Clicks",
                        "action": "https://app.keysurvey.com/f/1451448/12ed/",
                        "label": "Programa de Préstamo | IQOS México | https://app.keysurvey.com/f/1451448/12ed/",
                        "event": "clic"
                    })
                } catch (e) {console.log(e)}
            }
        },
        "phoneCall": function () {
            try {
                window.dataLayer.push({
                    category: "Clicks",
                    action: "Telephone link",
                    event: "clic",
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "aceitarCookie": function() {
            var _self = this
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            $(".cookie-btn").click(function (event) {
                event.preventDefault()
                try {
                    window.dataLayer.push({
                        "category": "Dialog (Age Verification)",
                        "action": "Button Click-accept",
                        "label": "MX",
                        "event": "clic"
                    })
                } catch (e) {console.log(e)}
                _self.$cookies.set('acepto', "yes", "2d")
                document.cookie = 'Performance=true;expires='+exp+'; path=/'
                document.cookie = 'Tracking=true;expires='+exp+'; path=/'
                document.cookie = 'Technical=true;expires='+exp+'; path=/'
                _self.acepto = true
            })

            if (_self.$cookies.get('acepto') == "yes") {
                _self.acepto = true
            } 

        },
        "pageTitlefn": function() {
            this.pageTitle = $("title").text()
        },
        "reload": function(){
            try {
                window.dataLayer.push({
                    "category": "Dialog (Cookie Policy)",
                    "action": "Button Click - accept",
                    "label": "MX",
                    "event": "clic"
                })
            } catch (e) {console.log(e)}
            window.location.reload(true);
        }
    },
    'mounted': function(){
        this.aceitarCookie()
        this.pageTitlefn()
    },
    "watch": {},
    'computed': {},
    "created":function(){
        this.paginaStatus()
    }
});
var $cookieAdopta = `<div>
                <div class="service-content content-centered-cookies">
                    <h1 class="service-content__title">Cookies</h1>
                    <h3 class="service-content__subtitle">¿Qué cookies utilizamos?</h3>
                    <div class="service-content__intro">
                    <p>¿Qué son las cookies? Las cookies son pequeños archivos de texto que se colocan en tu dispositivo cuando visitas un sitio, las cuales se utilizan luego para identificar tu dispositivo para los fines descritos aquí. Las cookies establecidas por el propietario de un sitio se denominan “cookies de origen” (first party cookies). Las cookies establecidas por otras personas se denominan “cookies de terceros” (third party cookies). Las cookies de terceros permiten al tercero proporcionar características o funcionalidad en o a través del sitio (como análisis, publicidad y vídeos). Las partes que establecen estas cookies de terceros pueden reconocer tu dispositivo cuando visitas nuestro sitio y cuando visitas otros sitios. Utilizamos cookies (y otras tecnologías similares) en este sitio. Estas cookies se dividen en tres categorías. Las cookies de la primera categoría son necesarias. Las de las dos categorías restantes son opcionales: puedes decidir si deseas recibirlas de nosotros y, además, puedes utilizar esta herramienta para establecer tus preferencias. Puedes cambiar de opinión en cualquier momento y cambiar tus preferencias siguiendo el enlace a las preferencias de cookies desde cualquier página del sitio.</p>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" style="">
                        <legend class="legend-desktop over">Cookies operativas</legend>
                        <div class="cookie-set__status top">
                        <svg height="32px" width="32px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                            <g fill="none" fill-rule="evenodd">
                            <circle cx="16" cy="16" fill="#272a33" r="16"></circle>
                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#92b934" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"></path></g></svg>
                        <span class="cookie-set__status-label"><div v-if="this.all_cookies_allowed == true">On</div><div v-else >Off <br />Please allow cookies to turn on</div> </span>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div class="cookie-set__intro">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper">
                                <legend class="legend-desktop under">Cookies operativas</legend>
                                <p class="paragraph">Estas son estrictamente necesarias para el funcionamiento del sitio o para que las funciones que has elegido en él operen de una manera conveniente. Ejemplos: recordar quién eres, tus preferencias y tu configuración; de esta manera, no tendrás que introducirlas cada vez que cambies de página. Estas cookies son esenciales para la operación del sitio o para sus funciones; por este motivo, esta herramienta no ofrece la opción de rechazar su uso (opt-out). No obstante, si así lo deseas, puedes configurar tu navegador para que rechace todas las cookies, en cuyo caso es posible que el sitio no se muestre correctamente y que las funciones que selecciones no estén disponibles.</p>
                                <a style="padding-left: 0px;cursor:pointer;" @click="showMoreInfo1()" class="btn cookie-btn">Conoce más</a>
                                <p v-if="more_info_operativas">Cookies en uso</p>
                                <p v-if="more_info_operativas">
                                    
                                    <a id="tooltip2"  style="text-decoration: underline;"  > VTEXSC,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>
                                    <a id="tooltip2"  > _hjIncludedInSessionSample,
                                        <span class="tooltiptext" >Esta cookie está configurada para que Hotjar sepa si ese visitante está incluido en el muestreo de datos definido por el límite de sesiones diarias de su sitio. https://help.hotjar.com/hc/en-us/articles/115011789248-Hotjar-Cookie-Information</span> 
                                    </a>
                                    
                                    <a id="tooltip2"  style="text-decoration: underline;"  > ISSMB,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > Performance,
                                        <span class="tooltiptext" id="Performance">Interna - desarrollador - Define si el usuario ha aceptado las cookies de desempeño</span> 
                                    </a>


                                    <a id="tooltip2"  style="text-decoration: underline;"  > VtexRCMacIdv7,
                                        <span class="tooltiptext" id="VtexRCMacIdv7">VTEX - Cookie que recolecta información anónima para dimensionar el tamaño y tiempo de respuesta de los servidores y mejorar la navegación.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > vtex_session,
                                        <span class="tooltiptext" id="vtex_session">VTEX - El Sistema de Sesiones identifica, a través de la cookie de sesión vtex, la información de una sesión específica de un usuario navegando en la tienda. </span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > VtexRCRequestCounter,
                                        <span class="tooltiptext" id="VtexRCRequestCounter">VTEX - Cookie que recolecta información anónima para dimensionar el tamaño y tiempo de respuesta de los servidores y mejorar la navegación.</span> 
                                    </a>
                                    
                                    

                                    
                                    
                                    
                                    <a id="tooltip2"  style="text-decoration: underline;"  > janus_sid,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>

                                    <a id="tooltip2"  style="text-decoration: underline;"  > Tracking,
                                        <span class="tooltiptext" id="Tracking">Interna - Desarrollador - Define si el usuario ha aceptado las cookies de seguimiento.</span> 
                                    </a>

                                    <a id="tooltip2"  style="text-decoration: underline;"  > Technical,
                                        <span class="tooltiptext" id="Technical">Interna - Desarrollador - Cookie necesaria para operaciones en sitio, no opcional.</span> 
                                    </a>

                                    

                                    <a id="tooltip2"  style="text-decoration: underline;"  > VtexFingerPrint,
                                        <span class="tooltiptext" id="VtexFingerPrint">VTEX - Es una cookie necesaria para Cookiebot de VTEX</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > vtex_segment,
                                        <span class="tooltiptext" id="vtex_segment">VTEX - VTEX Sessions también crea la cookie VTEX_segment. Esta cookie contiene la información con las condiciones comerciales que se aplicarán a una sesión.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > VtexRCSessionIdv7,
                                        <span class="tooltiptext" id="VtexRCSessionIdv7">VTEX - Cookie que recolecta información anónima para dimensionar el tamaño y tiempo de respuesta de los servidores y mejorar la navegación.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _dc_gtm_UA-xxxxxxxx,
                                        <span class="tooltiptext" id="VtexRCSessionIdv7">
                                        Esta cookie está asociada con sitios que utilizan Google Tag Manager para cargar otros scripts y códigos en una página. Cuando se usa, puede considerarse estrictamente necesario, ya que sin él, es posible que otros scripts no funcionen correctamente. El final del nombre es un número único que también es un identificador de una cuenta de Google Analytics asociada.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > SGTS,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>
                                    <a id="tooltip2"  > _hjIncludedInPageviewSample.
                                        <span class="tooltiptext" >Hotjar - Esta cookie está configurada para que Hotjar sepa si ese visitante está incluido en el muestreo de datos definido por el límite de visitas a la página de su sitio. https://help.hotjar.com/hc/en-us/articles/115011789248-Hotjar-Cookie-Information</span> 
                                    </a>
                                </p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" >
                        <legend class="legend-desktop over">Cookies de rendimiento</legend>
                        <div class="wrap">
                            <div  class="cookie-set__status top">
                                <div v-if="this.getCookiePerformance() == 'true'  ">
                                    <div class="toggle-btn active">
                                    <input  type="checkbox" class="cb-value" />
                                    <span class="round-btn">
                                        <svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                                        </svg>
                                    </span>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="toggle-btn">
                                    <input  type="checkbox" class="cb-value" />
                                    <span class="round-btn">
                                        <div></div>
                                    </span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top:5px">
                                <div v-if="this.getCookiePerformance() == 'true' ">
                                    <div class="status-1">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="status-1">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div id="performance-cookie-name">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper collapsible-section" data-showmore="Show more" data-showless="Show less">
                                <legend class="legend-desktop under">Cookies de rendimiento</legend>
                                <p class="paragraph">Estas nos permiten entender cómo la gente usa el sitio y qué tan bien se desempeña este. Nos permiten mejorar el funcionamiento del sitio. Estas tecnologías nos dan únicamente información anónima: la información que recopilan se reduce para que, de esta manera, solo se identifique el área donde te encuentras. Esta información se agrega antes de ser enviada a nosotros. Puedes optar por aceptarlas (opt in) o rechazar su uso (opt out).</p>
                                <a style="padding-left: 0px;cursor:pointer;" @click="showMoreInfo2()" class="btn cookie-btn"  data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Conoce más</a>
                                <p v-if="more_info_performance">Cookies en uso</p>
                                <p v-if="more_info_performance">
                                    <a id="tooltip2" style="text-decoration: underline;"  > _hjAbsoluteSessionInProgress,
                                        <span class="tooltiptext" >Hotjar - Esta cookie se utiliza para detectar la primera sesión de vista de página de un usuario. Este es un indicador de Verdadero / Falso establecido por la cookie. https://help.hotjar.com/hc/en-us/articles/115011789248-Hotjar-Cookie-Information</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _hjTLDTest,
                                        <span class="tooltiptext" >Hotjar Cuando se ejecuta el script Hotjar, intentamos determinar la ruta de cookies más genérica que debemos usar, en lugar del nombre de host de la página. Esto se hace para que las cookies se puedan compartir entre subdominios (cuando corresponda). Para determinar esto, intentamos almacenar la cookie _hjTLDTest para diferentes alternativas de subcadena de URL hasta que falle. Después de esta verificación, se elimina la cookie.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _hjIncludedInSessionSample,
                                        <span class="tooltiptext" id="__stid">Esta cookie está configurada para que Hotjar sepa si ese visitante está incluido en el muestreo de datos definido por el límite de sesiones diarias de su sitio.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_hjid" > _hjid, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _hjFirstSeen,
                                        <span class="tooltiptext" id="_hjFirstSeen">hotjar.com - Estas cookies son establecidas por HotJar. Se utilizan con fines analíticos para rastrear cómo los usuarios interactúan con la página web. El propósito principal de las cookies establecidas por este host es: Rendimiento.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_ga" >_ga, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_gclxxxx" >_gclxxxx, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_gid" > _gid, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _gat_UA-nnnnnnn-nn.
                                        <span class="tooltiptext" id="_gat_UA">Esta es una cookie de tipo patrón establecida por Google Analytics, donde el elemento de patrón en el nombre contiene el número de identidad único de la cuenta o sitio web con el que se relaciona. Parece ser una variación de la cookie _gat que se utiliza para limitar la cantidad de datos registrados por Google en sitios web de alto volumen de tráfico.</span> 
                                    </a>
                                </p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" >
                        <legend class="legend-desktop over">Cookies de seguimiento</legend>
                        <div class="wrap">
                            <div  class="cookie-set__status top">
                                <div v-if="this.getCookieTracking() == 'true'  ">
                                    <div class="toggle-btn-2 active">
                                    <input  type="checkbox" class="cb-value-2" />
                                    <span class="round-btn-2">
                                        <svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                                        </svg>
                                    </span>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="toggle-btn-2 ">
                                    <input  type="checkbox" class="cb-value-2" />
                                    <span class="round-btn-2">
                                        <div></div>
                                    </span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top:5px">
                                <div v-if="this.getCookieTracking() == 'true' ">
                                    <div class="status-2">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="status-2">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div id="performance-cookie-name">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper collapsible-section" data-showmore="Show more" data-showless="Show less">
                                <legend class="legend-desktop under">Cookies de seguimiento</legend>
                                <p class="paragraph">Estas rastrean el uso que haces de nuestro sitio y de otros sitios, de modo que podamos servirle a tu dispositivo, cuando visites este sitio u otros sitios, con información dirigida al uso que ellas han rastreado. Esto incluye mostrarte anuncios y personalizar el contenido de nuestras comunicaciones para que se adapten a tus preferencias. Esto puede implicar, también, la agregración de estos datos (para obtener una mejor comprensión del ambiente). Ejemplo: Uno de nuestros proveedores de servicios contrata a terceros para que rastreen y analicen el uso y volumen de información estadística de personas que visiten la plataforma digital. Puedes optar por aceptarlas (opt in) o rechazar su uso (opt out).</p>
                                <a style="padding-left: 0px;cursor:pointer;" @click="showMoreInfo3()" class="btn cookie-btn">Conoce más</a>
                                <p v-if="more_info_tracking">Cookies en uso</p>
                                <p v-if="more_info_tracking">
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_fbp" >_fbp, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/APID" > APID, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > gdpr_status,
                                        <span class="tooltiptext" id="gdpr_status">Estas cookies se utilizan para ofrecer anuncios más relevantes para usted y sus intereses. También se utilizan para limitar la cantidad de veces que ve un anuncio y para ayudar a medir la eficacia de la campaña publicitaria.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/APID" > APIDTS, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/APID" > APID, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > um2,
                                        <span class="tooltiptext" id="um2">Establece una identificación única para el visitante, que permite a los anunciantes externos orientar al visitante con publicidad relevante. Este servicio de emparejamiento es proporcionado por centros de publicidad de terceros, lo que facilita las ofertas en tiempo real para los anunciantes.</span> 
                                    </a>

                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMID" > CMID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMPS" > CMPS, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/anj" > anj, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/tuuid_lu" > tuuid_lu, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/PUBMDCID" > PUBMDCID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_kuid_" > _kuid_, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/tuuid" > tuuid, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > r1,
                                        <span class="tooltiptext" id="r1">Cookies temporales que viven en su dispositivo siempre que la ventana del navegador que estaba usando para navegar por nuestro sitio web. Una vez que se cierra la ventana del navegador, estas cookies dejan de existir en su dispositivo.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMPRO" > CMPRO, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/ruds" > ruds, </a>
                                    
                                    <a id="tooltip2"  style="text-decoration: underline;"  > audience,
                                        <span class="tooltiptext" id="C">spotxchange.com - Este dominio es propiedad de IPONWEB y se utiliza para proporcionar una plataforma de licitación en tiempo real para publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/uuid" > uuid, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/uuid2" > uuid2, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > rud,
                                        <span class="tooltiptext" id="rud">El objetivo principal de esta cookie es la publicidad. Esta cookie se utiliza para identificar a un usuario mediante una identificación alfanumérica. Registra los datos del usuario como IP, ubicación, sitio web visitado, anuncios en los que se hizo clic, etc.con esto, optimiza la visualización de anuncios en función del comportamiento del usuario.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/everest_g_v2" > everest_g_v2, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > bkpa,
                                        <span class="tooltiptext" id="bkpa">Esta cookie almacena datos anónimos sobre el uso de la web por parte de los usuarios, así como actividades anónimas agregadas para crear un perfil que proporcione marketing y publicidad más específicos y relevantes.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > C,
                                        <span class="tooltiptext" id="c">bidswitch.net - Este dominio es propiedad de IPONWEB y se utiliza para proporcionar una plataforma de licitación en tiempo real para publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/IDSYNC" > IDSYNC, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > c,
                                        <span class="tooltiptext" id="C">adform.net - Este dominio es propiedad de IPONWEB y se utiliza para proporcionar una plataforma de licitación en tiempo real para publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/mako_uid" > mako_uid, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/rlas3" > rlas3, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/TDID" > TDID, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > A3,
                                        <span class="tooltiptext" id="A3">Recopila información sobre el comportamiento del usuario en varios sitios web. Esta información se utiliza para optimizar la relevancia de la publicidad en el sitio web.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/PugT" > PugT, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/SERVERID" > SERVERID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMRUM3" > CMRUM3, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/auid" > auid, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/test_cookie" > test_cookie, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > visitor-id,
                                        <span class="tooltiptext" id="visitor-id">La cookie de visitante incluye un ID de visitante único y el identificador único de su cuenta. Por ejemplo, el nombre de la cookie visit_id12345 almacena el ID de visitante 1010101010. El identificador de cuenta, 12345, asegura que el visitante sea rastreado en la cuenta correcta.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/bkdc" > bkdc, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/uid" > uid, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/eud" > eud, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > tluid,
                                        <span class="tooltiptext" id="tluid">Asigna un número de identificación aleatorio a cada visitante para que se puedan guardar su consentimiento de política y sus preferencias de consentimiento de cookies.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/smd" > smd, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/u2" > u2, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > aum,
                                        <span class="tooltiptext" id="aum">Estos se guardan en su dispositivo después de que se cierra la ventana del navegador. Nuestros servicios lo verán cada vez que nos haga una nueva visita.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/bku" > bku, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > CMST,
                                        <span class="tooltiptext" id="CMST">Estos se guardan en su dispositivo después de que se cierra la ventana del navegador. Nuestros servicios lo verán cada vez que nos haga una nueva visita.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > eyeblaster,
                                        <span class="tooltiptext" id="eyeblaster">Estos se guardan en su dispositivo después de que se cierra la ventana del navegador. Nuestros servicios lo verán cada vez que nos haga una nueva visita.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > data-rk,
                                        <span class="tooltiptext" id="data-rk">Recopila datos sobre el comportamiento de los visitantes de varios sitios web para presentar anuncios más relevantes. Esto también permite que el sitio web limite el número de veces que se les muestra el mismo anuncio.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > pxrc,
                                        <span class="tooltiptext" id="pxrc">Recopila datos sobre el comportamiento de los visitantes de varios sitios web para presentar anuncios más relevantes. Esto también permite que el sitio web limite el número de veces que se les muestra el mismo anuncio.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > B,
                                        <span class="tooltiptext" id="B">Estos se guardan en su dispositivo después de que se cierra la ventana del navegador. Nuestros servicios lo verán cada vez que nos haga una nueva visita.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > sonataSessionId,
                                        <span class="tooltiptext" id="sonataSessionId">ads.sonataplatform.com</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > sd-session-id,
                                        <span class="tooltiptext" id="sd-session-id">live.rezync.com - Registra datos de visitantes de múltiples visitas y de múltiples webs. Esta información es utilizada para medir la eficiencia de la publicidad en las webs.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > __stid,
                                        <span class="tooltiptext" id="__stid">
                                        Identificador único generado aleatoriamente: se utiliza para la elaboración de perfiles de intereses para publicidad.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > TapAd_3WAY_SYNCS,
                                        <span class="tooltiptext" id="__stid">TapAd_3WAY_SYNCS cookie de seguimiento de publicidad.</span> 
                                        
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > TapAd_TS,
                                        <span class="tooltiptext" id="__stid">TapAd cookie de seguimiento de publicidad.</span>  
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > __stidv,
                                        <span class="tooltiptext" id="__stid">Rastrea los perfiles sociales que tiene el Usuario.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > mt_misc,
                                        <span class="tooltiptext" >
                                        MediaMath utiliza esta cookie para guardar atributos sobre el navegador para la prevención del fraude y otras optimizaciones técnicas.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > fr,
                                        <span class="tooltiptext" id="__stid">Contiene una combinación de identificación única de usuario y navegador, que se utiliza para publicidad dirigida.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > admtr,
                                        <span class="tooltiptext" id="__stid">Adman Media - Usado en contexto con video-publicidad. La cookie limita el número de veces que se muestra el mismo anuncio a un usuario. La cookie también se utiliza para asegurar la relevancia del video-anuncio para el usuario específico.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > anProfile,
                                        <span class="tooltiptext" id="anProfile">pro-market.net - Este dominio es propiedad de Datonics, un corredor de datos con sede en EE. UU. Que vende datos para la segmentación de publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/HAPLB5S" > HAPLB5S, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_aud" > _cc_aud, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/ab" > ab, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/TapAd_DID" > TapAd_DID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/IDE" > IDE, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/personalization_id" > personalization_id, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_cc" > _cc_cc, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_dc" > _cc_dc, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/KRTBCOOKIE_xxxx" > KRTBCOOKIE_xxxx, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/euds" > euds, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/demdex" > demdex, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_id" > _cc_id, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/TDCPM" > TDCPM, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/dpm" > dpm, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/wfivefivec" > wfivefivec, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/skimGUID" > skimGUID, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > zync-uuid,
                                        <span class="tooltiptext" id="zync-uuid">live.rezync.com - Establece un identificar único para el visitante que permite a anunciantes externos (terceras partes) dirigirse al visitante con publicidad relevante.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > uu,
                                        <span class="tooltiptext" id="uu">adscale.de - Este dominio es propiedad de Adscale, una empresa alemana de publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > pi,
                                        <span class="tooltiptext" id="uu">ml314.com - Este dominio parece estar conectado a una empresa llamada Bombora, un negocio de inteligencia y focalización de audiencia con sede en EE. UU. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > tu,
                                        <span class="tooltiptext" id="uu">adscale.de - Este dominio es propiedad de Adscale, una empresa alemana de publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/skimCSP" > skimCSP. </a>
                                </p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <button id="set-cookie" type="button" class="form-submit-btn global-btn btn--dark">
                        <a href="/"><span class="btn__label">Aceptar</span></a>
                        <span class="svg-wrapper">
                            <svg class="gold-in" width="20px" height="13px" viewBox="0 0 60 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <title>Arrow right</title>
                                <path fill="#e5b052" d="M61.5,21.0012229 C61.5,21.1428603 61.4849919,21.285721 61.4558663,21.4283127 C61.4303624,21.5294036 61.4303624,21.5294036 61.4045212,21.6035806 C61.3931117,21.6366961 61.3931117,21.6366961 61.3826412,21.6687153 C61.377802,21.683353 61.377802,21.683353 61.3700945,21.7101624 C61.3551894,21.7629543 61.3551894,21.7629543 61.3265491,21.8371556 C61.2802411,21.9325695 61.2802411,21.9325695 61.2356165,22.0091233 L61.218312,22.0385176 C61.1971879,22.0752527 61.1971879,22.0752527 61.1875904,22.0941249 C61.1637725,22.1414847 61.1637725,22.1414847 61.1251472,22.2026949 C61.0656431,22.2905407 60.9998629,22.3680919 60.8986064,22.4743832 C60.8881532,22.4902312 60.8881532,22.4902312 60.8522509,22.5288516 L43.1421647,39.8660642 C42.2809914,40.7112298 40.8835925,40.7112298 40.0219404,39.8665568 C39.1588241,39.0233347 39.1588241,37.6551265 40.0217016,36.8102153 L53.9638111,23.1599883 L3.70701859,23.119374 C2.48772491,23.119374 1.5,22.1522148 1.5,20.9583083 C1.5,19.7642865 2.48784268,18.7964175 3.70729366,18.7964176 L53.9609215,18.8370305 L40.0251858,5.18986505 C39.1624859,4.34608877 39.1627895,2.97797612 40.0246828,2.13402921 C40.8850209,1.28871946 42.2833598,1.28871946 43.1452794,2.13365407 L60.8461643,19.4651631 C60.9498168,19.5657176 61.0423046,19.6762461 61.1281106,19.8008008 C61.1440802,19.8260433 61.1440802,19.8260433 61.1506896,19.8386986 C61.2230254,19.9493976 61.2827364,20.0581184 61.3334044,20.1771765 C61.3490006,20.2209904 61.3490006,20.2209904 61.355189,20.2445448 C61.403712,20.3731562 61.4349164,20.4715604 61.455822,20.5739188 C61.4794751,20.6879404 61.4911118,20.8071735 61.4943146,20.9339656 C61.4975533,20.9527485 61.4977118,20.9558899 61.5,21.0012229 Z"></path>
                            </svg>
                        </span>
                    </button>
                    <p class="form-note">Puedes cambiar tus preferencias en cualquier momento siguiendo el enlace a “Política de Cookies” desde cualquier página en este sitio. Toda la información personal recolectada será utilizada como se describe en nuestro <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</p>
                </div>
               </div>`;
Vue.component('cookie-adopta-component', {
    'template': $cookieAdopta,
    'data': function() {
        return {
            "all_cookies_allowed":false,
            "more_info_operativas":false,
            "more_info_performance":false,
            "more_info_tracking":false
        };
    },
    'created': function(){
        var _self = this
        _self.check_if_cookies_allowed()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
    },
    'methods': {
        "showMoreInfo1": function () {
            var _self = this
            
            if(_self.more_info_operativas == false){
                _self.more_info_operativas = true
            } else {
                _self.more_info_operativas = false
            }  
            
        },
        "showMoreInfo2": function () {
            var _self = this
            
            if(_self.more_info_performance == false){
                _self.more_info_performance = true
            } else {
                _self.more_info_performance = false
            }  
            
        },
        "showMoreInfo3": function () {
            var _self = this
            
            if(_self.more_info_tracking == false){
                _self.more_info_tracking = true
            } else {
                _self.more_info_tracking = false
            }
            
        },
        "getCookieTracking":function () {
            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                    }
                }
                return "";
            }
            function checkCookie() {
                var cookie = getCookie("Tracking");
                return cookie
            } 
            return checkCookie()
        },
        "getCookiePerformance":function () {
            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                    }
                }
                return "";
            }
            function checkCookie() {
                var cookie = getCookie("Performance");
                return cookie
            } 
            return checkCookie()
        },
        "reload": function(){window.location.reload(true);},
        "check_if_cookies_allowed": function () {
            var vm = this
            var ret = document.cookie != -1;
            vm.all_cookies_allowed = ret
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            }
        },
        "cookiePerformanceDatapush_opt_in": function () {
            try {
                window.dataLayer.push({
                    event: "click",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: performance",
                    label: "opt-in"
                })
            } catch (e) {console.log(e)}            
        },
        "cookieTrackingDatapush_opt_in": function () {
            try {
                window.dataLayer.push({
                    event: "click",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: tracking",
                    label: "opt-in"
                })
            } catch (e) {console.log(e)}            
        },
        "cookiePerformanceDatapush_opt_out": function () {
            try {
                window.dataLayer.push({
                    event: "click",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: performance",
                    label: "opt-out"
                })
            } catch (e) {console.log(e)}            
        },
        "cookieTrackingDatapush_opt_out": function () {
            try {
                window.dataLayer.push({
                    event: "click",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: tracking",
                    label: "opt-out"
                })
            } catch (e) {console.log(e)}            
        },
        "aceptarButtonDataPush": function () {
            try {
                window.dataLayer.push({
                    event: "click",
                    category: "Dialog (Cookie Settings)",
                    action: "Button Click-accept",
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    pageName: "cookies",
                    event: "pv",
                })
            } catch (e) {console.log(e)}            
        },
        // "makeItPopup": function(id){
        //     var popup = document.getElementById(id);
        //     console.log("res",popup)
        //     popup.classList.toggle("show");    
        // }
           
        
    },
    'mounted': function(){
        var self = this
        $(function() { 
            if(self.all_cookies_allowed == false){
                $('.round-btn').html(
                    `<div></div>`
                );
                $('.round-btn-2').html(
                    `<div></div>`
                );
                $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);  
            } 
            $('.cb-value').click(function() {
                var vm = self
                var mainParent = $(this).parent('.toggle-btn');
                if( vm.all_cookies_allowed == true && $(mainParent).hasClass('active') ) {
                    vm.cookiePerformanceDatapush_opt_out()
                    self.Performance = 'false'
                    $(mainParent).removeClass('active');
                    $('.round-btn').html(
                        `<div></div>`
                    );
                    $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                } else if( vm.all_cookies_allowed == true && !$(mainParent).hasClass('active') ) {
                    vm.cookiePerformanceDatapush_opt_in()
                    self.Performance = 'true'
                    $(mainParent).addClass('active');
                    $('.round-btn').html(`<svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                        <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                        </svg>`);
                    $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>`);
                    $(this).attr('checked');
                } 
            });
            $('.cb-value-2').click(function() {
                var vm = self
                var mainParent = $(this).parent('.toggle-btn-2');
                if( vm.all_cookies_allowed == true && $(mainParent).hasClass('active')) {
                    vm.cookieTrackingDatapush_opt_out()
                    self.Tracking = 'false'
                    $(mainParent).removeClass('active');
                    $(this).removeAttr('checked');
                    $('.round-btn-2').html(
                        `<div></div>`
                    );
                    $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                } else if( vm.all_cookies_allowed == true && !$(mainParent).hasClass('active')) {
                    vm.cookieTrackingDatapush_opt_in()
                    self.Tracking = 'true'
                    $(mainParent).addClass('active');
                    $('.round-btn-2').html(`<svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                        <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                        </svg>`);
                    $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>`);
                    $(this).attr('checked');
                }
            });
            
        });
        
        // $('a').tooltip({
     
        //     disabled: true,
        //     close: function( event, ui ) { $(this).tooltip('disable'); }
        // });
        
        // $('a').on('click', function () {
        //     $(this).tooltip('enable').tooltip('open');
        // });
        
        document.getElementById('set-cookie').addEventListener('click', function() {
            function checkCookiePerformanceValue(){
                var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
                if(self.Performance == 'true'){
                    document.cookie = 'Performance=true;expires='+exp+'; path=/';
                } else if(self.Performance == 'false'){
                    document.cookie = 'Performance=false;expires='+exp+'; path=/';
                } else {
                    return false
                }
            }
            function checkCookieTrackingValue(){
                var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
                if(self.Tracking == 'true'){
                    document.cookie = 'Tracking=true;expires='+exp+'; path=/';
                } else if(self.Tracking == 'false'){
                    document.cookie = 'Tracking=false;expires='+exp+'; path=/';
                } else {
                    return false
                }
            }
            
            checkCookiePerformanceValue();
            checkCookieTrackingValue();
            self.aceptarButtonDataPush()
            window.location.href="/";
        });
    }
});

var $headerToTestAv = ` <div>
                <header v-bind:class="{ pagina }">
                    <div class="container">
                        <img v-if="pagina == 'lp1' || pagina == 'rgm' || pagina == 'get-trial'" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        <img v-if="pagina == 'lp2' && mobile >= 961" src="/arquivos/iqoslogobl.png" alt="iqos" title="iqos" />
                        <img v-if="pagina == 'lp2' && mobile < 961" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        <div v-if="pagina != 'get-trial'">
                            <a href="tel:8001476769" data-category="Clicks" data-action="Telephone link" data-label="tel:8001476769" data-event="Clic" class="tel"><svg viewBox="0 0 55 65"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h48.323v51.323H0z"/></clipPath></defs><g transform="rotate(28 12.047 48.32)" clip-path="url(#prefix__a)"><g data-name="Grupo 4"><path data-name="Trazado 3" d="M45.639 35.641a28.936 28.936 0 01-9.584-1.625 2.583 2.583 0 00-2.725.7L27.424 41A41.77 41.77 0 019.732 22.226l5.906-6.3a2.988 2.988 0 00.662-2.896 34.3 34.3 0 01-1.53-10.179A2.762 2.762 0 0012.081 0h-9.4A2.771 2.771 0 000 2.851c0 26.774 20.43 48.472 45.639 48.472a2.762 2.762 0 002.685-2.851v-9.98a2.762 2.762 0 00-2.685-2.851z" fill="#272a33"/></g></g></svg> <span>(800 1 476769)</span></a>
                        </div>
                    </div>
                </header>
                <transition name="fade">
                    <section class="iqos geoFencing" v-if="!geoFencingmodal">
                        <div class="info"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Este sitio contiene información sobre un producto electrónico para el consumo de tabaco y está reservado para fumadores mayores de 18 años que viven en México. Haz click aquí para ser redirigido a tu página local.</p>
                            <a href="https://www.iqos.com/" class="btn negro" data-eventdata-category="home" data-eventaction="country" data-eventlabel="Continuar" clicC="ntryRedirect">Continuar <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg></a>
                        </div>
                    </section>
                </transition>
                <transition v-if="avOpt1" name="fade">
                    <section class="iqos ageverification" v-if="!popupIqos">
                        <div class="info" v-if="!range"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>¿Eres fumador o usuario IQOS mayor de 18 años?</p>
                            <div class="fechaNacimiento">
                                <div class="dropbox">
                                    <select name="mes" data-category="Dialog (Age Verification)" data-action="Month" data-label="MX" data-event="Clic" id="mes">
                                        <option value="" disabled selected="selected">Mes</option>   
                                        <option v-for="{mes, val} in meses" :value="val">{{mes}}</option> 
                                    </select>
                                </div>
                                <span class="separador"></span>
                                <div class="dropbox">
                                    <select data-category="Dialog (Age Verification)" data-action="Year" data-label="MX" data-event="Clic" name="ano" id="ano">
                                        <option value="" disabled selected="selected">Año</option>
                                    </select>
                                </div>
                            </div>
                            
                            <transition name="fade">
                                <div v-if="errorPopup.length" class="errors">
                                    <a href="#" @click.prevent="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errorPopup">{{error}}</li>
                                    </ul>
                                </div>
                            </transition>
                            <a href="#" data-category="Dialog (Age Verification)" data-action="Button Click - yes" data-label="MX" data-event="Clic" @click.prevent="iqosPopUp($event, 'si')" class="btn si">SÍ <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"/></svg></a>
                        </div>
                        <div class="info" v-else> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Debe ser mayor de 18 años para acceder al contenido de este sitio.</p>
                            <small>Este sitio contiene información sobre un producto usado con tabaco. Está reservado para personas mayores de 18 años que residen en México.</small>
                        </div>
                    </section>
                </transition>
                <transition v-if="avOpt2" name="fade">
                    <section class="iqos ageverification" v-if="!popupIqos">
                        <div class="info" v-if="!range"> 
                            <img src="/arquivos/iqoslogo.png" alt="iqos" title="iqos" />
                            <p class="avopt2"><b>¡Bienvenido al cambio!</b></p>
                            <small>Este sitio contiene información acerca de productos sin combustión y necesitamos conocer tu edad para asegurarnos que eres adulto fumador o usuario adulto de otros productos con nicotina.
                            </small>
                            <div class="fechaNacimiento" style="margin-top: 1em;">
                                <div class="dropbox">
                                    <select name="mes" data-category="Dialog (Age Verification)" data-action="Month" data-label="MX" data-event="Clic" id="mes">
                                        <option value="" disabled selected="selected">Mes</option>   
                                        <option v-for="{mes, val} in meses" :value="val">{{mes}}</option> 
                                    </select>
                                </div>
                                <span class="separador"></span>
                                <div class="dropbox">
                                    <select data-category="Dialog (Age Verification)" data-action="Year" data-label="MX" data-event="Clic" name="ano" id="ano">
                                        <option value="" disabled selected="selected">Año</option>
                                    </select>
                                </div>
                            </div>
                            
                            <transition name="fade">
                                <div v-if="errorPopup.length" class="errors">
                                    <a href="#" @click.prevent="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errorPopup">{{error}}</li>
                                    </ul>
                                </div>
                            </transition>
                            <a href="#" data-category="Dialog (Age Verification)" data-action="Button Click - yes" data-label="MX" data-event="Clic" @click.prevent="iqosPopUp($event, 'si')" class="btn si">IR <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"/></svg></a>
                        </div>
                        <div class="info" v-else> 
                            <img src="/arquivos/iqoslogo.png" alt="iqos" title="iqos" />
                            <p>Debe ser mayor de 18 años para acceder al contenido de este sitio.</p>
                            <small>Este sitio contiene información sobre un producto usado con tabaco. Está reservado para personas mayores de 18 años que residen en México.</small>
                        </div>
                    </section>
                </transition>
                <transition v-if="avOpt3" name="fade">
                    <section class="iqos ageverification" v-if="!popupIqos">
                        <div class="info" v-if="!range"> 
                            <img src="/arquivos/iqoslogo.png" alt="iqos" title="iqos" />
                            <p><b>¡Bienvenido al cambio!</b></p>
                            <small>Para ingresar al sitio de IQOS debes ser fumador mayor de 18 años. Por favor confirma tu edad antes de continuar.</small>
                            
                            
                            
                            <div class="avOpt3" style="display:flex;">
                                <a style="margin-left: 10px;margin-right: 10px;" href="#" data-category="Dialog (Age Verification)" data-action="Button Click - yes" data-label="MX" data-event="Clic" @click.prevent="iqosPopUp3($event, 'si')" class="btn si opt3">SOY MAYOR DE EDAD <b class="opt3" style="font-size:20px;" >🡪</b></a>
                                <a style="margin-left: 10px;margin-right: 10px;" href="#" @click.prevent="iqosPopUp3($event, 'no')" class="btn si opt3">SOY MENOR DE EDAD <b class="opt3" style="font-size:20px;" >🡪</b></a>
                            </div>
                        </div>
                        <div class="info" v-else> 
                            <img src="/arquivos/iqoslogo.png" alt="iqos" title="iqos" />
                            <p>Debe ser mayor de 18 años para acceder al contenido de este sitio.</p>
                            <small>Este sitio contiene información sobre un producto usado con tabaco. Está reservado para personas mayores de 18 años que residen en México.</small>
                        </div>
                    </section>
                </transition>
                </div>`;
Vue.component('headertotestav-component', {
    'template': $headerToTestAv,
    'data': function() {

        return {
            "pagina": "lp1",
            "mobile": window.innerWidth,
            "geoFencingmodal": true,
            "popupIqos": this.$cookies.get('popupIqos'),
            "range": false,
            "meses": [{mes: 'Enero',val: "01"},{mes: 'Febrero',val: "02"},{mes: 'Marzo',val: "03"},{mes: 'Abril',val: "04"},{mes: 'Mayo',val: "05"},{mes: 'Junio',val: "06"},{mes: 'Julio',val: "07"},{mes: 'Agosto',val: "08"},{mes: 'Septiembre',val: "09"},{mes: 'Octubre',val: "10"},{mes: 'Noviembre',val: "11"},{mes: 'Diciembre',val: "12"}],
            "errorPopup": [],
            "avOpt1": false,
            "avOpt2": false,
            "avOpt3": false
        };

    },
    'methods': {
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                var countrycode = data.country_code;
                var parseParam = location.search;

                if ( parseParam == "?gr=false" ) {
                    _self.geoFencingmodal = true
                } else {
                    if( countrycode != 'MX') {
                        _self.geoFencingmodal = false
                    }
                }
            })
        },
        "checkCurrentLocation": function (){
            var currentUrl = window.location.href
            console.log(currentUrl.length)
            var utmOpt1 = currentUrl.indexOf("rgm?")
            var utmOpt2 = currentUrl.indexOf("rgm-av-opt2?")
            var utmOpt3 = currentUrl.indexOf("rgm-av-opt3?")
            console.log(utmOpt1, "utm opt1")
            console.log(utmOpt2, "utm opt2")
            console.log(utmOpt3, "utm opt3")
            if(currentUrl == "https://www.conoce-iqos.com/rgm" || utmOpt1 != -1){
                this.avOpt1 = true
            } else if (currentUrl == "https://www.conoce-iqos.com/rgm-av-opt2" || utmOpt2 != -1){
                this.avOpt2 = true
            } else if (currentUrl == "https://www.conoce-iqos.com/rgm-av-opt3" || utmOpt3 != -1) {
                this.avOpt3 = true
            } else {
                console.log(currentUrl.length, "url length")
                console.log(utmOpt1, "utm opt1")
                console.log(utmOpt2, "utm opt2")
                console.log(utmOpt3, "utm opt3")
                this.avOpt1 = true
            }
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            } else if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "iqosPopUp": function(event,responta) {
            event.preventDefault();
            this.errorPopup = [];
            
            window.mes = $(".ageverification #mes option:selected").val()
            window.ano = $(".ageverification #ano option:selected").val()

            if (window.mes == "" && window.ano == "" ) {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.mes == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.ano == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else {
                var date = new Date();
                var ano = date.getFullYear();
                var mes = date.getMonth();

                if (ano - parseFloat(window.ano) == 17 && parseFloat($(".ageverification #mes option:selected").val()) <= mes) {
                    sucess()
                } else if (ano - parseFloat(window.ano) < 18) {
                    this.range = true
                    try {
                        window.dataLayer.push({
                            "category": "Dialog (Age Verification)",
                            "action": "Button Click - No",
                            "label": "MX",
                            "event": "eventunder18"
                        })
                    } catch (e) {console.log(e)}
                        
                } else {
                    sucess()
                }                    
                        
                function sucess () {
                    this.$cookies.set('popupIqos', responta, '90d')
                    this.$cookies.set('mes', $(".ageverification #mes option:selected").val(), '90d')
                    this.$cookies.set('ano', $(".ageverification #ano option:selected").val(), '90d')

                    $(".ageverification").fadeOut()
                    $("html, body").css({"overflow":"auto"});

                    VueEvent.$emit('mes', window.mes)
                    VueEvent.$emit('ano', window.ano)

                    $("footer .btn.disabled").removeClass("disabled")
                }
                
            }
            
        },
        "iqosPopUp3": function(event,responta) {
            event.preventDefault();
            // this.errorPopup = [];
            
            // window.mes = $(".ageverification #mes option:selected").val()
            // window.ano = $(".ageverification #ano option:selected").val()

            // if (window.mes == "" && window.ano == "" ) {
            //     this.errorPopup.push("Los campos anteriores son obligatorios.");
            // } else if (window.mes == "") {
            //     this.errorPopup.push("Los campos anteriores son obligatorios.");
            // } else if (window.ano == "") {
            //     this.errorPopup.push("Los campos anteriores son obligatorios.");
            // } else {
            //     var date = new Date();
            //     var ano = date.getFullYear();
            //     var mes = date.getMonth();

            //     if (ano - parseFloat(window.ano) == 17 && parseFloat($(".ageverification #mes option:selected").val()) <= mes) {
            //         sucess()
            //     }
                 if (responta == "no") {
                    this.range = true
                    try {
                        window.dataLayer.push({
                            "category": "Dialog (Age Verification)",
                            "action": "Button Click - No",
                            "label": "MX",
                            "event": "eventunder18"
                        })
                    } catch (e) {console.log(e)}
                        
                } else {
                    sucess()
                }                    
                        
                function sucess () {
                    this.$cookies.set('popupIqos', responta, '90d')
                    // this.$cookies.set('mes', $(".ageverification #mes option:selected").val(), '90d')
                    // this.$cookies.set('ano', $(".ageverification #ano option:selected").val(), '90d')

                    $(".ageverification").fadeOut()
                    $("html, body").css({"overflow":"auto"});

                    VueEvent.$emit('mes', window.mes)
                    VueEvent.$emit('ano', window.ano)

                    $("footer .btn.disabled").removeClass("disabled")
                }
                
            
            
        },
        "contagemAno": function () {
            var date = new Date();
            var ano = date.getFullYear();
     
            for (let i = 1900; i < ano; i++) {
                $("#ano").append(
                    $('<option />')
                    .text([i])
                    .val([i])
                )
            }
            
        },
        "closePopUp": function(e) {
            this.errorPopup = [];
            e.preventDefault();
        },
        "bodySemrolagem": function () {
            console.log("bodysemrolaged called")
            console.log("popUpiqos",this.popupIqos)
            if (this.popupIqos == true || (this.$cookies.get('mes') && this.$cookies.get('ano'))) {
                console.log("first condition when tru overflow auto")
                $("html, body").css({"overflow":"auto"});
            } else if(this.popupIqos == 'si') {
                console.log("second condition when tru overflow auto popUp = si becuause comming from iqos.com")
                $("html, body").css({"overflow":"auto"});
            } else {
                console.log("last condition when tru overflow hidden")
                $("html, body").css({"overflow":"hidden"});
            }
        },
        "noMostrarPopup": function () {
            var _self =  this
            console.log(document.referrer, "referrer")
            var commingFrom = document.referrer.slice(0,20)
            console.log("commingFrom", commingFrom)
            console.log(document.referrer.indexOf("_ga"), "referrerindex")
            if (commingFrom == "https://www.iqos.com" ) {
                this.popupIqos = true
                this.$cookies.set('popupIqos', 'si', '90d')
                $("html, body").css({"overflow":"auto"});
                _self.bodySemrolagem()
            }
        }
    },
    'mounted': function(){
        this.contagemAno()
        this.checkCurrentLocation()
        
        window.onresize = () => {
            this.mobile = window.innerWidth;
        };
    },
    "watch": {},
    'computed': {},
    "created":function(){ 
        var _self = this
        
        _self.geoFencing()
        _self.paginaStatus()
        _self.bodySemrolagem()
        _self.noMostrarPopup()
        _self.checkCurrentLocation()
    }
});

var $headerPrueba = ` <div>
                <header v-bind:class="{ pagina }">
                    <div class="container">
                      
                            <img v-if="pagina == 'lp1' || pagina == 'rgm' || pagina == 'get-trial'" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                       
                        <img v-if="pagina == 'lp2' && mobile >= 961" src="/arquivos/iqoslogobl.png" alt="iqos" title="iqos" />
                        <img v-if="pagina == 'lp2' && mobile < 961" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        
                    </div>
                </header>
                <transition name="fade">
                    <section class="iqos geoFencing" v-if="!geoFencingmodal">
                        <div class="info"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Este sitio contiene información sobre un producto electrónico para el consumo de tabaco y está reservado para fumadores mayores de 18 años que viven en México. Haz click aquí para ser redirigido a tu página local.</p>
                            <a href="https://www.iqos.com/" class="btn negro" data-eventdata-category="home" data-eventaction="country" data-eventlabel="Continuar" clicC="ntryRedirect">Continuar <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg></a>
                        </div>
                    </section>
                </transition>
                <transition name="fade">
                    <section class="iqos ageverification" v-if="!popupIqos">
                        <div class="info" v-if="!range"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>¿Eres fumador o usuario IQOS mayor de 18 años?</p>
                            <div class="fechaNacimiento">
                                <div class="dropbox">
                                    <select name="mes" data-category="Dialog (Age Verification)" data-action="Month" data-label="MX" data-event="Clic" id="mes">
                                        <option value="" disabled selected="selected">Mes</option>   
                                        <option v-for="{mes, val} in meses" :value="val">{{mes}}</option> 
                                    </select>
                                </div>
                                <span class="separador"></span>
                                <div class="dropbox">
                                    <select data-category="Dialog (Age Verification)" data-action="Year" data-label="MX" data-event="Clic" name="ano" id="ano">
                                        <option value="" disabled selected="selected">Año</option>
                                    </select>
                                </div>
                            </div>
                            
                            <transition name="fade">
                                <div v-if="errorPopup.length" class="errors">
                                    <a href="#" @click.prevent="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errorPopup">{{error}}</li>
                                    </ul>
                                </div>
                            </transition>
                            <a href="#" data-category="Dialog (Age Verification)" data-action="Button Click - yes" data-label="MX" data-event="Clic" @click.prevent="iqosPopUp($event, 'si')" class="btn si">SÍ <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"/></svg></a>
                        </div>
                        <div class="info" v-else> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Debe ser mayor de 18 años para acceder al contenido de este sitio.</p>
                            <small>Este sitio contiene información sobre un producto usado con tabaco. Está reservado para personas mayores de 18 años que residen en México.</small>
                        </div>
                    </section>
                </transition>
                </div>`;
Vue.component('headerprueba-component', {
    'template': $headerPrueba,
    'data': function() {

        return {
            "pagina": "lp1",
            "mobile": window.innerWidth,
            "geoFencingmodal": true,
            "popupIqos": this.$cookies.get('popupIqos'),
            "range": false,
            "meses": [{mes: 'Enero',val: "01"},{mes: 'Febrero',val: "02"},{mes: 'Marzo',val: "03"},{mes: 'Abril',val: "04"},{mes: 'Mayo',val: "05"},{mes: 'Junio',val: "06"},{mes: 'Julio',val: "07"},{mes: 'Agosto',val: "08"},{mes: 'Septiembre',val: "09"},{mes: 'Octubre',val: "10"},{mes: 'Noviembre',val: "11"},{mes: 'Diciembre',val: "12"}],
            "errorPopup": [],
        };

    },
    'methods': {
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                var countrycode = data.country_code;
                var parseParam = location.search;

                if ( parseParam == "?gr=false" ) {
                    _self.geoFencingmodal = true
                } else {
                    if( countrycode != 'MX') {
                        _self.geoFencingmodal = false
                    }
                }
            })
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            } else if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "iqosPopUp": function(event,responta) {
            event.preventDefault();
            this.errorPopup = [];
            
            window.mes = $(".ageverification #mes option:selected").val()
            window.ano = $(".ageverification #ano option:selected").val()

            if (window.mes == "" && window.ano == "" ) {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.mes == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.ano == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else {
                var date = new Date();
                var ano = date.getFullYear();
                var mes = date.getMonth();

                if (ano - parseFloat(window.ano) == 17 && parseFloat($(".ageverification #mes option:selected").val()) <= mes) {
                    sucess()
                } else if (ano - parseFloat(window.ano) < 18) {
                    this.range = true
                    try {
                        window.dataLayer.push({
                            "category": "Dialog (Age Verification)",
                            "action": "Button Click - No",
                            "label": "MX",
                            "event": "eventunder18"
                        })
                    } catch (e) {console.log(e)}
                        
                } else {
                    sucess()
                }                    
                        
                function sucess () {
                    this.$cookies.set('popupIqos', responta, '90d')
                    this.$cookies.set('mes', $(".ageverification #mes option:selected").val(), '90d')
                    this.$cookies.set('ano', $(".ageverification #ano option:selected").val(), '90d')

                    $(".ageverification").fadeOut()
                    $("html, body").css({"overflow":"auto"});

                    VueEvent.$emit('mes', window.mes)
                    VueEvent.$emit('ano', window.ano)

                    $("footer .btn.disabled").removeClass("disabled")
                }
                
            }
            
        },
        "contagemAno": function () {
            var date = new Date();
            var ano = date.getFullYear();
        
            for (let i = 1900; i < ano; i++) {
                $("#ano").append(
                    $('<option />')
                    .text([i])
                    .val([i])
                )
            }
            
        },
        "closePopUp": function(e) {
            this.errorPopup = [];
            e.preventDefault();
        },
        
        "bodySemrolagem": function () {
            console.log("bodysemrolaged called")
            console.log("popUpiqos",this.popupIqos)
            if (this.popupIqos == true || (this.$cookies.get('mes') && this.$cookies.get('ano'))) {
                console.log("first condition when tru overflow auto")
                $("html, body").css({"overflow":"auto"});
            } else if(this.popupIqos == 'si') {
                console.log("second condition when tru overflow auto popUp = si becuause comming from iqos.com")
                $("html, body").css({"overflow":"auto"});
            } else {
                console.log("last condition when tru overflow hidden")
                $("html, body").css({"overflow":"hidden"});
            }
        },
        "noMostrarPopup": function () {

            var _self =  this
            console.log(document.referrer, "referrer")
            var commingFrom = document.referrer.slice(0,20)
            console.log("commingFrom", commingFrom)
            console.log(document.referrer.indexOf("_ga"), "referrerindex")
            if (commingFrom == "https://www.iqos.com" ) {
                this.popupIqos = true
                this.$cookies.set('popupIqos', 'si', '90d')
                $("html, body").css({"overflow":"auto"});
                _self.bodySemrolagem()
            }
            
        }
    },
    'mounted': function(){
        this.contagemAno()

        window.onresize = () => {
            this.mobile = window.innerWidth;
        };
    },
    "watch": {},
    'computed': {},
    "created":function(){ 
        var _self = this
        
        _self.geoFencing()
        _self.paginaStatus()
        _self.bodySemrolagem()
        _self.noMostrarPopup()
    }
}); 
var $headerConoce = ` <div>
                <header v-bind:class="{ pagina }">
                    <div class="container">
                        <a  href="https://www.iqos.com/mx/es/home.html?utm_source=iqosreferral&utm_medium=localwebsite&utm_campaign=conoce" target="_blank">
                            <img v-if="pagina == 'lp1' || pagina == 'rgm' || pagina == 'get-trial'" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        <a/>
                        <img v-if="pagina == 'lp2' && mobile >= 961" src="/arquivos/iqoslogobl.png" alt="iqos" title="iqos" />
                        <img v-if="pagina == 'lp2' && mobile < 961" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        
                    </div>
                </header>
                <transition name="fade">
                    <section class="iqos geoFencing" v-if="!geoFencingmodal">
                        <div class="info"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Este sitio contiene información sobre un producto electrónico para el consumo de tabaco y está reservado para fumadores mayores de 18 años que viven en México. Haz click aquí para ser redirigido a tu página local.</p>
                            <a href="https://www.iqos.com/" class="btn negro" data-eventdata-category="home" data-eventaction="country" data-eventlabel="Continuar" clicC="ntryRedirect">Continuar <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg></a>
                        </div>
                    </section>
                </transition>
                <transition name="fade">
                    <section class="iqos ageverification" v-if="!popupIqos">
                        <div class="info" v-if="!range"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>¿Eres fumador o usuario IQOS mayor de 18 años?</p>
                            <div class="fechaNacimiento">
                                <div class="dropbox">
                                    <select name="mes" data-category="Dialog (Age Verification)" data-action="Month" data-label="MX" data-event="Clic" id="mes">
                                        <option value="" disabled selected="selected">Mes</option>   
                                        <option v-for="{mes, val} in meses" :value="val">{{mes}}</option> 
                                    </select>
                                </div>
                                <span class="separador"></span>
                                <div class="dropbox">
                                    <select data-category="Dialog (Age Verification)" data-action="Year" data-label="MX" data-event="Clic" name="ano" id="ano">
                                        <option value="" disabled selected="selected">Año</option>
                                    </select>
                                </div>
                            </div>
                            
                            <transition name="fade">
                                <div v-if="errorPopup.length" class="errors">
                                    <a href="#" @click.prevent="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errorPopup">{{error}}</li>
                                    </ul>
                                </div>
                            </transition>
                            <a href="#" data-category="Dialog (Age Verification)" data-action="Button Click - yes" data-label="MX" data-event="Clic" @click.prevent="iqosPopUp($event, 'si')" class="btn si">SÍ <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"/></svg></a>
                        </div>
                        <div class="info" v-else> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Debe ser mayor de 18 años para acceder al contenido de este sitio.</p>
                            <small>Este sitio contiene información sobre un producto usado con tabaco. Está reservado para personas mayores de 18 años que residen en México.</small>
                        </div>
                    </section>
                </transition>
                </div>`;
Vue.component('header-conoce-component', {
    'template': $headerConoce,
    'data': function() {

        return {
            "pagina": "lp1",
            "mobile": window.innerWidth,
            "geoFencingmodal": true,
            "popupIqos": this.$cookies.get('popupIqos'),
            "range": false,
            "meses": [{mes: 'Enero',val: "01"},{mes: 'Febrero',val: "02"},{mes: 'Marzo',val: "03"},{mes: 'Abril',val: "04"},{mes: 'Mayo',val: "05"},{mes: 'Junio',val: "06"},{mes: 'Julio',val: "07"},{mes: 'Agosto',val: "08"},{mes: 'Septiembre',val: "09"},{mes: 'Octubre',val: "10"},{mes: 'Noviembre',val: "11"},{mes: 'Diciembre',val: "12"}],
            "errorPopup": [],
        };

    },
    'methods': {
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                var countrycode = data.country_code;
                var parseParam = location.search;

                if ( parseParam == "?gr=false" ) {
                    _self.geoFencingmodal = true
                } else {
                    if( countrycode != 'MX') {
                        _self.geoFencingmodal = false
                    }
                }
            })
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            } else if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "iqosPopUp": function(event,responta) {
            event.preventDefault();
            this.errorPopup = [];
            
            window.mes = $(".ageverification #mes option:selected").val()
            window.ano = $(".ageverification #ano option:selected").val()

            if (window.mes == "" && window.ano == "" ) {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.mes == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.ano == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else {
                var date = new Date();
                var ano = date.getFullYear();
                var mes = date.getMonth();

                if (ano - parseFloat(window.ano) == 17 && parseFloat($(".ageverification #mes option:selected").val()) <= mes) {
                    sucess()
                } else if (ano - parseFloat(window.ano) < 18) {
                    this.range = true
                    try {
                        window.dataLayer.push({
                            "category": "Dialog (Age Verification)",
                            "action": "Button Click - No",
                            "label": "MX",
                            "event": "eventunder18"
                        })
                    } catch (e) {console.log(e)}
                        
                } else {
                    sucess()
                }                    
                        
                function sucess () {
                    this.$cookies.set('popupIqos', responta, '90d')
                    this.$cookies.set('mes', $(".ageverification #mes option:selected").val(), '90d')
                    this.$cookies.set('ano', $(".ageverification #ano option:selected").val(), '90d')

                    $(".ageverification").fadeOut()
                    $("html, body").css({"overflow":"auto"});

                    VueEvent.$emit('mes', window.mes)
                    VueEvent.$emit('ano', window.ano)

                    $("footer .btn.disabled").removeClass("disabled")
                }
                
            }
            
        },
        "contagemAno": function () {
            var date = new Date();
            var ano = date.getFullYear();
        
            for (let i = 1900; i < ano; i++) {
                $("#ano").append(
                    $('<option />')
                    .text([i])
                    .val([i])
                )
            }
            
        },
        "closePopUp": function(e) {
            this.errorPopup = [];
            e.preventDefault();
        },
        
        "bodySemrolagem": function () {
            console.log("bodysemrolaged called")
            console.log("popUpiqos",this.popupIqos)
            if (this.popupIqos == true || (this.$cookies.get('mes') && this.$cookies.get('ano'))) {
                console.log("first condition when tru overflow auto")
                $("html, body").css({"overflow":"auto"});
            } else if(this.popupIqos == 'si') {
                console.log("second condition when tru overflow auto popUp = si becuause comming from iqos.com")
                $("html, body").css({"overflow":"auto"});
            } else {
                console.log("last condition when tru overflow hidden")
                $("html, body").css({"overflow":"hidden"});
            }
        },
        "noMostrarPopup": function () {

            var _self =  this
            console.log(document.referrer, "referrer")
            var commingFrom = document.referrer.slice(0,20)
            console.log("commingFrom", commingFrom)
            console.log(document.referrer.indexOf("_ga"), "referrerindex")
            if (commingFrom == "https://www.iqos.com" ) {
                this.popupIqos = true
                this.$cookies.set('popupIqos', 'si', '90d')
                $("html, body").css({"overflow":"auto"});
                _self.bodySemrolagem()
            }
            
        }
    },
    'mounted': function(){
        this.contagemAno()

        window.onresize = () => {
            this.mobile = window.innerWidth;
        };
    },
    "watch": {},
    'computed': {},
    "created":function(){ 
        var _self = this
        
        _self.geoFencing()
        _self.paginaStatus()
        _self.bodySemrolagem()
        _self.noMostrarPopup()
    }
}); 
var $headerRgm = ` <div>
                <header v-bind:class="{ pagina }">
                    <div class="container">
                        <a  href="https://www.iqos.com/mx/es/home.html?utm_source=iqosreferral&utm_medium=localwebsite&utm_campaign=conocergm" target="_blank">
                            <img v-if="pagina == 'lp1' || pagina == 'rgm' || pagina == 'get-trial'" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        <a/>
                        <img v-if="pagina == 'lp2' && mobile >= 961" src="/arquivos/iqoslogobl.png" alt="iqos" title="iqos" />
                        <img v-if="pagina == 'lp2' && mobile < 961" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        
                    </div>
                </header>
                <transition name="fade">
                    <section class="iqos geoFencing" v-if="!geoFencingmodal">
                        <div class="info"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Este sitio contiene información sobre un producto electrónico para el consumo de tabaco y está reservado para fumadores mayores de 18 años que viven en México. Haz click aquí para ser redirigido a tu página local.</p>
                            <a href="https://www.iqos.com/" class="btn negro" data-eventdata-category="home" data-eventaction="country" data-eventlabel="Continuar" clicC="ntryRedirect">Continuar <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg></a>
                        </div>
                    </section>
                </transition>
                <transition name="fade">
                    <section class="iqos ageverification" v-if="!popupIqos">
                        <div class="info" v-if="!range"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>¿Eres fumador o usuario IQOS mayor de 18 años?</p>
                            <div class="fechaNacimiento">
                                <div class="dropbox">
                                    <select name="mes" data-category="Dialog (Age Verification)" data-action="Month" data-label="MX" data-event="Clic" id="mes">
                                        <option value="" disabled selected="selected">Mes</option>   
                                        <option v-for="{mes, val} in meses" :value="val">{{mes}}</option> 
                                    </select>
                                </div>
                                <span class="separador"></span>
                                <div class="dropbox">
                                    <select data-category="Dialog (Age Verification)" data-action="Year" data-label="MX" data-event="Clic" name="ano" id="ano">
                                        <option value="" disabled selected="selected">Año</option>
                                    </select>
                                </div>
                            </div>
                            
                            <transition name="fade">
                                <div v-if="errorPopup.length" class="errors">
                                    <a href="#" @click.prevent="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errorPopup">{{error}}</li>
                                    </ul>
                                </div>
                            </transition>
                            <a href="#" data-category="Dialog (Age Verification)" data-action="Button Click - yes" data-label="MX" data-event="Clic" @click.prevent="iqosPopUp($event, 'si')" class="btn si">SÍ <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"/></svg></a>
                        </div>
                        <div class="info" v-else> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Debe ser mayor de 18 años para acceder al contenido de este sitio.</p>
                            <small>Este sitio contiene información sobre un producto usado con tabaco. Está reservado para personas mayores de 18 años que residen en México.</small>
                        </div>
                    </section>
                </transition>
                </div>`;
Vue.component('header-rgm-component', {
    'template': $headerRgm,
    'data': function() {

        return {
            "pagina": "lp1",
            "mobile": window.innerWidth,
            "geoFencingmodal": true,
            "popupIqos": this.$cookies.get('popupIqos'),
            "range": false,
            "meses": [{mes: 'Enero',val: "01"},{mes: 'Febrero',val: "02"},{mes: 'Marzo',val: "03"},{mes: 'Abril',val: "04"},{mes: 'Mayo',val: "05"},{mes: 'Junio',val: "06"},{mes: 'Julio',val: "07"},{mes: 'Agosto',val: "08"},{mes: 'Septiembre',val: "09"},{mes: 'Octubre',val: "10"},{mes: 'Noviembre',val: "11"},{mes: 'Diciembre',val: "12"}],
            "errorPopup": [],
        };

    },
    'methods': {
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                var countrycode = data.country_code;
                var parseParam = location.search;

                if ( parseParam == "?gr=false" ) {
                    _self.geoFencingmodal = true
                } else {
                    if( countrycode != 'MX') {
                        _self.geoFencingmodal = false
                    }
                }
            })
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            } else if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "iqosPopUp": function(event,responta) {
            event.preventDefault();
            this.errorPopup = [];
            
            window.mes = $(".ageverification #mes option:selected").val()
            window.ano = $(".ageverification #ano option:selected").val()

            if (window.mes == "" && window.ano == "" ) {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.mes == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.ano == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else {
                var date = new Date();
                var ano = date.getFullYear();
                var mes = date.getMonth();

                if (ano - parseFloat(window.ano) == 17 && parseFloat($(".ageverification #mes option:selected").val()) <= mes) {
                    sucess()
                } else if (ano - parseFloat(window.ano) < 18) {
                    this.range = true
                    try {
                        window.dataLayer.push({
                            "category": "Dialog (Age Verification)",
                            "action": "Button Click - No",
                            "label": "MX",
                            "event": "eventunder18"
                        })
                    } catch (e) {console.log(e)}
                        
                } else {
                    sucess()
                }                    
                        
                function sucess () {
                    this.$cookies.set('popupIqos', responta, '90d')
                    this.$cookies.set('mes', $(".ageverification #mes option:selected").val(), '90d')
                    this.$cookies.set('ano', $(".ageverification #ano option:selected").val(), '90d')

                    $(".ageverification").fadeOut()
                    $("html, body").css({"overflow":"auto"});

                    VueEvent.$emit('mes', window.mes)
                    VueEvent.$emit('ano', window.ano)

                    $("footer .btn.disabled").removeClass("disabled")
                }
                
            }
            
        },
        "contagemAno": function () {
            var date = new Date();
            var ano = date.getFullYear();
        
            for (let i = 1900; i < ano; i++) {
                $("#ano").append(
                    $('<option />')
                    .text([i])
                    .val([i])
                )
            }
            
        },
        "closePopUp": function(e) {
            this.errorPopup = [];
            e.preventDefault();
        },
        
        "bodySemrolagem": function () {
            console.log("bodysemrolaged called")
            console.log("popUpiqos",this.popupIqos)
            if (this.popupIqos == true || (this.$cookies.get('mes') && this.$cookies.get('ano'))) {
                console.log("first condition when tru overflow auto")
                $("html, body").css({"overflow":"auto"});
            } else if(this.popupIqos == 'si') {
                console.log("second condition when tru overflow auto popUp = si becuause comming from iqos.com")
                $("html, body").css({"overflow":"auto"});
            } else {
                console.log("last condition when tru overflow hidden")
                $("html, body").css({"overflow":"hidden"});
            }
        },
        "noMostrarPopup": function () {

            var _self =  this
            console.log(document.referrer, "referrer")
            var commingFrom = document.referrer.slice(0,20)
            console.log("commingFrom", commingFrom)
            console.log(document.referrer.indexOf("_ga"), "referrerindex")
            if (commingFrom == "https://www.iqos.com" ) {
                this.popupIqos = true
                this.$cookies.set('popupIqos', 'si', '90d')
                $("html, body").css({"overflow":"auto"});
                _self.bodySemrolagem()
            }
            
        }
    },
    'mounted': function(){
        this.contagemAno()

        window.onresize = () => {
            this.mobile = window.innerWidth;
        };
    },
    "watch": {},
    'computed': {},
    "created":function(){ 
        var _self = this
        
        _self.geoFencing()
        _self.paginaStatus()
        _self.bodySemrolagem()
        _self.noMostrarPopup()
    }
});
var $headerProbar = ` <div>
                <header v-bind:class="{ pagina }">
                    <div class="container">
                        <a  href="https://www.iqos.com/mx/es/home.html?utm_source=iqosreferral&utm_medium=localwebsite&utm_campaign=probar" target="_blank">
                            <img v-if="pagina == 'lp1' || pagina == 'rgm' || pagina == 'get-trial'" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        <a/>
                        <img v-if="pagina == 'lp2' && mobile >= 961" src="/arquivos/iqoslogobl.png" alt="iqos" title="iqos" />
                        <img v-if="pagina == 'lp2' && mobile < 961" src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                        
                    </div>
                </header>
                <transition name="fade">
                    <section class="iqos geoFencing" v-if="!geoFencingmodal">
                        <div class="info"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Este sitio contiene información sobre un producto electrónico para el consumo de tabaco y está reservado para fumadores mayores de 18 años que viven en México. Haz click aquí para ser redirigido a tu página local.</p>
                            <a href="https://www.iqos.com/" class="btn negro" data-eventdata-category="home" data-eventaction="country" data-eventlabel="Continuar" clicC="ntryRedirect">Continuar <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg></a>
                        </div>
                    </section>
                </transition>
                <transition name="fade">
                    <section class="iqos ageverification" v-if="!popupIqos">
                        <div class="info" v-if="!range"> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>¿Eres fumador o usuario IQOS mayor de 18 años?</p>
                            <div class="fechaNacimiento">
                                <div class="dropbox">
                                    <select name="mes" data-category="Dialog (Age Verification)" data-action="Month" data-label="MX" data-event="Clic" id="mes">
                                        <option value="" disabled selected="selected">Mes</option>   
                                        <option v-for="{mes, val} in meses" :value="val">{{mes}}</option> 
                                    </select>
                                </div>
                                <span class="separador"></span>
                                <div class="dropbox">
                                    <select data-category="Dialog (Age Verification)" data-action="Year" data-label="MX" data-event="Clic" name="ano" id="ano">
                                        <option value="" disabled selected="selected">Año</option>
                                    </select>
                                </div>
                            </div>
                            
                            <transition name="fade">
                                <div v-if="errorPopup.length" class="errors">
                                    <a href="#" @click.prevent="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errorPopup">{{error}}</li>
                                    </ul>
                                </div>
                            </transition>
                            <a href="#" data-category="Dialog (Age Verification)" data-action="Button Click - yes" data-label="MX" data-event="Clic" @click.prevent="iqosPopUp($event, 'si')" class="btn si">SÍ <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"/></svg></a>
                        </div>
                        <div class="info" v-else> 
                            <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                            <p>Debe ser mayor de 18 años para acceder al contenido de este sitio.</p>
                            <small>Este sitio contiene información sobre un producto usado con tabaco. Está reservado para personas mayores de 18 años que residen en México.</small>
                        </div>
                    </section>
                </transition>
                </div>`;
Vue.component('header-probar-component', {
    'template': $headerProbar,
    'data': function() {

        return {
            "pagina": "lp1",
            "mobile": window.innerWidth,
            "geoFencingmodal": true,
            "popupIqos": this.$cookies.get('popupIqos'),
            "range": false,
            "meses": [{mes: 'Enero',val: "01"},{mes: 'Febrero',val: "02"},{mes: 'Marzo',val: "03"},{mes: 'Abril',val: "04"},{mes: 'Mayo',val: "05"},{mes: 'Junio',val: "06"},{mes: 'Julio',val: "07"},{mes: 'Agosto',val: "08"},{mes: 'Septiembre',val: "09"},{mes: 'Octubre',val: "10"},{mes: 'Noviembre',val: "11"},{mes: 'Diciembre',val: "12"}],
            "errorPopup": [],
        };

    },
    'methods': {
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                var countrycode = data.country_code;
                var parseParam = location.search;

                if ( parseParam == "?gr=false" ) {
                    _self.geoFencingmodal = true
                } else {
                    if( countrycode != 'MX') {
                        _self.geoFencingmodal = false
                    }
                }
            })
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            } else if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "iqosPopUp": function(event,responta) {
            event.preventDefault();
            this.errorPopup = [];
            
            window.mes = $(".ageverification #mes option:selected").val()
            window.ano = $(".ageverification #ano option:selected").val()

            if (window.mes == "" && window.ano == "" ) {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.mes == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else if (window.ano == "") {
                this.errorPopup.push("Los campos anteriores son obligatorios.");
            } else {
                var date = new Date();
                var ano = date.getFullYear();
                var mes = date.getMonth();

                if (ano - parseFloat(window.ano) == 17 && parseFloat($(".ageverification #mes option:selected").val()) <= mes) {
                    sucess()
                } else if (ano - parseFloat(window.ano) < 18) {
                    this.range = true
                    try {
                        window.dataLayer.push({
                            "category": "Dialog (Age Verification)",
                            "action": "Button Click - No",
                            "label": "MX",
                            "event": "eventunder18"
                        })
                    } catch (e) {console.log(e)}
                        
                } else {
                    sucess()
                }                    
                        
                function sucess () {
                    this.$cookies.set('popupIqos', responta, '90d')
                    this.$cookies.set('mes', $(".ageverification #mes option:selected").val(), '90d')
                    this.$cookies.set('ano', $(".ageverification #ano option:selected").val(), '90d')

                    $(".ageverification").fadeOut()
                    $("html, body").css({"overflow":"auto"});

                    VueEvent.$emit('mes', window.mes)
                    VueEvent.$emit('ano', window.ano)

                    $("footer .btn.disabled").removeClass("disabled")
                }
                
            }
            
        },
        "contagemAno": function () {
            var date = new Date();
            var ano = date.getFullYear();
        
            for (let i = 1900; i < ano; i++) {
                $("#ano").append(
                    $('<option />')
                    .text([i])
                    .val([i])
                )
            }
            
        },
        "closePopUp": function(e) {
            this.errorPopup = [];
            e.preventDefault();
        },
        
        "bodySemrolagem": function () {
            console.log("bodysemrolaged called")
            console.log("popUpiqos",this.popupIqos)
            if (this.popupIqos == true || (this.$cookies.get('mes') && this.$cookies.get('ano'))) {
                console.log("first condition when tru overflow auto")
                $("html, body").css({"overflow":"auto"});
            } else if(this.popupIqos == 'si') {
                console.log("second condition when tru overflow auto popUp = si becuause comming from iqos.com")
                $("html, body").css({"overflow":"auto"});
            } else {
                console.log("last condition when tru overflow hidden")
                $("html, body").css({"overflow":"hidden"});
            }
        },
        "noMostrarPopup": function () {

            var _self =  this
            console.log(document.referrer, "referrer")
            var commingFrom = document.referrer.slice(0,20)
            console.log("commingFrom", commingFrom)
            console.log(document.referrer.indexOf("_ga"), "referrerindex")
            if (commingFrom == "https://www.iqos.com" ) {
                this.popupIqos = true
                this.$cookies.set('popupIqos', 'si', '90d')
                $("html, body").css({"overflow":"auto"});
                _self.bodySemrolagem()
            }
            
        }
    },
    'mounted': function(){
        this.contagemAno()

        window.onresize = () => {
            this.mobile = window.innerWidth;
        };
    },
    "watch": {},
    'computed': {},
    "created":function(){ 
        var _self = this
        
        _self.geoFencing()
        _self.paginaStatus()
        _self.bodySemrolagem()
        _self.noMostrarPopup()
    }
});                 

var $faqs = ` <div>
                <div class="faqs">
                <div class="arrow container">
                    <a href="javascript:history.go(-1)" class="arrow_back">
                        <svg height="13" viewBox="0 0 22 13" width="22" xmlns="http://www.w3.org/2000/svg">
                            <path d="m6.5 11.5-5-5 5-5m-4 5h18" fill="none" stroke="#333f48" stroke-linecap="round" stroke-width="2"></path>
                        </svg>
                        <svg height="25" viewBox="0 0 48 25" width="48" xmlns="http://www.w3.org/2000/svg">
                            <path d="m13 24-11-11.5 11-11.5m-9 11.5h43" fill="none" stroke="#333f48" stroke-linecap="round" stroke-width="2"></path>
                        </svg>
                    </a>
                    </div>
                    <div class="container title">
                    <h1 class="h1" style="text-align:center;color:#000;margin-top:20px">Preguntas Frecuentes</h1>
                    </div>
                    <dl class="accordion">
                    <dt>  
                        <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">¿Qué es el programa de préstamo de IQOS? </a>
                        </a>
                    </dt>

                    <dd style="margin-left:20px">
                        Es un programa en el cual te prestamos un dispositivo IQOS para que puedas conocer sus beneficios:
                        <ul class="container b">
                        <li>Menos Olor</li>
                        <li>Sin fuego</li>
                        <li>Sin ceniza</li>
                        <li>Menos probabilidad de molestar a otros.</li>
                        </ul>
                        <p style="margin-top:10px">
                            Te prestamos un dispositivo IQOS 2.4 Plus, en color blanco o azul por un periodo de 15 días, y  lo hacemos llegar hasta la comodidad de tu hogar sin ningún costo (el programa está disponible únicamente para Ciudad De Mexico y área metropolitana). Para acceder al programa se debe realizar una compra mínima de 5 cajetillas de unidades de tabaco para calentar Heets.
                        </p>
                        <p style="margin-top:10px">
                            Al término de los 15 días, deberás devolver el dispositivo de préstamo y puedes decidir si deseas comprar un dispositivo nuevo por un precio desde $1,199 MXN,  Además, durante el período de préstamo recibirás acompañamiento personalizado de un agente experto IQOS.  
                        </p>
                        <p style="margin-top:10px">
                            Para mayor información del programa de préstamo IQOS consulta Términos y Condiciones del programa  
                            <a style="color:blue"  href="https://www.probar-iqos.com/terminos-condiciones">
                            (https://www.probar-iqos.com/terminos-condiciones) 
                            </a>
                        </p> 
                    </dd>

                    <dt>  
                        <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">¿Qué dispositivos están en préstamo? </a>
                        </a>
                    </dt>

                    <dd style="margin-left:20px">
                        <p style="margin-top:10px">
                        Los dispositivos que están en préstamo son la versión IQOS 2.4 Plus, en color blanco o azul. Para conocer a mayor detalle las características de este dispositivo, dirígete a 
                        <a style="color:blue"  href="https://www.iqos.com/mx/es/descubre/iqos-2-4-plus.html">
                        https://www.iqos.com/mx/es/descubre/iqos-2-4-plus.html
                        </a>
                        </p> 
                    </dd>

                    <dt>  
                        <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">Al ser un dispositivo en préstamo, ¿los dispositivos IQOS son usados?  </a>
                        </a>
                    </dt>
                    <dd style="margin-left:20px">
                        Si, los dispositivos del Programa de Préstamo IQOS son usados, estos son sanitizados y Re empacados de acuerdo a los protocolos de higiene de la marca IQOS.  
                    </dd>

                    <dt>  
                        <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">¿Tengo que comprar unidades de tabaco para calentar para participar en el Programa de Préstamo IQOS?</a>
                        </a>
                    </dt>
                    <dd style="margin-left:20px">
                        Si, se requiere comprar como mínimo 5 cajetillas de unidades de tabaco para calentar – Heets, las cuales deberán ser solicitadas al agente IQOS durante la llamada de registro y serán pagadas al momento de la entrega. La entrega de las unidades de tabaco  para calentar se realizará junto al dispositivo de préstamo. 
                    </dd>
                    
                    <dt>  
                        <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">¿Tengo que pagar para participar en el programa de préstamo IQOS? </a>
                        </a>
                    </dt>
                    <dd style="margin-left:20px">
                        No, el programa de préstamo IQOS no tiene ningún costo. Si al finalizar el periodo de préstamo te convenciste de los beneficios y decides comprarlo, el dispositivo tiene un precio de $1,199 MXN, de lo contrario, deberás devolverlo al cabo de dicho período.  
                    </dd>

                    <dt>  
                        <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">¿Cuál es la cobertura del programa de préstamo IQOS?  </a>
                        </a>
                    </dt>
                    <dd style="margin-left:20px">
                        El programa de préstamo IQOS está actualmente activo para la Ciudad de Mexico y área metropolitana, y estará vigente temporalmente hasta nuevo aviso.   
                    </dd>


                    <dt>  
                        <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">¿Cuál es la vigencia del programa de préstamo IQOS?  </a>
                        </a>
                    </dt>
                    <dd style="margin-left:20px">
                        El programa de préstamo IQOS está actualmente activo para la Ciudad de Mexico y área metropolitana, y estará vigente temporalmente hasta nuevo aviso.  
                    </dd>
                    
                    <dt>  <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">¿En cuánto tiempo recibiré mi dispositivo y quien realizara la entrega?  </a></a></dt>
                    <dd style="margin-left:20px">
                        <p style="margin-top:10px">
                            En caso de cumplir los requisitos y ser aprobada la entrega en préstamo de un dispositivo IQOS, podrás recibirlo en la comodidad de tu hogar dentro de las 48 horas siguientes a haber sido contactado telefónicamente por el equipo IQOS y haber recibido confirmación de que tu solicitud fue procedente. La entrega será realizada personalmente por unos de nuestros agentes expertos IQOS, mismo que te dará soporte personalizado durante el periodo de préstamo.
                        </p>
                    </dd>

                    <dt>  <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">¿Puedo recomendar a algún amigo al programa de préstamo IQOS? </a></a></dt>
                    <dd style="margin-left:20px">
                        <p style="margin-top:10px">
                            Si, solo pídele a tu amigo que complete el formulario de registro en la página https://www.probar-iqos.com/. Recuerda que tu amigo deberá ser fumador mayor de edad, y cumplir con los requisitos del programa. Consulta Términos y Condiciones del programa 
                            <a style="color:blue"  href="https://www.probar-iqos.com/terminos-condiciones">
                            (https://www.probar-iqos.com/terminos-condiciones)
                            </a>
                        </p>
                    </dd>
                    
                    <dt>  <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">¿Que incluye el kit de préstamo IQOS? </a></a>
                    </dt>
                    <dd style="margin-left:20px">
                        El kit de préstamo IQOS incluye:
                        <ul class="container b">
                        <li>IQOS 2.4 PLUS Kit:</li>
                        <ul class="container c">
                            <li>1 holder</li>
                            <li>1 cargador</li>
                            <li>1 herramienta de Limpieza</li>
                            <li>1 hisopos Limpiadores </li>
                            <li>1 cable USB  </li>
                            <li>1 adaptador de Corriente </li>
                        </ul>
                        </ul>
                        <p style="margin-top:10px">
                            **Recuerda que el dispositivo IQOS utiliza unidades para calentar HEETS los cuales podrán ser comprados con tu agente experto IQOS o en puntos de venta seleccionados, los cuales podrás encontrar en: 
                            <a style="color:blue"  href="https://www.iqos.com/mx/es/localizador-tiendas.html ">
                            https://www.iqos.com/mx/es/localizador-tiendas.html  
                            </a>
                        </p> 
                    </dd>
                    
                    <dt>  <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">Vivo fuera de la CDMX y área metropolitana, ¿puedo acceder al programa de préstamo IQOS? </a></a></dt>
                    <dd style="margin-left:20px">Lamentablemente, por ahora el programa de préstamo IQOS solo es para la Ciudad de Mexico y área metropolitana.</dd>
                    
                    <dt>  
                        <a style="display:flex">
                        <img class="chevron_toggleable triangle_right" />
                        <a href="">Durante mi período de préstamo IQOS tuve que salir de la ciudad y me quede sin unidades de tabaco para calentar  </a></a>
                    </dt>
                    <dd style="margin-left:20px">
                        <a style="color:blue; display:flex"  href=" https://www.iqos.com/mx/es/localizador-tiendas.html ">
                        <a class="noDecoration" style="font-weight:100; margin-right:5px; display:contents; text-decoration:none">Entra a</a> 
                        https://www.iqos.com/mx/es/localizador-tiendas.html 
                        <a class="noDecoration" style="font-weight:100; margin-right:5px; display:contents; text-decoration:none">donde podrás localizar todos los puntos seleccionados con venta de unidades de tabaco para calentar.</a>
                        </a>
                    </dd>

                    <dt>  <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">Si al término del Programa de Préstamo IQOS quiero devolver el dispositivo, ¿cuáles son los pasos para devolverlo?</a></a></dt>
                    <dd style="margin-left:20px">Tu agente experto IQOS te contactará al término del programa y él te guaira en el proceso de devolución del dispositivo de préstamo.</dd>
                    
                    <dt>  <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">Ya me decidí, pero quiero comprar más de un dispositivo IQOS</a></a></dt>
                    <dd style="margin-left:20px">Comunícate al centro de atención al cliente y un agente experto IQOS te orientará para adquirir otros dispositivos IQOS.</dd>

                    <dt>  <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">¿Puedo comprar el dispositivo IQOS antes del término del Programa de Préstamo IQOS?</a></a></dt>
                    <dd style="margin-left:20px">Si, comunícate al centro de atención al cliente y un agente experto IQOS te orientara en los pasos a seguir para realizar la compra de un dispositivo IQOS y la devolución del dispositivo de préstamo.</dd>
                    
                    <dt>  <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">¿Cuáles son los métodos de pago aceptados en caso de decidir comprarlo?</a></a></dt>
                    <dd style="margin-left:20px">Los métodos de pago aceptado son pago  efectivo, tarjeta débito, tarjeta de crédito, o deposito en establecimientos seleccionados (Farmacia Benavides, 7 Eleven, Walmart, Farmacias del Ahorro, Sam´s Club, Superama, Bodega Aurrera, Circulo K, El Asturiano, Tiendas Extra, Waldo´s, Alsuper, Kiosko, Farmacias Guadalajara, Gestopago, Atiendas, Multi recargas y Pago rápido); el pago será procesado vía Openpay (BBVA). Tu agente experto IQOS te guiará durante todo el proceso de pago.</dd>
                    
                    <dt>  <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">Decidí comprarlo y el agente experto IQOS asignado me envió una liga de pago, ¿es seguro?</a></a></dt>
                    <dd style="margin-left:20px">Si la liga que recibiste es de Openpay no-reply@openpay.mx, entonces es segura. </dd>

                    <dt>  <a style="display:flex">
                        <span class="triangle"><img class="chevron_toggleable triangle_right" /></span>
                        <a href="">Si decidí comprar el dispositivo y seguí los pasos indicados por mi agente experto IQOS asignado, ¿en cuánto tiempo se refleja mi pago? </a></a></dt>
                    <dd style="margin-left:20px">
                        Puede tomar hasta 48 horas hábiles en verse reflejado el pago y una vez confirmado, recibirás un correo electrónico de contact@e.iqos.com para establecer la contraseña de acceso a tu cuenta de usuario IQOS. 
                    </dd>
                    </dl>          
                </div>  
              </div>`;
Vue.component('faqs-component', {
    'template': $faqs,
    'mounted': function(){
        $(function() {
            var allPanels = $('.accordion > dd').hide(); 
            $('.accordion > dt > a').click(function() {
                $(this).find('img').closest('.chevron_toggleable').removeClass(' triangle_down');
                $(this).find('img').closest('.chevron_toggleable').addClass('triangle_right');
                allPanels.slideUp();
                $('.triangle').html(`<img class="chevron_toggleable triangle_right" />`);
                if(!$(this).parent().next().is(":visible")){
                $(this).find('img').closest('.chevron_toggleable').removeClass(' triangle_right');
                $(this).find('img').closest('.chevron_toggleable').addClass('triangle_down');
                $(this).parent().next().slideDown();
                } return false;
            });
        });
    },
});

var $cookie = `<div>
                <div class="service-content content-centered-cookies">
                    <h1 class="service-content__title">Cookies</h1>
                    <h3 class="service-content__subtitle">¿Qué cookies utilizamos?</h3>
                    <div class="service-content__intro">
                    <p>¿Qué son las cookies? Las cookies son pequeños archivos de texto que se colocan en tu dispositivo cuando visitas un sitio, las cuales se utilizan luego para identificar tu dispositivo para los fines descritos aquí. Las cookies establecidas por el propietario de un sitio se denominan “cookies de origen” (first party cookies). Las cookies establecidas por otras personas se denominan “cookies de terceros” (third party cookies). Las cookies de terceros permiten al tercero proporcionar características o funcionalidad en o a través del sitio (como análisis, publicidad y vídeos). Las partes que establecen estas cookies de terceros pueden reconocer tu dispositivo cuando visitas nuestro sitio y cuando visitas otros sitios. Utilizamos cookies (y otras tecnologías similares) en este sitio. Estas cookies se dividen en tres categorías. Las cookies de la primera categoría son necesarias. Las de las dos categorías restantes son opcionales: puedes decidir si deseas recibirlas de nosotros y, además, puedes utilizar esta herramienta para establecer tus preferencias. Puedes cambiar de opinión en cualquier momento y cambiar tus preferencias siguiendo el enlace a las preferencias de cookies desde cualquier página del sitio.</p>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" style="">
                        <legend class="legend-desktop over">Cookies operativas</legend>
                        <div class="cookie-set__status top">
                        <svg height="32px" width="32px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                            <g fill="none" fill-rule="evenodd">
                            <circle cx="16" cy="16" fill="#272a33" r="16"></circle>
                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#92b934" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"></path></g></svg>
                        <span class="cookie-set__status-label"><div v-if="this.all_cookies_allowed == true">On</div><div v-else >Off <br />Please allow cookies to turn on</div> </span>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div class="cookie-set__intro">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper">
                                <legend class="legend-desktop under">Cookies operativas</legend>
                                <p class="paragraph">Estas son estrictamente necesarias para el funcionamiento del sitio o para que las funciones que has elegido en él operen de una manera conveniente. Ejemplos: recordar quién eres, tus preferencias y tu configuración; de esta manera, no tendrás que introducirlas cada vez que cambies de página. Estas cookies son esenciales para la operación del sitio o para sus funciones; por este motivo, esta herramienta no ofrece la opción de rechazar su uso (opt-out). No obstante, si así lo deseas, puedes configurar tu navegador para que rechace todas las cookies, en cuyo caso es posible que el sitio no se muestre correctamente y que las funciones que selecciones no estén disponibles.</p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" >
                        <legend class="legend-desktop over">Cookies de rendimiento</legend>
                        <div class="wrap">
                            <div  class="cookie-set__status top">
                                <div v-if="this.getCookiePerformance() == 'true'  ">
                                    <div class="toggle-btn active">
                                    <input  type="checkbox" class="cb-value" />
                                    <span class="round-btn">
                                        <svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                                        </svg>
                                    </span>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="toggle-btn">
                                    <input  type="checkbox" class="cb-value" />
                                    <span class="round-btn">
                                        <div></div>
                                    </span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top:5px">
                                <div v-if="this.getCookiePerformance() == 'true' ">
                                    <div class="status-1">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="status-1">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div id="performance-cookie-name">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper collapsible-section" data-showmore="Show more" data-showless="Show less">
                                <legend class="legend-desktop under">Cookies de rendimiento</legend>
                                <p class="paragraph">Estas nos permiten entender cómo la gente usa el sitio y qué tan bien se desempeña este. Nos permiten mejorar el funcionamiento del sitio. Estas tecnologías nos dan únicamente información anónima: la información que recopilan se reduce para que, de esta manera, solo se identifique el área donde te encuentras. Esta información se agrega antes de ser enviada a nosotros. Puedes optar por aceptarlas (opt in) o rechazar su uso (opt out).</p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" >
                        <legend class="legend-desktop over">Cookies de seguimiento</legend>
                        <div class="wrap">
                            <div  class="cookie-set__status top">
                                <div v-if="this.getCookieTracking() == 'true'  ">
                                    <div class="toggle-btn-2 active">
                                    <input  type="checkbox" class="cb-value-2" />
                                    <span class="round-btn-2">
                                        <svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                                        </svg>
                                    </span>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="toggle-btn-2 ">
                                    <input  type="checkbox" class="cb-value-2" />
                                    <span class="round-btn-2">
                                        <div></div>
                                    </span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top:5px">
                                <div v-if="this.getCookieTracking() == 'true' ">
                                    <div class="status-2">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="status-2">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div id="performance-cookie-name">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper collapsible-section" data-showmore="Show more" data-showless="Show less">
                                <legend class="legend-desktop under">Cookies de seguimiento</legend>
                                <p class="paragraph">Estas rastrean el uso que haces de nuestro sitio y de otros sitios, de modo que podamos servirle a tu dispositivo, cuando visites este sitio u otros sitios, con información dirigida al uso que ellas han rastreado. Esto incluye mostrarte anuncios y personalizar el contenido de nuestras comunicaciones para que se adapten a tus preferencias. Esto puede implicar, también, la agregración de estos datos (para obtener una mejor comprensión del ambiente). Ejemplo: Uno de nuestros proveedores de servicios contrata a terceros para que rastreen y analicen el uso y volumen de información estadística de personas que visiten la plataforma digital. Puedes optar por aceptarlas (opt in) o rechazar su uso (opt out).</p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <button id="set-cookie" type="button" class="form-submit-btn global-btn btn--dark">
                        <a href="/"><span class="btn__label">Aceptar</span></a>
                        <span class="svg-wrapper">
                            <svg class="gold-in" width="20px" height="13px" viewBox="0 0 60 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <title>Arrow right</title>
                                <path fill="#e5b052" d="M61.5,21.0012229 C61.5,21.1428603 61.4849919,21.285721 61.4558663,21.4283127 C61.4303624,21.5294036 61.4303624,21.5294036 61.4045212,21.6035806 C61.3931117,21.6366961 61.3931117,21.6366961 61.3826412,21.6687153 C61.377802,21.683353 61.377802,21.683353 61.3700945,21.7101624 C61.3551894,21.7629543 61.3551894,21.7629543 61.3265491,21.8371556 C61.2802411,21.9325695 61.2802411,21.9325695 61.2356165,22.0091233 L61.218312,22.0385176 C61.1971879,22.0752527 61.1971879,22.0752527 61.1875904,22.0941249 C61.1637725,22.1414847 61.1637725,22.1414847 61.1251472,22.2026949 C61.0656431,22.2905407 60.9998629,22.3680919 60.8986064,22.4743832 C60.8881532,22.4902312 60.8881532,22.4902312 60.8522509,22.5288516 L43.1421647,39.8660642 C42.2809914,40.7112298 40.8835925,40.7112298 40.0219404,39.8665568 C39.1588241,39.0233347 39.1588241,37.6551265 40.0217016,36.8102153 L53.9638111,23.1599883 L3.70701859,23.119374 C2.48772491,23.119374 1.5,22.1522148 1.5,20.9583083 C1.5,19.7642865 2.48784268,18.7964175 3.70729366,18.7964176 L53.9609215,18.8370305 L40.0251858,5.18986505 C39.1624859,4.34608877 39.1627895,2.97797612 40.0246828,2.13402921 C40.8850209,1.28871946 42.2833598,1.28871946 43.1452794,2.13365407 L60.8461643,19.4651631 C60.9498168,19.5657176 61.0423046,19.6762461 61.1281106,19.8008008 C61.1440802,19.8260433 61.1440802,19.8260433 61.1506896,19.8386986 C61.2230254,19.9493976 61.2827364,20.0581184 61.3334044,20.1771765 C61.3490006,20.2209904 61.3490006,20.2209904 61.355189,20.2445448 C61.403712,20.3731562 61.4349164,20.4715604 61.455822,20.5739188 C61.4794751,20.6879404 61.4911118,20.8071735 61.4943146,20.9339656 C61.4975533,20.9527485 61.4977118,20.9558899 61.5,21.0012229 Z"></path>
                            </svg>
                        </span>
                    </button>
                    <p class="form-note">Puedes cambiar tus preferencias en cualquier momento siguiendo el enlace a “Política de Cookies” desde cualquier página en este sitio. Toda la información personal recolectada será utilizada como se describe en nuestro <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</p>
                </div>
               </div>`;
Vue.component('cookie-component', {
    'template': $cookie,
    'data': function() {
        return {
            "all_cookies_allowed":false
        };
    },
    'created': function(){
        var _self = this
        _self.check_if_cookies_allowed()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
    },
    'methods': {
        "getCookieTracking":function () {
            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                    }
                }
                return "";
            }
            function checkCookie() {
                var cookie = getCookie("Tracking");
                return cookie
            } 
            return checkCookie()
        },
        "getCookiePerformance":function () {
            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                    }
                }
                return "";
            }
            function checkCookie() {
                var cookie = getCookie("Performance");
                return cookie
            } 
            return checkCookie()
        },
        "reload": function(){window.location.reload(true);},
        "check_if_cookies_allowed": function () {
            var vm = this
            var ret = document.cookie != -1;
            vm.all_cookies_allowed = ret
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            }
        },
        "cookiePerformanceDatapush_opt_in": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: performance",
                    label: "opt-in"
                })
            } catch (e) {console.log(e)}            
        },
        "cookieTrackingDatapush_opt_in": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: tracking",
                    label: "opt-in"
                })
            } catch (e) {console.log(e)}            
        },
        "cookiePerformanceDatapush_opt_out": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: performance",
                    label: "opt-out"
                })
            } catch (e) {console.log(e)}            
        },
        "cookieTrackingDatapush_opt_out": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: tracking",
                    label: "opt-out"
                })
            } catch (e) {console.log(e)}            
        },
        "aceptarButtonDataPush": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Button Click-accept",
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PVCookie",
                    category: window.location.href,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        }    
        
    },
    'mounted': function(){
        var self = this
        $(function() { 
            if(self.all_cookies_allowed == false){
                $('.round-btn').html(
                    `<div></div>`
                );
                $('.round-btn-2').html(
                    `<div></div>`
                );
                $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);  
            } 
            $('.cb-value').click(function() {
                var vm = self
                var mainParent = $(this).parent('.toggle-btn');
                if( vm.all_cookies_allowed == true && $(mainParent).hasClass('active') ) {
                    vm.cookiePerformanceDatapush_opt_out()
                    self.Performance = 'false'
                    $(mainParent).removeClass('active');
                    $('.round-btn').html(
                        `<div></div>`
                    );
                    $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                } else if( vm.all_cookies_allowed == true && !$(mainParent).hasClass('active') ) {
                    vm.cookiePerformanceDatapush_opt_in()
                    self.Performance = 'true'
                    $(mainParent).addClass('active');
                    $('.round-btn').html(`<svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                        <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                        </svg>`);
                    $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>`);
                    $(this).attr('checked');
                } 
            });
            $('.cb-value-2').click(function() {
                var vm = self
                var mainParent = $(this).parent('.toggle-btn-2');
                if( vm.all_cookies_allowed == true && $(mainParent).hasClass('active')) {
                    vm.cookieTrackingDatapush_opt_out()
                    self.Tracking = 'false'
                    $(mainParent).removeClass('active');
                    $(this).removeAttr('checked');
                    $('.round-btn-2').html(
                        `<div></div>`
                    );
                    $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                } else if( vm.all_cookies_allowed == true && !$(mainParent).hasClass('active')) {
                    vm.cookieTrackingDatapush_opt_in()
                    self.Tracking = 'true'
                    $(mainParent).addClass('active');
                    $('.round-btn-2').html(`<svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                        <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                        </svg>`);
                    $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>`);
                    $(this).attr('checked');
                }
            });
        });
        document.getElementById('set-cookie').addEventListener('click', function() {
            function checkCookiePerformanceValue(){
                var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
                if(self.Performance == 'true'){
                    document.cookie = 'Performance=true;expires='+exp+'; path=/';
                } else if(self.Performance == 'false'){
                    document.cookie = 'Performance=false;expires='+exp+'; path=/';
                } else {
                    return false
                }
            }
            function checkCookieTrackingValue(){
                var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
                if(self.Tracking == 'true'){
                    document.cookie = 'Tracking=true;expires='+exp+'; path=/';
                } else if(self.Tracking == 'false'){
                    document.cookie = 'Tracking=false;expires='+exp+'; path=/';
                } else {
                    return false
                }
            }
            
            checkCookiePerformanceValue();
            checkCookieTrackingValue();
            self.aceptarButtonDataPush()
            window.location.href="/";
        });
    }
});

var $cookieDev = `<div>
                <div class="service-content content-centered-cookies">
                    <h1 class="service-content__title">Cookies</h1>
                    <h3 class="service-content__subtitle">¿Qué cookies utilizamos?</h3>
                    <div class="service-content__intro">
                    <p>¿Qué son las cookies? Las cookies son pequeños archivos de texto que se colocan en tu dispositivo cuando visitas un sitio, las cuales se utilizan luego para identificar tu dispositivo para los fines descritos aquí. Las cookies establecidas por el propietario de un sitio se denominan “cookies de origen” (first party cookies). Las cookies establecidas por otras personas se denominan “cookies de terceros” (third party cookies). Las cookies de terceros permiten al tercero proporcionar características o funcionalidad en o a través del sitio (como análisis, publicidad y vídeos). Las partes que establecen estas cookies de terceros pueden reconocer tu dispositivo cuando visitas nuestro sitio y cuando visitas otros sitios. Utilizamos cookies (y otras tecnologías similares) en este sitio. Estas cookies se dividen en tres categorías. Las cookies de la primera categoría son necesarias. Las de las dos categorías restantes son opcionales: puedes decidir si deseas recibirlas de nosotros y, además, puedes utilizar esta herramienta para establecer tus preferencias. Puedes cambiar de opinión en cualquier momento y cambiar tus preferencias siguiendo el enlace a las preferencias de cookies desde cualquier página del sitio.</p>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" style="">
                        <legend class="legend-desktop over">Cookies operativas</legend>
                        <div class="cookie-set__status top">
                        <svg height="32px" width="32px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                            <g fill="none" fill-rule="evenodd">
                            <circle cx="16" cy="16" fill="#272a33" r="16"></circle>
                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#92b934" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"></path></g></svg>
                        <span class="cookie-set__status-label"><div v-if="this.all_cookies_allowed == true">On</div><div v-else >Off <br />Please allow cookies to turn on</div> </span>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div class="cookie-set__intro">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper">
                                <legend class="legend-desktop under">Cookies operativas</legend>
                                <p class="paragraph">Estas son estrictamente necesarias para el funcionamiento del sitio o para que las funciones que has elegido en él operen de una manera conveniente. Ejemplos: recordar quién eres, tus preferencias y tu configuración; de esta manera, no tendrás que introducirlas cada vez que cambies de página. Estas cookies son esenciales para la operación del sitio o para sus funciones; por este motivo, esta herramienta no ofrece la opción de rechazar su uso (opt-out). No obstante, si así lo deseas, puedes configurar tu navegador para que rechace todas las cookies, en cuyo caso es posible que el sitio no se muestre correctamente y que las funciones que selecciones no estén disponibles.</p>
                                <a style="padding-left: 0px;cursor:pointer;" @click="showMoreInfo1()" class="btn cookie-btn"  data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Conoce más</a>
                                <p v-if="more_info_operativas">Cookies en uso</p>
                                <p v-if="more_info_operativas">
                                    
                                    <a id="tooltip2"  style="text-decoration: underline;"  > VTEXSC,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>
                                    <a id="tooltip2"  > _hjIncludedInSessionSample,
                                        <span class="tooltiptext" >Esta cookie está configurada para que Hotjar sepa si ese visitante está incluido en el muestreo de datos definido por el límite de sesiones diarias de su sitio. https://help.hotjar.com/hc/en-us/articles/115011789248-Hotjar-Cookie-Information</span> 
                                    </a>
                                    
                                    <a id="tooltip2"  style="text-decoration: underline;"  > ISSMB,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > Performance,
                                        <span class="tooltiptext" id="Performance">Interna - desarrollador - Define si el usuario ha aceptado las cookies de desempeño</span> 
                                    </a>


                                    <a id="tooltip2"  style="text-decoration: underline;"  > VtexRCMacIdv7,
                                        <span class="tooltiptext" id="VtexRCMacIdv7">VTEX - Cookie que recolecta información anónima para dimensionar el tamaño y tiempo de respuesta de los servidores y mejorar la navegación.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > vtex_session,
                                        <span class="tooltiptext" id="vtex_session">VTEX - El Sistema de Sesiones identifica, a través de la cookie de sesión vtex, la información de una sesión específica de un usuario navegando en la tienda. </span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > VtexRCRequestCounter,
                                        <span class="tooltiptext" id="VtexRCRequestCounter">VTEX - Cookie que recolecta información anónima para dimensionar el tamaño y tiempo de respuesta de los servidores y mejorar la navegación.</span> 
                                    </a>
                                    
                                    

                                    
                                    
                                    
                                    <a id="tooltip2"  style="text-decoration: underline;"  > janus_sid,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>

                                    <a id="tooltip2"  style="text-decoration: underline;"  > Tracking,
                                        <span class="tooltiptext" id="Tracking">Interna - Desarrollador - Define si el usuario ha aceptado las cookies de seguimiento.</span> 
                                    </a>

                                    <a id="tooltip2"  style="text-decoration: underline;"  > Technical,
                                        <span class="tooltiptext" id="Technical">Interna - Desarrollador - Cookie necesaria para operaciones en sitio, no opcional.</span> 
                                    </a>

                                    

                                    <a id="tooltip2"  style="text-decoration: underline;"  > VtexFingerPrint,
                                        <span class="tooltiptext" id="VtexFingerPrint">VTEX - Es una cookie necesaria para Cookiebot de VTEX</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > vtex_segment,
                                        <span class="tooltiptext" id="vtex_segment">VTEX - VTEX Sessions también crea la cookie VTEX_segment. Esta cookie contiene la información con las condiciones comerciales que se aplicarán a una sesión.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > VtexRCSessionIdv7,
                                        <span class="tooltiptext" id="VtexRCSessionIdv7">VTEX - Cookie que recolecta información anónima para dimensionar el tamaño y tiempo de respuesta de los servidores y mejorar la navegación.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _dc_gtm_UA-xxxxxxxx,
                                        <span class="tooltiptext" id="VtexRCSessionIdv7">
                                        Esta cookie está asociada con sitios que utilizan Google Tag Manager para cargar otros scripts y códigos en una página. Cuando se usa, puede considerarse estrictamente necesario, ya que sin él, es posible que otros scripts no funcionen correctamente. El final del nombre es un número único que también es un identificador de una cuenta de Google Analytics asociada.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > SGTS,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>
                                    <a id="tooltip2"  > _hjIncludedInPageviewSample.
                                        <span class="tooltiptext" >Hotjar - Esta cookie está configurada para que Hotjar sepa si ese visitante está incluido en el muestreo de datos definido por el límite de visitas a la página de su sitio. https://help.hotjar.com/hc/en-us/articles/115011789248-Hotjar-Cookie-Information</span> 
                                    </a>
                                </p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" >
                        <legend class="legend-desktop over">Cookies de rendimiento</legend>
                        <div class="wrap">
                            <div  class="cookie-set__status top">
                                <div v-if="this.getCookiePerformance() == 'true'  ">
                                    <div class="toggle-btn active">
                                    <input  type="checkbox" class="cb-value" />
                                    <span class="round-btn">
                                        <svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                                        </svg>
                                    </span>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="toggle-btn">
                                    <input  type="checkbox" class="cb-value" />
                                    <span class="round-btn">
                                        <div></div>
                                    </span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top:5px">
                                <div v-if="this.getCookiePerformance() == 'true' ">
                                    <div class="status-1">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="status-1">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div id="performance-cookie-name">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper collapsible-section" data-showmore="Show more" data-showless="Show less">
                                <legend class="legend-desktop under">Cookies de rendimiento</legend>
                                <p class="paragraph">Estas nos permiten entender cómo la gente usa el sitio y qué tan bien se desempeña este. Nos permiten mejorar el funcionamiento del sitio. Estas tecnologías nos dan únicamente información anónima: la información que recopilan se reduce para que, de esta manera, solo se identifique el área donde te encuentras. Esta información se agrega antes de ser enviada a nosotros. Puedes optar por aceptarlas (opt in) o rechazar su uso (opt out).</p>
                                <a style="padding-left: 0px;cursor:pointer;" @click="showMoreInfo2()" class="btn cookie-btn"  data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Conoce más</a>
                                <p v-if="more_info_performance">Cookies en uso</p>
                                <p v-if="more_info_performance">
                                    <a id="tooltip2" style="text-decoration: underline;"  > _hjAbsoluteSessionInProgress,
                                        <span class="tooltiptext" >Hotjar - Esta cookie se utiliza para detectar la primera sesión de vista de página de un usuario. Este es un indicador de Verdadero / Falso establecido por la cookie. https://help.hotjar.com/hc/en-us/articles/115011789248-Hotjar-Cookie-Information</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _hjTLDTest,
                                        <span class="tooltiptext" >Hotjar Cuando se ejecuta el script Hotjar, intentamos determinar la ruta de cookies más genérica que debemos usar, en lugar del nombre de host de la página. Esto se hace para que las cookies se puedan compartir entre subdominios (cuando corresponda). Para determinar esto, intentamos almacenar la cookie _hjTLDTest para diferentes alternativas de subcadena de URL hasta que falle. Después de esta verificación, se elimina la cookie.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _hjIncludedInSessionSample,
                                        <span class="tooltiptext" id="__stid">Esta cookie está configurada para que Hotjar sepa si ese visitante está incluido en el muestreo de datos definido por el límite de sesiones diarias de su sitio.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_hjid" > _hjid, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _hjFirstSeen,
                                        <span class="tooltiptext" id="_hjFirstSeen">hotjar.com - Estas cookies son establecidas por HotJar. Se utilizan con fines analíticos para rastrear cómo los usuarios interactúan con la página web. El propósito principal de las cookies establecidas por este host es: Rendimiento.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_ga" >_ga, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_gclxxxx" >_gclxxxx, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_gid" > _gid, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _gat_UA-nnnnnnn-nn.
                                        <span class="tooltiptext" id="_gat_UA">Esta es una cookie de tipo patrón establecida por Google Analytics, donde el elemento de patrón en el nombre contiene el número de identidad único de la cuenta o sitio web con el que se relaciona. Parece ser una variación de la cookie _gat que se utiliza para limitar la cantidad de datos registrados por Google en sitios web de alto volumen de tráfico.</span> 
                                    </a>
                                </p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" >
                        <legend class="legend-desktop over">Cookies de seguimiento</legend>
                        <div class="wrap">
                            <div  class="cookie-set__status top">
                                <div v-if="this.getCookieTracking() == 'true'  ">
                                    <div class="toggle-btn-2 active">
                                    <input  type="checkbox" class="cb-value-2" />
                                    <span class="round-btn-2">
                                        <svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                                        </svg>
                                    </span>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="toggle-btn-2 ">
                                    <input  type="checkbox" class="cb-value-2" />
                                    <span class="round-btn-2">
                                        <div></div>
                                    </span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top:5px">
                                <div v-if="this.getCookieTracking() == 'true' ">
                                    <div class="status-2">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="status-2">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div id="performance-cookie-name">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper collapsible-section" data-showmore="Show more" data-showless="Show less">
                                <legend class="legend-desktop under">Cookies de seguimiento</legend>
                                <p class="paragraph">Estas rastrean el uso que haces de nuestro sitio y de otros sitios, de modo que podamos servirle a tu dispositivo, cuando visites este sitio u otros sitios, con información dirigida al uso que ellas han rastreado. Esto incluye mostrarte anuncios y personalizar el contenido de nuestras comunicaciones para que se adapten a tus preferencias. Esto puede implicar, también, la agregración de estos datos (para obtener una mejor comprensión del ambiente). Ejemplo: Uno de nuestros proveedores de servicios contrata a terceros para que rastreen y analicen el uso y volumen de información estadística de personas que visiten la plataforma digital. Puedes optar por aceptarlas (opt in) o rechazar su uso (opt out).</p>
                                <a style="padding-left: 0px;cursor:pointer;" @click="showMoreInfo3()" class="btn cookie-btn"  data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Conoce más</a>
                                <p v-if="more_info_tracking">Cookies en uso</p>
                                <p v-if="more_info_tracking">
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_fbp" >_fbp, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/APID" > APID, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > gdpr_status,
                                        <span class="tooltiptext" id="gdpr_status">Estas cookies se utilizan para ofrecer anuncios más relevantes para usted y sus intereses. También se utilizan para limitar la cantidad de veces que ve un anuncio y para ayudar a medir la eficacia de la campaña publicitaria.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/APID" > APIDTS, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/APID" > APID, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > um2,
                                        <span class="tooltiptext" id="um2">Establece una identificación única para el visitante, que permite a los anunciantes externos orientar al visitante con publicidad relevante. Este servicio de emparejamiento es proporcionado por centros de publicidad de terceros, lo que facilita las ofertas en tiempo real para los anunciantes.</span> 
                                    </a>

                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMID" > CMID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMPS" > CMPS, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/anj" > anj, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/tuuid_lu" > tuuid_lu, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/PUBMDCID" > PUBMDCID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_kuid_" > _kuid_, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/tuuid" > tuuid, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > r1,
                                        <span class="tooltiptext" id="r1">Cookies temporales que viven en su dispositivo siempre que la ventana del navegador que estaba usando para navegar por nuestro sitio web. Una vez que se cierra la ventana del navegador, estas cookies dejan de existir en su dispositivo.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMPRO" > CMPRO, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/ruds" > ruds, </a>
                                    
                                    <a id="tooltip2"  style="text-decoration: underline;"  > audience,
                                        <span class="tooltiptext" id="C">spotxchange.com - Este dominio es propiedad de IPONWEB y se utiliza para proporcionar una plataforma de licitación en tiempo real para publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/uuid" > uuid, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/uuid2" > uuid2, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > rud,
                                        <span class="tooltiptext" id="rud">El objetivo principal de esta cookie es la publicidad. Esta cookie se utiliza para identificar a un usuario mediante una identificación alfanumérica. Registra los datos del usuario como IP, ubicación, sitio web visitado, anuncios en los que se hizo clic, etc.con esto, optimiza la visualización de anuncios en función del comportamiento del usuario.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/everest_g_v2" > everest_g_v2, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > bkpa,
                                        <span class="tooltiptext" id="bkpa">Esta cookie almacena datos anónimos sobre el uso de la web por parte de los usuarios, así como actividades anónimas agregadas para crear un perfil que proporcione marketing y publicidad más específicos y relevantes.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > C,
                                        <span class="tooltiptext" id="c">bidswitch.net - Este dominio es propiedad de IPONWEB y se utiliza para proporcionar una plataforma de licitación en tiempo real para publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/IDSYNC" > IDSYNC, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > c,
                                        <span class="tooltiptext" id="C">adform.net - Este dominio es propiedad de IPONWEB y se utiliza para proporcionar una plataforma de licitación en tiempo real para publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/mako_uid" > mako_uid, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/rlas3" > rlas3, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/TDID" > TDID, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > A3,
                                        <span class="tooltiptext" id="A3">Recopila información sobre el comportamiento del usuario en varios sitios web. Esta información se utiliza para optimizar la relevancia de la publicidad en el sitio web.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/PugT" > PugT, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/SERVERID" > SERVERID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMRUM3" > CMRUM3, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/auid" > auid, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/test_cookie" > test_cookie, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > visitor-id,
                                        <span class="tooltiptext" id="visitor-id">La cookie de visitante incluye un ID de visitante único y el identificador único de su cuenta. Por ejemplo, el nombre de la cookie visit_id12345 almacena el ID de visitante 1010101010. El identificador de cuenta, 12345, asegura que el visitante sea rastreado en la cuenta correcta.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/bkdc" > bkdc, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/uid" > uid, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/eud" > eud, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > tluid,
                                        <span class="tooltiptext" id="tluid">Asigna un número de identificación aleatorio a cada visitante para que se puedan guardar su consentimiento de política y sus preferencias de consentimiento de cookies.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/smd" > smd, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/u2" > u2, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > aum,
                                        <span class="tooltiptext" id="aum">Estos se guardan en su dispositivo después de que se cierra la ventana del navegador. Nuestros servicios lo verán cada vez que nos haga una nueva visita.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/bku" > bku, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > CMST,
                                        <span class="tooltiptext" id="CMST">Estos se guardan en su dispositivo después de que se cierra la ventana del navegador. Nuestros servicios lo verán cada vez que nos haga una nueva visita.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > eyeblaster,
                                        <span class="tooltiptext" id="eyeblaster">Estos se guardan en su dispositivo después de que se cierra la ventana del navegador. Nuestros servicios lo verán cada vez que nos haga una nueva visita.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > data-rk,
                                        <span class="tooltiptext" id="data-rk">Recopila datos sobre el comportamiento de los visitantes de varios sitios web para presentar anuncios más relevantes. Esto también permite que el sitio web limite el número de veces que se les muestra el mismo anuncio.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > pxrc,
                                        <span class="tooltiptext" id="pxrc">Recopila datos sobre el comportamiento de los visitantes de varios sitios web para presentar anuncios más relevantes. Esto también permite que el sitio web limite el número de veces que se les muestra el mismo anuncio.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > B,
                                        <span class="tooltiptext" id="B">Estos se guardan en su dispositivo después de que se cierra la ventana del navegador. Nuestros servicios lo verán cada vez que nos haga una nueva visita.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > sonataSessionId,
                                        <span class="tooltiptext" id="sonataSessionId">ads.sonataplatform.com</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > sd-session-id,
                                        <span class="tooltiptext" id="sd-session-id">live.rezync.com - Registra datos de visitantes de múltiples visitas y de múltiples webs. Esta información es utilizada para medir la eficiencia de la publicidad en las webs.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > __stid,
                                        <span class="tooltiptext" id="__stid">
                                        Identificador único generado aleatoriamente: se utiliza para la elaboración de perfiles de intereses para publicidad.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > TapAd_3WAY_SYNCS,
                                        <span class="tooltiptext" id="__stid">TapAd_3WAY_SYNCS cookie de seguimiento de publicidad.</span> 
                                        
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > TapAd_TS,
                                        <span class="tooltiptext" id="__stid">TapAd cookie de seguimiento de publicidad.</span>  
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > __stidv,
                                        <span class="tooltiptext" id="__stid">Rastrea los perfiles sociales que tiene el Usuario.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > mt_misc,
                                        <span class="tooltiptext" >
                                        MediaMath utiliza esta cookie para guardar atributos sobre el navegador para la prevención del fraude y otras optimizaciones técnicas.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > fr,
                                        <span class="tooltiptext" id="__stid">Contiene una combinación de identificación única de usuario y navegador, que se utiliza para publicidad dirigida.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > admtr,
                                        <span class="tooltiptext" id="__stid">Adman Media - Usado en contexto con video-publicidad. La cookie limita el número de veces que se muestra el mismo anuncio a un usuario. La cookie también se utiliza para asegurar la relevancia del video-anuncio para el usuario específico.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > anProfile,
                                        <span class="tooltiptext" id="anProfile">pro-market.net - Este dominio es propiedad de Datonics, un corredor de datos con sede en EE. UU. Que vende datos para la segmentación de publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/HAPLB5S" > HAPLB5S, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_aud" > _cc_aud, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/ab" > ab, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/TapAd_DID" > TapAd_DID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/IDE" > IDE, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/personalization_id" > personalization_id, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_cc" > _cc_cc, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_dc" > _cc_dc, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/KRTBCOOKIE_xxxx" > KRTBCOOKIE_xxxx, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/euds" > euds, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/demdex" > demdex, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_id" > _cc_id, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/TDCPM" > TDCPM, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/dpm" > dpm, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/wfivefivec" > wfivefivec, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/skimGUID" > skimGUID, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > zync-uuid,
                                        <span class="tooltiptext" id="zync-uuid">live.rezync.com - Establece un identificar único para el visitante que permite a anunciantes externos (terceras partes) dirigirse al visitante con publicidad relevante.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > uu,
                                        <span class="tooltiptext" id="uu">adscale.de - Este dominio es propiedad de Adscale, una empresa alemana de publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > pi,
                                        <span class="tooltiptext" id="uu">ml314.com - Este dominio parece estar conectado a una empresa llamada Bombora, un negocio de inteligencia y focalización de audiencia con sede en EE. UU. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > tu,
                                        <span class="tooltiptext" id="uu">adscale.de - Este dominio es propiedad de Adscale, una empresa alemana de publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/skimCSP" > skimCSP. </a>
                                </p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <button id="set-cookie" type="button" class="form-submit-btn global-btn btn--dark">
                        <a href="/"><span class="btn__label">Aceptar</span></a>
                        <!--
                        <span class="svg-wrapper">
                            <svg class="gold-in" width="20px" height="13px" viewBox="0 0 60 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <title>Arrow right</title>
                                <path fill="#e5b052" d="M61.5,21.0012229 C61.5,21.1428603 61.4849919,21.285721 61.4558663,21.4283127 C61.4303624,21.5294036 61.4303624,21.5294036 61.4045212,21.6035806 C61.3931117,21.6366961 61.3931117,21.6366961 61.3826412,21.6687153 C61.377802,21.683353 61.377802,21.683353 61.3700945,21.7101624 C61.3551894,21.7629543 61.3551894,21.7629543 61.3265491,21.8371556 C61.2802411,21.9325695 61.2802411,21.9325695 61.2356165,22.0091233 L61.218312,22.0385176 C61.1971879,22.0752527 61.1971879,22.0752527 61.1875904,22.0941249 C61.1637725,22.1414847 61.1637725,22.1414847 61.1251472,22.2026949 C61.0656431,22.2905407 60.9998629,22.3680919 60.8986064,22.4743832 C60.8881532,22.4902312 60.8881532,22.4902312 60.8522509,22.5288516 L43.1421647,39.8660642 C42.2809914,40.7112298 40.8835925,40.7112298 40.0219404,39.8665568 C39.1588241,39.0233347 39.1588241,37.6551265 40.0217016,36.8102153 L53.9638111,23.1599883 L3.70701859,23.119374 C2.48772491,23.119374 1.5,22.1522148 1.5,20.9583083 C1.5,19.7642865 2.48784268,18.7964175 3.70729366,18.7964176 L53.9609215,18.8370305 L40.0251858,5.18986505 C39.1624859,4.34608877 39.1627895,2.97797612 40.0246828,2.13402921 C40.8850209,1.28871946 42.2833598,1.28871946 43.1452794,2.13365407 L60.8461643,19.4651631 C60.9498168,19.5657176 61.0423046,19.6762461 61.1281106,19.8008008 C61.1440802,19.8260433 61.1440802,19.8260433 61.1506896,19.8386986 C61.2230254,19.9493976 61.2827364,20.0581184 61.3334044,20.1771765 C61.3490006,20.2209904 61.3490006,20.2209904 61.355189,20.2445448 C61.403712,20.3731562 61.4349164,20.4715604 61.455822,20.5739188 C61.4794751,20.6879404 61.4911118,20.8071735 61.4943146,20.9339656 C61.4975533,20.9527485 61.4977118,20.9558899 61.5,21.0012229 Z"></path>
                            </svg>
                        </span>
                        -->
                    </button>
                    <p class="form-note">Puedes cambiar tus preferencias en cualquier momento siguiendo el enlace a “Política de Cookies” desde cualquier página en este sitio. Toda la información personal recolectada será utilizada como se describe en nuestro <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</p>
                </div>
               </div>`;
Vue.component('cookie-dev-component', {
    'template': $cookieDev,
    'data': function() {
        return {
            "all_cookies_allowed":false,
            "more_info_operativas":false,
            "more_info_performance":false,
            "more_info_tracking":false
        };
    },
    'created': function(){
        var _self = this
        _self.check_if_cookies_allowed()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
    },
    'methods': {
        "showMoreInfo1": function () {
            var _self = this
            
            if(_self.more_info_operativas == false){
                _self.more_info_operativas = true
            } else {
                _self.more_info_operativas = false
            }  
            
        },
        "showMoreInfo2": function () {
            var _self = this
            
            if(_self.more_info_performance == false){
                _self.more_info_performance = true
            } else {
                _self.more_info_performance = false
            }  
            
        },
        "showMoreInfo3": function () {
            var _self = this
            
            if(_self.more_info_tracking == false){
                _self.more_info_tracking = true
            } else {
                _self.more_info_tracking = false
            }
            
        },
        "getCookieTracking":function () {
            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                    }
                }
                return "";
            }
            function checkCookie() {
                var cookie = getCookie("Tracking");
                return cookie
            } 
            return checkCookie()
        },
        "getCookiePerformance":function () {
            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                    }
                }
                return "";
            }
            function checkCookie() {
                var cookie = getCookie("Performance");
                return cookie
            } 
            return checkCookie()
        },
        "reload": function(){window.location.reload(true);},
        "check_if_cookies_allowed": function () {
            var vm = this
            var ret = document.cookie != -1;
            vm.all_cookies_allowed = ret
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            }
        },
        "cookiePerformanceDatapush_opt_in": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: performance",
                    label: "opt-in"
                })
            } catch (e) {console.log(e)}            
        },
        "cookieTrackingDatapush_opt_in": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: tracking",
                    label: "opt-in"
                })
            } catch (e) {console.log(e)}            
        },
        "cookiePerformanceDatapush_opt_out": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: performance",
                    label: "opt-out"
                })
            } catch (e) {console.log(e)}            
        },
        "cookieTrackingDatapush_opt_out": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: tracking",
                    label: "opt-out"
                })
            } catch (e) {console.log(e)}            
        },
        "aceptarButtonDataPush": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Button Click-accept",
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PVCookie",
                    category: window.location.href,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        // "makeItPopup": function(id){
        //     var popup = document.getElementById(id);
        //     console.log("res",popup)
        //     popup.classList.toggle("show");    
        // }
           
        
    },
    'mounted': function(){
        var self = this
        $(function() { 
            if(self.all_cookies_allowed == false){
                $('.round-btn').html(
                    `<div></div>`
                );
                $('.round-btn-2').html(
                    `<div></div>`
                );
                $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);  
            } 
            $('.cb-value').click(function() {
                var vm = self
                var mainParent = $(this).parent('.toggle-btn');
                if( vm.all_cookies_allowed == true && $(mainParent).hasClass('active') ) {
                    vm.cookiePerformanceDatapush_opt_out()
                    self.Performance = 'false'
                    $(mainParent).removeClass('active');
                    $('.round-btn').html(
                        `<div></div>`
                    );
                    $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                } else if( vm.all_cookies_allowed == true && !$(mainParent).hasClass('active') ) {
                    vm.cookiePerformanceDatapush_opt_in()
                    self.Performance = 'true'
                    $(mainParent).addClass('active');
                    $('.round-btn').html(`<svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                        <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                        </svg>`);
                    $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>`);
                    $(this).attr('checked');
                } 
            });
            $('.cb-value-2').click(function() {
                var vm = self
                var mainParent = $(this).parent('.toggle-btn-2');
                if( vm.all_cookies_allowed == true && $(mainParent).hasClass('active')) {
                    vm.cookieTrackingDatapush_opt_out()
                    self.Tracking = 'false'
                    $(mainParent).removeClass('active');
                    $(this).removeAttr('checked');
                    $('.round-btn-2').html(
                        `<div></div>`
                    );
                    $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                } else if( vm.all_cookies_allowed == true && !$(mainParent).hasClass('active')) {
                    vm.cookieTrackingDatapush_opt_in()
                    self.Tracking = 'true'
                    $(mainParent).addClass('active');
                    $('.round-btn-2').html(`<svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                        <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                        </svg>`);
                    $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>`);
                    $(this).attr('checked');
                }
            });
            
        });
        
        // $('a').tooltip({
     
        //     disabled: true,
        //     close: function( event, ui ) { $(this).tooltip('disable'); }
        // });
        
        // $('a').on('click', function () {
        //     $(this).tooltip('enable').tooltip('open');
        // });
        
        document.getElementById('set-cookie').addEventListener('click', function() {
            function checkCookiePerformanceValue(){
                var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
                if(self.Performance == 'true'){
                    document.cookie = 'Performance=true;expires='+exp+'; path=/';
                } else if(self.Performance == 'false'){
                    document.cookie = 'Performance=false;expires='+exp+'; path=/';
                } else {
                    return false
                }
            }
            function checkCookieTrackingValue(){
                var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
                if(self.Tracking == 'true'){
                    document.cookie = 'Tracking=true;expires='+exp+'; path=/';
                } else if(self.Tracking == 'false'){
                    document.cookie = 'Tracking=false;expires='+exp+'; path=/';
                } else {
                    return false
                }
            }
            
            checkCookiePerformanceValue();
            checkCookieTrackingValue();
            self.aceptarButtonDataPush()
            window.location.href="/";
        });
    }
});

var $cookieDevLeads = `<div>
                <div class="service-content content-centered-cookies">
                    <h1 class="service-content__title">Cookies</h1>
                    <h3 class="service-content__subtitle">¿Qué cookies utilizamos?</h3>
                    <div class="service-content__intro">
                    <p>¿Qué son las cookies? Las cookies son pequeños archivos de texto que se colocan en tu dispositivo cuando visitas un sitio, las cuales se utilizan luego para identificar tu dispositivo para los fines descritos aquí. Las cookies establecidas por el propietario de un sitio se denominan “cookies de origen” (first party cookies). Las cookies establecidas por otras personas se denominan “cookies de terceros” (third party cookies). Las cookies de terceros permiten al tercero proporcionar características o funcionalidad en o a través del sitio (como análisis, publicidad y vídeos). Las partes que establecen estas cookies de terceros pueden reconocer tu dispositivo cuando visitas nuestro sitio y cuando visitas otros sitios. Utilizamos cookies (y otras tecnologías similares) en este sitio. Estas cookies se dividen en tres categorías. Las cookies de la primera categoría son necesarias. Las de las dos categorías restantes son opcionales: puedes decidir si deseas recibirlas de nosotros y, además, puedes utilizar esta herramienta para establecer tus preferencias. Puedes cambiar de opinión en cualquier momento y cambiar tus preferencias siguiendo el enlace a las preferencias de cookies desde cualquier página del sitio.</p>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" style="">
                        <legend class="legend-desktop over">Cookies operativas</legend>
                        <div class="cookie-set__status top">
                        <svg height="32px" width="32px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                            <g fill="none" fill-rule="evenodd">
                            <circle cx="16" cy="16" fill="#272a33" r="16"></circle>
                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#92b934" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"></path></g></svg>
                        <span class="cookie-set__status-label"><div v-if="this.all_cookies_allowed == true">On</div><div v-else >Off <br />Please allow cookies to turn on</div> </span>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div class="cookie-set__intro">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper">
                                <legend class="legend-desktop under">Cookies operativas</legend>
                                <p class="paragraph">Estas son estrictamente necesarias para el funcionamiento del sitio o para que las funciones que has elegido en él operen de una manera conveniente. Ejemplos: recordar quién eres, tus preferencias y tu configuración; de esta manera, no tendrás que introducirlas cada vez que cambies de página. Estas cookies son esenciales para la operación del sitio o para sus funciones; por este motivo, esta herramienta no ofrece la opción de rechazar su uso (opt-out). No obstante, si así lo deseas, puedes configurar tu navegador para que rechace todas las cookies, en cuyo caso es posible que el sitio no se muestre correctamente y que las funciones que selecciones no estén disponibles.</p>
                                <a style="padding-left: 0px;cursor:pointer;" @click="showMoreInfo1()" class="btn cookie-btn"  data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Conoce más</a>
                                <p v-if="more_info_operativas">Cookies en uso</p>
                                <p v-if="more_info_operativas">
                                    <a id="tooltip2"  style="text-decoration: underline;"  > SGTS,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_fbp" >_fbp, </a>
                                    
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _dc_gtm_UA-xxxxxxxx,
                                        <span class="tooltiptext" id="VtexRCSessionIdv7">
                                        Esta cookie está asociada con sitios que utilizan Google Tag Manager para cargar otros scripts y códigos en una página. Cuando se usa, puede considerarse estrictamente necesario, ya que sin él, es posible que otros scripts no funcionen correctamente. El final del nombre es un número único que también es un identificador de una cuenta de Google Analytics asociada.</span> 
                                    </a>   
                                    <a id="tooltip2" style="text-decoration: underline;"  > vtex_session,
                                        <span class="tooltiptext" id="vtex_session">VTEX - El Sistema de Sesiones identifica, a través de la cookie de sesión VTEX, la información de una sesión específica de un usuario navegando en la tienda.</span> 
                                    </a>
                                    
                                    <a id="tooltip2" style="text-decoration: underline;"  > _hjAbsoluteSessionInProgress,
                                        <span class="tooltiptext" >Hotjar - Esta cookie se utiliza para detectar la primera sesión de vista de página de un usuario. Este es un indicador de Verdadero / Falso establecido por la cookie. https://help.hotjar.com/hc/en-us/articles/115011789248-Hotjar-Cookie-Information</span> 
                                    </a>

                                    

                                    <a id="tooltip2" style="text-decoration: underline;"  > Performance,
                                        <span class="tooltiptext" id="Performance">Interna - desarrollador - Define si el usuario ha aceptado las cookies de desempeño.</span> 
                                    </a>

                                    <a id="tooltip2"  style="text-decoration: underline;"  > VtexFingerPrint,
                                        <span class="tooltiptext" id="VtexFingerPrint">VTEX - Es una cookie necesaria para Cookiebot de VTEX</span> 
                                    </a>


                                    <a id="tooltip2" style="text-decoration: underline;"  > VtexRCRequestCounter,
                                        <span class="tooltiptext" id="VtexRCRequestCounter">VTEX - Cookie que recolecta información anónima para dimensionar el tamaño y tiempo de respuesta de los servidores y mejorar la navegación.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > Tracking,
                                        <span class="tooltiptext" id="Tracking">Interna - Desarrollador - Define si el usuario ha aceptado las cookies de seguimiento.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > Technical,
                                        <span class="tooltiptext" id="Technical">Interna - Desarrollador - Cookie necesaria para operaciones en sitio, no opcional.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > VtexRCMacIdv7,
                                        <span class="tooltiptext" id="VtexRCMacIdv7">VTEX - Cookie que recolecta información anónima para dimensionar el tamaño y tiempo de respuesta de los servidores y mejorar la navegación.</span> 
                                    </a>

                                    
                                    <a id="tooltip2"  style="text-decoration: underline;"  > VTEXSC,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > _hjIncludedInSessionSample,
                                        <span class="tooltiptext" id="_hjIncludedInSessionSample">Hotjar - Esta cookie está configurada para que Hotjar sepa si ese visitante está incluido en el muestreo de datos definido por el límite de sesiones diarias de su sitio. - https://help.hotjar.com/hc/en-us/articles/115011789248-Hotjar-Cookie-Information</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > vtex_segment,
                                        <span class="tooltiptext" id="vtex_segment">VTEX - VTEX Sessions también crea la cookie VTEX_segment . Esta cookie contiene la información con las condiciones comerciales que se aplicarán a una sesión.</span> 
                                    </a>
                                    
                                    <a id="tooltip2"  style="text-decoration: underline;"  > janus_sid,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > _hjTLDTest,
                                        <span class="tooltiptext" >Hotjar - Almacena  diferentes alternativas de subcadena de URL hasta que falle. Para determinar la ruta de cookies más genérica que debemos usar, en lugar del nombre de host de la página. - https://help.hotjar.com/hc/en-us/articles/115011789248-Hotjar-Cookie-Information</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > VtexRCSessionIdv7,
                                        <span class="tooltiptext" id="VtexRCSessionIdv7">VTEX - Cookie que recolecta información anónima para dimensionar el tamaño y tiempo de respuesta de los servidores y mejorar la navegación.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/smd" > smd, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > ISSMB,
                                        <span class="tooltiptext" >Cookie de seguridad necesaria para el funcionamiento básico del sitio.</span> 
                                    </a>
                                    
                                </p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" >
                        <legend class="legend-desktop over">Cookies de rendimiento</legend>
                        <div class="wrap">
                            <div  class="cookie-set__status top">
                                <div v-if="this.getCookiePerformance() == 'true'  ">
                                    <div class="toggle-btn active">
                                    <input  type="checkbox" class="cb-value" />
                                    <span class="round-btn">
                                        <svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                                        </svg>
                                    </span>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="toggle-btn">
                                    <input  type="checkbox" class="cb-value" />
                                    <span class="round-btn">
                                        <div></div>
                                    </span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top:5px">
                                <div v-if="this.getCookiePerformance() == 'true' ">
                                    <div class="status-1">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="status-1">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div id="performance-cookie-name">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper collapsible-section" data-showmore="Show more" data-showless="Show less">
                                <legend class="legend-desktop under">Cookies de rendimiento</legend>
                                <p class="paragraph">Estas nos permiten entender cómo la gente usa el sitio y qué tan bien se desempeña este. Nos permiten mejorar el funcionamiento del sitio. Estas tecnologías nos dan únicamente información anónima: la información que recopilan se reduce para que, de esta manera, solo se identifique el área donde te encuentras. Esta información se agrega antes de ser enviada a nosotros. Puedes optar por aceptarlas (opt in) o rechazar su uso (opt out).</p>
                                <a style="padding-left: 0px;cursor:pointer;" @click="showMoreInfo2()" class="btn cookie-btn"  data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Conoce más</a>
                                <p v-if="more_info_performance">Cookies en uso</p>
                                <p v-if="more_info_performance">
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_hjid" > _hjid, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_gat_UA-nnnnnnn-nn" > _gat_UA-nnnnnnn-nn, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_ga" > _ga, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > C,
                                        <span class="tooltiptext" id="c">bidswitch.net - Este dominio es propiedad de IPONWEB y se utiliza para proporcionar una plataforma de licitación en tiempo real para publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_gclxxxx" > _gclxxxx,</a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_hjAbsoluteSessionInProgress" > _hjAbsoluteSessionInProgress,</a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_hjTLDTest" > _hjTLDTest,</a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _hjFirstSeen,
                                        <span class="tooltiptext" id="_hjFirstSeen">hotjar.com - Estas cookies son establecidas por HotJar. Se utilizan con fines analíticos para rastrear cómo los usuarios interactúan con la página web. El propósito principal de las cookies establecidas por este host es: Rendimiento.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/pid" > pid, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/BrowserId" > BrowserId, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/X-Salesforce-CHAT" > X-Salesforce-CHAT, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/BrowserId_sec" > BrowserId_sec, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_gid" > _gid. </a>
                                </p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <hr class="line">
                    <div class="container cookies">
                    <div class="col-3 contain" >
                        <legend class="legend-desktop over">Cookies de seguimiento</legend>
                        <div class="wrap">
                            <div  class="cookie-set__status top">
                                <div v-if="this.getCookieTracking() == 'true'  ">
                                    <div class="toggle-btn-2 active">
                                    <input  type="checkbox" class="cb-value-2" />
                                    <span class="round-btn-2">
                                        <svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                                            <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                                        </svg>
                                    </span>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="toggle-btn-2 ">
                                    <input  type="checkbox" class="cb-value-2" />
                                    <span class="round-btn-2">
                                        <div></div>
                                    </span>
                                    </div>
                                </div>
                            </div>
                            <div style="margin-top:5px">
                                <div v-if="this.getCookieTracking() == 'true' ">
                                    <div class="status-2">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>
                                    </div>
                                </div>
                                <div v-else>
                                    <div class="status-2">
                                        <div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-9 contain">
                        <div class="cookie-set top">
                        <div id="performance-cookie-name">
                            <div class="cookie-set__flex-wrapper">
                            <div class="legend-wrapper collapsible-section" data-showmore="Show more" data-showless="Show less">
                                <legend class="legend-desktop under">Cookies de seguimiento</legend>
                                <p class="paragraph">Estas rastrean el uso que haces de nuestro sitio y de otros sitios, de modo que podamos servirle a tu dispositivo, cuando visites este sitio u otros sitios, con información dirigida al uso que ellas han rastreado. Esto incluye mostrarte anuncios y personalizar el contenido de nuestras comunicaciones para que se adapten a tus preferencias. Esto puede implicar, también, la agregración de estos datos (para obtener una mejor comprensión del ambiente). Ejemplo: Uno de nuestros proveedores de servicios contrata a terceros para que rastreen y analicen el uso y volumen de información estadística de personas que visiten la plataforma digital. Puedes optar por aceptarlas (opt in) o rechazar su uso (opt out).</p>
                                <a style="padding-left: 0px;cursor:pointer;" @click="showMoreInfo3()" class="btn cookie-btn"  data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Conoce más</a>
                                <p v-if="more_info_tracking">Cookies en uso</p>
                                <p v-if="more_info_tracking">
                                    
                                    <a id="tooltip2" style="text-decoration: underline;"  > r1,
                                        <span class="tooltiptext" id="r1">Cookies temporales que viven en su dispositivo siempre que la ventana del navegador que estaba usando para navegar por nuestro sitio web. Una vez que se cierra la ventana del navegador, estas cookies dejan de existir en su dispositivo.</span> 
                                    </a>
                                    <a id="tooltip2"  > _hjIncludedInPageviewSample.
                                        <span class="tooltiptext" >Hotjar - Esta cookie está configurada para que Hotjar sepa si ese visitante está incluido en el muestreo de datos definido por el límite de visitas a la página de su sitio. https://help.hotjar.com/hc/en-us/articles/115011789248-Hotjar-Cookie-Information</span> 
                                    </a> 
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/IDE" > IDE, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > data-rk,
                                        <span class="tooltiptext" id="data-rk">Recopila datos sobre el comportamiento de los visitantes de varios sitios web para presentar anuncios más relevantes. Esto también permite que el sitio web limite el número de veces que se les muestra el mismo anuncio.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > audience,
                                        <span class="tooltiptext" id="C">spotxchange.com - Este dominio es propiedad de spotxchange y se utiliza para proporcionar una plataforma de licitación en tiempo real para publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/SERVERID" > SERVERID, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > rud,
                                        <span class="tooltiptext" id="rud">El objetivo principal de esta cookie es la publicidad. Esta cookie se utiliza para identificar a un usuario mediante una identificación alfanumérica. Registra los datos del usuario como IP, ubicación, sitio web visitado, anuncios en los que se hizo clic, etc.con esto, optimiza la visualización de anuncios en función del comportamiento del usuario.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/euds" > euds, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/anj" > anj, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMID" > CMID, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > tluid,
                                        <span class="tooltiptext" id="tluid">Asigna un número de identificación aleatorio a cada visitante para que se puedan guardar su consentimiento de política y sus preferencias de consentimiento de cookies.</span> 
                                    </a>
                                   
                                    <a id="tooltip2"  style="text-decoration: underline;"  > TapAd_3WAY_SYNCS,
                                        <span class="tooltiptext" id="__stid">TapAd_3WAY_SYNCS cookie de seguimiento de publicidad.</span> 
                                        
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > TapAd_TS,
                                        <span class="tooltiptext" id="__stid">TapAd_TS cookie de seguimiento de publicidad.</span> 
                                        
                                    </a>
                                   
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/test_cookie" > test_cookie, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMPS" > CMPS, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/rlas3" > rlas3, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/bku" > bku, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/tuuid" > tuuid, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > CMST,
                                        <span class="tooltiptext" id="CMST">Estos se guardan en su dispositivo después de que se cierra la ventana del navegador. Nuestros servicios lo verán cada vez que nos haga una nueva visita.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/uuid2" > uuid2, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > gdpr_status,
                                        <span class="tooltiptext" id="gdpr_status">Estas cookies se utilizan para ofrecer anuncios más relevantes para usted y sus intereses. También se utilizan para limitar la cantidad de veces que ve un anuncio y para ayudar a medir la eficacia de la campaña publicitaria.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/dpm" > dpm, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > pxrc,
                                        <span class="tooltiptext" id="pxrc">Recopila datos sobre el comportamiento de los visitantes de varios sitios web para presentar anuncios más relevantes. Esto también permite que el sitio web limite el número de veces que se les muestra el mismo anuncio.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/mako_uid" > mako_uid, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > C,
                                        <span class="tooltiptext" id="C">Estos se guardan en su dispositivo después de que se cierra la ventana del navegador. Nuestros servicios lo verán cada vez que nos haga una nueva visita.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/APID" > APID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/wfivefivec" > wfivefivec, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/bkdc" > bkdc, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/demdex" > demdex, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/uid" > uid, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > c,
                                        <span class="tooltiptext" id="c">Estos se guardan en su dispositivo después de que se cierra la ventana del navegador. Nuestros servicios lo verán cada vez que nos haga una nueva visita.</span> 
                                    </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > fr,
                                        <span class="tooltiptext" id="__stid">Contiene una combinación de identificación única de usuario y navegador, que se utiliza para publicidad dirigida.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > bkpa,
                                        <span class="tooltiptext" id="bkpa">Esta cookie almacena datos anónimos sobre el uso de la web por parte de los usuarios, así como actividades anónimas agregadas para crear un perfil que proporcione marketing y publicidad más específicos y relevantes.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/eud" > eud, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMRUM3" > CMRUM3, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/ruds" > ruds, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/tuuid_lu" > tuuid_lu, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/IDSYNC" > IDSYNC, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/auid" > auid, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > comp-1824,
                                        <span class="tooltiptext" id="fr">Esta cookie es principalmente para realizar publicidad basada en intereses y aumentar la relevancia de los anuncios que se le muestran.</span> 
                                    </a>
                                    
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_kuid_" > _kuid_, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/KRTBCOOKIE_xxxx" > KRTBCOOKIE_xxxx, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_id" > _cc_id, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/CMPRO" > CMPRO, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/everest_g_v2" > everest_g_v2,</a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/skimCSP" > skimCSP, </a>
                                    <a id="tooltip2"  style="text-decoration: underline;"  > _ssuma,
                                        <span class="tooltiptext" id="C">sitescout.com - Este dominio es propiedad de IPONWEB y se utiliza para proporcionar una plataforma de licitación en tiempo real para publicidad en línea. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > mt_misc,
                                        <span class="tooltiptext" id="mt_misc">Recopila datos sobre las visitas del usuario al sitio web, como qué páginas se han cargado. Los datos registrados se utilizan para anuncios dirigidos.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/mc" > mc, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_cc" > _cc_cc, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_dc" > _cc_dc, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/u2" > u2, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/PUBMDCID" > PUBMDCID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/PugT" > PugT, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/TapAd_DID" > TapAd_DID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/_cc_aud" > _cc_aud, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/csync" > csync, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > pi	,
                                        <span class="tooltiptext" id="visitor-id">.ml314.com Este dominio parece estar conectado a una empresa llamada Bombora, un negocio de inteligencia y focalización de audiencia con sede en EE. UU.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/skimGUID" > skimGUID, </a>

                                    <a id="tooltip2" style="text-decoration: underline;"  > APIDTS	,
                                        <span class="tooltiptext" id="visitor-id">Este es un Yahoo! Cookie utilizada en la segmentación de anuncios y contenido relevantes en Yahoo! plataforma.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > visitor-id,
                                        <span class="tooltiptext" id="visitor-id">La cookie de visitante incluye un ID de visitante único y el identificador único de su cuenta. Por ejemplo, el nombre de la cookie visit_id12345 almacena el ID de visitante 1010101010. El identificador de cuenta, 12345, asegura que el visitante sea rastreado en la cuenta correcta.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > aum,
                                        <span class="tooltiptext" id="visitor-id">Recopila información sobre cómo el usuario final utiliza el sitio web y cualquier publicidad que el usuario final haya visto antes de visitar dicho sitio web.</span> 
                                    </a>
                                    
                                    <a id="tooltip2" style="text-decoration: underline;"  > um2,
                                        <span class="tooltiptext" id="um2">Establece una identificación única para el visitante, que permite a los anunciantes externos orientar al visitante con publicidad relevante. Este servicio de emparejamiento es proporcionado por centros de publicidad de terceros, lo que facilita las ofertas en tiempo real para los anunciantes.</span> 
                                    </a>
                                   
                                    <a id="tooltip2"  style="text-decoration: underline;"  > B,
                                        <span class="tooltiptext" id="C">yahoo.com - Este dominio es propiedad de Yahoo. La principal actividad empresarial es: Búsqueda / Publicidad. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > A3,
                                        <span class="tooltiptext" id="A3">Recopila información sobre el comportamiento del usuario en varios sitios web. Esta información se utiliza para optimizar la relevancia de la publicidad en el sitio web.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > eyeblaster,
                                        <span class="tooltiptext" id="eyeblaster">serving-sys.com - Este dominio es propiedad de Sizmek (anteriormente DG MediaMind). Proporcionan servicios de publicidad dirigida multiplataforma. El objetivo principal de las cookies establecidas por este host es: segmentación / publicidad.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/uuid" > uuid, </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > zync-uuid,
                                        <span class="tooltiptext" id="zync-uuid">live.rezync.com - Establece un identificar único para el visitante que permite a anunciantes externos (terceras partes) dirigirse al visitante con publicidad relevante.</span> 
                                    </a>
                                    <a id="tooltip2" style="text-decoration: underline;"  > sd-session-id,
                                        <span class="tooltiptext" id="sd-session-id">live.rezync.com - Registra datos de visitantes de múltiples visitas y de múltiples webs. Esta información es utilizada para medir la eficiencia de la publicidad en las webs.</span> 
                                    </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/TDID" > TDID, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/TDCPM" > TDCPM, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/TestIfCookieP" > TestIfCookieP, </a>
                                    <a style="text-decoration: underline;" target="_blank" href="https://cookiepedia.co.uk/cookies/ab" > ab. </a>
                                </p>
                            </div>
                            </div>
                        </div>
                        </div>
                    </div>
                    </div>
                    <button id="set-cookie" type="button" class="form-submit-btn global-btn btn--dark">
                        <a href="/"><span class="btn__label">Aceptar</span></a>
                        <span class="svg-wrapper">
                            <svg class="gold-in" width="20px" height="13px" viewBox="0 0 60 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                <title>Arrow right</title>
                                <path fill="#e5b052" d="M61.5,21.0012229 C61.5,21.1428603 61.4849919,21.285721 61.4558663,21.4283127 C61.4303624,21.5294036 61.4303624,21.5294036 61.4045212,21.6035806 C61.3931117,21.6366961 61.3931117,21.6366961 61.3826412,21.6687153 C61.377802,21.683353 61.377802,21.683353 61.3700945,21.7101624 C61.3551894,21.7629543 61.3551894,21.7629543 61.3265491,21.8371556 C61.2802411,21.9325695 61.2802411,21.9325695 61.2356165,22.0091233 L61.218312,22.0385176 C61.1971879,22.0752527 61.1971879,22.0752527 61.1875904,22.0941249 C61.1637725,22.1414847 61.1637725,22.1414847 61.1251472,22.2026949 C61.0656431,22.2905407 60.9998629,22.3680919 60.8986064,22.4743832 C60.8881532,22.4902312 60.8881532,22.4902312 60.8522509,22.5288516 L43.1421647,39.8660642 C42.2809914,40.7112298 40.8835925,40.7112298 40.0219404,39.8665568 C39.1588241,39.0233347 39.1588241,37.6551265 40.0217016,36.8102153 L53.9638111,23.1599883 L3.70701859,23.119374 C2.48772491,23.119374 1.5,22.1522148 1.5,20.9583083 C1.5,19.7642865 2.48784268,18.7964175 3.70729366,18.7964176 L53.9609215,18.8370305 L40.0251858,5.18986505 C39.1624859,4.34608877 39.1627895,2.97797612 40.0246828,2.13402921 C40.8850209,1.28871946 42.2833598,1.28871946 43.1452794,2.13365407 L60.8461643,19.4651631 C60.9498168,19.5657176 61.0423046,19.6762461 61.1281106,19.8008008 C61.1440802,19.8260433 61.1440802,19.8260433 61.1506896,19.8386986 C61.2230254,19.9493976 61.2827364,20.0581184 61.3334044,20.1771765 C61.3490006,20.2209904 61.3490006,20.2209904 61.355189,20.2445448 C61.403712,20.3731562 61.4349164,20.4715604 61.455822,20.5739188 C61.4794751,20.6879404 61.4911118,20.8071735 61.4943146,20.9339656 C61.4975533,20.9527485 61.4977118,20.9558899 61.5,21.0012229 Z"></path>
                            </svg>
                        </span>
                    </button>
                    <p class="form-note">Puedes cambiar tus preferencias en cualquier momento siguiendo el enlace a “Política de Cookies” desde cualquier página en este sitio. Toda la información personal recolectada será utilizada como se describe en nuestro <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</p>
                </div>
               </div>`;
Vue.component('cookie-devleads-component', {
    'template': $cookieDevLeads,
    'data': function() {
        return {
            "all_cookies_allowed":false,
            "more_info_operativas":false,
            "more_info_performance":false,
            "more_info_tracking":false
        };
    },
    'created': function(){
        var _self = this
        _self.check_if_cookies_allowed()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
    },
    'methods': {
        "showMoreInfo1": function () {
            var _self = this
            
            if(_self.more_info_operativas == false){
                _self.more_info_operativas = true
            } else {
                _self.more_info_operativas = false
            }  
            
        },
        "showMoreInfo2": function () {
            var _self = this
            
            if(_self.more_info_performance == false){
                _self.more_info_performance = true
            } else {
                _self.more_info_performance = false
            }  
            
        },
        "showMoreInfo3": function () {
            var _self = this
            
            if(_self.more_info_tracking == false){
                _self.more_info_tracking = true
            } else {
                _self.more_info_tracking = false
            }
            
        },
        "getCookieTracking":function () {
            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                    }
                }
                return "";
            }
            function checkCookie() {
                var cookie = getCookie("Tracking");
                return cookie
            } 
            return checkCookie()
        },
        "getCookiePerformance":function () {
            function getCookie(cname) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for(var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                    }
                    if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                    }
                }
                return "";
            }
            function checkCookie() {
                var cookie = getCookie("Performance");
                return cookie
            } 
            return checkCookie()
        },
        "reload": function(){window.location.reload(true);},
        "check_if_cookies_allowed": function () {
            var vm = this
            var ret = document.cookie != -1;
            vm.all_cookies_allowed = ret
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            }
        },
        "cookiePerformanceDatapush_opt_in": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: performance",
                    label: "opt-in"
                })
            } catch (e) {console.log(e)}            
        },
        "cookieTrackingDatapush_opt_in": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: tracking",
                    label: "opt-in"
                })
            } catch (e) {console.log(e)}            
        },
        "cookiePerformanceDatapush_opt_out": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: performance",
                    label: "opt-out"
                })
            } catch (e) {console.log(e)}            
        },
        "cookieTrackingDatapush_opt_out": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Cookie type: tracking",
                    label: "opt-out"
                })
            } catch (e) {console.log(e)}            
        },
        "aceptarButtonDataPush": function () {
            try {
                window.dataLayer.push({
                    event: "cookieClick",
                    category: "Dialog (Cookie Settings)",
                    action: "Button Click-accept",
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PVCookie",
                    category: window.location.href,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "makeItPopup": function(id){
            var popup = document.getElementById(id);
            console.log("res",popup)
            popup.classList.toggle("show");    
        }    
        
    },
    'mounted': function(){
        var self = this
        $(function() { 
            if(self.all_cookies_allowed == false){
                $('.round-btn').html(
                    `<div></div>`
                );
                $('.round-btn-2').html(
                    `<div></div>`
                );
                $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);  
            } 
            $('.cb-value').click(function() {
                var vm = self
                var mainParent = $(this).parent('.toggle-btn');
                if( vm.all_cookies_allowed == true && $(mainParent).hasClass('active') ) {
                    vm.cookiePerformanceDatapush_opt_out()
                    self.Performance = 'false'
                    $(mainParent).removeClass('active');
                    $('.round-btn').html(
                        `<div></div>`
                    );
                    $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                } else if( vm.all_cookies_allowed == true && !$(mainParent).hasClass('active') ) {
                    vm.cookiePerformanceDatapush_opt_in()
                    self.Performance = 'true'
                    $(mainParent).addClass('active');
                    $('.round-btn').html(`<svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                        <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                        </svg>`);
                    $('.status-1').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>`);
                    $(this).attr('checked');
                } 
            });
            $('.cb-value-2').click(function() {
                var vm = self
                var mainParent = $(this).parent('.toggle-btn-2');
                if( vm.all_cookies_allowed == true && $(mainParent).hasClass('active')) {
                    vm.cookieTrackingDatapush_opt_out()
                    self.Tracking = 'false'
                    $(mainParent).removeClass('active');
                    $(this).removeAttr('checked');
                    $('.round-btn-2').html(
                        `<div></div>`
                    );
                    $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">Off</div>`);
                } else if( vm.all_cookies_allowed == true && !$(mainParent).hasClass('active')) {
                    vm.cookieTrackingDatapush_opt_in()
                    self.Tracking = 'true'
                    $(mainParent).addClass('active');
                    $('.round-btn-2').html(`<svg style="vertical-align: super;" width="24" height="24" viewBox="0 0 32 32">
                        <path d="m8 17.2337322 4.2303003 4.7662678 11.7696997-12" stroke="#ffffff" stroke-linecap="round" stroke-linejoin="round" stroke-width="3"></path>
                        </svg>`);
                    $('.status-2').html(`<div style="font-size: 14px;font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;">On</div>`);
                    $(this).attr('checked');
                }
            });
        });
        document.getElementById('set-cookie').addEventListener('click', function() {
            function checkCookiePerformanceValue(){
                var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
                if(self.Performance == 'true'){
                    document.cookie = 'Performance=true;expires='+exp+'; path=/';
                } else if(self.Performance == 'false'){
                    document.cookie = 'Performance=false;expires='+exp+'; path=/';
                } else {
                    return false
                }
            }
            function checkCookieTrackingValue(){
                var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
                if(self.Tracking == 'true'){
                    document.cookie = 'Tracking=true;expires='+exp+'; path=/';
                } else if(self.Tracking == 'false'){
                    document.cookie = 'Tracking=false;expires='+exp+'; path=/';
                } else {
                    return false
                }
            }
            
            checkCookiePerformanceValue();
            checkCookieTrackingValue();
            self.aceptarButtonDataPush()
            window.location.href="/";
        });
    }
});



var $footer = `<div>
                <section class="bottom" v-if="pagina != 'get-trial'">
                    IQOS es un dispositivo electrónico que, al calentar tabaco, entrega nicotina, la cual es adictiva, y no está libre de riesgo. Prohibida su venta a menores de edad.
                </section>
                <section class="bottom" v-else>
                    <span>¿Tienes dudas? Llámamos y con gusto te ayudaremos </span>
                    <a href="tel:8001476769" data-category="Clicks" data-action="Telephone link" data-label="tel:8001476769" data-event="Clic" class="tel"><svg viewBox="0 0 55 65"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h48.323v51.323H0z"/></clipPath></defs><g transform="rotate(28 12.047 48.32)" clip-path="url(#prefix__a)"><g data-name="Grupo 4"><path data-name="Trazado 3" d="M45.639 35.641a28.936 28.936 0 01-9.584-1.625 2.583 2.583 0 00-2.725.7L27.424 41A41.77 41.77 0 019.732 22.226l5.906-6.3a2.988 2.988 0 00.662-2.896 34.3 34.3 0 01-1.53-10.179A2.762 2.762 0 0012.081 0h-9.4A2.771 2.771 0 000 2.851c0 26.774 20.43 48.472 45.639 48.472a2.762 2.762 0 002.685-2.851v-9.98a2.762 2.762 0 00-2.685-2.851z" fill="#272a33"/></g></g></svg> <span>(800 1 476769)</span></a>
                    IQOS es un dispositivo electrónico que, al calentar tabaco, entrega nicotina, la cual es adictiva, y no está libre de riesgo. Prohibida su venta a menores de edad.
                </section>
                <footer>
                    <div class="container" :style="width_get_trial">
                        <div>
                            <img src="/arquivos/newIqosLogoWhite.png" alt="iqos" title="iqos" class="iqosBranco" />
                            <p>© 2021 Philip Morris Products SA <br />
                            Todos los derechos reservados</p>
                        </div>
                        <div>
                            <ul class="legal">
                                <li class="title">Legal</li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.pmiprivacy.com/es-la/consumer" data-event="Clic" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>
                                </li>
                                <li v-if="pagina != 'get-trial'"><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/terminos-condiciones.html" data-event="Clic" href="https://www.iqos.com/mx/es/terminos-condiciones.html" target="_blank">Términos y Condiciones</a>
                                </li>
                                
                                <li v-else><a data-category="Navigation (bottom)" data-action="Click link" data-label="/terminos-condiciones" data-event="Clic" href="/terminos-condiciones">Términos y Condiciones</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="/cookie" data-event="Clic" href="/cookie">Política de Cookies</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" data-event="Clic" href="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" target="_blank">Reglas de uso de Redes Sociales</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html" data-event="Clic" href="https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html" target="_blank">Términos y Condiciones UGC</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="/informacion" data-event="Clic" href="/informacion">Información Importante</a>
                                </li>
                            </ul>
                            <ul v-if="pagina == 'get-trial'" class="servicio_cliente">
                                <li class="title">Servicio al Cliente</li>
                                <li style="flex:auto;"><a data-action="Click link" data-label="/preguntas-frecuentes" data-event="Clic" href="/preguntas-frecuentes">Preguntas Frecuentes</a>
                                </li>
                            </ul>
                            <ul class="redes">
                                <li class="title">SÍGUENOS</li>
                                <li><a href="https://www.instagram.com/iqos_mx/" data-category="Outbound Link Clicks" data-action="https://www.instagram.com/iqos_mx/" :data-label="''+ pageTitle +' | https://www.instagram.com/iqos_mx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 34.204 34.204" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h34.204v34.204H0z"/></clipPath></defs><g clip-path="url(#prefix__a)" fill="#fff"><path data-name="Trazado 51" d="M24.014 0H10.19A10.2 10.2 0 000 10.19v13.824A10.2 10.2 0 0010.19 34.2h13.824A10.2 10.2 0 0034.2 24.014V10.19A10.2 10.2 0 0024.014 0zm6.749 24.014a6.749 6.749 0 01-6.749 6.749H10.19a6.749 6.749 0 01-6.749-6.749V10.19a6.749 6.749 0 016.749-6.749h13.824a6.749 6.749 0 016.749 6.749v13.824z"/><path data-name="Trazado 52" d="M17.102 11.28a5.822 5.822 0 105.822 5.822 5.829 5.829 0 00-5.822-5.822zm0 9.38a3.557 3.557 0 113.557-3.557 3.557 3.557 0 01-3.557 3.557z"/><circle data-name="Elipse 7" cx="2.896" cy="2.896" r="2.896" transform="translate(22.61 5.881)"/></g></svg> Instagram</a></li>
                                <li><a href="https://www.facebook.com/iqosmx/" data-category="Outbound Link Clicks" data-action="https://www.facebook.com/iqosmx/" :data-label="''+ pageTitle +' | https://www.facebook.com/iqosmx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 33 45" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h43.998v43.998H0z"/></clipPath></defs><g clip-path="url(#prefix__a)"><path data-name="facebook" d="M28.113 11.506H4.378a4.378 4.378 0 00-4.38 4.378V39.62a4.378 4.378 0 004.38 4.378h11.706l.02-11.611h-3.016a.712.712 0 01-.712-.709l-.014-3.743a.712.712 0 01.712-.714h3.011v-3.615c0-4.2 2.563-6.482 6.307-6.482h3.072a.712.712 0 01.712.712v3.154a.712.712 0 01-.711.712h-1.887c-2.036 0-2.43.967-2.43 2.387v3.131h4.474a.712.712 0 01.707.8l-.444 3.743a.712.712 0 01-.707.628h-4.01l-.02 11.611h6.965a4.378 4.378 0 004.378-4.378v-23.74a4.378 4.378 0 00-4.378-4.378z" fill="#fff"/></g></svg> Facebook</a></li>
                                <li><a href="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" data-category="Outbound Link Clicks" data-action="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" :data-label="''+ pageTitle +' | https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA'" data-event="Clic" target="_blank"><svg viewBox="0 0 47 33" width="25px"><path data-name="youtube" d="M36.038 0H9.446A9.446 9.446 0 000 9.446v13.293a9.446 9.446 0 009.446 9.446h26.592a9.446 9.446 0 009.446-9.446V9.446A9.446 9.446 0 0036.038 0zm-6.389 16.74l-12.438 5.932a.5.5 0 01-.714-.451V9.986a.5.5 0 01.725-.445l12.438 6.3a.5.5 0 01-.011.899z" fill="#fff"/></svg> Youtube</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="container cookie" v-if="!acepto">
                        <p>Utilizamos cookies para brindarte una experiencia personalizada (para que se adapte a tu comportamiento en línea en éste y otros sitios) para nuestros anuncios, contenido y comunicaciones; para mejorar el sitio; y recordar tus preferencias. Haz clic en &quot;Más información&quot; para más detalles o para modificar tus preferencias. Puedes cambiar de opinión en cualquier momento visitando &quot;Preferencias de cookies&quot;. Cualquier información personal sobre ti se utilizará como se describe en nuestro <a style="background:transparent;padding:0px;color:#fff;margin:0px;" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank" >Aviso de Privacidad.</a></p>
                        <a @click="reload()" class="btn cookie-btn" href="#" data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Acepto</a>
                        <a style="color:#fff;" :class="{ 'btn' : !popupIqos, 'btn' : popupIqos == 'si'}" href="/cookie" data-value="no" data-category="Dialog (Cookie Policy)" data-action="Button Click - cookie settings" data-label="MX" data-event="Clic" target="_blank">Más información</a>
                    </div>
                </footer>
            </div>`;
Vue.component('footer-component', {
    'template': $footer,
    'data': function() {

        return {
            "acepto": false,
            "pageTitle": "",
            "pagina": "",
            "popupIqos": this.$cookies.get('popupIqos'),
            "width_get_trial": "width:90%",
        };

    },
    'methods': {
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
                this.width_get_trial= "width:95%"
            }
        },
        "aceitarCookie": function() {
            var _self = this
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            $(".cookie-btn").click(function (event) {
                event.preventDefault()
                _self.$cookies.set('acepto', "yes", "2d")
                document.cookie = 'Performance=true;expires='+exp+'; path=/'
                document.cookie = 'Tracking=true;expires='+exp+'; path=/'
                document.cookie = 'Technical=true;expires='+exp+'; path=/'
                _self.acepto = true
            })

            if (_self.$cookies.get('acepto') == "yes") {
                _self.acepto = true
            } 

        },
        "pageTitlefn": function() {
            this.pageTitle = $("title").text()
        },
        "reload": function(){
            window.location.reload(true);
        }
    },
    'mounted': function(){
        this.aceitarCookie()
        this.pageTitlefn()
    },
    "watch": {},
    'computed': {},
    "created":function(){
        this.paginaStatus()
    }
});

var $footerAmbientePrueba = `<div>
                <section class="bottom" style="align-items:flex-end" v-if="pagina != 'get-trial'">
                    <div class="marco">
                        IQOS es un dispositivo electrónico que, al calentar tabaco, entrega nicotina, la cual es adictiva, y no está libre de riesgo. Prohibida su venta a menores de edad.
                    </div>
                </section>
                <section class="bottom" v-else>
                    <span>¿Tienes dudas? Llámamos y con gusto te ayudaremos </span>
                    <a href="tel:8001476769" data-category="Clicks" data-action="Telephone link" data-label="tel:8001476769" data-event="Clic" class="tel"><svg viewBox="0 0 55 65"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h48.323v51.323H0z"/></clipPath></defs><g transform="rotate(28 12.047 48.32)" clip-path="url(#prefix__a)"><g data-name="Grupo 4"><path data-name="Trazado 3" d="M45.639 35.641a28.936 28.936 0 01-9.584-1.625 2.583 2.583 0 00-2.725.7L27.424 41A41.77 41.77 0 019.732 22.226l5.906-6.3a2.988 2.988 0 00.662-2.896 34.3 34.3 0 01-1.53-10.179A2.762 2.762 0 0012.081 0h-9.4A2.771 2.771 0 000 2.851c0 26.774 20.43 48.472 45.639 48.472a2.762 2.762 0 002.685-2.851v-9.98a2.762 2.762 0 00-2.685-2.851z" fill="#272a33"/></g></g></svg> <span>(800 1 476769)</span></a>
                        <div class="marco">
                           IQOS es un dispositivo electrónico que, al calentar tabaco, entrega nicotina, la cual es adictiva, y no está libre de riesgo. Prohibida su venta a menores de edad.
                        </div>
                </section>
                <footer>
                    <div class="container" :style="width_get_trial">
                        <div>
                            <img src="/arquivos/iqos_blanco.png" alt="iqos" title="iqos" class="iqosBranco" />
                            <p>© 2019 Philip Morris Products SA <br />
                            Todos los derechos reservados</p>
                        </div>
                        <div class="footerPrueba" >
                            <ul class="legal">
                                <li class="title">Legal</li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.pmiprivacy.com/es-la/consumer" data-event="Clic" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>
                                </li>
                                <li v-if="pagina != 'get-trial'"><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/terminos-condiciones.html" data-event="Clic" href="https://www.iqos.com/mx/es/terminos-condiciones.html" target="_blank">Términos y Condiciones</a>
                                </li>
                                
                                <li v-else><a data-category="Navigation (bottom)" data-action="Click link" data-label="/terminos-condiciones" data-event="Clic" href="/terminos-condiciones">Términos y Condiciones</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="/cookie" data-event="Clic" href="/cookie">Política de Cookies</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" data-event="Clic" href="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" target="_blank">Reglas de uso de Redes Sociales</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html" data-event="Clic" href="https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html" target="_blank">Términos y Condiciones UGC</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="/informacion" data-event="Clic" href="/informacion">Información Importante</a>
                                </li>
                            </ul>
                            <ul v-if="pagina == 'get-trial'" class="servicio_cliente">
                                <li class="title">Servicio al Cliente</li>
                                <li style="flex:auto;"><a data-action="Click link" data-label="/preguntas-frecuentes" data-event="Clic" href="/preguntas-frecuentes">Preguntas Frecuentes</a>
                                </li>
                            </ul>
                            <ul class="redes footerPrueba">
                                <li class="title footerPrueba">SÍGUENOS</li>
                                <li><a href="https://www.instagram.com/iqos_mx/" data-category="Outbound Link Clicks" data-action="https://www.instagram.com/iqos_mx/" :data-label="''+ pageTitle +' | https://www.instagram.com/iqos_mx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 34.204 34.204" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h34.204v34.204H0z"/></clipPath></defs><g clip-path="url(#prefix__a)" fill="#fff"><path data-name="Trazado 51" d="M24.014 0H10.19A10.2 10.2 0 000 10.19v13.824A10.2 10.2 0 0010.19 34.2h13.824A10.2 10.2 0 0034.2 24.014V10.19A10.2 10.2 0 0024.014 0zm6.749 24.014a6.749 6.749 0 01-6.749 6.749H10.19a6.749 6.749 0 01-6.749-6.749V10.19a6.749 6.749 0 016.749-6.749h13.824a6.749 6.749 0 016.749 6.749v13.824z"/><path data-name="Trazado 52" d="M17.102 11.28a5.822 5.822 0 105.822 5.822 5.829 5.829 0 00-5.822-5.822zm0 9.38a3.557 3.557 0 113.557-3.557 3.557 3.557 0 01-3.557 3.557z"/><circle data-name="Elipse 7" cx="2.896" cy="2.896" r="2.896" transform="translate(22.61 5.881)"/></g></svg> Instagram</a></li>
                                <li><a href="https://www.facebook.com/iqosmx/" data-category="Outbound Link Clicks" data-action="https://www.facebook.com/iqosmx/" :data-label="''+ pageTitle +' | https://www.facebook.com/iqosmx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 33 45" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h43.998v43.998H0z"/></clipPath></defs><g clip-path="url(#prefix__a)"><path data-name="facebook" d="M28.113 11.506H4.378a4.378 4.378 0 00-4.38 4.378V39.62a4.378 4.378 0 004.38 4.378h11.706l.02-11.611h-3.016a.712.712 0 01-.712-.709l-.014-3.743a.712.712 0 01.712-.714h3.011v-3.615c0-4.2 2.563-6.482 6.307-6.482h3.072a.712.712 0 01.712.712v3.154a.712.712 0 01-.711.712h-1.887c-2.036 0-2.43.967-2.43 2.387v3.131h4.474a.712.712 0 01.707.8l-.444 3.743a.712.712 0 01-.707.628h-4.01l-.02 11.611h6.965a4.378 4.378 0 004.378-4.378v-23.74a4.378 4.378 0 00-4.378-4.378z" fill="#fff"/></g></svg> Facebook</a></li>
                                <li><a href="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" data-category="Outbound Link Clicks" data-action="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" :data-label="''+ pageTitle +' | https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA'" data-event="Clic" target="_blank"><svg viewBox="0 0 47 33" width="25px"><path data-name="youtube" d="M36.038 0H9.446A9.446 9.446 0 000 9.446v13.293a9.446 9.446 0 009.446 9.446h26.592a9.446 9.446 0 009.446-9.446V9.446A9.446 9.446 0 0036.038 0zm-6.389 16.74l-12.438 5.932a.5.5 0 01-.714-.451V9.986a.5.5 0 01.725-.445l12.438 6.3a.5.5 0 01-.011.899z" fill="#fff"/></svg> Youtube</a></li>
                                <li><a href="https://app.keysurvey.com/f/1451448/12ed/" target="_blank"> Cuéntanos de ti</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="container cookie" v-if="!acepto">
                        <p>Utilizamos cookies para brindarte una experiencia personalizada (para que se adapte a tu comportamiento en línea en éste y otros sitios) para nuestros anuncios, contenido y comunicaciones; para mejorar el sitio; y recordar tus preferencias. Haz clic en &quot;Más información&quot; para más detalles o para modificar tus preferencias. Puedes cambiar de opinión en cualquier momento visitando &quot;Preferencias de cookies&quot;. Cualquier información personal sobre ti se utilizará como se describe en nuestro <a style="background:transparent;padding:0px;color:#fff;margin:0px;" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank" >Aviso de Privacidad.</a></p>
                        <a @click="reload()" class="btn cookie-btn" href="#" data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Acepto</a>
                        <a style="color:#fff;" :class="{ 'btn' : !popupIqos, 'btn' : popupIqos == 'si'}" href="/cookie" data-value="no" data-category="Dialog (Cookie Policy)" data-action="Button Click - cookie settings" data-label="MX" data-event="Clic" target="_blank">Más información</a>
                    </div>
                </footer>
                </div>`;
Vue.component('footerambienteprueba-component', {
    'template': $footerAmbientePrueba,
    'data': function() {

        return {
            "acepto": false,
            "pageTitle": "",
            "pagina": "",
            "popupIqos": this.$cookies.get('popupIqos'),
            "width_get_trial": "width:90%"
        };

    },
    'methods': {
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
                this.width_get_trial= "width:95%"
            }
        },
        "aceitarCookie": function() {
            var _self = this
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            $(".cookie-btn").click(function (event) {
                event.preventDefault()
                _self.$cookies.set('acepto', "yes", "2d")
                document.cookie = 'Performance=true;expires='+exp+'; path=/'
                document.cookie = 'Tracking=true;expires='+exp+'; path=/'
                document.cookie = 'Technical=true;expires='+exp+'; path=/'
                _self.acepto = true
            })

            if (_self.$cookies.get('acepto') == "yes") {
                _self.acepto = true
            } 

        },
        "pageTitlefn": function() {
            this.pageTitle = $("title").text()
        },
        "reload": function(){
            window.location.reload(true);
        }
    },
    'mounted': function(){
        this.aceitarCookie()
        this.pageTitlefn()
    },
    "watch": {},
    'computed': {},
    "created":function(){
        this.paginaStatus()
    }
});

var $footerValtel = `<div>
                <section class="bottom" style="align-items:flex-end" v-if="pagina != 'get-trial'">
                    <div class="marco" style="display: block;">
                      <span style="font-weight: bolder;">Información importante: </span>  IQOS es un dispositivo electrónico que, al calentar tabaco, entrega nicotina, la cual es adictiva, y no está libre de riesgo. Prohibida su venta a menores de edad.
                    </div>
                </section>
                <section class="bottom" v-else>
                    <span>¿Tienes dudas? Llámamos y con gusto te ayudaremos </span>
                    <a href="tel:8001476769" data-category="Clicks" data-action="Telephone link" data-label="tel:8001476769" data-event="Clic" class="tel"><svg viewBox="0 0 55 65"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h48.323v51.323H0z"/></clipPath></defs><g transform="rotate(28 12.047 48.32)" clip-path="url(#prefix__a)"><g data-name="Grupo 4"><path data-name="Trazado 3" d="M45.639 35.641a28.936 28.936 0 01-9.584-1.625 2.583 2.583 0 00-2.725.7L27.424 41A41.77 41.77 0 019.732 22.226l5.906-6.3a2.988 2.988 0 00.662-2.896 34.3 34.3 0 01-1.53-10.179A2.762 2.762 0 0012.081 0h-9.4A2.771 2.771 0 000 2.851c0 26.774 20.43 48.472 45.639 48.472a2.762 2.762 0 002.685-2.851v-9.98a2.762 2.762 0 00-2.685-2.851z" fill="#272a33"/></g></g></svg> <span>(800 1 476769)</span></a>
                        <div class="marco">
                           IQOS es un dispositivo electrónico que, al calentar tabaco, entrega nicotina, la cual es adictiva, y no está libre de riesgo. Prohibida su venta a menores de edad.
                        </div>
                </section>
                <footer>
                    <div class="container" :style="width_get_trial">
                        <div>
                            <img src="/arquivos/newIqosLogoWhite.png" alt="iqos" title="iqos" class="iqosBranco" />
                            <p>© 2019 Philip Morris Products SA <br />
                            Todos los derechos reservados</p>
                        </div>
                        <div class="footerPrueba" >
                            <ul class="legal">
                                <li class="title">Legal</li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.pmiprivacy.com/es-la/consumer" data-event="Clic" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>
                                </li>
                                <li v-if="pagina != 'get-trial'"><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/terminos-condiciones.html" data-event="Clic" href="https://www.iqos.com/mx/es/terminos-condiciones.html" target="_blank">Términos y Condiciones</a>
                                </li>
                                
                                <li v-else><a data-category="Navigation (bottom)" data-action="Click link" data-label="/terminos-condiciones" data-event="Clic" href="/terminos-condiciones">Términos y Condiciones</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="/cookie" data-event="Clic" href="/cookie">Política de Cookies</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" data-event="Clic" href="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" target="_blank">Reglas de uso de Redes Sociales</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html" data-event="Clic" href="https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html" target="_blank">Términos y Condiciones UGC</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="/informacion" data-event="Clic" href="/informacion">Información Importante</a>
                                </li>
                            </ul>
                            <ul v-if="pagina == 'get-trial'" class="servicio_cliente">
                                <li class="title">Servicio al Cliente</li>
                                <li style="flex:auto;"><a data-action="Click link" data-label="/preguntas-frecuentes" data-event="Clic" href="/preguntas-frecuentes">Preguntas Frecuentes</a>
                                </li>
                            </ul>
                            <ul class="redes footerPrueba">
                                <li class="title footerPrueba">SÍGUENOS</li>
                                <li><a href="https://www.instagram.com/iqos_mx/" data-category="Outbound Link Clicks" data-action="https://www.instagram.com/iqos_mx/" :data-label="''+ pageTitle +' | https://www.instagram.com/iqos_mx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 34.204 34.204" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h34.204v34.204H0z"/></clipPath></defs><g clip-path="url(#prefix__a)" fill="#fff"><path data-name="Trazado 51" d="M24.014 0H10.19A10.2 10.2 0 000 10.19v13.824A10.2 10.2 0 0010.19 34.2h13.824A10.2 10.2 0 0034.2 24.014V10.19A10.2 10.2 0 0024.014 0zm6.749 24.014a6.749 6.749 0 01-6.749 6.749H10.19a6.749 6.749 0 01-6.749-6.749V10.19a6.749 6.749 0 016.749-6.749h13.824a6.749 6.749 0 016.749 6.749v13.824z"/><path data-name="Trazado 52" d="M17.102 11.28a5.822 5.822 0 105.822 5.822 5.829 5.829 0 00-5.822-5.822zm0 9.38a3.557 3.557 0 113.557-3.557 3.557 3.557 0 01-3.557 3.557z"/><circle data-name="Elipse 7" cx="2.896" cy="2.896" r="2.896" transform="translate(22.61 5.881)"/></g></svg> Instagram</a></li>
                                <li><a href="https://www.facebook.com/iqosmx/" data-category="Outbound Link Clicks" data-action="https://www.facebook.com/iqosmx/" :data-label="''+ pageTitle +' | https://www.facebook.com/iqosmx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 33 45" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h43.998v43.998H0z"/></clipPath></defs><g clip-path="url(#prefix__a)"><path data-name="facebook" d="M28.113 11.506H4.378a4.378 4.378 0 00-4.38 4.378V39.62a4.378 4.378 0 004.38 4.378h11.706l.02-11.611h-3.016a.712.712 0 01-.712-.709l-.014-3.743a.712.712 0 01.712-.714h3.011v-3.615c0-4.2 2.563-6.482 6.307-6.482h3.072a.712.712 0 01.712.712v3.154a.712.712 0 01-.711.712h-1.887c-2.036 0-2.43.967-2.43 2.387v3.131h4.474a.712.712 0 01.707.8l-.444 3.743a.712.712 0 01-.707.628h-4.01l-.02 11.611h6.965a4.378 4.378 0 004.378-4.378v-23.74a4.378 4.378 0 00-4.378-4.378z" fill="#fff"/></g></svg> Facebook</a></li>
                                <li><a href="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" data-category="Outbound Link Clicks" data-action="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" :data-label="''+ pageTitle +' | https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA'" data-event="Clic" target="_blank"><svg viewBox="0 0 47 33" width="25px"><path data-name="youtube" d="M36.038 0H9.446A9.446 9.446 0 000 9.446v13.293a9.446 9.446 0 009.446 9.446h26.592a9.446 9.446 0 009.446-9.446V9.446A9.446 9.446 0 0036.038 0zm-6.389 16.74l-12.438 5.932a.5.5 0 01-.714-.451V9.986a.5.5 0 01.725-.445l12.438 6.3a.5.5 0 01-.011.899z" fill="#fff"/></svg> Youtube</a></li>
                                <li><a href="https://app.keysurvey.com/f/1451448/12ed/" target="_blank"> Cuéntanos de ti</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="container cookie" v-if="!acepto">
                        <p>Utilizamos cookies para brindarte una experiencia personalizada (para que se adapte a tu comportamiento en línea en éste y otros sitios) para nuestros anuncios, contenido y comunicaciones; para mejorar el sitio; y recordar tus preferencias. Haz clic en &quot;Más información&quot; para más detalles o para modificar tus preferencias. Puedes cambiar de opinión en cualquier momento visitando &quot;Preferencias de cookies&quot;. Cualquier información personal sobre ti se utilizará como se describe en nuestro <a style="background:transparent;padding:0px;color:#fff;margin:0px;" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank" >Aviso de Privacidad.</a></p>
                        <a @click="reload()" class="btn cookie-btn" href="#" data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Acepto</a>
                        <a style="color:#fff;" :class="{ 'btn' : !popupIqos, 'btn' : popupIqos == 'si'}" href="/cookie" data-value="no" data-category="Dialog (Cookie Policy)" data-action="Button Click - cookie settings" data-label="MX" data-event="Clic" target="_blank">Más información</a>
                    </div>
                </footer>
                </div>`;
Vue.component('footervaltel-component', {
    'template': $footerValtel,
    'data': function() {

        return {
            "acepto": false,
            "pageTitle": "",
            "pagina": "",
            "popupIqos": this.$cookies.get('popupIqos'),
            "width_get_trial": "width:90%"
        };

    },
    'methods': {
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
                this.width_get_trial= "width:95%"
            }
        },
        "aceitarCookie": function() {
            var _self = this
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            $(".cookie-btn").click(function (event) {
                event.preventDefault()
                _self.$cookies.set('acepto', "yes", "2d")
                document.cookie = 'Performance=true;expires='+exp+'; path=/'
                document.cookie = 'Tracking=true;expires='+exp+'; path=/'
                document.cookie = 'Technical=true;expires='+exp+'; path=/'
                _self.acepto = true
            })

            if (_self.$cookies.get('acepto') == "yes") {
                _self.acepto = true
            } 

        },
        "pageTitlefn": function() {
            this.pageTitle = $("title").text()
        },
        "reload": function(){
            window.location.reload(true);
        }
    },
    'mounted': function(){
        this.aceitarCookie()
        this.pageTitlefn()
    },
    "watch": {},
    'computed': {},
    "created":function(){
        this.paginaStatus()
    }
});

var $footerOneTrust = `<div>
                <section class="bottom" style="align-items:flex-end" v-if="pagina != 'get-trial'">
                    <div class="marco">
                        IQOS es un dispositivo electrónico que, al calentar tabaco, entrega nicotina, la cual es adictiva, y no está libre de riesgo. Prohibida su venta a menores de edad.
                    </div>
                </section>
                <section class="bottom" v-else>
                    <span>¿Tienes dudas? Llámanos y con gusto te ayudaremos </span>
                    <a href="tel:8001476769" data-category="Clicks" data-action="Telephone link" data-label="tel:8001476769" data-event="Clic" class="tel"><svg viewBox="0 0 55 65"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h48.323v51.323H0z"/></clipPath></defs><g transform="rotate(28 12.047 48.32)" clip-path="url(#prefix__a)"><g data-name="Grupo 4"><path data-name="Trazado 3" d="M45.639 35.641a28.936 28.936 0 01-9.584-1.625 2.583 2.583 0 00-2.725.7L27.424 41A41.77 41.77 0 019.732 22.226l5.906-6.3a2.988 2.988 0 00.662-2.896 34.3 34.3 0 01-1.53-10.179A2.762 2.762 0 0012.081 0h-9.4A2.771 2.771 0 000 2.851c0 26.774 20.43 48.472 45.639 48.472a2.762 2.762 0 002.685-2.851v-9.98a2.762 2.762 0 00-2.685-2.851z" fill="#272a33"/></g></g></svg> <span>(800 1 476769)</span></a>
                        <div class="marco">
                            IQOS es un dispositivo electrónico que, al calentar tabaco, entrega nicotina, la cual es adictiva, y no está libre de riesgo. Prohibida su venta a menores de edad.
                        </div>
                </section>
                <footer>
                    <div class="container" :style="width_get_trial">
                        <div>
                            <img src="/arquivos/newIqosLogoWhite.png" alt="iqos" title="iqos" class="iqosBranco" />
                            <p>© 2021 Philip Morris Products SA <br />
                            Todos los derechos reservados</p>
                        </div>
                        <div class="footerPrueba" >
                            <ul class="legal">
                                <li class="title">Legal</li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.pmiprivacy.com/es-la/consumer" data-event="Clic" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>
                                </li>
                                <li v-if="pagina != 'get-trial'"><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/terminos-condiciones.html" data-event="Clic" href="https://www.iqos.com/mx/es/terminos-condiciones.html" target="_blank">Términos y Condiciones</a>
                                </li>
                                
                                <li v-else><a data-category="Navigation (bottom)" data-action="Click link" data-label="/terminos-condiciones" data-event="Clic" href="/terminos-condiciones">Términos y Condiciones</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="/cookie" data-event="Clic" ><button id="ot-sdk-btn"
                                class="ot-sdk-show-settings">Politica de Cookies</button></a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" data-event="Clic" href="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" target="_blank">Reglas de uso de Redes Sociales</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html" data-event="Clic" href="https://www.iqos.com/mx/es/terminos-y-condiciones-ugc.html" target="_blank">Términos y Condiciones UGC</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="/informacion" data-event="Clic" href="/informacion">Información Importante</a>
                                </li>
                            </ul>
                            <ul v-if="pagina == 'get-trial'" class="servicio_cliente">
                                <li class="title">Servicio al Cliente</li>
                                <li style="flex:auto;"><a data-action="Click link" data-label="/preguntas-frecuentes" data-event="Clic" href="/preguntas-frecuentes">Preguntas Frecuentes</a>
                                </li>
                            </ul>
                            <ul class="redes footerPrueba">
                                <li class="title footerPrueba">SÍGUENOS</li>
                                <li><a href="https://www.instagram.com/iqos_mx/" data-category="Outbound Link Clicks" data-action="https://www.instagram.com/iqos_mx/" :data-label="''+ pageTitle +' | https://www.instagram.com/iqos_mx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 34.204 34.204" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h34.204v34.204H0z"/></clipPath></defs><g clip-path="url(#prefix__a)" fill="#fff"><path data-name="Trazado 51" d="M24.014 0H10.19A10.2 10.2 0 000 10.19v13.824A10.2 10.2 0 0010.19 34.2h13.824A10.2 10.2 0 0034.2 24.014V10.19A10.2 10.2 0 0024.014 0zm6.749 24.014a6.749 6.749 0 01-6.749 6.749H10.19a6.749 6.749 0 01-6.749-6.749V10.19a6.749 6.749 0 016.749-6.749h13.824a6.749 6.749 0 016.749 6.749v13.824z"/><path data-name="Trazado 52" d="M17.102 11.28a5.822 5.822 0 105.822 5.822 5.829 5.829 0 00-5.822-5.822zm0 9.38a3.557 3.557 0 113.557-3.557 3.557 3.557 0 01-3.557 3.557z"/><circle data-name="Elipse 7" cx="2.896" cy="2.896" r="2.896" transform="translate(22.61 5.881)"/></g></svg> Instagram</a></li>
                                <li><a href="https://www.facebook.com/iqosmx/" data-category="Outbound Link Clicks" data-action="https://www.facebook.com/iqosmx/" :data-label="''+ pageTitle +' | https://www.facebook.com/iqosmx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 33 45" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h43.998v43.998H0z"/></clipPath></defs><g clip-path="url(#prefix__a)"><path data-name="facebook" d="M28.113 11.506H4.378a4.378 4.378 0 00-4.38 4.378V39.62a4.378 4.378 0 004.38 4.378h11.706l.02-11.611h-3.016a.712.712 0 01-.712-.709l-.014-3.743a.712.712 0 01.712-.714h3.011v-3.615c0-4.2 2.563-6.482 6.307-6.482h3.072a.712.712 0 01.712.712v3.154a.712.712 0 01-.711.712h-1.887c-2.036 0-2.43.967-2.43 2.387v3.131h4.474a.712.712 0 01.707.8l-.444 3.743a.712.712 0 01-.707.628h-4.01l-.02 11.611h6.965a4.378 4.378 0 004.378-4.378v-23.74a4.378 4.378 0 00-4.378-4.378z" fill="#fff"/></g></svg> Facebook</a></li>
                                <li><a href="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" data-category="Outbound Link Clicks" data-action="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" :data-label="''+ pageTitle +' | https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA'" data-event="Clic" target="_blank"><svg viewBox="0 0 47 33" width="25px"><path data-name="youtube" d="M36.038 0H9.446A9.446 9.446 0 000 9.446v13.293a9.446 9.446 0 009.446 9.446h26.592a9.446 9.446 0 009.446-9.446V9.446A9.446 9.446 0 0036.038 0zm-6.389 16.74l-12.438 5.932a.5.5 0 01-.714-.451V9.986a.5.5 0 01.725-.445l12.438 6.3a.5.5 0 01-.011.899z" fill="#fff"/></svg> Youtube</a></li>
                                <li><a href="https://app.keysurvey.com/f/1451448/12ed/" target="_blank"> Cuéntanos de ti</a></li>
                            </ul>
                        </div>
                    </div>
                   
                </footer>
                </div>`;
Vue.component('footer-one-trust-component', {
    'template': $footerOneTrust,
    'data': function() {

        return {
            "acepto": false,
            "pageTitle": "",
            "pagina": "",
            "popupIqos": this.$cookies.get('popupIqos'),
            "width_get_trial": "width:90%",
        };

    },
    'methods': {
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
                this.width_get_trial= "width:95%"
            }
        },
        "aceitarCookie": function() {
            var _self = this
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            $(".cookie-btn").click(function (event) {
                event.preventDefault()
                _self.$cookies.set('acepto', "yes", "2d")
                document.cookie = 'Performance=true;expires='+exp+'; path=/'
                document.cookie = 'Tracking=true;expires='+exp+'; path=/'
                document.cookie = 'Technical=true;expires='+exp+'; path=/'
                _self.acepto = true
            })

            if (_self.$cookies.get('acepto') == "yes") {
                _self.acepto = true
            } 

        },
        "pageTitlefn": function() {
            this.pageTitle = $("title").text()
        },
        "reload": function(){
            window.location.reload(true);
        }
    },
    'mounted': function(){
        this.aceitarCookie()
        this.pageTitlefn()
    },
    "watch": {},
    'computed': {},
    "created":function(){
        this.paginaStatus()
    }
});

var $footerPaginaRgm = `<div>
                
                <section class="bottom">
                    <div class="marco">
                        IQOS es un dispositivo electrónico que, al calentar tabaco, entrega nicotina, la cual es adictiva, y no está libre de riesgo. Prohibida su venta a menores de edad.
                    </div>
                </section>
                <footer>
                    <div class="container" :style="width_get_trial">
                        <div>
                            <img src="/arquivos/newIqosLogoWhite.png" alt="iqos" title="iqos" class="iqosBranco" />
                            <p>© 2019 Philip Morris Products SA <br />
                            Todos los derechos reservados</p>
                        </div>
                        <div class="footerPrueba" >
                            <ul class="legal">
                                <li class="title">Legal</li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.pmiprivacy.com/es-la/consumer" data-event="Clic" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>
                                </li>
                                <li v-if="pagina != 'get-trial'"><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/terminos-condiciones.html" data-event="Clic" href="https://www.iqos.com/mx/es/terminos-condiciones.html" target="_blank">Términos y Condiciones</a>
                                </li>
                                
                                <li v-else><a data-category="Navigation (bottom)" data-action="Click link" data-label="/terminos-condiciones" data-event="Clic" href="/terminos-condiciones">Términos y Condiciones</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="/cookie" data-event="Clic" href="/cookie">Política de Cookies</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" data-event="Clic" href="https://www.iqos.com/mx/es/uso-de-redes-sociales.html" target="_blank">Reglas de uso de Redes Sociales</a>
                                </li>
                                <li><a target="_blank" data-category="Navigation (bottom)" data-action="Click link" data-label="/terminos-y-condiciones" data-event="Clic" href="https://www.conoce-iqos.com/terminos-condiciones">Términos y Condiciones</a>
                                </li>
                                <li><a data-category="Navigation (bottom)" data-action="Click link" data-label="/informacion" data-event="Clic" href="/informacion">Información Importante</a>
                                </li>
                            </ul>
                            
                            <ul class="redes footerPrueba">
                                <li class="title footerPrueba">SÍGUENOS</li>
                                <li><a href="https://www.instagram.com/iqos_mx/" data-category="Outbound Link Clicks" data-action="https://www.instagram.com/iqos_mx/" :data-label="''+ pageTitle +' | https://www.instagram.com/iqos_mx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 34.204 34.204" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h34.204v34.204H0z"/></clipPath></defs><g clip-path="url(#prefix__a)" fill="#fff"><path data-name="Trazado 51" d="M24.014 0H10.19A10.2 10.2 0 000 10.19v13.824A10.2 10.2 0 0010.19 34.2h13.824A10.2 10.2 0 0034.2 24.014V10.19A10.2 10.2 0 0024.014 0zm6.749 24.014a6.749 6.749 0 01-6.749 6.749H10.19a6.749 6.749 0 01-6.749-6.749V10.19a6.749 6.749 0 016.749-6.749h13.824a6.749 6.749 0 016.749 6.749v13.824z"/><path data-name="Trazado 52" d="M17.102 11.28a5.822 5.822 0 105.822 5.822 5.829 5.829 0 00-5.822-5.822zm0 9.38a3.557 3.557 0 113.557-3.557 3.557 3.557 0 01-3.557 3.557z"/><circle data-name="Elipse 7" cx="2.896" cy="2.896" r="2.896" transform="translate(22.61 5.881)"/></g></svg> Instagram</a></li>
                                <li><a href="https://www.facebook.com/iqosmx/" data-category="Outbound Link Clicks" data-action="https://www.facebook.com/iqosmx/" :data-label="''+ pageTitle +' | https://www.facebook.com/iqosmx/'" data-event="Clic" target="_blank"><svg viewBox="0 0 33 45" width="25px"><defs><clipPath id="prefix__a"><path fill="none" d="M0 0h43.998v43.998H0z"/></clipPath></defs><g clip-path="url(#prefix__a)"><path data-name="facebook" d="M28.113 11.506H4.378a4.378 4.378 0 00-4.38 4.378V39.62a4.378 4.378 0 004.38 4.378h11.706l.02-11.611h-3.016a.712.712 0 01-.712-.709l-.014-3.743a.712.712 0 01.712-.714h3.011v-3.615c0-4.2 2.563-6.482 6.307-6.482h3.072a.712.712 0 01.712.712v3.154a.712.712 0 01-.711.712h-1.887c-2.036 0-2.43.967-2.43 2.387v3.131h4.474a.712.712 0 01.707.8l-.444 3.743a.712.712 0 01-.707.628h-4.01l-.02 11.611h6.965a4.378 4.378 0 004.378-4.378v-23.74a4.378 4.378 0 00-4.378-4.378z" fill="#fff"/></g></svg> Facebook</a></li>
                                <li><a href="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" data-category="Outbound Link Clicks" data-action="https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA" :data-label="''+ pageTitle +' | https://www.youtube.com/channel/UCQ0NR6SLSmgfrV5TicZXqaA'" data-event="Clic" target="_blank"><svg viewBox="0 0 47 33" width="25px"><path data-name="youtube" d="M36.038 0H9.446A9.446 9.446 0 000 9.446v13.293a9.446 9.446 0 009.446 9.446h26.592a9.446 9.446 0 009.446-9.446V9.446A9.446 9.446 0 0036.038 0zm-6.389 16.74l-12.438 5.932a.5.5 0 01-.714-.451V9.986a.5.5 0 01.725-.445l12.438 6.3a.5.5 0 01-.011.899z" fill="#fff"/></svg> Youtube</a></li>
                                <li><a href="https://app.keysurvey.com/f/1451448/12ed/" target="_blank"> Cuéntanos de ti</a></li>
                            </ul>
                        </div>
                    </div>
                    <div class="container cookie" v-if="!acepto">
                        <p>Utilizamos cookies para brindarte una experiencia personalizada (para que se adapte a tu comportamiento en línea en éste y otros sitios) para nuestros anuncios, contenido y comunicaciones; para mejorar el sitio; y recordar tus preferencias. Haz clic en &quot;Más información&quot; para más detalles o para modificar tus preferencias. Puedes cambiar de opinión en cualquier momento visitando &quot;Preferencias de cookies&quot;. Cualquier información personal sobre ti se utilizará como se describe en nuestro <a style="background:transparent;padding:0px;color:#fff;margin:0px;" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank" >Aviso de Privacidad.</a></p>
                        <a @click="reload()" class="btn cookie-btn" href="#" data-category="Dialog (Cookie Policy)" data-action="Button Click - accept" data-label="MX" data-event="Clic">Acepto</a>
                        <a style="color:#fff;" :class="{ 'btn' : !popupIqos, 'btn' : popupIqos == 'si'}" href="/cookie" data-value="no" data-category="Dialog (Cookie Policy)" data-action="Button Click - cookie settings" data-label="MX" data-event="Clic" target="_blank">Más información</a>
                    </div>
                </footer>
                </div>`;
Vue.component('footer-paginargm-component', {
    'template': $footerPaginaRgm,
    'data': function() {

        return {
            "acepto": false,
            "pageTitle": "",
            "pagina": "",
            "popupIqos": this.$cookies.get('popupIqos'),
            "width_get_trial": "width:90%",
        };

    },
    'methods': {
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
                this.width_get_trial= "width:95%"
            }
        },
        "aceitarCookie": function() {
            var _self = this
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            $(".cookie-btn").click(function (event) {
                event.preventDefault()
                _self.$cookies.set('acepto', "yes", "2d")
                document.cookie = 'Performance=true;expires='+exp+'; path=/'
                document.cookie = 'Tracking=true;expires='+exp+'; path=/'
                document.cookie = 'Technical=true;expires='+exp+'; path=/'
                _self.acepto = true
            })

            if (_self.$cookies.get('acepto') == "yes") {
                _self.acepto = true
            } 

        },
        "pageTitlefn": function() {
            this.pageTitle = $("title").text()
        },
        "reload": function(){
            window.location.reload(true);
        }
    },
    'mounted': function(){
        this.aceitarCookie()
        this.pageTitlefn()
    },
    "watch": {},
    'computed': {},
    "created":function(){
        this.paginaStatus()
    }
});

var $leads = `<div>
            <section v-bind:class="{ pagina }" class="principal" v-if="pagina == 'lp1' || pagina == 'rgm'">
                <div>
                    <img src="/arquivos/iqos_blanco.png" class="iqosBranco" alt="iqos" title="iqos" />
                    <h1>Es un dispositivo que calienta el tabaco en lugar de quemarlo, esto lo convierte en una mejor opción para consumir tabaco.</h1>
                    <h1>Sin fuego. Sin humo. Sin ceniza.</h1>
                    <a href='#' class='btn agendarllamada' data-category="Navigation (top)" data-action="Click icon" data-label="MX" data-event="Clic">Saber Más</a>
                    <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                </div>
                <div class="img">
                    <img src="/arquivos/lp1-img1.png" class="banneriqos" alt="iqos" title="iqos" />
                </div>
            </section>
            <section v-bind:class="{ pagina }" class="principal" v-if="pagina == 'lp2'">
                <div>
                    <img src="/arquivos/iqoslogo.png" class="logo" alt="iqos" title="iqos" />
                    <h1>INNOVACIÓN Y TECNOLOGÍA PARA CONSUMIR TABACO SIN QUEMARLO.</h1>
                    <img src="/arquivos/lp2-img2.jpg" class="img2" />
                    <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                    <div class="bottomColor"></div>
                </div>
            </section>




            <div v-if="window.width > 500">
                <section class="coronavirus">
                    <h4><span>Te llevamos nuestros productos a tu casa.</span>¿Tienes tiempo? Pide tu demostración de IQOS por videollamada.</h4>
                </section>
            </div>
            <div v-else>
                <section class="coronavirus-mobile">
                    <h4 style="padding-bottom:0px" >Si tienes tiempo, pide ahora tu demostración de producto IQOS por videollamada.</h4>
                    <h4 class="daClick"  style="padding-bottom:0px;font-weight: bolder" >Da click aquí para llamarnos</h4>
                    <h4>Horario de atención: Lunes a Domingo de 08:00 - 22:00 hrs</h4>
                </section>
            </div>




            <section class="video">
                <h3>¿Cómo funciona IQOS?</h3>
                <p>A diferencia de los cigarros electrónicos que utilizan nicotina líquida, IQOS calienta tabaco.</p>
                <div class="container" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                    <img src="/arquivos/capaVIdeo.jpg" />
                    <video width="320" height="240" id="myVideo">
                    <source src="https://pmi.23video.com/60445192/61994802/5b0970a4d44ba0766df76233bf73c5d3/video_1080p/heat-no-burn-video-updated-april-video.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                    </video>
                </div>
            </section>
            <section class="container boxes">
                <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                    <li><div><img src='/arquivos/fire.png' /></div><p><b>Sin fuego</b> El tabaco no se quema y se libera su sabor real.</p></li>
                    <li><div><img src='/arquivos/smoke.jpg' /></div><p><b>Sin humo y sin ceniza</b> Habrá menos olor en ti, en tu ropa y en tu entorno.</p></li>
                    <li><div><img src='/arquivos/users-group.png' /></div><p><b>Sin olor a cigarro</b> Es menos probable que molestes a la gente a tu alrededor.</p></li>
                    <li class="tooth"><div><img src='/arquivos/tooth.png' /></div><p><b>No más manchas en tus dientes* </b> Causadas por el<br /> humo del cigarro.</p></li>
                </ul>
                <p v-if="pagina == 'rgm'" class="disclaimer">*Si los dientes ya están manchados por el humo del cigarro, cambiarse a IQOS no hará que se revierta el color de esas manchas. Por lo tanto, este beneficio va a ser más aparente después de un blanqueamiento profesional de dientes y después de haberse cambiado por completo a IQOS.</p>
            </section>

            <section id="pasos" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">
                <h4>¡Descubre IQOS sin salir de casa!</h4>
                <p>Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti. ¿Tienes tiempo? agenda una demostración de producto por <b>videollamada</b>.</p>
                <ul>
                    <li><span>1</span> Completa el formulario de abajo (20 segundos)</li>
                    <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>2</span> Te enviaremos un correo</li>
                    <li v-if="pagina == 'rgm'"><span>2</span> Recibirás un correo con un <b>cupón de descuento por $300 pesos*</b></li>
                    <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>3</span> Solicita tu demostración de
                    IQOS</li>
                    <li v-if="pagina == 'rgm'"><span>3</span> Un Experto IQOS se pondrá en contacto contigo</li>
                    <li><span>4</span> ¡Descubre IQOS!</li>
                </ul>
                <p v-if="pagina == 'rgm'">*Cupón valido para la compra de tu primer Kit IQOS.</p>
            </section>
            
            <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">
                
                <div class="two">
                    
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                        <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                        <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">

                        <!--  ----------------------------------------------------------------------  -->
                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                        <!--  these lines if you wish to test in debug mode.                          -->
                        <!--  <input type="hidden" name="debug" value=1>                              -->
                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                        <!--  ----------------------------------------------------------------------  -->

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                        
                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                        <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                            <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                        </div>

                        <fieldset>
                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition> 

                        <p v-if="pagina == 'lp1' || pagina == 'lp2'" class="disclaimer">*Si los dientes ya están manchados por el humo del cigarro, cambiarse a IQOS no hará que se revierta el color de esas manchas. Por lo tanto, este beneficio va a ser más aparente después de un blanqueamiento profesional de dientes y después de haberse cambiado por completo a IQOS.</p>
                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
    
                    <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                </div>
                
            </section>
            </div>`;
Vue.component('template-component', {
    'template': $leads,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "GAtransactionId":"",
            "showModal":true

        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_term == undefined){
                    _self.term = "1"
                } else {
                   _self.term = utms.utm_term
                } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
               
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },
        "llamar": function () {
            var _self = this
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
       
            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }

            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});

var $conoce = `<div>
                    <section class="coronavirus" style="order:2;">
                    <h4>Por tiempo limitado, <b> regístrate para recibir más información de IQOS y recibe $300 MXN </b> de descuento para la compra de tu primer Kit IQOS.</h4>
                    </section>

                    <section v-bind:class="{ pagina }" class="principal version_no_logo" satyle="order:3;" v-if="pagina == 'lp1' || pagina == 'rgm'">
                    <span class="agendaAtBottomRgmDec col-2 prueba">
                                <a href='#' style="width:100%;margin-bottom: 20px;color: #000;background: #ffffff" class='btn agendarllamada rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">QUIERO REGISTRARME</a>
                            </span>
                                <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                    </section>

                    <section v-bind:class="{ pagina }" class="principal" v-if="pagina == 'lp2'">
                    <div>
                        <img src="/arquivos/iqoslogo.png" class="logo" alt="iqos" title="iqos" />
                        <h1>INNOVACIÓN Y TECNOLOGÍA PARA CONSUMIR TABACO SIN QUEMARLO.</h1>
                        <img src="/arquivos/lp2-img2.jpg" class="img2" />
                        <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                        <div class="bottomColor"></div>
                    </div>
                    </section>

                    <section id="pasos" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'rgm'">
                    <h4>Regístrate para conocer IQOS y recibir $300 MXN*</h4>
                    <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                    <ul>
                        <li><span>1</span> Completa el formulario de abajo (20 segundos)</li>
                        <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>2</span> Te enviaremos un correo</li>
                        <li v-if="pagina == 'rgm'"><span>2</span> Recibirás un correo con un <b>cupón de descuento por $300 pesos*</b></li>
                        <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>3</span> Solicita tu demostración de
                        IQOS</li>
                        <li v-if="pagina == 'rgm'"><span>3</span> Un Experto IQOS se pondrá en contacto contigo</li>
                        <li><span>4</span> ¡Descubre IQOS!</li>
                    </ul>
                    <p v-if="pagina == 'rgm'" style="font-size:10px">Promoción vigente al 31 de diciembre de 2020. Consulta <a style="color:blue" href="/terminos-condiciones">Términos y Condiciones</a>.</span> </p>
                    </section>

                    <section id="prueba" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'lp1' || pagina == 'lp2'">
                    <h4 style="margin-top:20px;">Regístrate para conocer IQOS y recibir $300 MXN*</h4>
                    <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                    <div v-if="window.width > 767">
                        <ul class="refer-a-friend__box-items">
                            <li class="refer-a-friend__box-item">
                                <div class="refer-a-friend__item-icon">
                                    <svg width="40px" height="63px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                    <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                    <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                    <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>                        
                                </div>
                                <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                                <p class="refer-a-friend__item--info">Completa el formulario de abajo (20 segundos).</p>
                            </li>
                            <li class="refer-a-friend__box-item">
                                <div class="refer-a-friend__item-icon">
                                <svg width="55px" height="59px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(845.000000, 332.000000)">
                                                    <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                    <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="refer-a-friend__item-text">Recibe tu cupón de descuento por $300 MXN*</div>
                                <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                            </li>
                            <li class="refer-a-friend__box-item">
                                <div class="refer-a-friend__item-icon">
                                    <svg width="61px" height = "61px">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                                <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                    <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                    <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                    <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                    <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="refer-a-friend__item-text">Canjea tu cupón de descuento</div>
                                <p class="refer-a-friend__item--info">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                            </li>
                        </ul>
                    </div>
                    <div v-else>
                        <div class="refer-a-friend__box-wrapper">
                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                    <svg width="25px" height="30px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                    <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                    <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                    <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                            border-left: solid 1px;
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario de abajo (20 segundos).</p>
                                </div>
                            </div>


                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                    <svg width="25px" height="45px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(845.000000, 332.000000)">
                                                    <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                    <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu cupón de descuento por $300 MXN*</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                            border-left: solid 1px;
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                                </div>
                            </div>


                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                    <div class="refer-a-friend__item-icon">
                                        <svg width="25px" height="25px" viewBox="0 0 61 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                                    <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                        <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                        <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                        <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                        <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                                    </g>
                                                </g>
                                            </g>
                                        </svg>
                                    </div>
                                </div>
                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Canjea tu cupón de descuento</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                            border-left: solid 1px;
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="ambiente_prueba" style="font-size:10px" >Promoción vigente al 31 de diciembre de 2020. Consulta <a style="color:blue" target="_blank"  href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a>.</span></p>
                    </section>

                    <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">

                    <div class="two">
                        
                        <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                            <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                            <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                            <input type=hidden name="oid" value="00D4P000000h9QV">
                            <input type=hidden name="retURL" value="http://www.iqos.com">
                            <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">

                            <!--  ----------------------------------------------------------------------  -->
                            <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                            <!--  these lines if you wish to test in debug mode.                          -->
                            <!--  <input type="hidden" name="debug" value=1>                              -->
                            <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                            <!--  ----------------------------------------------------------------------  -->

                            <label class="lb-input" for="first_name">NOMBRE*</label>
                            <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                            <label class="lb-input" for="last_name">Apellido(s)*</label>
                            <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                            <label class="lb-input" for="email">Email*</label>
                            <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                            
                            <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                            <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                            <div class="none">
                                <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                            </div>

                            <fieldset>

                                <label for="00N4P00000GZEGJ">
                                    <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                    <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                                </label>
                                <label for="00N4P000008mN8e">
                                    <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                    <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                </label>
                            </fieldset>

                            <div class="btn form-btn">
                                <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                            </div>

                            <transition name="fade">
                                <div v-if="Msnenvio" class="envio errors">
                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>{{ Msnenvio }}</b>
                                </div>
                            </transition>    
                        </form>

                        <transition name="fade">
                            <div v-if="errors.length" class="errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>Para continuar, por favor revisa lo siguiente:</b>
                                <ul>
                                    <li v-for="error in errors">{{ error }}</li>
                                </ul>
                            </div>    
                        </transition>  

                        <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                    </div>    
                    </section>

                    <section id="queEsIqosVideo" class="video">
                        <h3>¿Qué es IQOS?</h3>
                        <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                        <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                            <img src="/arquivos/Que es IQOS 2.4 Plus exito(Thumbnail).jpg" />
                            <video width="320" height="240" id="myVideo">
                            <source src="https://pmi.23video.com/64968568/65417230/d1674608d69d4c4cc83afe5b48c3db8e/video_hd/b235068iqoswhatisiqos24plusmxes-mx6-1-video.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                            </video>  
                        </div>
                    </section>
                    <section class="video" >
                        <div style="position: relative;
                         text-align:center;">
                            <a id="toForm" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">REGÍSTRATE</a>
                        </div>
                    </section>

                    <section class="container boxes">
                    <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                    <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                        <li><div><img src='/arquivos/fire.png' /></div><p><b>Sin fuego</b> El tabaco no se quema y se libera su sabor real.</p></li>
                        <li><div><img src='/arquivos/smoke.jpg' /></div><p><b>Sin humo y sin ceniza</b> Habrá menos olor en ti, en tu ropa y en tu entorno.</p></li>
                        <li><div><img src='/arquivos/users-group.png' /></div><p><b>Sin olor a cigarro</b> Es menos probable que molestes a la gente a tu alrededor.</p></li>
                        <li class="tooth"><div><img src='/arquivos/tooth.png' /></div><p><b>No más manchas en tus dientes* </b> Causadas por el<br /> humo del cigarro.</p></li>
                    </ul>
                    <p class="disclaimer" style="font-size:10px">*Información importante: Si los dientes ya están manchados, cambiar a IQOS no eliminará el color de esas manchas. Fuente: Estudio de laboratorio no clínico llevado a cabo en Suiza con dientes humanos y los compuestos dentales más comúnmente usados. Al contrario de las condiciones del mundo real, los dientes no fueron expuestos a otras sustancias que pueden producir manchas, como café, té o vino, las cuales podrían influenciar los resultados.</p>
                    </section>
                </div>`;
Vue.component('conoce-template-component', {
    'template': $conoce,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "MENOSOLOR200",
            "GAtransactionId":""

        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                // if(utms.utm_term == undefined){
                //     _self.term = "checkboxfumador"
                // } else {
                //    _self.term = utms.utm_term
                // } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
               
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },
        "llamar": function () {
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
            if(_self.pagina == "rgm"){
                _self.descuento = "RGMOCT20"
            }
            if(_self.pagina == "rgm"){
                concatination = _self.medium
            }
            console.log(_self.descuento, "final descount code")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.emailVerifiedNB = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        _self.GA_clientId()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function (){
            $("#toForm").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#form").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});

var $leadsreplica = `<div>
            <section v-bind:class="{ pagina }" class="principal" v-if="pagina == 'lp1' || pagina == 'rgm'">
                <div>
                    <img src="/arquivos/iqos_blanco.png" class="iqosBranco" alt="iqos" title="iqos" />
                    <h1>Es un dispositivo que calienta el tabaco en lugar de quemarlo, esto lo convierte en una mejor opción para consumir tabaco.</h1>
                    <h1>Sin fuego. Sin humo. Sin ceniza.</h1>
                    <a href='#' class='btn agendarllamada' data-category="Navigation (top)" data-action="Click icon" data-label="MX" data-event="Clic">Saber Más</a>
                    <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                </div>
                <div class="img">
                    <img src="/arquivos/lp1-img1.png" class="banneriqos" alt="iqos" title="iqos" />
                </div>
            </section>
            <section v-bind:class="{ pagina }" class="principal" v-if="pagina == 'lp2'">
                <div>
                    <img src="/arquivos/iqoslogo.png" class="logo" alt="iqos" title="iqos" />
                    <h1>INNOVACIÓN Y TECNOLOGÍA PARA CONSUMIR TABACO SIN QUEMARLO.</h1>
                    <img src="/arquivos/lp2-img2.jpg" class="img2" />
                    <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                    <div class="bottomColor"></div>
                </div>
            </section>
            <div v-if="window.width > 500">
                <section class="coronavirus">
                    <h4><span>Te llevamos nuestros productos a tu casa.</span>¿Tienes tiempo? Pide tu demostración de IQOS por videollamada.</h4>
                </section>
            </div>
            <div v-else>
                <section class="coronavirus-mobile">
                    <h4 style="padding-bottom:0px" >Si tienes tiempo, pide ahora tu demostración de producto IQOS por videollamada.</h4>
                    <h4 class="daClick"  style="padding-bottom:0px;font-weight: bolder" >Da click aquí para llamarnos</h4>
                    <h4>Horario de atención: Lunes a Domingo de 08:00 - 22:00 hrs</h4>
                </section>
            </div>
            <section class="video">
                <h3>¿Cómo funciona IQOS?</h3>
                <p>A diferencia de los cigarros electrónicos que utilizan nicotina líquida, IQOS calienta tabaco.</p>
                <div class="container" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                    <img src="/arquivos/capaVIdeo.jpg" />
                    <video width="320" height="240" id="myVideo">
                    <source src="https://pmi.23video.com/60445192/61994802/5b0970a4d44ba0766df76233bf73c5d3/video_1080p/heat-no-burn-video-updated-april-video.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                    </video>
                </div>
            </section>
            <section class="container boxes">
                <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                    <li><div><img src='/arquivos/fire.png' /></div><p><b>Sin fuego</b> El tabaco no se quema y se libera su sabor real.</p></li>
                    <li><div><img src='/arquivos/smoke.jpg' /></div><p><b>Sin humo y sin ceniza</b> Habrá menos olor en ti, en tu ropa y en tu entorno.</p></li>
                    <li><div><img src='/arquivos/users-group.png' /></div><p><b>Sin olor a cigarro</b> Es menos probable que molestes a la gente a tu alrededor.</p></li>
                    <li class="tooth"><div><img src='/arquivos/tooth.png' /></div><p><b>No más manchas en tus dientes* </b> Causadas por el<br /> humo del cigarro.</p></li>
                </ul>
                <p v-if="pagina == 'rgm'" class="disclaimer">*Si los dientes ya están manchados por el humo del cigarro, cambiarse a IQOS no hará que se revierta el color de esas manchas. Por lo tanto, este beneficio va a ser más aparente después de un blanqueamiento profesional de dientes y después de haberse cambiado por completo a IQOS.</p>
            </section>

            <section id="pasos" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">
                <h4>¡Descubre IQOS sin salir de casa!</h4>
                <p>Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti. ¿Tienes tiempo? agenda una demostración de producto por <b>videollamada</b>.</p>
                <ul>
                    <li><span>1</span> Completa el formulario de abajo (20 segundos)</li>
                    <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>2</span> Te enviaremos un correo</li>
                    <li v-if="pagina == 'rgm'"><span>2</span> Recibirás un correo con un <b>cupón de descuento por $300 pesos*</b></li>
                    <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>3</span> Solicita tu demostración de
                    IQOS</li>
                    <li v-if="pagina == 'rgm'"><span>3</span> Un Experto IQOS se pondrá en contacto contigo</li>
                    <li><span>4</span> ¡Descubre IQOS!</li>
                </ul>
                <p v-if="pagina == 'rgm'">*Cupón valido para la compra de tu primer Kit IQOS.</p>
            </section>
            
            <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">
                
                <div class="two">
                    
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                        <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                        <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">

                        <!--  ----------------------------------------------------------------------  -->
                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                        <!--  these lines if you wish to test in debug mode.                          -->
                        <!--  <input type="hidden" name="debug" value=1>                              -->
                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                        <!--  ----------------------------------------------------------------------  -->

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                        
                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                        <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                        </div>

                        <fieldset>
                            <label for="mayor_de_edad">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="mayor_de_edad" name="mayor_de_edad" type="checkbox" value="1" />
                                <span>Declaro que soy fumador mayor de dieciocho (18) años.</span>
                            </label>
                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition> 

                        <p v-if="pagina == 'lp1' || pagina == 'lp2'" class="disclaimer">*Si los dientes ya están manchados por el humo del cigarro, cambiarse a IQOS no hará que se revierta el color de esas manchas. Por lo tanto, este beneficio va a ser más aparente después de un blanqueamiento profesional de dientes y después de haberse cambiado por completo a IQOS.</p>
                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
    
                    <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                </div>
                
            </section>
            </div>`;
Vue.component('template-component-replica', {
    'template': $leadsreplica,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false

        };

    },
    'methods': {
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                // if(utms.utm_term == undefined){
                //     _self.term = "checkboxfumador"
                // } else {
                //    _self.term = utms.utm_term
                // } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
               
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },
        "llamar": function () {
            var _self = this
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }

            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+"checkbox"+_self.publicidad+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});



var $conoceReplica = `<div>
                    <section class="coronavirus" style="order:2;">
                    <h4>Por tiempo limitado, <b> regístrate para recibir más información de IQOS y recibe $300 MXN </b> de descuento para la compra de tu primer Kit IQOS.</h4>
                    </section>

                    <section v-bind:class="{ pagina }" class="principal version_no_logo" satyle="order:3;" v-if="pagina == 'lp1' || pagina == 'rgm'">
                    <span class="agendaAtBottomRgmDec col-2 prueba">
                                <a href='#' style="width:100%;margin-bottom: 20px;color: #000;background: #ffffff" class='btn agendarllamada rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">QUIERO REGISTRARME</a>
                            </span>
                                <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                    </section>

                    <section v-bind:class="{ pagina }" class="principal" v-if="pagina == 'lp2'">
                    <div>
                        <img src="/arquivos/iqoslogo.png" class="logo" alt="iqos" title="iqos" />
                        <h1>INNOVACIÓN Y TECNOLOGÍA PARA CONSUMIR TABACO SIN QUEMARLO.</h1>
                        <img src="/arquivos/lp2-img2.jpg" class="img2" />
                        <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                        <div class="bottomColor"></div>
                    </div>
                    </section>

                    <section id="pasos" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'rgm'">
                    <h4>Regístrate para conocer IQOS y recibir $300 MXN*</h4>
                    <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                    <ul>
                        <li><span>1</span> Completa el formulario de abajo (20 segundos)</li>
                        <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>2</span> Te enviaremos un correo</li>
                        <li v-if="pagina == 'rgm'"><span>2</span> Recibirás un correo con un <b>cupón de descuento por $200 pesos*</b></li>
                        <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>3</span> Solicita tu demostración de
                        IQOS</li>
                        <li v-if="pagina == 'rgm'"><span>3</span> Un Experto IQOS se pondrá en contacto contigo</li>
                        <li><span>4</span> ¡Descubre IQOS!</li>
                    </ul>
                    <p v-if="pagina == 'rgm'" style="font-size:10px">Promoción vigente al 31 de diciembre de 2021. Consulta <a style="color:blue" href="/terminos-condiciones">Términos y Condiciones</a>.</span> </p>
                    </section>

                    <section id="prueba" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'lp1' || pagina == 'lp2'">
                    <h4 style="margin-top:20px;">Regístrate para conocer IQOS y recibir $300 MXN*</h4>
                    <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                    <div v-if="window.width > 767">
                        <ul class="refer-a-friend__box-items">
                            <li class="refer-a-friend__box-item">
                                <div class="refer-a-friend__item-icon">
                                    <svg width="40px" height="63px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                    <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                    <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                    <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>                        
                                </div>
                                <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                                <p class="refer-a-friend__item--info">Completa el formulario de abajo (20 segundos).</p>
                            </li>
                            <li class="refer-a-friend__box-item">
                                <div class="refer-a-friend__item-icon">
                                <svg width="55px" height="59px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(845.000000, 332.000000)">
                                                    <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                    <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="refer-a-friend__item-text">Recibe tu cupón de descuento por $300 MXN*</div>
                                <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                            </li>
                            <li class="refer-a-friend__box-item">
                                <div class="refer-a-friend__item-icon">
                                    <svg width="61px" height = "61px">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                                <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                    <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                    <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                    <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                    <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="refer-a-friend__item-text">Canjea tu cupón de descuento</div>
                                <p class="refer-a-friend__item--info">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                            </li>
                        </ul>
                    </div>
                    <div v-else>
                        <div class="refer-a-friend__box-wrapper">
                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                    <svg width="25px" height="30px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                    <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                    <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                    <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                            border-left: solid 1px;
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario de abajo (20 segundos).</p>
                                </div>
                            </div>


                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                    <svg width="25px" height="45px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(845.000000, 332.000000)">
                                                    <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                    <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu cupón de descuento por $300 MXN*</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                            border-left: solid 1px;
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                                </div>
                            </div>


                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                    <div class="refer-a-friend__item-icon">
                                        <svg width="25px" height="25px" viewBox="0 0 61 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                                    <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                        <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                        <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                        <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                        <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                                    </g>
                                                </g>
                                            </g>
                                        </svg>
                                    </div>
                                </div>
                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Canjea tu cupón de descuento</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                            border-left: solid 1px;
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="ambiente_prueba" style="font-size:10px" >Promoción vigente al 31 de diciembre de 2020. Consulta <a style="color:blue" target="_blank"  href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a>.</span></p>
                    </section>

                    <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">

                    <div class="two">
                        
                        <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                            <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                            <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                            <input type=hidden name="oid" value="00D4P000000h9QV">
                            <input type=hidden name="retURL" value="http://www.iqos.com">
                            <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">

                            <!--  ----------------------------------------------------------------------  -->
                            <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                            <!--  these lines if you wish to test in debug mode.                          -->
                            <!--  <input type="hidden" name="debug" value=1>                              -->
                            <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                            <!--  ----------------------------------------------------------------------  -->

                            <label class="lb-input" for="first_name">NOMBRE*</label>
                            <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                            <label class="lb-input" for="last_name">Apellido(s)*</label>
                            <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                            <label class="lb-input" for="email">Email*</label>
                            <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                            
                            <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                            <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                            <div class="none">
                                <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                            </div>

                            <fieldset>

                                <label for="00N4P00000GZEGJ">
                                    <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                    <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                                </label>
                                <label for="00N4P000008mN8e">
                                    <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                    <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                </label>
                            </fieldset>

                            <div class="btn form-btn">
                                <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                            </div>

                            <transition name="fade">
                                <div v-if="Msnenvio" class="envio errors">
                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>{{ Msnenvio }}</b>
                                </div>
                            </transition>    
                        </form>

                        <transition name="fade">
                            <div v-if="errors.length" class="errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>Para continuar, por favor revisa lo siguiente:</b>
                                <ul>
                                    <li v-for="error in errors">{{ error }}</li>
                                </ul>
                            </div>    
                        </transition>  

                        <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                    </div>    
                    </section>

                    <section id="queEsIqosVideo" class="video">
                        <h3>¿Qué es IQOS?</h3>
                        <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                        <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                            <img src="/arquivos/Que es IQOS 2.4 Plus exito(Thumbnail).jpg" />
                            <video width="320" height="240" id="myVideo">
                            <source src="https://pmi.23video.com/64968568/65417230/d1674608d69d4c4cc83afe5b48c3db8e/video_hd/b235068iqoswhatisiqos24plusmxes-mx6-1-video.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                            </video>  
                        </div>
                    </section>
                    <section class="video" >
                        <div style="position: relative;
                         text-align:center;">
                            <a id="toForm" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">REGÍSTRATE</a>
                        </div>
                    </section>

                    <section class="container boxes">
                    <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                    <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                        <li><div><img src='/arquivos/fire.png' /></div><p><b>Sin fuego</b> El tabaco no se quema y se libera su sabor real.</p></li>
                        <li><div><img src='/arquivos/smoke.jpg' /></div><p><b>Sin humo y sin ceniza</b> Habrá menos olor en ti, en tu ropa y en tu entorno.</p></li>
                        <li><div><img src='/arquivos/users-group.png' /></div><p><b>Sin olor a cigarro</b> Es menos probable que molestes a la gente a tu alrededor.</p></li>
                        <li class="tooth"><div><img src='/arquivos/tooth.png' /></div><p><b>No más manchas en tus dientes* </b> Causadas por el<br /> humo del cigarro.</p></li>
                    </ul>
                    <p class="disclaimer" style="font-size:10px">*Información importante: Si los dientes ya están manchados, cambiar a IQOS no eliminará el color de esas manchas. Fuente: Estudio de laboratorio no clínico llevado a cabo en Suiza con dientes humanos y los compuestos dentales más comúnmente usados. Al contrario de las condiciones del mundo real, los dientes no fueron expuestos a otras sustancias que pueden producir manchas, como café, té o vino, las cuales podrían influenciar los resultados.</p>
                    </section>
                </div>`;
Vue.component('conoce-replica-template-component', {
    'template': $conoceReplica,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "MENOSOLOR200",
            "GAtransactionId":""

        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                // if(utms.utm_term == undefined){
                //     _self.term = "checkboxfumador"
                // } else {
                //    _self.term = utms.utm_term
                // } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
               
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },
        "llamar": function () {
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
            if(_self.pagina == "rgm"){
                _self.descuento = "RGMOCT20"
            }
            if(_self.pagina == "rgm"){
                concatination = _self.medium
            }
            console.log(_self.descuento, "final descount code")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.emailVerifiedNB = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        _self.GA_clientId()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function (){
            $("#toForm").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#form").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});



//conoce pase a leadsAmbientePruebaConoce/template-component-ambiente-prueba-conoce de leadsConoce/template-component-conoce
var $leadsAmbientePruebaConoce = `<div>
                
                <section class="coronavirus">
                <h4>Por tiempo limitado, <b> regístrate para recibir más información de IQOS y recibe $300 MXN </b> de descuento para la compra de tu primer Kit IQOS.</h4>
                </section>
                
                
                <section v-bind:class="{ pagina }" class="principal version_prueba" v-if="pagina == 'lp1' || pagina == 'rgm'">
                    <span class="agendaAtBottomRgmDec col-2 prueba">
                        <a href='#' style="width:100%;margin-bottom: 20px;color: #000;background: #ffffff" class='btn agendarllamada rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                    </span>
                    <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
            </section>
            <section v-bind:class="{ pagina }" class="principal" v-if="pagina == 'lp2'">
                <div>
                    <img src="/arquivos/iqoslogo.png" class="logo" alt="iqos" title="iqos" />
                    <h1>INNOVACIÓN Y TECNOLOGÍA PARA CONSUMIR TABACO SIN QUEMARLO.</h1>
                    <img src="/arquivos/lp2-img2.jpg" class="img2" />
                    <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                    <div class="bottomColor"></div>
                </div>
            </section>
            <section id="pasos" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'rgm'">
                <h4>Regístrate para conocer IQOS y recibir $300 MXN*</h4>
                <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                <ul>
                    <li><span>1</span> Completa el formulario de abajo (20 segundos)</li>
                    <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>2</span> Te enviaremos un correo</li>
                    <li v-if="pagina == 'rgm'"><span>2</span> Recibirás un correo con un <b>cupón de descuento por $300 pesos*</b></li>
                    <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>3</span> Solicita tu demostración de
                    IQOS</li>
                    <li v-if="pagina == 'rgm'"><span>3</span> Un Experto IQOS se pondrá en contacto contigo</li>
                    <li><span>4</span> ¡Descubre IQOS!</li>
                </ul>
                <p v-if="pagina == 'rgm'" style="font-size:10px">Promoción vigente al 31 de diciembre de 2020. Consulta <a style="color:blue" href="/terminos-condiciones">Términos y Condiciones</a>.</span> </p>
            </section>
            
            
            
            <section id="prueba" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'lp1' || pagina == 'lp2'">
                <h4 style="margin-top:20px;">Regístrate para conocer IQOS y recibir $300 MXN*</h4>
                <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                <div v-if="window.width > 767">
                    <ul class="refer-a-friend__box-items">
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <svg width="40px" height="63px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                            <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                            </g>
                                        </g>
                                    </g>
                                </svg>                        
                            </div>
                            <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                            <p class="refer-a-friend__item--info">Completa el formulario de abajo (20 segundos).</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                            <svg width="55px" height="59px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                            <g id="Group" transform="translate(845.000000, 332.000000)">
                                                <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                            <div class="refer-a-friend__item-text">Recibe tu cupón de descuento por $300 MXN*</div>
                            <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <svg width="61px" height = "61px">
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                            <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                            <div class="refer-a-friend__item-text">Canjea tu cupón de descuento</div>
                            <p class="refer-a-friend__item--info">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                        </li>
                    </ul>
                </div>
                <div v-else>
                    <div class="refer-a-friend__box-wrapper">
                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                <svg width="25px" height="30px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                            <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                            <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                        border-left: solid 1px;
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario de abajo (20 segundos).</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                <svg width="25px" height="45px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                            <g id="Group" transform="translate(845.000000, 332.000000)">
                                                <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                            <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu cupón de descuento por $300 MXN*</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                        border-left: solid 1px;
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                <div class="refer-a-friend__item-icon">
                                    <svg width="25px" height="25px" viewBox="0 0 61 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                                <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                    <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                    <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                    <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                    <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                            </div>
                            <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Canjea tu cupón de descuento</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                        border-left: solid 1px;
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <p style="font-size:10px">Promoción vigente al 31 de diciembre de 2020. Consulta <a style="color:blue" target="_blank"  href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a>.</span> </p>
            </section>
           
            <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">
                
                <div class="two">
                    
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                        <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                        <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">

                        <!--  ----------------------------------------------------------------------  -->
                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                        <!--  these lines if you wish to test in debug mode.                          -->
                        <!--  <input type="hidden" name="debug" value=1>                              -->
                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                        <!--  ----------------------------------------------------------------------  -->

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                        
                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                        <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                        </div>

                        <fieldset>
                           
                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition> 

                        
                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
    
                    <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                </div>
                
            </section>


            <section id="queEsIqosVideo" class="video">
                <h3>¿Qué es IQOS?</h3>
                <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                    <img src="/arquivos/Thumbnail IQOS 2.4 (b).png" />
                    <video width="320" height="240" id="myVideo">
                    <source src="https://pmi.23video.com/60445188/64076978/2e13e86ee5ce47a80c7a2395b5cb687d/video_hd/vgt-iqos-24-plus-web-1-video.mp4 " type="video/mp4">
                    Your browser does not support the video tag.
                    </video>  
                </div>
            </section>
            <section class="video" >
                <div style="position: relative;
                    text-align:center;">
                    <a id="toForm" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">REGÍSTRATE</a>
                </div>
            </section>
            <section class="container boxes">
                <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                    <li><div><img src='/arquivos/fire.png' /></div><p><b>Sin fuego</b> El tabaco no se quema y se libera su sabor real.</p></li>
                    <li><div><img src='/arquivos/smoke.jpg' /></div><p><b>Sin humo y sin ceniza</b> Habrá menos olor en ti, en tu ropa y en tu entorno.</p></li>
                    <li><div><img src='/arquivos/users-group.png' /></div><p><b>Sin olor a cigarro</b> Es menos probable que molestes a la gente a tu alrededor.</p></li>
                    <li class="tooth"><div><img src='/arquivos/tooth.png' /></div><p><b>No más manchas en tus dientes* </b> Causadas por el<br /> humo del cigarro.</p></li>
                </ul>
                <p class="disclaimer" style="font-size:10px">*Información importante: Si los dientes ya están manchados, cambiar a IQOS no eliminará el color de esas manchas. Fuente: Estudio de laboratorio no clínico llevado a cabo en Suiza con dientes humanos y los compuestos dentales más comúnmente usados. Al contrario de las condiciones del mundo real, los dientes no fueron expuestos a otras sustancias que pueden producir manchas, como café, té o vino, las cuales podrían influenciar los resultados.</p>
            </section>
            </div>`;
Vue.component('template-component-ambiente-prueba-conoce', {
    'template': $leadsAmbientePruebaConoce,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "MENOSOLOR200"

        };

    },
    'methods': {
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                // if(utms.utm_term == undefined){
                //     _self.term = "checkboxfumador"
                // } else {
                //    _self.term = utms.utm_term
                // } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },
        "llamar": function () {
            var _self = this
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
        
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }

            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+"checkbox"+_self.publicidad+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function (){
           
            $("#toForm").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#form").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});
// conoce-iqos/test
var $leadsTest = `<div>
                    <section class="coronavirus" style="order:2;">
                    <h4>Por tiempo limitado, <b> regístrate para recibir más información de IQOS y recibe $300 MXN </b> de descuento para la compra de tu primer Kit IQOS.</h4>
                    </section>

                    <section v-bind:class="{ pagina }" class="principal version_prueba" satyle="order:3;" v-if="pagina == 'lp1' || pagina == 'rgm'">
                    <span class="agendaAtBottomRgmDec col-2 prueba">
                                <a href='#' style="width:100%;margin-bottom: 20px;color: #000;background: #ffffff" class='btn agendarllamada rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                            </span>
                                <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                    </section>

                    <section v-bind:class="{ pagina }" class="principal" v-if="pagina == 'lp2'">
                    <div>
                        <img src="/arquivos/iqoslogo.png" class="logo" alt="iqos" title="iqos" />
                        <h1>INNOVACIÓN Y TECNOLOGÍA PARA CONSUMIR TABACO SIN QUEMARLO.</h1>
                        <img src="/arquivos/lp2-img2.jpg" class="img2" />
                        <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                        <div class="bottomColor"></div>
                    </div>
                    </section>

                    <section id="pasos" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'rgm'">
                    <h4>Regístrate para conocer IQOS y recibir $300 MXN*</h4>
                    <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                    <ul>
                        <li><span>1</span> Completa el formulario de abajo (20 segundos)</li>
                        <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>2</span> Te enviaremos un correo</li>
                        <li v-if="pagina == 'rgm'"><span>2</span> Recibirás un correo con un <b>cupón de descuento por $300 pesos*</b></li>
                        <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>3</span> Solicita tu demostración de
                        IQOS</li>
                        <li v-if="pagina == 'rgm'"><span>3</span> Un Experto IQOS se pondrá en contacto contigo</li>
                        <li><span>4</span> ¡Descubre IQOS!</li>
                    </ul>
                    <p v-if="pagina == 'rgm'" style="font-size:10px">Promoción vigente al 31 de diciembre de 2020. Consulta <a style="color:blue" href="/terminos-condiciones">Términos y Condiciones</a>.</span> </p>
                    </section>

                    <section id="prueba" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'lp1' || pagina == 'lp2'">
                    <h4 style="margin-top:20px;">Regístrate para conocer IQOS y recibir $300 MXN*</h4>
                    <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                    <div v-if="window.width > 767">
                        <ul class="refer-a-friend__box-items">
                            <li class="refer-a-friend__box-item">
                                <div class="refer-a-friend__item-icon">
                                    <svg width="40px" height="63px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                    <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                    <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                    <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>                        
                                </div>
                                <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                                <p class="refer-a-friend__item--info">Completa el formulario de abajo (20 segundos).</p>
                            </li>
                            <li class="refer-a-friend__box-item">
                                <div class="refer-a-friend__item-icon">
                                <svg width="55px" height="59px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(845.000000, 332.000000)">
                                                    <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                    <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="refer-a-friend__item-text">Recibe tu cupón de descuento por $300 MXN*</div>
                                <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                            </li>
                            <li class="refer-a-friend__box-item">
                                <div class="refer-a-friend__item-icon">
                                    <svg width="61px" height = "61px">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                                <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                    <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                    <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                    <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                    <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="refer-a-friend__item-text">Canjea tu cupón de descuento</div>
                                <p class="refer-a-friend__item--info">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                            </li>
                        </ul>
                    </div>
                    <div v-else>
                        <div class="refer-a-friend__box-wrapper">
                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                    <svg width="25px" height="30px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                    <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                    <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                    <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                            border-left: solid 1px;
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario de abajo (20 segundos).</p>
                                </div>
                            </div>


                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                    <svg width="25px" height="45px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                                <g id="Group" transform="translate(845.000000, 332.000000)">
                                                    <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                    <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu cupón de descuento por $300 MXN*</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                            border-left: solid 1px;
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                                </div>
                            </div>


                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                    <div class="refer-a-friend__item-icon">
                                        <svg width="25px" height="25px" viewBox="0 0 61 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                                    <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                        <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                        <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                        <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                        <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                                    </g>
                                                </g>
                                            </g>
                                        </svg>
                                    </div>
                                </div>
                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Canjea tu cupón de descuento</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                            border-left: solid 1px;
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="ambiente_prueba" style="font-size:10px" >Promoción vigente al 31 de diciembre de 2020. Consulta <a style="color:blue" target="_blank"  href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a>.</span></p>
                    </section>

                    <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">

                    <div class="two">
                        
                        <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                            <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                            <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                            <input type=hidden name="oid" value="00D4P000000h9QV">
                            <input type=hidden name="retURL" value="http://www.iqos.com">
                            <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">

                            <!--  ----------------------------------------------------------------------  -->
                            <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                            <!--  these lines if you wish to test in debug mode.                          -->
                            <!--  <input type="hidden" name="debug" value=1>                              -->
                            <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                            <!--  ----------------------------------------------------------------------  -->

                            <label class="lb-input" for="first_name">NOMBRE*</label>
                            <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                            <label class="lb-input" for="last_name">Apellido(s)*</label>
                            <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                            <label class="lb-input" for="email">Email*</label>
                            <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                            
                            <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                            <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                            <div class="none">
                                <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                            </div>

                            <fieldset>

                                <label for="00N4P00000GZEGJ">
                                    <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                    <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                                </label>
                                <label for="00N4P000008mN8e">
                                    <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                    <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                </label>
                            </fieldset>

                            <div class="btn form-btn">
                                <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                            </div>

                            <transition name="fade">
                                <div v-if="Msnenvio" class="envio errors">
                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>{{ Msnenvio }}</b>
                                </div>
                            </transition>    
                        </form>

                        <transition name="fade">
                            <div v-if="errors.length" class="errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>Para continuar, por favor revisa lo siguiente:</b>
                                <ul>
                                    <li v-for="error in errors">{{ error }}</li>
                                </ul>
                            </div>    
                        </transition>  

                        <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                    </div>    
                    </section>

                    <section id="queEsIqosVideo" class="video">
                        <h3>¿Qué es IQOS?</h3>
                        <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                        <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                            <img src="/arquivos/Thumbnail IQOS 2.4 (b).png" />
                            <video width="320" height="240" id="myVideo">
                            <source src="https://pmi.23video.com/60445188/64076978/2e13e86ee5ce47a80c7a2395b5cb687d/video_hd/vgt-iqos-24-plus-web-1-video.mp4 " type="video/mp4">
                            Your browser does not support the video tag.
                            </video>  
                        </div>
                    </section>
                    <section class="video" >
                        <div style="position: relative;
                         text-align:center;">
                            <a id="toForm" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">REGÍSTRATE</a>
                        </div>
                    </section>

                    <section class="container boxes">
                    <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                    <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                        <li><div><img src='/arquivos/fire.png' /></div><p><b>Sin fuego</b> El tabaco no se quema y se libera su sabor real.</p></li>
                        <li><div><img src='/arquivos/smoke.jpg' /></div><p><b>Sin humo y sin ceniza</b> Habrá menos olor en ti, en tu ropa y en tu entorno.</p></li>
                        <li><div><img src='/arquivos/users-group.png' /></div><p><b>Sin olor a cigarro</b> Es menos probable que molestes a la gente a tu alrededor.</p></li>
                        <li class="tooth"><div><img src='/arquivos/tooth.png' /></div><p><b>No más manchas en tus dientes* </b> Causadas por el<br /> humo del cigarro.</p></li>
                    </ul>
                    <p class="disclaimer" style="font-size:10px">*Información importante: Si los dientes ya están manchados, cambiar a IQOS no eliminará el color de esas manchas. Fuente: Estudio de laboratorio no clínico llevado a cabo en Suiza con dientes humanos y los compuestos dentales más comúnmente usados. Al contrario de las condiciones del mundo real, los dientes no fueron expuestos a otras sustancias que pueden producir manchas, como café, té o vino, las cuales podrían influenciar los resultados.</p>
                    </section>
                </div>`;
Vue.component('template-component-home-test', {
    'template': $leadsTest,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "MENOSOLOR200",
            "GAtransactionId":""

        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                // if(utms.utm_term == undefined){
                //     _self.term = "checkboxfumador"
                // } else {
                //    _self.term = utms.utm_term
                // } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
               
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },
        "llamar": function () {
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
            if(_self.pagina == "rgm"){
                _self.descuento = "RGMOCT20"
            }
            if(_self.pagina == "rgm"){
                concatination = _self.medium
            }
            console.log(_self.descuento, "final descount code")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.emailVerifiedNB = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        _self.GA_clientId()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function (){
            $("#toForm").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#form").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});

//conoce-iqos home




var $leadsHome = `<div>
                <section class="coronavirus" style="order:1;">
                <h4>Por el momento los dispositivos IQOS están agotados, ¡Regístrate y entérate cuando estén de regreso!</h4>
                </section>

                <section v-bind:class="{ pagina }" class="principal version_mayo" satyle="order:2;" v-if="pagina == 'lp1' || pagina == 'rgm'">


                    <span v-if="screen > 800" class="agendaAtBottomExito col-2 prueba"></span>
                    <span v-if="screen > 800" class="agendaAtBottomExito col-4 prueba"><a id="toFormTop" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic" class="btn rgm" style="width: 100%; margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;cursor:pointer;">SABER MÁS DE IQOS</a></span>
                    <span v-if="screen < 800"  class="agendaAtBottomExito col-2 prueba">
                        <a id="toFormTop" style="margin-top: 30rem;width:70%;margin-bottom: 0px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">SABER MÁS DE IQOS</a>
                    </span>   
                </section>





                <section id="prueba" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'lp1' || pagina == 'lp2'">
                <h4 style="margin-top:20px;">Regístrate para conocer IQOS y recibir $200 MXN*</h4>
                <p style="opacity:0.60">Por el momento los dispositivos IQOS están agotados, pero puedes registrarte para recibir noticias de IQOS y enterarte primero que nadie cuando los dispositivos estén disponibles nuevamente.</p>
                <div v-if="window.width > 767">
                    <ul class="refer-a-friend__box-items">
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/Icono_1.png" />                        
                            </div>
                            <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                            <p class="refer-a-friend__item--info">Completa el formulario de abajo (20 segundos).</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/icono_2.png" /> 
                            </div>
                            <div class="refer-a-friend__item-text">Recibe tu cupón de descuento por $200 MXN*</div>
                            <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/icono_3.png" /> 
                            </div>
                            <div class="refer-a-friend__item-text">Mantente enterado de las noticias de IQOS</div>
                            <p class="refer-a-friend__item--info">Entérate primero que nadie cuando los dispositivos IQOS estén disponibles nuevamente.</p>
                        </li>
                    </ul>
                </div>
                <div v-else>
                    <div class="refer-a-friend__box-wrapper">
                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <img src="/arquivos/Icono_1.png" /> 
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                    
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario de abajo (20 segundos).</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <img src="/arquivos/icono_2.png" /> 
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu cupón de descuento por $200 MXN*</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                    
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <div class="refer-a-friend__item-icon">
                                    <img src="/arquivos/icono_3.png" /> 
                                </div>
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Mantente enterado de las noticias de IQOS</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                        
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Entérate primero que nadie cuando los dispositivos IQOS estén disponibles nuevamente.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="ambiente_prueba" style="font-size:10px" >*Si te registras en la base de datos de IQOS del 1 de enero al 31
                de diciembre de 2021 para recibir información sobre IQOS,
                recibirás en tu correo electrónico un código de descuento para
                la compra de tu primer Kit IQOS. Aplican restricciones. Consulta <a style="color:blue" target="_blank" href="https://www.iqos.com/mx/es/codigos-de-descuento.html">Términos y Condiciones</a>.</span></p>
                </section>

                <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">

                <div class="two">
                    
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                        <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                        <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">
                        <input type=hidden id="00N4P00000HE6pF" name="00N4P00000HE6pF" :value="hostName" >

                        <!--  ----------------------------------------------------------------------  -->
                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                        <!--  these lines if you wish to test in debug mode.                          -->
                        <!--  <input type="hidden" name="debug" value=1>                              -->
                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                        <!--  ----------------------------------------------------------------------  -->

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="25" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="25" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                        
                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                        <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                        </div>

                        <fieldset>

                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition>    
                    </form>

                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  

                    <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                </div>    
                </section>

                <section id="queEsIqosVideo" class="video">
                    <h3>¿Qué es IQOS?</h3>
                    <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                    <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                        <img src="/arquivos/queEsIqosTumbnailMayo.png" />
                        <video width="320" height="240" id="myVideo">
                        <source src="https://pmi.23video.com/64968578/68793752/1423b77c21d366d862f03171afd1bcbe/video_hd/iqos-new-brand-world-brand-1-7-video.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                        </video>  
                    </div>
                </section>
                <section id="watchVideo" class="video" >
                    <div style="position: relative;
                    text-align:center;">
                        <a id="toForm" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">QUIERO REGISTRARME</a>
                    </div>
                </section>

                <section class="container boxes">
                    <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                    <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_CALIENTA.jpg' /></div><p>IQOS calienta el tabaco en lugar de quemarlo.</p></li>
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_NO_PRODUCE.jpg' /></div><p>IQOS no produce humo ni ceniza.</p></li>
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_NO_PRODUCE_HUMO.jpg' /></div><p>IQOS libera el sabor del tabaco real.</p></li>
                        <li class="tooth"><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_EMITE.jpg' /></div><p>IQOS emite menos sustancias tóxicas.</p></li>
                    </ul>
                    <!--<p class="disclaimer" style="font-size:10px">*Información importante: Si los dientes ya están manchados, cambiar a IQOS no eliminará el color de esas manchas. Fuente: Estudio de laboratorio no clínico llevado a cabo en Suiza con dientes humanos y los compuestos dentales más comúnmente usados. Al contrario de las condiciones del mundo real, los dientes no fueron expuestos a otras sustancias que pueden producir manchas, como café, té o vino, las cuales podrían influenciar los resultados.</p>-->
                </section>
                                    </div>`;
Vue.component('template-component-home', {
    'template': $leadsHome,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "hostName": window.location.hostname,
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "MENOSOLOR200",
            "GAtransactionId":"",
            "screen": window.innerWidth

        };

    },
    'methods': {
        "allowedCharacters":function(e){
            var reg = /^[a-zA-ZñÑÁáÉéÍíÓóÚú ÄäËëÏïÖöÜü"]*$/;
            var c = String.fromCharCode(e.which)
            if(reg.test(c))
            {
                return true;
            }
            else
            return false;
        },
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                // if(utms.utm_term == undefined){
                //     _self.term = "checkboxfumador"
                // } else {
                //    _self.term = utms.utm_term
                // } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
               
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
       /* "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },*/
        "llamar": function () {
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "beforeSend": function() {
            var _self = this
            console.log("calling")
            $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
        },
        "afterSend": function() {
            var _self = this
            $(_self.form).find(".loading").remove()
            _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            _self.nombre = ""
            _self.telefone = ""
            _self.email = ""
            _self.apelido = ""
            _self.declaracao = false
            _self.publicidad = false
            _self.emailVerifiedNB = false
            
            $("#00N4P00000GZEGJ").attr("checked", false)
            $("#mayor_de_edad").attr("checked", false)
            $(".field").val("")
            
            setTimeout(function (){
                $(".field").val("")
            },200)

            try {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Success",
                    "label": "MX",
                    "event": "TYPLanding"
                })
            } catch (e) {console.log(e)}

            try {
                window.dataLayer.push({ 
                    'event': 'gtmZoneMicrositeEvent', 
                    'eventCategory': 'Form', 
                    'eventAction': 'Submitted', 
                    'eventLabel': 'Try IQOS form', 
                    'eventValue': 0, 
                    'eventNonInteraction': false 
                });
            } catch (e) {console.log(e)} 
            
        },
        "envio2": function (){
            this.beforeSend()
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            //var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }
            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = "1"
            } else {
                this.publicidad = "0"
            }
            
            var camposValores = [{
                "oid": oid,
                "retURL": urlIqos,
                "first_name": this.nombre,
                "last_name": this.apelido,
                "phone": this.telefone,
                "email": this.email,
                "00N4P00000GOkeM": this.descuento,
                "00N4P00000GZTGS": c00N4P00000GZTGS,
                "00N4P000008mN1c": this.state,
                "00N4P000008mN26": this.city,
                "00N4P00000GZHnH": this.mes,
                "00N4P00000GZEGY": this.ano,
                "00N4P000008mN2L": this.source,
                "00N4P000008mN2Q": this.medium,
                "00N4P000008mN2a": this.campaign,
                "00N4P000008mN13": "FUMADOR",
                "00N4P00000GZEGd": this.term,
                "00N4P00000GZEGJ": "1",
                "00N4P000008mN8e": this.publicidad,
                "00N4P00000GOgJP": this.GAtransactionId,
                "submit": "Enviar"
            }]
            fetch('https://webto.salesforce.com/servlet/servlet.WebToLead', {
            method: 'post',
            body: JSON.stringify(camposValores[0]),
            }).then((response)=>{
                console.log(response, "response")
                this.afterSend()
            
                
            }).catch((error)=>{
                console.log(error,"error")
            })
               
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            //var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
           
            console.log(_self.hostName, "hostName")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000HE6pF="+_self.hostName+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
                $(_self.form).find(".loading").remove()
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.emailVerifiedNB = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
  
                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)} 
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                        return null;
                    }
                    return null;
                })
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        _self.GA_clientId()
        window.onresize = () => {
            _self.screen = window.innerWidth;
        };
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function (){
            $("#toForm").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#iqos-form").offset().top
                }, 1000);
            });
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#queEsIqosVideo").offset().top
                }, 2000);
            });
            $( "#first_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
            $( "#last_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});

var $leadsHomeAmbientePrueba = `<div>
                                    <section class="coronavirus" style="order:1;">
                                    <h4>Por tiempo limitado, <b> regístrate para recibir más información de IQOS y recibe $200 MXN </b> de descuento para la compra de tu primer Kit IQOS.</h4>
                                    </section>

                                    <section v-bind:class="{ pagina }" class="principal version_exitoFeb" satyle="order:2;" v-if="pagina == 'lp1' || pagina == 'rgm'">
                               
                                   
                                        <span v-if="screen > 800" class="agendaAtBottomExito col-2 prueba"></span>
                                        <span v-if="screen > 800" class="agendaAtBottomExito col-4 prueba"><a id="toFormTop" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic" class="btn rgm" style="width: 100%; margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;cursor:pointer;">QUIERO REGISTRARME</a></span>
                                        <span v-if="screen < 800"  class="agendaAtBottomExito col-2 prueba">
                                            <a id="toFormTop" style="margin-top: 25rem;width:70%;margin-bottom: 0px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">QUIERO REGISTRARME</a>
                                        </span>   
                                    </section>

                                    <section v-bind:class="{ pagina }" class="principal" v-if="pagina == 'lp2'">
                                        <div>
                                            <img src="/arquivos/iqoslogo.png" class="logo" alt="iqos" title="iqos" />
                                            <h1>INNOVACIÓN Y TECNOLOGÍA PARA CONSUMIR TABACO SIN QUEMARLO.</h1>
                                            <img src="/arquivos/lp2-img2.jpg" class="img2" />
                                            <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                                            <div class="bottomColor"></div>
                                        </div>
                                    </section>

                                    <section id="pasos" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'rgm'">
                                    <h4>Regístrate para conocer IQOS y recibir $200 MXN*</h4>
                                    <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                                    <ul>
                                        <li><span>1</span> Completa el formulario de abajo (20 segundos)</li>
                                        <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>2</span> Te enviaremos un correo</li>
                                        <li v-if="pagina == 'rgm'"><span>2</span> Recibirás un correo con un <b>cupón de descuento por $200 pesos*</b></li>
                                        <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>3</span> Solicita tu demostración de
                                        IQOS</li>
                                        <li v-if="pagina == 'rgm'"><span>3</span> Un Experto IQOS se pondrá en contacto contigo</li>
                                        <li><span>4</span> ¡Descubre IQOS!</li>
                                        console.log(username,"username")             </ul>
                                    <p v-if="pagina == 'rgm'" style="font-size:10px">*Si te registras en la base de datos de IQOS del 1 de enero al 30
                                    de abril de 2021 para recibir información sobre IQOS,
                                    recibirás en tu correo electrónico un código de descuento para
                                    la compra de tu primer Kit IQOS. Aplican restricciones. Consulta <a style="color:blue" target="_blank" href="https://www.iqos.com/mx/es/codigos-de-descuento.html">Términos y Condiciones</a>.</span> 
                                    </p>
                                    </section>

                                    <section id="prueba" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'lp1' || pagina == 'lp2'">
                                    <h4 style="margin-top:20px;">Regístrate para conocer IQOS y recibir $200 MXN*</h4>
                                    <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                                    <div v-if="window.width > 767">
                                        <ul class="refer-a-friend__box-items">
                                            <li class="refer-a-friend__box-item">
                                                <div class="refer-a-friend__item-icon">
                                                    <svg width="40px" height="63px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                            <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                                                <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                                    <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                                    <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                                    <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                                                </g>
                                                            </g>
                                                        </g>
                                                    </svg>                        
                                                </div>
                                                <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                                                <p class="refer-a-friend__item--info">Completa el formulario de abajo (20 segundos).</p>
                                            </li>
                                            <li class="refer-a-friend__box-item">
                                                <div class="refer-a-friend__item-icon">
                                                    <svg width="55px" height="59px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                            <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                                                <g id="Group" transform="translate(845.000000, 332.000000)">
                                                                    <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                                    <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                                                </g>
                                                            </g>
                                                        </g>
                                                    </svg>
                                                </div>
                                                <div class="refer-a-friend__item-text">Recibe tu cupón de descuento por $200 MXN*</div>
                                                <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                                            </li>
                                            <li class="refer-a-friend__box-item">
                                                <div class="refer-a-friend__item-icon">
                                                    <svg width="61px" height = "61px">
                                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                            <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                                                <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                                    <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                                    <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                                    <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                                    <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                                                </g>
                                                            </g>
                                                        </g>
                                                    </svg>
                                                </div>
                                                <div class="refer-a-friend__item-text">Canjea tu cupón de descuento</div>
                                                <p class="refer-a-friend__item--info">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                                            </li>
                                        </ul>
                                    </div>
                                    <div v-else>
                                        <div class="refer-a-friend__box-wrapper">
                                            <div class="col-12 prueba" style="display:flex">
                                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                                    <svg width="25px" height="30px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                            <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                                                <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                                    <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                                    <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                                    <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                                                </g>
                                                            </g>
                                                        </g>
                                                    </svg>
                                                </div>
                                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                                    <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                                                </div>
                                            </div>
                                            <div class="col-12 prueba" 
                                            style="display:flex;
                                            border-left: solid 1px;
                                            min-height: 66px;
                                            margin-left: 13px;
                                            margin-top: 13px;
                                            margin-bottom: 13px;
                                            border-color: #979797;">
                                                <div class="col-1 prueba"></div>
                                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario de abajo (20 segundos).</p>
                                                </div>
                                            </div>


                                            <div class="col-12 prueba" style="display:flex">
                                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                                    <svg width="25px" height="45px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                            <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                                                <g id="Group" transform="translate(845.000000, 332.000000)">
                                                                    <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                                    <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                                                </g>
                                                            </g>
                                                        </g>
                                                    </svg>
                                                </div>
                                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                                    <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu cupón de descuento por $200 MXN*</div>
                                                </div>
                                            </div>
                                            <div class="col-12 prueba" 
                                            style="display:flex;
                                            border-left: solid 1px;
                                            min-height: 66px;
                                            margin-left: 13px;
                                            margin-top: 13px;
                                            margin-bottom: 13px;
                                            border-color: #979797;">
                                                <div class="col-1 prueba"></div>
                                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                                                </div>
                                            </div>


                                            <div class="col-12 prueba" style="display:flex">
                                                <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                                    <div class="refer-a-friend__item-icon">
                                                        <svg width="25px" height="25px" viewBox="0 0 61 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                                            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                                                    <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                                        <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                                        <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                                        <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                                        <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                                                    </g>
                                                                </g>
                                                            </g>
                                                        </svg>
                                                    </div>
                                                </div>
                                                <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                                    <div class="refer-a-friend__item-text" style="font-size:20px">Canjea tu cupón de descuento</div>
                                                </div>
                                            </div>
                                            <div class="col-12 prueba" 
                                            style="display:flex;
                                            border-left: solid 1px;
                                            min-height: 66px;
                                            margin-left: 13px;
                                            margin-top: 13px;
                                            margin-bottom: 13px;
                                            border-color: #979797;">
                                                <div class="col-1 prueba"></div>
                                                <div class="col-11 prueba" style="display: flex;align-items: center;">
                                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="ambiente_prueba" style="font-size:10px" >*Si te registras en la base de datos de IQOS del 1 de enero al 30
                                    de abril de 2021 para recibir información sobre IQOS,
                                    recibirás en tu correo electrónico un código de descuento para
                                    la compra de tu primer Kit IQOS. Aplican restricciones. Consulta <a style="color:blue" target="_blank" href="https://www.iqos.com/mx/es/codigos-de-descuento.html">Términos y Condiciones</a>.</span></p>
                                    </section>

                                    <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">

                                    <div class="two">
                                        
                                        <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                            <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                                            <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                                            <input type=hidden name="oid" value="00D4P000000h9QV">
                                            <input type=hidden name="retURL" value="http://www.iqos.com">
                                            <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">

                                            <!--  ----------------------------------------------------------------------  -->
                                            <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                            <!--  these lines if you wish to test in debug mode.                          -->
                                            <!--  <input type="hidden" name="debug" value=1>                              -->
                                            <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                            <!--  ----------------------------------------------------------------------  -->

                                            <label class="lb-input" for="first_name">NOMBRE*</label>
                                            <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                                            <label class="lb-input" for="last_name">Apellido(s)*</label>
                                            <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                                            <label class="lb-input" for="email">Email*</label>
                                            <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                            
                                            <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                                            <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                                            <div class="none">
                                                <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                                <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                                <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                                <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                                <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                                <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                                <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                                <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                                <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                            </div>

                                            <fieldset>

                                                <label for="00N4P00000GZEGJ">
                                                    <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                                    <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                                                </label>
                                                <label for="00N4P000008mN8e">
                                                    <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                                    <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                                </label>
                                            </fieldset>

                                            <div class="btn form-btn">
                                                <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                                <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                            </div>

                                            <transition name="fade">
                                                <div v-if="Msnenvio" class="envio errors">
                                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                    <b>{{ Msnenvio }}</b>
                                                </div>
                                            </transition>    
                                        </form>

                                        <transition name="fade">
                                            <div v-if="errors.length" class="errors">
                                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                <b>Para continuar, por favor revisa lo siguiente:</b>
                                                <ul>
                                                    <li v-for="error in errors">{{ error }}</li>
                                                </ul>
                                            </div>    
                                        </transition>  

                                        <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                                    </div>    
                                    </section>

                                    <section id="queEsIqosVideo" class="video">
                                        <h3>¿Qué es IQOS?</h3>
                                        <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                                        <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                                            <img src="/arquivos/Que es IQOS 2.4 Plus exito(Thumbnail).jpg" />
                                            <video width="320" height="240" id="myVideo">
                                            <source src="https://pmi.23video.com/64968568/65417230/d1674608d69d4c4cc83afe5b48c3db8e/video_hd/b235068iqoswhatisiqos24plusmxes-mx6-1-video.mp4" type="video/mp4">
                                            Your browser does not support the video tag.
                                            </video>  
                                        </div>
                                    </section>
                                    <section class="video" >
                                        <div style="position: relative;
                                        text-align:center;">
                                            <a id="toForm" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">REGÍSTRATE</a>
                                        </div>
                                    </section>

                                    <section class="container boxes">
                                    <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                                    <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                                        <li><div><img src='/arquivos/fire.png' /></div><p><b>Sin fuego</b> El tabaco no se quema y se libera su sabor real.</p></li>
                                        <li><div><img src='/arquivos/smoke.jpg' /></div><p><b>Sin humo y sin ceniza</b> Habrá menos olor en ti, en tu ropa y en tu entorno.</p></li>
                                        <li><div><img src='/arquivos/users-group.png' /></div><p><b>Sin olor a cigarro</b> Es menos probable que molestes a la gente a tu alrededor.</p></li>
                                        <li class="tooth"><div><img src='/arquivos/tooth.png' /></div><p><b>No más manchas en tus dientes* </b> Causadas por el<br /> humo del cigarro.</p></li>
                                    </ul>
                                    <p class="disclaimer" style="font-size:10px">*Información importante: Si los dientes ya están manchados, cambiar a IQOS no eliminará el color de esas manchas. Fuente: Estudio de laboratorio no clínico llevado a cabo en Suiza con dientes humanos y los compuestos dentales más comúnmente usados. Al contrario de las condiciones del mundo real, los dientes no fueron expuestos a otras sustancias que pueden producir manchas, como café, té o vino, las cuales podrían influenciar los resultados.</p>
                                    </section>
                                    </div>`;
Vue.component('template-component-ambiente-prueba', {
    'template': $leadsHomeAmbientePrueba,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "MENOSOLOR200",
            "GAtransactionId":"",
            "screen": window.innerWidth

        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                // if(utms.utm_term == undefined){
                //     _self.term = "checkboxfumador"
                // } else {
                //    _self.term = utms.utm_term
                // } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
               
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
       /* "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },*/
        "llamar": function () {
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            //var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
           
            console.log(_self.descuento, "final descount code")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.emailVerifiedNB = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        _self.GA_clientId()
        window.onresize = () => {
            _self.screen = window.innerWidth;
        };
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function (){
            $("#toForm").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#form").offset().top
                }, 2000);
            });
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#form").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});





var $leadst = `<div>
                <section class="coronavirus" style="order:1;">
                <h4>Por tiempo limitado, regístrate para recibir más información de IQOS y recibe 10% de descuento para la compra de tu primer Kit IQOS.</h4>
                </section>

                <section v-bind:class="{ pagina }" class="principal version_agoust" satyle="order:2;" v-if="pagina == 'lp1' || pagina == 'rgm'">


                    <span v-if="screen > 800" class="agendaAtBottomExito col-2 prueba"></span>
                    <span v-if="screen > 800" class="agendaAtBottomExito col-4 prueba"><a id="toFormTop" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic" class="btn rgm" style="width: 100%; margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;cursor:pointer;">SABER MÁS DE IQOS</a></span>
                    <span v-if="screen < 800"  class="agendaAtBottomExito col-2 prueba">
                        <a id="toFormTop" style="margin-top: 30rem;width:70%;margin-bottom: 0px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">SABER MÁS DE IQOS</a>
                    </span>   
                </section>





                <section id="prueba" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'lp1' || pagina == 'lp2'">
                <h4 style="margin-top:20px;">Regístrate para conocer IQOS y recibe 10% de descuento*</h4>
                <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo</p>
                <div v-if="window.width > 767">
                    <ul class="refer-a-friend__box-items">
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/Icono_1.png" />                        
                            </div>
                            <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                            <p class="refer-a-friend__item--info">Completa el formulario, te tomará 20 segundos.</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/icono_2.png" /> 
                            </div>
                            <div class="refer-a-friend__item-text">Recibe tu código de 10% de descuento*</div>
                            <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu código. Válido para la compra de tu primer Kit IQOS.</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/icono_3_.png" /> 
                            </div>
                            <div class="refer-a-friend__item-text" style="margin-top: 18px;">Canjea tu código de descuento</div>
                            <p class="refer-a-friend__item--info">Podrás canjear tu código de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                        </li>
                    </ul>
                </div>
                <div v-else>
                    <div class="refer-a-friend__box-wrapper">
                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <img src="/arquivos/Icono_1.png" /> 
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                    
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario, te tomará 20 segundos.</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <img src="/arquivos/icono_2.png" /> 
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu código de 10% de descuento*</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                    
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu código. Válido para la compra de tu primer Kit IQOS.</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <div class="refer-a-friend__item-icon">
                                    <img src="/arquivos/icono_3_.png" /> 
                                </div>
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Canjea tu código de descuento</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                        
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Podrás canjear tu código de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="ambiente_prueba" style="font-size:10px" >*Si te registras en la base de datos de IQOS del 1 de agosto al 31
                de diciembre de 2021 para recibir información sobre IQOS,
                recibirás en tu correo electrónico un código de descuento para
                la compra de tu primer Kit IQOS. Aplican restricciones. Consulta <a style="color:blue" target="_blank" href="https://www.iqos.com/mx/es/codigos-de-descuento.html">Términos y Condiciones</a>.</span></p>
                </section>

                <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">

                <div class="two">
                    
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                        <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                        <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">
                        <input type=hidden id="00N4P00000HE6pF" name="00N4P00000HE6pF" :value="hostName" >

                        <!--  ----------------------------------------------------------------------  -->
                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                        <!--  these lines if you wish to test in debug mode.                          -->
                        <!--  <input type="hidden" name="debug" value=1>                              -->
                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                        <!--  ----------------------------------------------------------------------  -->

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="25" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="25" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                        
                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                        <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                        </div>

                        <fieldset>

                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition>    
                    </form>

                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  

                    <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                </div>    
                </section>

                <section id="queEsIqosVideo" class="video">
                    <h3>¿Qué es IQOS?</h3>
                    <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                    <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                        <img src="/arquivos/queEsIqosTumbnailMayo.png" />
                        <video width="320" height="240" id="myVideo">
                        <source src="https://pmi.23video.com/64968578/68793752/1423b77c21d366d862f03171afd1bcbe/video_hd/iqos-new-brand-world-brand-1-7-video.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                        </video>  
                    </div>
                </section>
                <section id="watchVideo" class="video" >
                    <div style="position: relative;
                    text-align:center;">
                        <a id="toForm" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">QUIERO REGISTRARME</a>
                    </div>
                </section>

                <section class="container boxes">
                    <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                    <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_CALIENTA.jpg' /></div><p>IQOS calienta el tabaco en lugar de quemarlo.</p></li>
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_NO_PRODUCE.jpg' /></div><p>IQOS no produce humo ni ceniza.</p></li>
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_NO_PRODUCE_HUMO.jpg' /></div><p>IQOS libera el sabor del tabaco real.</p></li>
                        <li class="tooth"><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_EMITE.jpg' /></div><p>IQOS emite menos sustancias tóxicas.</p></li>
                    </ul>
                    <!--<p class="disclaimer" style="font-size:10px">*Información importante: Si los dientes ya están manchados, cambiar a IQOS no eliminará el color de esas manchas. Fuente: Estudio de laboratorio no clínico llevado a cabo en Suiza con dientes humanos y los compuestos dentales más comúnmente usados. Al contrario de las condiciones del mundo real, los dientes no fueron expuestos a otras sustancias que pueden producir manchas, como café, té o vino, las cuales podrían influenciar los resultados.</p>-->
                </section>
                                    </div>`;
Vue.component('leadst-component', {
    'template': $leadst,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "hostName": window.location.hostname,
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "MENOSOLOR200",
            "GAtransactionId":"",
            "screen": window.innerWidth

        };

    },
    'methods': {
        "allowedCharacters":function(e){
            var reg = /^[a-zA-ZñÑÁáÉéÍíÓóÚú ÄäËëÏïÖöÜü"]*$/;
            var c = String.fromCharCode(e.which)
            if(reg.test(c))
            {
                return true;
            }
            else
            return false;
        },
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                // if(utms.utm_term == undefined){
                //     _self.term = "checkboxfumador"
                // } else {
                //    _self.term = utms.utm_term
                // } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
               
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
       /* "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },*/
        "llamar": function () {
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "beforeSend": function() {
            var _self = this
            console.log("calling")
            $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
        },
        "afterSend": function() {
            var _self = this
            $(_self.form).find(".loading").remove()
            _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            _self.nombre = ""
            _self.telefone = ""
            _self.email = ""
            _self.apelido = ""
            _self.declaracao = false
            _self.publicidad = false
            _self.emailVerifiedNB = false
            
            $("#00N4P00000GZEGJ").attr("checked", false)
            $("#mayor_de_edad").attr("checked", false)
            $(".field").val("")
            
            setTimeout(function (){
                $(".field").val("")
            },200)

            try {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Success",
                    "label": "MX",
                    "event": "TYPLanding"
                })
            } catch (e) {console.log(e)}

            try {
                window.dataLayer.push({ 
                    'event': 'gtmZoneMicrositeEvent', 
                    'eventCategory': 'Form', 
                    'eventAction': 'Submitted', 
                    'eventLabel': 'Try IQOS form', 
                    'eventValue': 0, 
                    'eventNonInteraction': false 
                });
            } catch (e) {console.log(e)} 
            
        },
        "envio2": function (){
            this.beforeSend()
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            //var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }
            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = "1"
            } else {
                this.publicidad = "0"
            }
            
            var camposValores = [{
                "oid": oid,
                "retURL": urlIqos,
                "first_name": this.nombre,
                "last_name": this.apelido,
                "phone": this.telefone,
                "email": this.email,
                "00N4P00000GOkeM": this.descuento,
                "00N4P00000GZTGS": c00N4P00000GZTGS,
                "00N4P000008mN1c": this.state,
                "00N4P000008mN26": this.city,
                "00N4P00000GZHnH": this.mes,
                "00N4P00000GZEGY": this.ano,
                "00N4P000008mN2L": this.source,
                "00N4P000008mN2Q": this.medium,
                "00N4P000008mN2a": this.campaign,
                "00N4P000008mN13": "FUMADOR",
                "00N4P00000GZEGd": this.term,
                "00N4P00000GZEGJ": "1",
                "00N4P000008mN8e": this.publicidad,
                "00N4P00000GOgJP": this.GAtransactionId,
                "submit": "Enviar"
            }]
            fetch('https://webto.salesforce.com/servlet/servlet.WebToLead', {
            method: 'post',
            body: JSON.stringify(camposValores[0]),
            }).then((response)=>{
                console.log(response, "response")
                this.afterSend()
            
                
            }).catch((error)=>{
                console.log(error,"error")
            })
               
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            //var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
           
            console.log(_self.hostName, "hostName")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000HE6pF="+_self.hostName+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
                $(_self.form).find(".loading").remove()
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.emailVerifiedNB = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
  
                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)} 
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                        return null;
                    }
                    return null;
                })
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        _self.GA_clientId()
        window.onresize = () => {
            _self.screen = window.innerWidth;
        };
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function (){
            $("#toForm").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#iqos-form").offset().top
                }, 1000);
            });
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#queEsIqosVideo").offset().top
                }, 2000);
            });
            $( "#first_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
            $( "#last_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});



var $rgm = `<div> 
                <section class="coronavirus" style="order:1;">
                <h4>Por el momento los dispositivos IQOS están agotados, ¡Regístrate y entérate cuando estén de regreso!</h4>
                </section>

                <section v-bind:class="{ pagina }" class="principal version_mayo" satyle="order:2;" v-if="pagina == 'lp1' || pagina == 'rgm'">


                    <span v-if="screen > 800" class="agendaAtBottomExito col-2 prueba"></span>
                    <span v-if="screen > 800" class="agendaAtBottomExito col-4 prueba"><a id="toFormTop" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic" class="btn rgm" style="width: 100%; margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;cursor:pointer;">SABER MÁS DE IQOS</a></span>
                    <span v-if="screen < 800"  class="agendaAtBottomExito col-2 prueba">
                        <a id="toFormTop" style="margin-top: 30rem;width:70%;margin-bottom: 0px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">SABER MÁS DE IQOS</a>
                    </span>   
                </section>





                <section id="prueba" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'lp1' || pagina == 'lp2'">
                <h4 style="margin-top:20px;">Regístrate para conocer IQOS y recibir $200 MXN*</h4>
                <p style="opacity:0.60">Por el momento los dispositivos IQOS están agotados, pero puedes registrarte para recibir noticias de IQOS y enterarte primero que nadie cuando los dispositivos estén disponibles nuevamente.</p>
                <div v-if="window.width > 767">
                    <ul class="refer-a-friend__box-items">
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/Icono_1.png" />                        
                            </div>
                            <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                            <p class="refer-a-friend__item--info">Completa el formulario de abajo (20 segundos).</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/icono_2.png" /> 
                            </div>
                            <div class="refer-a-friend__item-text">Recibe tu cupón de descuento por $200 MXN*</div>
                            <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/icono_3.png" /> 
                            </div>
                            <div class="refer-a-friend__item-text">Mantente enterado de las noticias de IQOS</div>
                            <p class="refer-a-friend__item--info">Entérate primero que nadie cuando los dispositivos IQOS estén disponibles nuevamente.</p>
                        </li>
                    </ul>
                </div>
                <div v-else>
                    <div class="refer-a-friend__box-wrapper">
                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <img src="/arquivos/Icono_1.png" /> 
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                    
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario de abajo (20 segundos).</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <img src="/arquivos/icono_2.png" /> 
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu cupón de descuento por $200 MXN*</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                    
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <div class="refer-a-friend__item-icon">
                                    <img src="/arquivos/icono_3.png" /> 
                                </div>
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Mantente enterado de las noticias de IQOS</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                        
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Entérate primero que nadie cuando los dispositivos IQOS estén disponibles nuevamente.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="ambiente_prueba" style="font-size:10px" >*Si te registras en la base de datos de IQOS del 1 de enero al 31
                de diciembre de 2021 para recibir información sobre IQOS,
                recibirás en tu correo electrónico un código de descuento para
                la compra de tu primer Kit IQOS. Aplican restricciones. Consulta <a style="color:blue" target="_blank" href="https://www.iqos.com/mx/es/codigos-de-descuento.html">Términos y Condiciones</a>.</span></p>
                </section>

                <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">

                <div class="two">
                    
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                        <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                        <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">
                        <input type=hidden id="00N4P00000HE6pF" name="00N4P00000HE6pF" :value="hostName" >

                        <!--  ----------------------------------------------------------------------  -->
                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                        <!--  these lines if you wish to test in debug mode.                          -->
                        <!--  <input type="hidden" name="debug" value=1>                              -->
                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                        <!--  ----------------------------------------------------------------------  -->

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="25" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="25" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                        
                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                        <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                        </div>

                        <fieldset>

                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition>    
                    </form>

                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  

                    <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                </div>    
                </section>

                <section id="queEsIqosVideo" class="video">
                    <h3>¿Qué es IQOS?</h3>
                    <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                    <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                        <img src="/arquivos/queEsIqosTumbnailMayo.png" />
                        <video width="320" height="240" id="myVideo">
                        <source src="https://pmi.23video.com/64968578/68793752/1423b77c21d366d862f03171afd1bcbe/video_hd/iqos-new-brand-world-brand-1-7-video.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                        </video>  
                    </div>
                </section>
                <section id="watchVideo" class="video" >
                    <div style="position: relative;
                    text-align:center;">
                        <a id="toForm" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">QUIERO REGISTRARME</a>
                    </div>
                </section>

                <section class="container boxes">
                    <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                    <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_CALIENTA.jpg' /></div><p>IQOS calienta el tabaco en lugar de quemarlo.</p></li>
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_NO_PRODUCE.jpg' /></div><p>IQOS no produce ceniza.</p></li>
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_NO_PRODUCE_HUMO.jpg' /></div><p>IQOS no produce humo.</p></li>
                        <li class="tooth"><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_EMITE.jpg' /></div><p>IQOS emite menos sustancias tóxicas</p></li>
                    </ul>
                    <!--<p class="disclaimer" style="font-size:10px">*Información importante: Si los dientes ya están manchados, cambiar a IQOS no eliminará el color de esas manchas. Fuente: Estudio de laboratorio no clínico llevado a cabo en Suiza con dientes humanos y los compuestos dentales más comúnmente usados. Al contrario de las condiciones del mundo real, los dientes no fueron expuestos a otras sustancias que pueden producir manchas, como café, té o vino, las cuales podrían influenciar los resultados.</p>-->
                </section>
                    
                    </div>`;
Vue.component('rgm-component', {
    'template': $rgm,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "hostName": window.location.hostname,
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "rgmw1",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "MENOSOLOR200",
            "GAtransactionId":"",
            "screen": window.innerWidth

        };

    },
    'methods': {
        "allowedCharacters":function(e){
            var reg = /^[a-zA-ZñÑÁáÉéÍíÓóÚú ÄäËëÏïÖöÜü"]*$/;
            var c = String.fromCharCode(e.which)
            if(reg.test(c))
            {
                return true;
            }
            else
            return false;
        },
        "GA_clientId":function(){ 
            var _self = this
            try{
                // Queues a tracker object for creation.
                ga('create', 'UA-XXXXX-Y', 'auto');

                // Once the tracker has been created, log the
                // client ID to theconsole.
                ga(function(tracker) {
                    _self.GAtransactionId = tracker.get('clientId')
                    console.log(tracker.get('clientId'), "clientId");
                    console.log(_self.GAtransactionId, "from state")
                    return tracker.get('clientId')
                });
                console.log(ga(), "ga function")
                var tracker = ga.getAll()[0];
                
                console.log("last", ga.getAll()[0].get('clientId'))
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                return "";
            }
        },
       
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.term = utms.utm_term
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                console.log("source value changed according to utm url", _self.source)
                if(utms.utm_source == undefined || _self.source == undefined){
                    _self.source = "rgmw1"
                }
                console.log("source value changed according to utm url", _self.source)
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
               
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
       /* "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },*/
        "llamar": function () {
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            //var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
           
            console.log(_self.hostName, "hostName")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000HE6pF="+_self.hostName+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.emailVerifiedNB = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        _self.GA_clientId()
        window.onresize = () => {
            _self.screen = window.innerWidth;
        };
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function (){
            $("#toForm").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#iqos-form").offset().top
                }, 1000);
            });
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#queEsIqosVideo").offset().top
                }, 2000);
            });
            $( "#first_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
            $( "#last_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
        
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});


var $rgmPrueba = `<div> 
                <section class="coronavirus" style="order:1;">
                <h4>Por el momento los dispositivos IQOS están agotados, ¡Regístrate y entérate cuando estén de regreso!</h4>
                </section>

                <section v-bind:class="{ pagina }" class="principal version_agoust" satyle="order:2;" v-if="pagina == 'lp1' || pagina == 'rgm'">


                    <span v-if="screen > 800" class="agendaAtBottomExito col-2 prueba"></span>
                    <span v-if="screen > 800" class="agendaAtBottomExito col-4 prueba"><a id="toFormTop" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic" class="btn rgm" style="width: 100%; margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;cursor:pointer;">SABER MÁS DE IQOS</a></span>
                    <span v-if="screen < 800"  class="agendaAtBottomExito col-2 prueba">
                        <a id="toFormTop" style="margin-top: 30rem;width:70%;margin-bottom: 0px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">SABER MÁS DE IQOS</a>
                    </span>   
                </section>





                <section id="prueba" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'lp1' || pagina == 'lp2'">
                <h4 style="margin-top:20px;">Regístrate para conocer IQOS y recibir $200 MXN*</h4>
                <p style="opacity:0.60">Por el momento los dispositivos IQOS están agotados, pero puedes registrarte para recibir noticias de IQOS y enterarte primero que nadie cuando los dispositivos estén disponibles nuevamente.</p>
                <div v-if="window.width > 767">
                    <ul class="refer-a-friend__box-items">
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/Icono_1.png" />                        
                            </div>
                            <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                            <p class="refer-a-friend__item--info">Completa el formulario de abajo (20 segundos).</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/icono_2.png" /> 
                            </div>
                            <div class="refer-a-friend__item-text">Recibe tu cupón de descuento por $200 MXN*</div>
                            <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <img src="/arquivos/icono_3.png" /> 
                            </div>
                            <div class="refer-a-friend__item-text">Mantente enterado de las noticias de IQOS</div>
                            <p class="refer-a-friend__item--info">Entérate primero que nadie cuando los dispositivos IQOS estén disponibles nuevamente.</p>
                        </li>
                    </ul>
                </div>
                <div v-else>
                    <div class="refer-a-friend__box-wrapper">
                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <img src="/arquivos/Icono_1.png" /> 
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                    
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario de abajo (20 segundos).</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <img src="/arquivos/icono_2.png" /> 
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu cupón de descuento por $200 MXN*</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                    
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                <div class="refer-a-friend__item-icon">
                                    <img src="/arquivos/icono_3.png" /> 
                                </div>
                            </div>
                            <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Mantente enterado de las noticias de IQOS</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                        
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Entérate primero que nadie cuando los dispositivos IQOS estén disponibles nuevamente.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <p class="ambiente_prueba" style="font-size:10px" >*Si te registras en la base de datos de IQOS del 1 de enero al 31
                de diciembre de 2021 para recibir información sobre IQOS,
                recibirás en tu correo electrónico un código de descuento para
                la compra de tu primer Kit IQOS. Aplican restricciones. Consulta <a style="color:blue" target="_blank" href="https://www.iqos.com/mx/es/codigos-de-descuento.html">Términos y Condiciones</a>.</span></p>
                </section>

                <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">

                <div class="two">
                    
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                        <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                        <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">
                        <input type=hidden id="00N4P00000HE6pF" name="00N4P00000HE6pF" :value="hostName" >

                        <!--  ----------------------------------------------------------------------  -->
                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                        <!--  these lines if you wish to test in debug mode.                          -->
                        <!--  <input type="hidden" name="debug" value=1>                              -->
                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                        <!--  ----------------------------------------------------------------------  -->

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="25" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="25" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                        
                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                        <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                        </div>

                        <fieldset>

                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition>    
                    </form>

                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  

                    <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                </div>    
                </section>

                <section id="queEsIqosVideo" class="video">
                    <h3>¿Qué es IQOS?</h3>
                    <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                    <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                        <img src="/arquivos/queEsIqosTumbnailMayo.png" />
                        <video width="320" height="240" id="myVideo">
                        <source src="https://pmi.23video.com/64968578/68793752/1423b77c21d366d862f03171afd1bcbe/video_hd/iqos-new-brand-world-brand-1-7-video.mp4" type="video/mp4">
                        Your browser does not support the video tag.
                        </video>  
                    </div>
                </section>
                <section id="watchVideo" class="video" >
                    <div style="position: relative;
                    text-align:center;">
                        <a id="toForm" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">QUIERO REGISTRARME</a>
                    </div>
                </section>

                <section class="container boxes">
                    <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                    <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_CALIENTA.jpg' /></div><p>IQOS calienta el tabaco en lugar de quemarlo.</p></li>
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_NO_PRODUCE.jpg' /></div><p>IQOS no produce ceniza.</p></li>
                        <li><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_NO_PRODUCE_HUMO.jpg' /></div><p>IQOS no produce humo.</p></li>
                        <li class="tooth"><div><img style="width: 100%;height: auto;" src='/arquivos/IQOS_EMITE.jpg' /></div><p>IQOS emite menos sustancias tóxicas</p></li>
                    </ul>
                    <!--<p class="disclaimer" style="font-size:10px">*Información importante: Si los dientes ya están manchados, cambiar a IQOS no eliminará el color de esas manchas. Fuente: Estudio de laboratorio no clínico llevado a cabo en Suiza con dientes humanos y los compuestos dentales más comúnmente usados. Al contrario de las condiciones del mundo real, los dientes no fueron expuestos a otras sustancias que pueden producir manchas, como café, té o vino, las cuales podrían influenciar los resultados.</p>-->
                </section>
                    
                    </div>`;
Vue.component('rgm-prueba-component', {
    'template': $rgmPrueba,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "hostName": window.location.hostname,
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "rgmw1",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "MENOSOLOR200",
            "GAtransactionId":"",
            "screen": window.innerWidth

        };

    },
    'methods': {
        "allowedCharacters":function(e){
            var reg = /^[a-zA-ZñÑÁáÉéÍíÓóÚú ÄäËëÏïÖöÜü"]*$/;
            var c = String.fromCharCode(e.which)
            if(reg.test(c))
            {
                return true;
            }
            else
            return false;
        },
        "GA_clientId":function(){ 
            var _self = this
            try{
                // Queues a tracker object for creation.
                ga('create', 'UA-XXXXX-Y', 'auto');

                // Once the tracker has been created, log the
                // client ID to theconsole.
                ga(function(tracker) {
                    _self.GAtransactionId = tracker.get('clientId')
                    console.log(tracker.get('clientId'), "clientId");
                    console.log(_self.GAtransactionId, "from state")
                    return tracker.get('clientId')
                });
                console.log(ga(), "ga function")
                var tracker = ga.getAll()[0];
                
                console.log("last", ga.getAll()[0].get('clientId'))
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                return "";
            }
        },
       
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.term = utms.utm_term
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                console.log("source value changed according to utm url", _self.source)
                if(utms.utm_source == undefined || _self.source == undefined){
                    _self.source = "rgmw1"
                }
                console.log("source value changed according to utm url", _self.source)
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
               
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
       /* "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },*/
        "llamar": function () {
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            //var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
           
            console.log(_self.hostName, "hostName")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000HE6pF="+_self.hostName+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.emailVerifiedNB = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        _self.GA_clientId()
        window.onresize = () => {
            _self.screen = window.innerWidth;
        };
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function (){
            $("#toForm").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#iqos-form").offset().top
                }, 1000);
            });
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#queEsIqosVideo").offset().top
                }, 2000);
            });
            $( "#first_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
            $( "#last_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
        
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});

var $leadsConoce = `<div>
                
                <section class="coronavirus">
                <h4>Por tiempo limitado, <b> regístrate para recibir más información de IQOS y recibe $500 MXN </b> de descuento para la compra de tu primer Kit IQOS.</h4>
                </section>
                
                
                <section v-bind:class="{ pagina }" class="principal version_prueba" v-if="pagina == 'lp1' || pagina == 'rgm'">
                <div class="ambiente_prueba">
                    <img v-if="window.width > 600" src="/arquivos/iqos_blanco.png" class="iqosBranco version_prueba" alt="iqos" title="iqos" />
                    <h1>REGÍSTRATE Y RECIBE $500 MXN DE DESCUENTO</h1>
                    <p>IQOS es un dispositivo que calienta el tabaco en lugar de quemarlo, esto lo convierte en una mejor opción para consumir tabaco. Sin fuego. Sin humo. Sin ceniza.<p>
                    <a href='#' class='btn_black agendarllamada' data-category="Navigation (top)" data-action="Click icon" data-label="MX" data-event="Clic">QUIERO REGISTRARME</a>
                    <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                </div>
                <div class="img">
                </div>
            </section>
            <section v-bind:class="{ pagina }" class="principal" v-if="pagina == 'lp2'">
                <div>
                    <img src="/arquivos/iqoslogo.png" class="logo" alt="iqos" title="iqos" />
                    <h1>INNOVACIÓN Y TECNOLOGÍA PARA CONSUMIR TABACO SIN QUEMARLO.</h1>
                    <img src="/arquivos/lp2-img2.jpg" class="img2" />
                    <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                    <div class="bottomColor"></div>
                </div>
            </section>
            <section id="pasos" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'rgm'">
                <h4>Regístrate para conocer IQOS y recibir $500 MXN*</h4>
                <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                <ul>
                    <li><span>1</span> Completa el formulario de abajo (20 segundos)</li>
                    <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>2</span> Te enviaremos un correo</li>
                    <li v-if="pagina == 'rgm'"><span>2</span> Recibirás un correo con un <b>cupón de descuento por $500 pesos*</b></li>
                    <li v-if="pagina == 'lp1' || pagina == 'lp2'"><span>3</span> Solicita tu demostración de
                    IQOS</li>
                    <li v-if="pagina == 'rgm'"><span>3</span> Un Experto IQOS se pondrá en contacto contigo</li>
                    <li><span>4</span> ¡Descubre IQOS!</li>
                </ul>
                <p v-if="pagina == 'rgm'" style="font-size:10px">Promoción vigente al 31 de diciembre de 2020. Consulta <a style="color:blue" href="/terminos-condiciones">Términos y Condiciones</a>.</span> </p>
            </section>
            
            
            
            <section id="prueba" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}" v-if="pagina == 'lp1' || pagina == 'lp2'">
                <h4 style="margin-top:20px;">Regístrate para conocer IQOS y recibir $500 MXN*</h4>
                <p style="opacity:0.60">¡Compártenos tus datos y te mostraremos todo lo que IQOS tiene para ti! Eliminar el humo y la ceniza, lo cambia todo.</p>
                <div v-if="window.width > 767">
                    <ul class="refer-a-friend__box-items">
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <svg width="40px" height="63px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                            <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                            </g>
                                        </g>
                                    </g>
                                </svg>                        
                            </div>
                            <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                            <p class="refer-a-friend__item--info">Completa el formulario de abajo (20 segundos).</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                            <svg width="55px" height="59px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                            <g id="Group" transform="translate(845.000000, 332.000000)">
                                                <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                            <div class="refer-a-friend__item-text">Recibe tu cupón de descuento por $500 MXN*</div>
                            <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                        </li>
                        <li class="refer-a-friend__box-item">
                            <div class="refer-a-friend__item-icon">
                                <svg width="61px" height = "61px">
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                            <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                            <div class="refer-a-friend__item-text">Canjea tu cupón de descuento</div>
                            <p class="refer-a-friend__item--info">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                        </li>
                    </ul>
                </div>
                <div v-else>
                    <div class="refer-a-friend__box-wrapper">
                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                <svg width="25px" height="30px" viewBox="0 0 40 63" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g id="Refer-A-Friend-Icons" transform="translate(-660.000000, -286.000000)" stroke="#545454" stroke-width="4">
                                            <g id="Group" transform="translate(680.000000, 317.500000) rotate(180.000000) translate(-680.000000, -317.500000) translate(662.000000, 288.000000)">
                                                <path d="M18,26.2208747 L18,58.7042769" id="Line" stroke-linecap="round"></path>
                                                <polyline id="Path" stroke-linejoin="round" points="10.0177147 40 0 40 0 0 0 0 36 0 36 40 26.0178723 40"></polyline>
                                                <polyline id="Path-14" stroke-linecap="round" stroke-linejoin="round" points="8 49.0846019 18 59 28 49.0846019"></polyline>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                            <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                        border-left: solid 1px;
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario de abajo (20 segundos).</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                <svg width="25px" height="45px" viewBox="0 0 55 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                        <g id="Refer-A-Friend-Icons" transform="translate(-843.000000, -330.000000)" stroke="#545454" stroke-width="4">
                                            <g id="Group" transform="translate(845.000000, 332.000000)">
                                                <path d="M26.6731924,0.569584983 L3.64572938,23.9076557 C-0.480660659,28.0907598 -0.480660659,34.8950133 3.64572938,39.0781173 L19.2183282,53.569585 L50.5509368,23.7799082 L50.5509368,0.569584983 L26.6731924,0.569584983 Z" id="Path"></path>
                                                <path d="M26.5509368,17.0700318 C26.5509368,21.204481 29.9158404,24.569585 34.0509368,24.569585 C38.1860333,24.569585 41.5509368,21.204481 41.5509368,17.0700318 C41.5509368,12.9346889 38.1860333,9.56958498 34.0509368,9.56958498 C29.9158404,9.56958498 26.5509368,12.9346889 26.5509368,17.0700318 Z" id="Path"></path>
                                            </g>
                                        </g>
                                    </g>
                                </svg>
                            </div>
                            <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu cupón de descuento por $500 MXN*</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                        border-left: solid 1px;
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                            </div>
                        </div>


                        <div class="col-12 prueba" style="display:flex">
                            <div class="col-2 prueba" style="display: flex;justify-content: end;width: 9.66%;">
                                <div class="refer-a-friend__item-icon">
                                    <svg width="25px" height="25px" viewBox="0 0 61 59" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                            <g id="Refer-A-Friend-Icons" transform="translate(-930.000000, -260.000000)">
                                                <g id="Group-8-Copy-3" transform="translate(932.000000, 262.000000)">
                                                    <g id="Group-5" transform="translate(1.800000, 1.000000)"></g>
                                                    <path d="M0.8,1.42108547e-14 L46.6072262,1.42108547e-14 C53.71183,1.42108547e-14 56.8,4.20257038 56.8,10.3495363 L56.8,55 C56.8,55 2.0594717,54.9974496 0.8,54.9974496 L0.8,1.42108547e-14 Z" id="Path" stroke="#545454" stroke-width="4" stroke-linejoin="round" transform="translate(28.800000, 27.500000) scale(-1, -1) translate(-28.800000, -27.500000) "></path>
                                                    <path d="M21.762963,30.9259259 C20.1265637,30.9259259 18.8,29.5993622 18.8,27.962963 C18.8,26.3265637 20.1265637,25 21.762963,25 C23.3993622,25 24.7259259,26.3265637 24.7259259,27.962963 C24.7259259,29.5993622 23.3993622,30.9259259 21.762963,30.9259259 Z M34.3555556,45 C32.7191563,45 31.3925926,43.6734363 31.3925926,42.037037 C31.3925926,40.4006378 32.7191563,39.0740741 34.3555556,39.0740741 C35.9919548,39.0740741 37.3185185,40.4006378 37.3185185,42.037037 C37.3185185,43.6734363 35.9919548,45 34.3555556,45 Z M21.9290745,43.7505605 C21.1754872,44.4659897 19.9973167,44.4213766 19.2975571,43.6509144 C18.5977974,42.8804521 18.6414334,41.675899 19.3950207,40.9604698 L35.6709255,25.5086988 C36.4245128,24.7932696 37.6026833,24.8378826 38.3024429,25.6083449 C39.0022026,26.3788072 38.9585666,27.5833602 38.2049793,28.2987895 L21.9290745,43.7505605 Z" id="Combined-Shape" fill="#545454"></path>
                                                    <path d="M1.01,14.25 L55.5221543,14.25" id="Line-3" stroke="#545454" stroke-width="4" stroke-linecap="square"></path>
                                                </g>
                                            </g>
                                        </g>
                                    </svg>
                                </div>
                            </div>
                            <div class="col-10 prueba" style="display: flex;justify-content: end;align-items: center;">
                                <div class="refer-a-friend__item-text" style="font-size:20px">Canjea tu cupón de descuento</div>
                            </div>
                        </div>
                        <div class="col-12 prueba" 
                        style="display:flex;
                        border-left: solid 1px;
                        min-height: 66px;
                        margin-left: 13px;
                        margin-top: 13px;
                        margin-bottom: 13px;
                        border-color: #979797;">
                            <div class="col-1 prueba"></div>
                            <div class="col-11 prueba" style="display: flex;align-items: center;">
                                <p class="refer-a-friend__item--info" style="opacity: 0.6;">Podrás canjear tu cupón de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <p style="font-size:10px">Promoción vigente al 31 de diciembre de 2020. Consulta <a style="color:blue" target="_blank"  href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a>.</span> </p>
            </section>
           
            <section id="iqos-form" :class="{ 'claro' : (pagina == 'lp1' || pagina == 'rgm'), 'gray' : pagina == 'lp2'}">
                
                <div class="two">
                    
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                        <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                        <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">

                        <!--  ----------------------------------------------------------------------  -->
                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                        <!--  these lines if you wish to test in debug mode.                          -->
                        <!--  <input type="hidden" name="debug" value=1>                              -->
                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                        <!--  ----------------------------------------------------------------------  -->

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                        
                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                        <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />

                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                        </div>

                        <fieldset>
                           
                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition> 

                        
                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
    
                    <img v-if="pagina == 'lp2'" src="/arquivos/lp2-img3.png" />
                </div>
                
            </section>


            <section class="video">
                <h3>¿Cómo funciona IQOS?</h3>
                <p>A diferencia de los cigarros electrónicos que utilizan nicotina líquida, IQOS funciona con unidades de tabaco para calentar.
                Mira el video y descubre más sobre IQOS.
                </p>
                <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                    <img src="https://www.iqos.com/vanity/content/dam/iqos/local/mx/video_display/Thumbnail%20video%20guided%20trial%20v2%20(1).JPG/Thumbnail%20video%20guided%20trial%20v2%20(1)-2020-07-14T19:18:28.200.JPG " />
                    <video width="320" height="240" id="myVideo">
                    <source src="https://pmi.23video.com/60445025/63693073/50244f13631e6e3594c8839e7e0c1560/video_1080p/iqos-3-duo-guided-trial-video.mp4 " type="video/mp4">
                    Your browser does not support the video tag.
                    </video>
                </div>
            </section>
            <section class="container boxes">
                <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                    <li><div><img src='/arquivos/fire.png' /></div><p><b>Sin fuego</b> El tabaco no se quema y se libera su sabor real.</p></li>
                    <li><div><img src='/arquivos/smoke.jpg' /></div><p><b>Sin humo y sin ceniza</b> Habrá menos olor en ti, en tu ropa y en tu entorno.</p></li>
                    <li><div><img src='/arquivos/users-group.png' /></div><p><b>Sin olor a cigarro</b> Es menos probable que molestes a la gente a tu alrededor.</p></li>
                    <li class="tooth"><div><img src='/arquivos/tooth.png' /></div><p><b>No más manchas en tus dientes* </b> Causadas por el<br /> humo del cigarro.</p></li>
                </ul>
                <p class="disclaimer" style="font-size:10px">*Información importante: Si los dientes ya están manchados, cambiar a IQOS no eliminará el color de esas manchas. Fuente: Estudio de laboratorio no clínico llevado a cabo en Suiza con dientes humanos y los compuestos dentales más comúnmente usados. Al contrario de las condiciones del mundo real, los dientes no fueron expuestos a otras sustancias que pueden producir manchas, como café, té o vino, las cuales podrían influenciar los resultados.</p>
            </section>
            </div>`;
Vue.component('template-component-conoce', {
    'template': $leadsConoce,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "RETOCT20",
            "GAtransactionId":""

        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                _self.term = utms.utm_term
                // if(utms.utm_term == undefined){
                //     _self.term = "checkboxfumador"
                // } else {
                //    _self.term = utms.utm_term
                // } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        },  
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },
        "llamar": function () {
            var _self = this
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()

                _self.envio()                
        
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.source + this.medium;
            //  "&00N4P000008mN2Q="+concatination+
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }

            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.emailVerifiedNB = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        _self.video()
        _self.mesyano()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});

var $conoceValTel = `<div>

<div v-if="window.width > 767" class="version_valtelMayo" style="padding: 1em;">
<div class="col-4 prueba" style="width:38%;text-align: center;display: flex;align-self: flex-end;">
    <div id="val" style="color:#FFFFFF">
    <h1 id="tittleValtelForm" style="margin-top:20px;margin-bottom:10px;">IQOS CALIENTA TABACO REAL.<p id="pvaltel">MENOS OLOR, SIN HUMO, SIN CENIZA.</p></h1>
    <p id="pvaltelMiddle" >RECIBE $200MXN* DE DESCUENTO<br /> EN LA COMPRA DE TU PRIMER KIT IQOS</p>
    <div style="margin-top:10px:" v-if="window.width > 767">
        <ul class="refer-a-friend__box-items">
            <li class="refer-a-friend__box-item">
                <div class="refer-a-friend__item-icon">
                    <img src="/arquivos/Icono_1.png" />                      
                </div>
                <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                <p class="refer-a-friend__item--info">Completa el formulario (20 segundos).</p>
            </li>
            <li class="refer-a-friend__box-item">
                <div class="refer-a-friend__item-icon">
                    <img src="/arquivos/icono_2.png" />
                </div>
                <div class="refer-a-friend__item-text">Recibe tu cupón de descuento por $200 MXN*</div>
                <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
            </li>
            <li class="refer-a-friend__box-item">
                <div class="refer-a-friend__item-icon">
                    <img src="/arquivos/icono_3.png" /> 
                </div>
                <div class="refer-a-friend__item-text">Mantente enterado de las noticias de IQOS</div>
                <p class="refer-a-friend__item--info">Entérate primero que nadie cuando los dispositivos IQOS estén disponibles nuevamente.</p>
            </li>
        </ul>
    </div>
   
    
</div>
</div>
<div class="col-8 prueba" style="width: 62%;display: flex;justify-content: center;margin-top: 2rem;flex-direction: column;align-items: center;">
    <section class="col-10 prueba" id="iqos-form">
        <h1 id="tittleValtelForm" style="color:#FFFFFF;text-transform: uppercase;">Déjanos tus datos y tu número de teléfono,<br />te contactaremos</h1>

        <div class="two">
            
            <form style="color: #FFFFFF;font-weight: bolder;" id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                <input type=hidden name="oid" value="00D4P000000h9QV">
                <input type=hidden name="retURL" value="http://www.iqos.com">
                <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">
                <input type=hidden id="00N4P00000HE6pF" name="00N4P00000HE6pF" :value="hostName" >

                <!--  ----------------------------------------------------------------------  -->
                <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                <!--  these lines if you wish to test in debug mode.                          -->
                <!--  <input type="hidden" name="debug" value=1>                              -->
                <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                <!--  ----------------------------------------------------------------------  -->

                <label class="lb-input" style="opacity: unset !important;" for="first_name">NOMBRE(S)*</label>
                <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="25" class="field" name="first_name" size="20" type="text" />

                <label class="lb-input" style="opacity: unset !important;"  for="last_name">Apellido(s)*</label>
                <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="25" name="last_name" class="field" size="20" type="text" />

                
                <label class="lb-input" style="opacity: unset !important;"  for="email">Email*</label>
                <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                

                <div class="tooltip">
                    <label class="lb-input" style="opacity: unset !important;"  for="phone">TELÉFONO (10 DÍGITOS)*</label>
                    <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                    <span class="tooltiptext">Te mandaremos un código de verificación</span>
                </div>

                
            




                <div class="none">
                    <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                    <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                    <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                    <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                    <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                    <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                    <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                    <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                    <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                </div>

                <fieldset>

                    <label for="00N4P00000GZEGJ">
                        <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                        <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:#FFFFFF" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                    </label>
                    <label for="00N4P000008mN8e">
                        <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                        <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                    </label>
                </fieldset>

                <div class="btn form-btn" style="max-width: 50%;">
                    <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                    <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                </div>

                

                <transition name="fade">
                    <div v-if="Msnenvio" class="envio errors">
                        <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                        <b>{{ Msnenvio }}</b>
                    </div>
                </transition> 
                   
            </form>

            

            <transition name="fade">
                <div v-if="errors.length" class="errors">
                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                    <b>Para continuar, por favor revisa lo siguiente:</b>
                    <ul>
                        <li v-for="error in errors">{{ error }}</li>
                    </ul>
                </div>    
            </transition>  

            <transition name="fade">
                <div v-if="codeToPhoneSent" class="errors" style="text-align:center;">
                    <b>Ingresa el código de verificación que hemos enviado a tu Teléfono</b>

                    <label class="lb-input" for="code">CÓDIGO (4 DÍGITOS)</label>
                    <the-mask class="field" data-category="Form Local Lead" data-action="code" data-label="MX" data-event="Clic" type="text" id="code" maxlength="4" name="code" :mask="['##########']" :value="codeSent" />
                    <b v-if="wrongCode" style="color:red;">Código ingresado erróneo</b>
                    <div @click="verifyCode()" class="btn form-btn" 
                    style="background: #000;
                    color: #000000 !important;
                    border: 0;
                    margin: 0 auto;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    padding: 0;
                    display: flex;
                    margin-top:2rem;
                    text-align: center;">
                        <input 
                        style="padding: 0 1em;
                        margin: 0;
                        color: #fff !important;
                        border: 0 !important;
                        width: initial;
                        cursor: pointer;
                        width: 100%;
                        padding: 0.5em 2em;
                        background: transparent;
                        
                        text-align: center;" 
                        data-category="Code verification" data-action="Send Code" data-label="MX" data-event="Clic" type="submit" value="Enviar Código" class="save"
                        name="submit">
                            <svg 
                            style="position: absolute;
                            margin-left: 130px;" width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                    </div>
                    <div v-if="wrongCode" @click="sendCodeToPhone()" class="btn form-btn" 
                    style="background: #000;
                    color: #000000 !important;
                    border: 0;
                    margin: 0 auto;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    padding: 0;
                    display: flex;
                    margin-top:0.5rem;
                    text-align: center;">
                        <input 
                        style="padding: 0 1em;
                        margin: 0;
                        color: #fff !important;
                        border: 0 !important;
                        
                        width: initial;
                        cursor: pointer;
                        width: 100%;
                        padding: 0.5em 2em;
                        background: transparent;
                        
                        text-align: center;" 
                        data-category="Code verification" data-action="Send Code" data-label="MX" data-event="Clic" type="submit" value="Reenviar Código" class="save"
                        name="submit">
                            <svg 
                            style="position: absolute;
                            margin-left: 130px;" width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                    </div>
                </div>    
            </transition> 

           
            
        </div>  
        <p class="ambiente_prueba" style="font-size:10px;color:#FFF;font-weigth:bolder;margin-top:10px;" >*Si te registras en la base de datos de IQOS del 1 de enero al 30 de abril de 2021 para recibir información sobre IQOS, recibirás en tu correo electrónico un código de descuento para le compra de tu primer KIT IQOS. Aplican restricciones. Consulta <a style="color:#FFFFFF" target="_blank"  href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a>.</p>  
    </section>
    
</div>

</div> 
                <div v-else>
                    <section v-bind:class="{ pagina }" class="version_valtelMayo" satyle="order:2;" >
                                            
                                                
                        
                        <span   class="agendaAtBottomExito col-2 prueba">
                            <a id="toFormTop" style="margin-top: 29rem;width:70%;margin-bottom: 0px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">QUIERO REGISTRARME</a>
                        </span>   
                    </section>
                    <section id="pasos" class="claro">
                    <h4>Déjanos tus datos y tu número de teléfono,<br/>te contactaremos</h4>
                    
                    </section>
                    <section id="prueba" class="claro">
                        <div class="refer-a-friend__box-wrapper">
                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                    <img src="/arquivos/Icono_1.png" /> 
                                </div>
                                <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                        
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario de abajo (20 segundos).</p>
                                </div>
                            </div>


                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                    <img src="/arquivos/icono_2.png" /> 
                                </div>
                                <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu cupón de descuento por $200 MXN*</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                        
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu cupón. Válido para la compra de tu primer Kit IQOS.</p>
                                </div>
                            </div>


                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                    <div class="refer-a-friend__item-icon">
                                        <img src="/arquivos/icono_3.png" /> 
                                    </div>
                                </div>
                                <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Mantente enterado de las noticias de IQOS</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                            
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Entérate primero que nadie cuando los dispositivos IQOS estén disponibles nuevamente.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section id="iqos-form" class="claro">
            
                    <div class="two">
                        
                        <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                           
            
                            <input type=hidden name="oid" value="00D4P000000h9QV">
                            <input type=hidden name="retURL" value="http://www.iqos.com">
                            <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">
                            <input type=hidden id="00N4P00000HE6pF" name="00N4P00000HE6pF" :value="hostName" >
            
                            <!--  ----------------------------------------------------------------------  -->
                            <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                            <!--  these lines if you wish to test in debug mode.                          -->
                            <!--  <input type="hidden" name="debug" value=1>                              -->
                            <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                            <!--  ----------------------------------------------------------------------  -->
            
                            <label class="lb-input" for="first_name">NOMBRE(S)*</label>
                            <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />
            
                            <label class="lb-input"  for="last_name">Apellido(s)*</label>
                            <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />
            
                            
                            <label class="lb-input"  for="email">Email*</label>
                            <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                            
            
                            <div class="tooltip">
                                <label class="lb-input"  for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                <span class="tooltiptext">Te mandaremos un código de verificación</span>
                            </div>
            
                            
                        
            
            
            
            
                            <div class="none">
                                <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                            </div>
            
                            <fieldset>
            
                                <label for="00N4P00000GZEGJ">
                                    <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                    <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a  target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                                </label>
                                <label for="00N4P000008mN8e">
                                    <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                    <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                </label>
                            </fieldset>
            
                            <div class="btn form-btn" >
                                <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                            </div>
            
                            
            
                            <transition name="fade">
                                <div v-if="Msnenvio" class="envio errors">
                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>{{ Msnenvio }}</b>
                                </div>
                            </transition> 
                               
                        </form>
            
                        
            
                        <transition name="fade">
                            <div v-if="errors.length" class="errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>Para continuar, por favor revisa lo siguiente:</b>
                                <ul>
                                    <li v-for="error in errors">{{ error }}</li>
                                </ul>
                            </div>    
                        </transition>  
            
                        <transition name="fade">
                            <div v-if="codeToPhoneSent" class="errors" style="text-align:center;">
                                <b>Ingresa el código de verificación que hemos enviado a tu Teléfono</b>
            
                                <label class="lb-input" for="code">CÓDIGO (4 DÍGITOS)</label>
                                <the-mask class="field" data-category="Form Local Lead" data-action="code" data-label="MX" data-event="Clic" type="text" id="code" maxlength="4" name="code" :mask="['##########']" :value="codeSent" />
                                <b v-if="wrongCode" style="color:red;">Código ingresado erróneo</b>
                                <div @click="verifyCode()" class="btn form-btn" 
                                style="background: #000;
                                color: #000000 !important;
                                border: 0;
                                margin: 0 auto;
                                align-items: center;
                                justify-content: center;
                                cursor: pointer;
                                padding: 0;
                                display: flex;
                                margin-top:2rem;
                                text-align: center;">
                                    <input 
                                    style="padding: 0 1em;
                                    margin: 0;
                                    color: #fff !important;
                                    border: 0 !important;
                                    width: initial;
                                    cursor: pointer;
                                    width: 100%;
                                    padding: 0.5em 2em;
                                    background: transparent;
                                    
                                    text-align: center;" 
                                    data-category="Code verification" data-action="Send Code" data-label="MX" data-event="Clic" type="submit" value="Enviar Código" class="save"
                                    name="submit">
                                        <svg 
                                        style="position: absolute;
                                        margin-left: 130px;" width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                </div>
                                <div v-if="wrongCode" @click="sendCodeToPhone()" class="btn form-btn" 
                                style="background: #000;
                                color: #000000 !important;
                                border: 0;
                                margin: 0 auto;
                                align-items: center;
                                justify-content: center;
                                cursor: pointer;
                                padding: 0;
                                display: flex;
                                margin-top:0.5rem;
                                text-align: center;">
                                    <input 
                                    style="padding: 0 1em;
                                    margin: 0;
                                    color: #fff !important;
                                    border: 0 !important;
                                    
                                    width: initial;
                                    cursor: pointer;
                                    width: 100%;
                                    padding: 0.5em 2em;
                                    background: transparent;
                                    
                                    text-align: center;" 
                                    data-category="Code verification" data-action="Send Code" data-label="MX" data-event="Clic" type="submit" value="Reenviar Código" class="save"
                                    name="submit">
                                        <svg 
                                        style="position: absolute;
                                        margin-left: 130px;" width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                </div>
                            </div>    
                        </transition> 
            
                       
                        
                    </div>  
                    <p class="ambiente_prueba" style="font-size:10px;color:#000;margin-top:10px;margin-bottom:10px;" >*Si te registras en la base de datos de IQOS del 1 de enero al 30 de abril de 2021 para recibir información sobre IQOS, recibirás en tu correo electrónico un código de descuento para le compra de tu primer KIT IQOS. Aplican restricciones. Consulta <a style="color:#FFFFFF" target="_blank"  href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a>.</p>  
                </section>
                </div>
                   
                    <style scoped>
                       
                        @media (min-width:64em) {
                            div#val ul li p.refer-a-friend__item--info {
                                max-width: 300px;
                                
                            }
                        }

                        @media (min-width:48em) {
                            div#val ul.refer-a-friend__box-items {
                                display: flex;
                                justify-content: space-between;
                            }
                            div#val ul li.refer-a-friend__box-item {
                                flex-direction: column;
                                justify-content: center;
                                flex-basis: 33.33333%;
                                max-width: 33.33333%;
                                height: 100%;
                            }
                            div#val ul li div.refer-a-friend__item-icon {
                                margin-right: 0;
                            }
                            div#val ul li div.refer-a-friend__item-text {
                                font-size: 28px;
                                letter-spacing: -.29px;
                                text-align: center;
                            }
                            div#val ul li p.refer-a-friend__item--info {
                                margin-left: 0;
                                padding: 0 2rem;
                                width: 70%;
                                text-align: center;
                                
                            }
                            
                        }

                        @media (max-width: 760px) {
                            .col-5.prueba {
                                width: 100%;
                                padding-top: 4rem;
                            }
                            .col-7.prueba {
                                width: 100%;
                                margin-top: 11rem !important;
                            }
                            h1#tittleValtelForm {
                                margin-top: 7rem;
                                margin-bottom: 1rem;
                            }
                            p#pvaltelMiddle {
                                font-size:16px;
                                margin-bottom: 15px;
                            }
                        }


                        div#val ul li.refer-a-friend__box-item {
                            display: flex;
                            justify-content: flex-start;
                            align-items: center;
                            position: relative;
                            flex-wrap: wrap;
                        }
                        div#val ul.refer-a-friend__box-items {
                            display: flex;
                            justify-content: space-between;
                            align-items: end;
                            margin-top: 1.5em;
                        }
                        div#val ul li div.refer-a-friend__item-icon {
                            margin-right: 0;
                            margin-bottom: 1em;
                        }
                        div#val ul li div.refer-a-friend__item-text {
                            font-size:18px;
                           
                            letter-spacing: normal;
                            color: #FFF;
                            line-height: 1;
                            width: calc(100% - 70px);
                        }
                        div#val ul li p.refer-a-friend__item--info {
                            margin-left: 4.7rem;
                            position: relative;
                            max-width: 100%;
                            line-height: 1.5;
                            margin: 1.875em 0;
                            
                            font-size: 11px;
                        }

                        
                        form .btn {
                            background: #000;
                            color: #fff;
                        }
                        .errors {
                            color:#000;
                        }
                        @media (min-width: 800px) {
                            h1#tittleValtelForm {
                                font-size: 2.3em !important;
                            }
                            p#pvaltel {
                                font-size:30px;
                            }
                            p#pvaltelMiddle {
                                font-size:22px;
                            }
                            input {
                                color: #FFF !important;
                                border-bottom: 1px solid #FFF !important;
                            }
                            #code {
                                color: #000 !important;
                                border-bottom: 1px solid #000 !important;
                            }
                            form input:checked + span::before {
                                content: "√";
                                color: rgb(255, 255, 255);
                                background: rgb(0, 0, 0);
                            }
                            section#iqos-form {
                                margin-left: 3rem;
                            }
                            form fieldset label span:before {
                                content: "";
                                width: 24px;
                                min-width: 24px;
                                height: 24px;
                                background: transparent;
                                display: inline-block;
                                margin-right: 1em;
                                border: 1px solid #FFF;
                                font-size: 12px;
                                text-align: center;
                                border-radius: 5px;
                                line-height: 28px;
                            }
                            form fieldset label span {
                                text-align: left;
                                margin-bottom: 3em;
                                display: flex;
                                margin-top: 2em;
                                color: #FFF;
                                align-items: center;
                            }
        
                        }

                        @media (min-width: 1024px) and (max-width: 1400px) {
                            .version_valtel {
                                background-position: -510px 5px !important;
                            }
                        }
                        
                        div#val ul li div.refer-a-friend__item-icon {
                            margin-right: 0;
                        }
                    </style>
                    
                    </div>`;
Vue.component('conocevaltel-component', {
    'template': $conoceValTel,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Valtel",
            "hostName": window.location.hostname,
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "MENOSOLOR200",
            "GAtransactionId":"",
            "phoneValidated": false,
            "codeToPhoneSent": false,
            "codeSent":"",
            "wrongCode": false

        };

    },
    'methods': {
        "allowedCharacters":function(e){
            var reg = /^[a-zA-ZñÑÁáÉéÍíÓóÚú ÄäËëÏïÖöÜü"]*$/;
            var c = String.fromCharCode(e.which)
            if(reg.test(c))
            {
                return true;
            }
            else
            return false;
        },
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                //_self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_source + utms.utm_medium;
                // if(utms.utm_term == undefined){
                //     _self.term = "checkboxfumador"
                // } else {
                //    _self.term = utms.utm_term
                // } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)    
        },
        
     
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },
        "llamar": function () {
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                

                _self.sendCodeToPhone()
                //_self.envio()                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
       
        "sendCodeToPhone": function (){
            var _self = this
            _self.beforeSend()
            var number = _self.telefone
            var requestOptions = {
            method: 'GET',
           
            header: {
                'Access-Control-Allow-Origin':'*',
            },
            redirect: 'follow'
            };
        

            fetch(`https://valtel--pmimexico.myvtex.com/send?phonenumber=${number}&channel=sms`, requestOptions)
            .then((response) => {
                console.log("res", response)
                $(_self.form).find(".loading").remove()
                if(response.status == 200){
                    response.json().then(data => {
                        console.log(data)
                        _self.codeToPhoneSent = true
                    });
                }
            })
            .catch((error) => {
                var _self = this  
                $(_self.form).find(".loading").remove()
                _self.errors.push("El número de teléfono agregado es invalido");
                console.log(error);
            });
           
        },
       
        "verifyCode": function (){
            var _self = this
            _self.beforeSend()
            var number = _self.telefone
            var code = $("#code").val()
            
            var requestOptions = {
            method: 'GET',
           
            header: {
                'Access-Control-Allow-Origin':'*',
            },
            redirect: 'follow'
            };

            fetch(`https://valtel--pmimexico.myvtex.com/verifyCodeSent?phonenumber=${number}&code=${code}`, requestOptions)
            .then((response) => {
                console.log("response:",response)
                $(_self.form).find(".loading").remove()
                if(response.status == 200){
                    response.json().then(data => {
                        if(data.status == "approved") {
                            console.log("data:",data)
                            _self.errors = [];
                            _self.Msnenvio = null;
                            _self.envio()
                        } else {
                            _self.wrongCode = true
                        }
                        
                    });
                }else{
                    _self.codeToPhoneSent = false
                    alert("internal server error")
                    console.log("server error", response)
                }
            })
            .catch(error => console.log('error', error));
        },
        "beforeSend": function() {
            var _self = this
            $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            //var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
           
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000HE6pF="+_self.hostName+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
            }

            _self.ajaxrequest(settings, function() {
                
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.emailVerifiedNB = false
                _self.phoneValidated= false,
                _self.codeToPhoneSent = false,
                _self.codeSent = "",
                _self.wrongCode = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                $("#code").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        //_self.video()
        _self.mesyano()
        _self.GA_clientId()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
                _self.emailVerifiedNB = true
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function (){
            $("#toForm").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#form").offset().top
                }, 2000);
            });
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#form").offset().top
                }, 2000);
            });
            $( "#first_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
            $( "#last_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
        
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});

var $conoceValTelTest = `<div>

<div v-if="window.width > 767" class="version_valtelMayo" style="padding: 1em;">
<div class="col-4 prueba" style="width:38%;text-align: center;display: flex;align-self: flex-end;">
    <div id="val" style="color:#FFFFFF">
    <h1 id="tittleValtelForm" style="margin-top:20px;margin-bottom:10px;">IQOS CALIENTA TABACO REAL.<p id="pvaltel">MENOS OLOR, SIN HUMO, SIN CENIZA.</p></h1>
    <p id="pvaltelMiddle" >RECIBE TU CÓDIGO DE 10% DE DESCUENTO*<br /> EN LA COMPRA DE TU PRIMER KIT IQOS</p>
    <div style="margin-top:10px:" v-if="window.width > 767">
        <ul class="refer-a-friend__box-items">
            <li class="refer-a-friend__box-item">
                <div class="refer-a-friend__item-icon">
                    <img src="/arquivos/Icono_1.png" />                      
                </div>
                <div class="refer-a-friend__item-text">Regístrate para obtener tu código de descuento</div>
                <p class="refer-a-friend__item--info">Completa el formulario, te tomará 20 segundos.</p>
            </li>
            <li class="refer-a-friend__box-item">
                <div class="refer-a-friend__item-icon">
                    <img src="/arquivos/icono_2.png" />
                </div>
                <div class="refer-a-friend__item-text">Recibe tu código de 10% de descuento*</div>
                <p class="refer-a-friend__item--info">*Recibirás un correo electrónico con tu código. Válido para la compra de tu primer Kit IQOS.</p>
            </li>
            <li class="refer-a-friend__box-item">
                <div class="refer-a-friend__item-icon">
                    <img src="/arquivos/icono_3_.png" /> 
                </div>
                <div class="refer-a-friend__item-text">Canjea tu código de descuento</div>
                <p class="refer-a-friend__item--info">Podrás canjear tu código de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
            </li>
        </ul>
    </div>
   
    
</div>
</div>
<div class="col-8 prueba" style="width: 62%;display: flex;justify-content: center;margin-top: 2rem;flex-direction: column;align-items: center;">
    <section class="col-10 prueba" id="iqos-form">
        <h1 id="tittleValtelForm" style="color:#FFFFFF;text-transform: uppercase;">Déjanos tus datos y tu número de teléfono,<br />te contactaremos</h1>

        <div class="two">
            
            <form style="color: #FFFFFF;font-weight: bolder;" id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                <h4 v-if="pagina == 'lp2'">¿Quieres conocer la experiencia IQOS?</h4>
                <p v-if="pagina == 'lp2'">Déjanos tus datos y uno de nuestros expertos se pondrá en contacto contigo.</p>

                <input type=hidden name="oid" value="00D4P000000h9QV">
                <input type=hidden name="retURL" value="http://www.iqos.com">
                <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">
                <input type=hidden id="00N4P00000HE6pF" name="00N4P00000HE6pF" :value="hostName" >

                <!--  ----------------------------------------------------------------------  -->
                <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                <!--  these lines if you wish to test in debug mode.                          -->
                <!--  <input type="hidden" name="debug" value=1>                              -->
                <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                <!--  ----------------------------------------------------------------------  -->

                <label class="lb-input" style="opacity: unset !important;" for="first_name">NOMBRE(S)*</label>
                <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="25" class="field" name="first_name" size="20" type="text" />

                <label class="lb-input" style="opacity: unset !important;"  for="last_name">Apellido(s)*</label>
                <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="25" name="last_name" class="field" size="20" type="text" />

                
                <label class="lb-input" style="opacity: unset !important;"  for="email">Email*</label>
                <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                

                <div class="tooltip">
                    <label class="lb-input" style="opacity: unset !important;"  for="phone">TELÉFONO (10 DÍGITOS)*</label>
                    <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                    <span class="tooltiptext">Te mandaremos un código de verificación</span>
                </div>

                
            




                <div class="none">
                    <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                    <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                    <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                    <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                    <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                    <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                    <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                    <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                    <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                </div>

                <fieldset>

                    <label for="00N4P00000GZEGJ">
                        <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                        <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:#FFFFFF" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                    </label>
                    <label for="00N4P000008mN8e">
                        <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                        <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                    </label>
                </fieldset>

                <div class="btn form-btn" style="max-width: 50%;">
                    <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                    <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                </div>

                

                <transition name="fade">
                    <div v-if="Msnenvio" class="envio errors">
                        <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                        <b>{{ Msnenvio }}</b>
                    </div>
                </transition> 
                   
            </form>

            

            <transition name="fade">
                <div v-if="errors.length" class="errors">
                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                    <b>Para continuar, por favor revisa lo siguiente:</b>
                    <ul>
                        <li v-for="error in errors">{{ error }}</li>
                    </ul>
                </div>    
            </transition>  

            <transition name="fade">
                <div v-if="codeToPhoneSent" class="errors" style="text-align:center;">
                    <b>Ingresa el código de verificación que hemos enviado a tu Teléfono</b>

                    <label class="lb-input" for="code">CÓDIGO (4 DÍGITOS)</label>
                    <the-mask class="field" data-category="Form Local Lead" data-action="code" data-label="MX" data-event="Clic" type="text" id="code" maxlength="4" name="code" :mask="['##########']" :value="codeSent" />
                    <b v-if="wrongCode" style="color:red;">Código ingresado erróneo</b>
                    <div @click="verifyCode()" class="btn form-btn" 
                    style="background: #000;
                    color: #000000 !important;
                    border: 0;
                    margin: 0 auto;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    padding: 0;
                    display: flex;
                    margin-top:2rem;
                    text-align: center;">
                        <input 
                        style="padding: 0 1em;
                        margin: 0;
                        color: #fff !important;
                        border: 0 !important;
                        width: initial;
                        cursor: pointer;
                        width: 100%;
                        padding: 0.5em 2em;
                        background: transparent;
                        
                        text-align: center;" 
                        data-category="Code verification" data-action="Send Code" data-label="MX" data-event="Clic" type="submit" value="Enviar Código" class="save"
                        name="submit">
                            <svg 
                            style="position: absolute;
                            margin-left: 130px;" width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                    </div>
                    <div v-if="wrongCode" @click="sendCodeToPhone()" class="btn form-btn" 
                    style="background: #000;
                    color: #000000 !important;
                    border: 0;
                    margin: 0 auto;
                    align-items: center;
                    justify-content: center;
                    cursor: pointer;
                    padding: 0;
                    display: flex;
                    margin-top:0.5rem;
                    text-align: center;">
                        <input 
                        style="padding: 0 1em;
                        margin: 0;
                        color: #fff !important;
                        border: 0 !important;
                        
                        width: initial;
                        cursor: pointer;
                        width: 100%;
                        padding: 0.5em 2em;
                        background: transparent;
                        
                        text-align: center;" 
                        data-category="Code verification" data-action="Send Code" data-label="MX" data-event="Clic" type="submit" value="Reenviar Código" class="save"
                        name="submit">
                            <svg 
                            style="position: absolute;
                            margin-left: 130px;" width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                    </div>
                </div>    
            </transition> 

           
            
        </div>  
        <p class="ambiente_prueba" style="font-size:10px;color:#FFF;font-weigth:bolder;margin-top:10px;" >*Si te registras en la base de datos de IQOS del 1 de agosto al 31 de diciembre de 2021 para recibir información sobre IQOS, recibirás en tu correo electrónico un código de descuento para le compra de tu primer KIT IQOS. Aplican restricciones. Consulta <a style="color:#FFFFFF" target="_blank"  href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a>.</p>  
    </section>
    
</div>

</div> 
                <div v-else>
                    <section v-bind:class="{ pagina }" class="version_valtelMayo" satyle="order:2;" >
                                            
                                                
                        
                        <span   class="agendaAtBottomExito col-2 prueba">
                            <a id="toFormTop" style="margin-top: 29rem;width:70%;margin-bottom: 0px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">QUIERO REGISTRARME</a>
                        </span>   
                    </section>
                    <section id="pasos" class="claro">
                    <h4>Déjanos tus datos y tu número de teléfono,<br/>te contactaremos</h4>
                    
                    </section>
                    <section id="prueba" class="claro">
                        <div class="refer-a-friend__box-wrapper">
                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                    <img src="/arquivos/Icono_1.png" /> 
                                </div>
                                <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Regístrate para obtener tu código de descuento</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                        
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Completa el formulario, te tomará 20 segundos.</p>
                                </div>
                            </div>


                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                    <img src="/arquivos/icono_2.png" /> 
                                </div>
                                <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Recibe tu código de 10% de descuento*</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                        
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">*Recibirás un correo electrónico con tu código. Válido para la compra de tu primer Kit IQOS.</p>
                                </div>
                            </div>


                            <div class="col-12 prueba" style="display:flex">
                                <div class="col-3 prueba" style="display: flex;justify-content: end;">
                                    <div class="refer-a-friend__item-icon">
                                        <img src="/arquivos/icono_3.png" /> 
                                    </div>
                                </div>
                                <div class="col-9 prueba" style="display: flex;justify-content: end;align-items: center;">
                                    <div class="refer-a-friend__item-text" style="font-size:20px">Canjea tu código de descuento</div>
                                </div>
                            </div>
                            <div class="col-12 prueba" 
                            style="display:flex;
                            
                            min-height: 66px;
                            margin-left: 13px;
                            margin-top: 13px;
                            margin-bottom: 13px;
                            border-color: #979797;">
                                <div style="border-right: 1px solid rgb(151, 151, 151);" class="col-1 prueba"></div>
                                <div class="col-11 prueba" style="display: flex;align-items: center;padding-left: 10px;">
                                    <p class="refer-a-friend__item--info" style="opacity: 0.6;">Podrás canjear tu código de descuento en IQOS.com, Tiendas IQOS y con Expertos IQOS.</p>
                                </div>
                            </div>
                        </div>
                    </section>
                    <section id="iqos-form" class="claro">
            
                    <div class="two">
                        
                        <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                           
            
                            <input type=hidden name="oid" value="00D4P000000h9QV">
                            <input type=hidden name="retURL" value="http://www.iqos.com">
                            <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">
                            <input type=hidden id="00N4P00000HE6pF" name="00N4P00000HE6pF" :value="hostName" >
            
                            <!--  ----------------------------------------------------------------------  -->
                            <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                            <!--  these lines if you wish to test in debug mode.                          -->
                            <!--  <input type="hidden" name="debug" value=1>                              -->
                            <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                            <!--  ----------------------------------------------------------------------  -->
            
                            <label class="lb-input" for="first_name">NOMBRE(S)*</label>
                            <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />
            
                            <label class="lb-input"  for="last_name">Apellido(s)*</label>
                            <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />
            
                            
                            <label class="lb-input"  for="email">Email*</label>
                            <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                            
            
                            <div class="tooltip">
                                <label class="lb-input"  for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                <span class="tooltiptext">Te mandaremos un código de verificación</span>
                            </div>
            
                            
                        
            
            
            
            
                            <div class="none">
                                <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                            </div>
            
                            <fieldset>
            
                                <label for="00N4P00000GZEGJ">
                                    <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                    <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a  target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                                </label>
                                <label for="00N4P000008mN8e">
                                    <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                    <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                </label>
                            </fieldset>
            
                            <div class="btn form-btn" >
                                <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                            </div>
            
                            
            
                            <transition name="fade">
                                <div v-if="Msnenvio" class="envio errors">
                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>{{ Msnenvio }}</b>
                                </div>
                            </transition> 
                               
                        </form>
            
                        
            
                        <transition name="fade">
                            <div v-if="errors.length" class="errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>Para continuar, por favor revisa lo siguiente:</b>
                                <ul>
                                    <li v-for="error in errors">{{ error }}</li>
                                </ul>
                            </div>    
                        </transition>  
            
                        <transition name="fade">
                            <div v-if="codeToPhoneSent" class="errors" style="text-align:center;">
                                <b>Ingresa el código de verificación que hemos enviado a tu Teléfono</b>
            
                                <label class="lb-input" for="code">CÓDIGO (4 DÍGITOS)</label>
                                <the-mask class="field" data-category="Form Local Lead" data-action="code" data-label="MX" data-event="Clic" type="text" id="code" maxlength="4" name="code" :mask="['##########']" :value="codeSent" />
                                <b v-if="wrongCode" style="color:red;">Código ingresado erróneo</b>
                                <div @click="verifyCode()" class="btn form-btn" 
                                style="background: #000;
                                color: #000000 !important;
                                border: 0;
                                margin: 0 auto;
                                align-items: center;
                                justify-content: center;
                                cursor: pointer;
                                padding: 0;
                                display: flex;
                                margin-top:2rem;
                                text-align: center;">
                                    <input 
                                    style="padding: 0 1em;
                                    margin: 0;
                                    color: #fff !important;
                                    border: 0 !important;
                                    width: initial;
                                    cursor: pointer;
                                    width: 100%;
                                    padding: 0.5em 2em;
                                    background: transparent;
                                    
                                    text-align: center;" 
                                    data-category="Code verification" data-action="Send Code" data-label="MX" data-event="Clic" type="submit" value="Enviar Código" class="save"
                                    name="submit">
                                        <svg 
                                        style="position: absolute;
                                        margin-left: 130px;" width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                </div>
                                <div v-if="wrongCode" @click="sendCodeToPhone()" class="btn form-btn" 
                                style="background: #000;
                                color: #000000 !important;
                                border: 0;
                                margin: 0 auto;
                                align-items: center;
                                justify-content: center;
                                cursor: pointer;
                                padding: 0;
                                display: flex;
                                margin-top:0.5rem;
                                text-align: center;">
                                    <input 
                                    style="padding: 0 1em;
                                    margin: 0;
                                    color: #fff !important;
                                    border: 0 !important;
                                    
                                    width: initial;
                                    cursor: pointer;
                                    width: 100%;
                                    padding: 0.5em 2em;
                                    background: transparent;
                                    
                                    text-align: center;" 
                                    data-category="Code verification" data-action="Send Code" data-label="MX" data-event="Clic" type="submit" value="Reenviar Código" class="save"
                                    name="submit">
                                        <svg 
                                        style="position: absolute;
                                        margin-left: 130px;" width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                </div>
                            </div>    
                        </transition> 
            
                       
                        
                    </div>  
                    <p class="ambiente_prueba" style="font-size:10px;color:#000;margin-top:10px;margin-bottom:10px;" >*Si te registras en la base de datos de IQOS del 1 de agosto al 31 de diciembre de 2021 para recibir información sobre IQOS, recibirás en tu correo electrónico un código de descuento para le compra de tu primer KIT IQOS. Aplican restricciones. Consulta <a style="color:#FFFFFF" target="_blank"  href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a>.</p>  
                </section>
                </div>
                   
                    <style scoped>
                       
                        @media (min-width:64em) {
                            div#val ul li p.refer-a-friend__item--info {
                                max-width: 300px;
                                
                            }
                        }

                        @media (min-width:48em) {
                            div#val ul.refer-a-friend__box-items {
                                display: flex;
                                justify-content: space-between;
                            }
                            div#val ul li.refer-a-friend__box-item {
                                flex-direction: column;
                                justify-content: center;
                                flex-basis: 33.33333%;
                                max-width: 33.33333%;
                                height: 100%;
                            }
                            div#val ul li div.refer-a-friend__item-icon {
                                margin-right: 0;
                            }
                            div#val ul li div.refer-a-friend__item-text {
                                font-size: 28px;
                                letter-spacing: -.29px;
                                text-align: center;
                            }
                            div#val ul li p.refer-a-friend__item--info {
                                margin-left: 0;
                                padding: 0 2rem;
                                width: 70%;
                                text-align: center;
                                
                            }
                            
                        }

                        @media (max-width: 760px) {
                            .col-5.prueba {
                                width: 100%;
                                padding-top: 4rem;
                            }
                            .col-7.prueba {
                                width: 100%;
                                margin-top: 11rem !important;
                            }
                            h1#tittleValtelForm {
                                margin-top: 7rem;
                                margin-bottom: 1rem;
                            }
                            p#pvaltelMiddle {
                                font-size:16px;
                                margin-bottom: 15px;
                            }
                        }


                        div#val ul li.refer-a-friend__box-item {
                            display: flex;
                            justify-content: flex-start;
                            align-items: center;
                            position: relative;
                            flex-wrap: wrap;
                        }
                        div#val ul.refer-a-friend__box-items {
                            display: flex;
                            justify-content: space-between;
                            align-items: end;
                            margin-top: 1.5em;
                        }
                        div#val ul li div.refer-a-friend__item-icon {
                            margin-right: 0;
                            margin-bottom: 1em;
                        }
                        div#val ul li div.refer-a-friend__item-text {
                            font-size:18px;
                           
                            letter-spacing: normal;
                            color: #FFF;
                            line-height: 1;
                            width: calc(100% - 70px);
                        }
                        div#val ul li p.refer-a-friend__item--info {
                            margin-left: 4.7rem;
                            position: relative;
                            max-width: 100%;
                            line-height: 1.5;
                            margin: 1.875em 0;
                            
                            font-size: 11px;
                        }

                        
                        form .btn {
                            background: #000;
                            color: #fff;
                        }
                        .errors {
                            color:#000;
                        }
                        @media (min-width: 800px) {
                            h1#tittleValtelForm {
                                font-size: 2.3em !important;
                            }
                            p#pvaltel {
                                font-size:30px;
                            }
                            p#pvaltelMiddle {
                                font-size:22px;
                            }
                            input {
                                color: #FFF !important;
                                border-bottom: 1px solid #FFF !important;
                            }
                            #code {
                                color: #000 !important;
                                border-bottom: 1px solid #000 !important;
                            }
                            form input:checked + span::before {
                                content: "√";
                                color: rgb(255, 255, 255);
                                background: rgb(0, 0, 0);
                            }
                            section#iqos-form {
                                margin-left: 3rem;
                            }
                            form fieldset label span:before {
                                content: "";
                                width: 24px;
                                min-width: 24px;
                                height: 24px;
                                background: transparent;
                                display: inline-block;
                                margin-right: 1em;
                                border: 1px solid #FFF;
                                font-size: 12px;
                                text-align: center;
                                border-radius: 5px;
                                line-height: 28px;
                            }
                            form fieldset label span {
                                text-align: left;
                                margin-bottom: 3em;
                                display: flex;
                                margin-top: 2em;
                                color: #FFF;
                                align-items: center;
                            }
        
                        }

                        @media (min-width: 1024px) and (max-width: 1400px) {
                            .version_valtel {
                                background-position: -510px 5px !important;
                            }
                        }
                        
                        div#val ul li div.refer-a-friend__item-icon {
                            margin-right: 0;
                        }
                    </style>
                    
                    </div>`;
Vue.component('conocevaltel-test-component', {
    'template': $conoceValTelTest,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Valtel",
            "hostName": window.location.hostname,
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "checkboxfumador",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "window": {
                width: 0,
            },
            "emailVerifiedNB":false,
            "descuento": "MENOSOLOR200",
            "GAtransactionId":"",
            "phoneValidated": false,
            "codeToPhoneSent": false,
            "codeSent":"",
            "wrongCode": false

        };

    },
    'methods': {
        "allowedCharacters":function(e){
            var reg = /^[a-zA-ZñÑÁáÉéÍíÓóÚú ÄäËëÏïÖöÜü"]*$/;
            var c = String.fromCharCode(e.which)
            if(reg.test(c))
            {
                return true;
            }
            else
            return false;
        },
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                //_self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_source + utms.utm_medium;
                // if(utms.utm_term == undefined){
                //     _self.term = "checkboxfumador"
                // } else {
                //    _self.term = utms.utm_term
                // } 
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        "fixedCorona_mobile": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus-mobile").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus-mobile").addClass("fixed")
                } else {
                    $("section.coronavirus-mobile").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1"
            } else if ($("body").hasClass("lp2")) {
                this.pagina = "lp2"
            } else if ($("body").hasClass("rgm")) {
                this.pagina = "rgm"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $("#prueba").offset().top
                console.log('from clikmouse function',corona)
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)    
        },
        
     
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                if (_self.pagina == "rgm") {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
                } else {
                    $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1.5))});
                } 
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },
        "llamar": function () {
            $(".coronavirus-mobile").click(function(e) {
                console.log('calleddd')
                e.preventDefault()
                var PhoneNumber = "5552695190";
                window.location.href = 'tel://' + PhoneNumber;
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#mayor_de_edad").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar ser mayor de dieciocho (18) años.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                

                _self.sendCodeToPhone()
                //_self.envio()                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
       
        "sendCodeToPhone": function (){
            var _self = this
            _self.beforeSend()
            var number = _self.telefone
            var requestOptions = {
            method: 'GET',
           
            header: {
                'Access-Control-Allow-Origin':'*',
            },
            redirect: 'follow'
            };
        

            fetch(`https://valtel--pmimexico.myvtex.com/send?phonenumber=${number}&channel=sms`, requestOptions)
            .then((response) => {
                console.log("res", response)
                $(_self.form).find(".loading").remove()
                if(response.status == 200){
                    response.json().then(data => {
                        console.log(data)
                        _self.codeToPhoneSent = true
                    });
                }
            })
            .catch((error) => {
                var _self = this  
                $(_self.form).find(".loading").remove()
                _self.errors.push("El número de teléfono agregado es invalido");
                console.log(error);
            });
           
        },
       
        "verifyCode": function (){
            var _self = this
            _self.beforeSend()
            var number = _self.telefone
            var code = $("#code").val()
            
            var requestOptions = {
            method: 'GET',
           
            header: {
                'Access-Control-Allow-Origin':'*',
            },
            redirect: 'follow'
            };

            fetch(`https://valtel--pmimexico.myvtex.com/verifyCodeSent?phonenumber=${number}&code=${code}`, requestOptions)
            .then((response) => {
                console.log("response:",response)
                $(_self.form).find(".loading").remove()
                if(response.status == 200){
                    response.json().then(data => {
                        if(data.status == "approved") {
                            console.log("data:",data)
                            _self.errors = [];
                            _self.Msnenvio = null;
                            _self.envio()
                        } else {
                            _self.wrongCode = true
                        }
                        
                    });
                }else{
                    _self.codeToPhoneSent = false
                    alert("internal server error")
                    console.log("server error", response)
                }
            })
            .catch(error => console.log('error', error));
        },
        "beforeSend": function() {
            var _self = this
            $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            //var concatination = this.source + this.medium; 
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
           
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GZTGS="+c00N4P00000GZTGS+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P000008mN8e="+_self.publicidad+"&00N4P00000HE6pF="+_self.hostName+"&00N4P00000GOgJP="+_self.GAtransactionId+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
            }

            _self.ajaxrequest(settings, function() {
                
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.emailVerifiedNB = false
                _self.phoneValidated= false,
                _self.codeToPhoneSent = false,
                _self.codeSent = "",
                _self.wrongCode = false
                
                $("#00N4P00000GZEGJ").attr("checked", false)
                $("#mayor_de_edad").attr("checked", false)
                $(".field").val("")
                $("#code").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}

                try {
                    window.dataLayer.push({ 
                        'event': 'gtmZoneMicrositeEvent', 
                        'eventCategory': 'Form', 
                        'eventAction': 'Submitted', 
                        'eventLabel': 'Try IQOS form', 
                        'eventValue': 0, 
                        'eventNonInteraction': false 
                    });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.llamar()
        _self.utms()
        _self.fixedCorona()
        _self.fixedCorona_mobile()
        //_self.video()
        _self.mesyano()
        _self.GA_clientId()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
                _self.emailVerifiedNB = true
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function (){
            $("#toForm").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#form").offset().top
                }, 2000);
            });
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#form").offset().top
                }, 2000);
            });
            $( "#first_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
            $( "#last_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
        
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)
        _self.check_if_cookies_allowed()
        _self.geoFencing()
        _self.paginaStatus()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});


Vue.component('video-component', {
    template: `
            <div
                data-category="Clicks"
                data-action="Play"
                :data-label="label"
                data-event="Video"
                :class="{ 
                    'video-component': true,
                    'active': active
                }"
                :style="{
                    'background-image': 'url(' + thumbUrl + ')',
                    'height': height+ 'px',
                    'max-width': width + 'px'
                }"
            >
                <div class="video-component__play" @click="play"></div>

                <div class="video-component__modal">
                    <div class="video-component__modal-bg" @click="close"></div>
                    <div class="video-component__modal-close" @click="close">+</div>
                    <div class="video-component__modal-container">
                        <video ref="video" controls>
                            <source
                                :src="url"
                                type="video/mp4"
                            />
                            Your browser does not support the video tag.
                        </video>
                    </div>
                </div>
            </div>
    `,
    props: ['label', 'thumbUrl', 'url', 'width', 'height'],
    data: function() {
        return {
            active: false,
            lastPercentage: 0
        }
    },
    mounted: function() {
        this.videoEvents();
    },
    methods: {
        getPercentage: function () {
            var myPlayer = this.$refs.video;
            var percentageCompleted = ((myPlayer.currentTime / myPlayer.duration) * 100).toFixed();

            if (percentageCompleted == 99) {
                percentageCompleted = 100;
            }

            percentageCompleted = parseInt(percentageCompleted)

            for (var percentageStep = 10; percentageStep <= 100; percentageStep += 10) {
                if (percentageCompleted == percentageStep && this.lastPercentage !== percentageCompleted) {
                    this.lastPercentage = percentageStep;
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Percentile ("+percentageStep+"%)",
                        "label": this.label,
                        "event": "video"
                    })
                    return;
                }
            }
        },
        play: function () {
            var myPlayer = this.$refs.video;
            myPlayer.play();
            this.active = true;
        },
        close: function () {
            var myPlayer = this.$refs.video;
            myPlayer.pause();
            this.active = false;
        },
        videoEvents: function() {
            var myPlayer = this.$refs.video,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            myPlayer.onplay = function() {
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Play",
                    "label": _self.label,
                    "event": "video"
                })
                _self.active = true;
            }

             myPlayer.onpause = function() {
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Pause",
                    "label": _self.label,
                    "event": "video"
                })
            }
        }
    }
})

Vue.component('scan-content-1', {
    template: `
        <div>
            <div class="lp-main-actions">
                <h1 class="lp-main-actions__title">
                    ¿Listo para conocer IQOS?
                </h1>
                <button class="btn form-btn lp-main-actions__button" @click="goToForm">
                    <span>SÍ</span>
                    <svg width="20" height="20">
                        <path
                            data-name="Trazado 40"
                            d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z"
                            fill="#c2984e"
                        ></path>
                    </svg>
                </button>
            </div>
            <div class="lp-two-videos">
                <h2 class="lp-two-videos__title">
                    ¿Aún no estás listo?
                    <small>
                        Conoce más sobre IQOS y descubre por qué más de 9 millones de personas han hecho el cambio.
                    </small>
                </h2>

                <div class="lp-videos-sidebyside__container">
                    <div
                        class="lp-videos-sidebyside__video"
                    >
                        <video-component
                            label="phillipmiqoslegalesver-hot07mp4-video"
                            thumbUrl="/arquivos/scan-video-1.png"
                            width="430"
                            height="210"
                            url="https://pmi.23video.com/60445192/61499829/dc7b29d635fd023d49ff6bc05edc89f3/video_hd/phillipmiqoslegalesver-hot07mp4-video.mp4"
                        ></video-component>
                    </div>
                    <div
                        class="lp-videos-sidebyside__video"
                    >
                        <video-component
                            label="que-es-iqos-3-duo-caracteristicas-y-video"
                            thumbUrl="/arquivos/capaVIdeo.jpg"
                            width="430"
                            height="210"
                            url="https://pmi.23video.com/60445192/61994802/5b0970a4d44ba0766df76233bf73c5d3/video_1080p/heat-no-burn-video-updated-april-video.mp4"
                        ></video-component>
                    </div>
                </div>
            </div>
        </div>
    `,
    props: ['goToForm']
});

Vue.component('scan-content-2', {
    template: `
        <div>
            <div class="lp-main-actions">
                <h1 class="lp-main-actions__title">
                    ¿Listo para conocer IQOS?
                </h1>
                <button class="btn form-btn lp-main-actions__button" @click="goToForm">
                    <span>SÍ</span>
                    <svg width="20" height="20">
                        <path
                            data-name="Trazado 40"
                            d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z"
                            fill="#c2984e"
                        ></path>
                    </svg>
                </button>
            </div>
            <div class="lp-single-video">
                <h2 class="lp-two-videos__title">
                    ¿Aún no estás listo?
                    <small>
                        Conoce más sobre IQOS y descubre por qué más de 9 millones de personas han hecho el cambio.
                    </small>
                </h2>

                <video-component
                    label="que-es-iqos-3-duo-caracteristicas-y-video"
                    thumbUrl="/arquivos/capaVIdeo.jpg"
                    height="381"
                    width="960"
                    url="https://pmi.23video.com/60445192/61994802/5b0970a4d44ba0766df76233bf73c5d3/video_1080p/heat-no-burn-video-updated-april-video.mp4"
                ></video-component>
            </div>
        </div>
    `,
    props: ['goToForm']
});

Vue.component('scan-content-3', {
    template: `
        <div>
            <div class="lp-two-videos">
                <h2 class="lp-two-videos__title">
                    <small>
                        Conoce más sobre IQOS y descubre por qué más de 9 millones de personas han hecho el cambio.
                    </small>
                </h2>

                <div class="lp-videos-sidebyside__container">
                    <div
                        class="lp-videos-sidebyside__video"
                    >
                        <video-component
                            label="phillipmiqoslegalesver-hot07mp4-video"
                            thumbUrl="/arquivos/scan-video-1.png"
                            width="430"
                            height="210"
                            url="https://pmi.23video.com/60445192/61499829/dc7b29d635fd023d49ff6bc05edc89f3/video_hd/phillipmiqoslegalesver-hot07mp4-video.mp4"
                        ></video-component>
                    </div>
                    <div
                        class="lp-videos-sidebyside__video"
                    >
                        <video-component
                            label="que-es-iqos-3-duo-caracteristicas-y-video"
                            thumbUrl="/arquivos/capaVIdeo.jpg"
                            width="430"
                            height="210"
                            url="https://pmi.23video.com/60445192/61994802/5b0970a4d44ba0766df76233bf73c5d3/video_1080p/heat-no-burn-video-updated-april-video.mp4"
                        ></video-component>
                    </div>
                </div>
            </div>
            <div class="lp-main-actions">
                <h1 class="lp-main-actions__title">
                    ¿Listo para conocer IQOS?
                </h1>
                <button class="btn form-btn lp-main-actions__button" @click="goToForm">
                    <span>SÍ</span>
                    <svg width="20" height="20">
                        <path
                            data-name="Trazado 40"
                            d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z"
                            fill="#c2984e"
                        ></path>
                    </svg>
                </button>
            </div>
        </div>
    `,
    props: ['goToForm']
});

Vue.component('scan-content-4', {
    template: `
        <div>
            <div class="lp-single-video">
                <h2 class="lp-two-videos__title">
                    <small>
                        Conoce más sobre IQOS y descubre por qué más de 9 millones de personas han hecho el cambio.
                    </small>
                </h2>

                <video-component
                    label="que-es-iqos-3-duo-caracteristicas-y-video"
                    thumbUrl="/arquivos/capaVIdeo.jpg"
                    height="381"
                    width="960"
                    url="https://pmi.23video.com/60445192/61994802/5b0970a4d44ba0766df76233bf73c5d3/video_1080p/heat-no-burn-video-updated-april-video.mp4"
                ></video-component>
            </div>
            <div class="lp-main-actions">
                <h1 class="lp-main-actions__title">
                    ¿Listo para conocer IQOS?
                </h1>
                <button class="btn form-btn lp-main-actions__button" @click="goToForm">
                    <span>SÍ</span>
                    <svg width="20" height="20">
                        <path
                            data-name="Trazado 40"
                            d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z"
                            fill="#c2984e"
                        ></path>
                    </svg>
                </button>
            </div>
        </div>
    `,
    props: ['goToForm']
});

Vue.component("scan-component", {
    template: `<div>
            <div class="lp-container">
                <scan-content-1  v-if="!version " :goToForm="goToForm"></scan-content-1>
                <scan-content-2  v-if="version == '2' " :goToForm="goToForm"></scan-content-2>
                <scan-content-3  v-if="version == '3' " :goToForm="goToForm"></scan-content-3>
                <scan-content-4  v-if="version == '4' " :goToForm="goToForm"></scan-content-4>
            </div>

            <section id="iqos-form" :class="{ 'claro' : pagina == 'lp1'}">
                
                <div class="two">
                    
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                        <h4 v-if="pagina == 'lp1'" class="form-title">¿Quieres conocer la experiencia IQOS? </h4>
                        <p v-if="pagina == 'lp1'">Descubre por que IQOS es una mejor opción que continuar fumando. Déjanos tus datos y nos pondremos en contacto contigo.
                        </p>

                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        <input type=hidden id="00N4P00000GZTGS" name="00N4P00000GZTGS" value="true">

                        <!--  ----------------------------------------------------------------------  -->
                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                        <!--  these lines if you wish to test in debug mode.                          -->
                        <!--  <input type="hidden" name="debug" value=1>                              -->
                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                        <!--  ----------------------------------------------------------------------  -->

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />

                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)</label>
                        <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="40" name="phone" :mask="['##########']" :value="telefone" />

                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                        </div>

                        <fieldset>
                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click.prevent="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition>  

                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click.prevent="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
                </div>
            </section> 
            </div>`,
    data: function() {
        return {
            step: 0,
            pagina: "lp1",
            Msnenvio: null,
            errors: [],
            errorPopup: [],
            nombre: "",
            apelido: "",
            telefone: "",
            email: "",
            declaracao: false,
            fumadoroIqos: false,
            publicidad: false,
            source: "",
            medium: "",
            campaign: "",
            fechaNacimiento: "",
            form: "#form",
            city: "",
            state: "",
            mes: "",
            ano: "",
            term: "",
            acepto: false,
            mobile: window.innerWidth,
            range: false,
            geoFencingmodal: true,
            pageTitle: "",
            popupIqos: this.$cookies.get("popupIqos")
        };
    },
    props: ['version'],
    methods: {
        mesyano: function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        datapushPag: function() {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                });
            } catch (e) {
                console.log(e);
            }
        },
        utms: function() {
            var _self = this;

            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                _self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
            }
        },
        getQueryParams: function(qs) {
            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        paginaStatus: function() {
            if ($("body").hasClass("lp1")) {
                this.pagina = "lp1";
            }
        },
        goToForm: function() {
            $('html, body').animate({
                scrollTop: $("#form").offset().top - 30
            }, 500);
        },
        checkForm: function(e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }
            
            if (!_self.errors.length) {
                _self.nombre = $("#first_name").val()
                _self.apelido = $("#last_name").val()
                _self.telefone = $("#phone").val()
                _self.email= $("#email").val()

                _self.envio()
                
       
            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })
                
                e.preventDefault()
            }
        },
        closePopUp: function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        geoFencing: function() {
            var _self = this;
            $.get("https://get.geojs.io/v1/ip/geo.json", function(data) {
                _self.city = data.city;
                _self.state = data.region;
            });
        },
        validEmail: function(email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        envio: function() {
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var c00N4P00000GZTGS = $("#00N4P00000GZTGS").val()
            
            if ($("#00N4P000008mN8e").prop("checked") == true) {
                this.publicidad = true;
            }

            var _self = this;

            if ($("#00N4P000008mN8e").prop("checked") == true) {
                _self.publicidad = "1";
            } else {
                _self.publicidad = "0";
            }

            settings = {
                url:
                    "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+
                    oid+
                    "&retURL=" +
                    urlIqos +
                    "&first_name=" +
                    _self.nombre +
                    "&last_name=" +
                    _self.apelido +
                    "&phone=" +
                    _self.telefone +
                    "&email=" +
                    _self.email +
                    "&00N4P00000GZTGS=" +
                    c00N4P00000GZTGS +
                    "&00N4P000008mN1c=" +
                    _self.state +
                    "&00N4P000008mN26=" +
                    _self.city +
                    "&00N4P00000GZHnH=" +
                    _self.mes +
                    "&00N4P00000GZEGY=" +
                    _self.ano +
                    "&00N4P000008mN2L=" +
                    _self.source +
                    "&00N4P000008mN2Q=" +
                    _self.medium +
                    "&00N4P000008mN2a=" +
                    _self.campaign +
                    "&00N4P000008mN13=FUMADOR&00N4P00000GZEGd=" +
                    _self.term +
                    "&00N4P00000GZEGJ=1&00N4P000008mN8e=" +
                    _self.publicidad +
                    "&submit=Enviar",
                type: "POST",
                dataType: "jsonp",
                async: false,
                headers: {
                    "content-type": "application/json",
                    accept: "application/vnd.vtex.ds.v10+json"
                },
                beforeSend: function() {
                    $(_self.form).find(".loading").length < 1
                        ? $(_self.form).append(
                              '<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; top: top: -15px; width: 40px; height: 40px;"></div>'
                          )
                        : "";
                }
            };

            _self.ajaxrequest(settings, function() {
                $(_self.form)
                    .find(".loading")
                    .remove();
                _self.Msnenvio = "¡Gracias por tu registro! Nos pondremos en contacto contigo";

                _self.nombre = "";
                _self.telefone = "";
                _self.email = "";
                _self.apelido = "";
                _self.declaracao = false;
                _self.publicidad = false;

                $("#00N4P00000GZEGJ").attr("checked", false);
                $(".field").val("");

                try {
                    window.dataLayer.push({
                        category: "Form Local Lead",
                        action: "Success",
                        label: "MX",
                        event: "TYPLanding"
                    });
                } catch (e) {
                    console.log(e);
                }
            });
        },
        ajaxrequest: function(settings, fn, type) {
            var callback = typeof fn === "function" ? true : false;

            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {
                        fn(false, err);
                    }
                });

            return null;
        }
    },
    mounted: function() {
        var _self = this;
        _self.utms();
        _self.mesyano()
    },
    created: function() {
        var _self = this;
        this.geoFencing();
        Vue.use(VueTheMask);
        this.paginaStatus();

        setTimeout(function() {
            _self.datapushPag();
        }, 1500);

        window.onresize = () => {
            this.mobile = window.innerWidth;
        };

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});











//PROBAR-IQOS



// probar-iqos/adopta
var $gettritalAdopta = `<div> 
                    <section class="coronavirus" style="order:1;">
                        <h4>
                            <span>Exclusivamente para adultos fumadores en Ciudad de México <br v-if="window.width < 760" /> y área metropolitana.</span>
                        </h4>
                    </section>
                    <section id="adoptaBanner" v-bind:class="{ pagina }" class="principal version_adopta" style="order:2;">
                        <span id="adopta">
                            <span style="display:flex;flex-direction:row;" >
                                <a href='#' style="width:100%;margin-bottom: 20px;" class='btn agendarllamada rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                            </span>
                        </span>
                        <a id="spanVideoPop" href="#ex1" rel="modal:open" >
                            <span id="playIcon"  class="container" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">  
                            </span>
                        </a>
                        <span id="ex1" class="modal" style="width:auto">
                                <video width="320" height="240" id="myVideoModal">
                                <source src="https://pmi.23video.com/64968568/65417230/d1674608d69d4c4cc83afe5b48c3db8e/video_hd/b235068iqoswhatisiqos24plusmxes-mx6-1-video.mp4 " type="video/mp4">
                                Your browser does not support the video tag.
                                </video>
                                <button id="playIconInModal" class="play">
                                </button>  
                             
                        </span>   
                    </section>

                    <section id="pasos" class="claro">
                        <h4 class="ado">Vive la experiencia IQOS durante 15 días, y recibe <b style="color:rgb(60,151,165);"> $300</b><br><b style="color:rgb(60,151,165);">MXN </b>de descuento en la compra de tu primer KIT IQOS</h4>
                        <ul>
                            <li><span>1</span><p>Conoce<a id="pasoUnoToVideo" style="color: rgb(60, 151, 165); text-decoration: underline;"> qué es IQOS,</a></p>una nueva tecnologia que calienta tabaco real en lugar de quemarlo.</li>
                            <li><span>2</span> Escoge el color de tu IQOS y completa el formulario.</li>
                            <li><span>3</span> Te llamaremos para coordinar la entrega de tu dispositivo.</li>
                            <li><span>4</span> Decide si compras tu IQOS y aplicas tu descuento o prefieres devolverlo.</li>
                        </ul>
                        <div>
                            <h4 class="mereces ado " >PORQUE TÚ MERECES TENER MEJORES OPCIONES,<br /><b> ES MOMENTO DE ELEGIR EL CAMBIO.</b></h4>
                        </div>
                    </section>

                    

                    <section id="select-iqos">
                        <h4>Selecciona el color de tu dispositivo</h4>
                        <div class="selector">
                            <div class="imagem">
                                <img src="/arquivos/iqos-Azul.png?v=53534" />
                            </div>
                            <h2>IQOS 2.4 Plus</h2>
                            <div class="selector-sku">
                                <a href="#" class="azul active" color="IQOS 2.4 Azul" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - Blue" data-label="MX" data-event="Clic">
                                    <i></i><span>Azul Marino</span>
                                </a>
                                <a href="#" class="blanco" color="IQOS 2.4 Blanco" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - White" data-label="MX" data-event="Clic">
                                    <i></i><span>Blanco</span>
                                </a> 
                            </div>
                        </div>
                        <div class="container text">
                            <p>Quédate con tu dispositivo después del periodo de prueba pagando <b style="text-decoration:line-through;margin-right:5px;font-weight: normal;">$1,199 MXN </b></b>$899 MXN,</b> una vez aplicado tu descuento².</p>

                            <small style="font-size:10px">1)El periodo de prueba es de hasta 15 días naturales a partir de la entrega del dispositivo. Programa exclusivo para usuarios adultos en la Ciudad de México y área metropolitana. Consulta <a href="/terminos-condiciones">Términos y Condiciones</a> del Programa de Préstamo IQOS. (2)Solo para fumadores adultos. Promoción vigente al 31 de diciembre de 2020. Si te registras para participar en el Programa de Préstamo IQOS durante dicho período, recibirás en tu correo electrónico un cupón con un código de descuento para la compra de tu primer Kit IQOS. Sujeto a disponibilidad de inventario, y a la vigencia del cupón de descuento, no es acumulable con otros códigos de descuento. Aplican restricciones. Consulta <a href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a></small>
                        </div>
                    </section>

                    <section id="iqos-form" class="claro">
                        
                        <div class="two">
                            <h4>Da el primer paso</h4>
                            <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                
                                <input type=hidden name="oid" value="00D4P000000h9QV">
                                <input type=hidden name="retURL" value="http://www.iqos.com">


                                <!--  ----------------------------------------------------------------------  -->
                                <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                <!--  these lines if you wish to test in debug mode.                          -->
                                <!--  <input type="hidden" name="debug" value=1>                              -->
                                <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                <!--  ----------------------------------------------------------------------  -->
                            
                                <label class="lb-input" for="first_name">NOMBRE*</label>
                                <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                                <label class="lb-input" for="last_name">Apellido(s)*</label>
                                <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                                <label class="lb-input" for="email">Email*</label>
                                <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                
                                <div class="tooltip">
                                    <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                    <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                    <span class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                </div>
                                
                                <label class="lb-input" for="00N4P00000GOkeR">Color del dispositivo*</label>
                                <select class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                    <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>    
                                    <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                </select>

                                <label class="lb-input" style="margin-bottom:20px">¿Ya tienes un código de referido?</label>
                                <div class="field" style="display: flex;max-width: inherit;align-items: baseline;">
                                    <label for="si">Si</label>
                                    <input type="radio" id="si" value="Si" v-model="promCode">
                            
                                    <label for="no">No</label>
                                    <input type="radio" id="no" value="No" v-model="promCode">
                                </div>
                                <div v-if="promCode == 'Si'">
                                    <label class="lb-input" for="00N4P00000GOkeM">Ingresa tu código de referido</label>
                                    <input  id="00N4P00000GOkeM" maxlength="50" name="00N4P00000GOkeM" size="20" type="text" data-category="Form Local Lead" data-action="Código de descuento" data-label="MX" data-event="Clic" class="field" />
                                    <div v-if="showWarning" style="color:red;font-size:15px;text-align:left">
                                        {{ codigoReferidoFeedbackMessage }}
                                    </div>
                                </div>
                                
                                <div class="none">
                                    <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                    <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                    <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                    <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                    <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                    <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                    <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                    <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                    <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                    <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                </div>

                                <fieldset>
                                    <label for="aceptoterminos">
                                        <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                        <span>Acepto <a style="color:blue" target="_blank"  href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                    </label>

                                    <label for="00N4P00000GZEGJ">
                                        <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                        <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                                    </label>
                                    <label for="00N4P000008mN8e">
                                        <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                        <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                    </label>
                                </fieldset>

                                <div class="btn form-btn">
                                    <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                    <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                </div>

                                <transition name="fade">
                                    <div v-if="Msnenvio">
                                        <div class="background-modal" @click="closePopUp($event)"></div>
                                        <div class="envio errors">
                                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                            <b>{{ Msnenvio }}</b>
                                        </div>
                                    </div>
                                </transition> 

                            </form>
                            <transition name="fade">
                                <div v-if="errors.length" class="errors">
                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errors">{{ error }}</li>
                                    </ul>
                                </div>    
                            </transition>  
                        </div>
                    </section>
                    <section id="queEsIqosVideo" class="video">
                        <h3>¿Qué es IQOS?</h3>
                        <p v-if="window.width > 760">IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                        <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                            <img src="/arquivos/Que es IQOS 2.4 Plus exito(Thumbnail).jpg" />
                            <video width="320" height="240" id="myVideo">
                            <source src="https://pmi.23video.com/64968568/65417230/d1674608d69d4c4cc83afe5b48c3db8e/video_hd/b235068iqoswhatisiqos24plusmxes-mx6-1-video.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                            </video>  
                        </div>
                    </section>
                    <section class="video" >
                        <div style="position: relative;
                         text-align:center;">
                            <a id="toPasos" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                        </div>
                    </section>
                    <section class="container boxes">
                        <h2>¿Cuáles son los beneficios de IQOS?</b></h2>
                        <ul class="box" :class="{ 'semColor' : pagina == 'lp2'}">
                            <li><div><img src='/arquivos/fire.png' /></div><p><b>Sin fuego</b> El tabaco no se quema y se libera su sabor real.</p></li>
                            <li><div><img src='/arquivos/smoke.jpg' /></div><p><b>Sin humo y sin ceniza</b> Habrá menos olor en ti, en tu ropa y en tu entorno.</p></li>
                            <li><div><img src='/arquivos/users-group.png' /></div><p><b>Sin olor a cigarro</b> Es menos probable que molestes a la gente a tu alrededor.</p></li>
                            <li class="tooth"><div><img src='/arquivos/tooth.png' /></div><p><b>No más manchas en tus dientes* </b> Causadas por el<br /> humo del cigarro.</p></li>
                        </ul>
                        <p class="disclaimer" style="font-size:10px">*Información importante: Si los dientes ya están manchados, cambiar a IQOS no eliminará el color de esas manchas. Fuente: Estudio de laboratorio no clínico llevado a cabo en Suiza con dientes humanos y los compuestos dentales más comúnmente usados. Al contrario de las condiciones del mundo real, los dientes no fueron expuestos a otras sustancias que pueden producir manchas, como café, té o vino, las cuales podrían influenciar los resultados.</p>
                    </section>

                    <style scoped>
                        .fadingVideo-enter-active, .fadingVideo-leave-active {
                            transition: opacity .9s;
                        }
                        .fadingVideo-enter, .fadingVideo-leave-to /* .fade-leave-active below version 2.1.8 */ {
                            opacity: 0;
                        }
                        .jquery-modal.blocker.current {
                            display: flex;
                            align-items: center;
                        }
                        .play {
                            content: "";
                            width: 100px;
                            border-radius: 100%;
                            background: #fff;
                            opacity: .50;
                            position: absolute;
                            left: 50%;
                            margin-left: -50px;
                            top: 50%;
                            margin-top: -50px;
                            height: 100px;
                            z-index: 99;
                            cursor: pointer;
                        }
                        .play:after {
                            z-index: 99;
                            content: "";
                            display: inline-block;
                            vertical-align: middle;
                            margin-right: 10px;
                            width: 0;
                            height: 0;
                            border-top: 25px solid transparent;
                            border-bottom: 25px solid transparent;
                            border-left: 40px solid #6f6d6d;
                            position: absolute;
                            left: 50%;
                            margin-left: -20px;
                            top: 50%;
                            margin-top: -23px;
                            transition: all linear .2s;
                            cursor: pointer;
                        }
                    
                    </style>
                    
                    
                    </div>`;
Vue.component('gettrital-adopta-component', {
    'template': $gettritalAdopta,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "",
            "emailVerifiedNB":false,
            "promCode":"",
            "codigoDeReferidoValidado":false,
            "codigoReferidoFeedbackMessage":"Código de referido no válido, por favor verifícalo.",
            "showWarning":false,
            "utmEqualsB2b":false,
            "GAtransactionId":"",
            "sourceFromUtm":"",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "playButton": true,
            "modal":false,
            "window":{
                width:0
            }
        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                console.log(ga.getAll())
                console.log(tracker, "tracker")
                console.log(ga.getAll()[0])
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
       
        "videoPopUp": function () {
            var myPlayer = document.querySelector('#myVideoModal'),
                playVideo = false,
                _self = this
                
               
            // myPlayer.ontimeupdate = function() {
            //     _self.getPercentage()
            // };
            
            
            $("#playIcon").click(function(){
                var $this = $(this)
                $(this).toggleClass("play-pause")
                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    $this.hide("slow")
                    $("#playIconInModal").hide("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    _self.playButton = false
                    $this.show("slow")
                    $("#playIconInModal").show("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }    
            })
            $("#myVideoModal").click(function(){
                $(this).toggleClass("play-pause")
                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    $("#playIcon").hide("slow")
                    $("#playIconInModal").hide("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    _self.playButton = false
                    $("#playIcon").show("slow")
                    $("#playIconInModal").show("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }    
            })
            $("#playIconInModal").click(function(){
                $(this).toggleClass("play-pause")
                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    $("#playIcon").hide("slow")
                    $("#playIconInModal").hide("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    _self.playButton = false
                    $("#playIcon").show("slow")
                    $("#playIconInModal").show("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }    
            })
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.term = utms.utm_term
                _self.sourceFromUtm = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "clickToVideo": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode si but field empty")
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length >= 1) {
                this.validateReferrCode($("#00N4P00000GOkeM").val())
            }

            if( this.promCode == "No"){
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode no")
            }

            if(this.promCode == ""){
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode not clicked")
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true && this.showWarning == false) {
                console.log("condition when tru")
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                _self.envio()
        
            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "validateReferrCode": function(codigoReferido) {
            console.log(codigoReferido.length,"length")
            if(codigoReferido.length == 1 || codigoReferido.length == 2){
                console.log(codigoReferido.length,"length less then 3")
                this.codigoDeReferidoValidado = false
                this.showWarning = true
            } else {

                let firstThreeLetters = codigoReferido.slice(0,3)

                if(firstThreeLetters == "MGM" 
                || firstThreeLetters == "EGM" 
                || firstThreeLetters == "B2B" 
                || firstThreeLetters == "RGM" 
                || firstThreeLetters == "IQO"
                || firstThreeLetters == "RET") {
                    this.codigoDeReferidoValidado = true
                    this.showWarning = false
                    this.descuento = codigoReferido
                } else {
                    this.codigoDeReferidoValidado = false
                    this.showWarning = true
                }
            }
            
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.sourceFromUtm + this.medium;

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            if( this.utmEqualsB2b == true && this.promCode == "No"){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == ""){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            console.log(_self.descuento, "final")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR"+"&00N4P00000GOgJP="+_self.GAtransactionId+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.colorDispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.GAtransactionId = ""
                _self.utmEqualsB2b = false
                _self.promCode = ""
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({ 'event': 'formTrySubmitted' });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "handleResize": function () {
            this.window.width = window.innerWidth;
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.video()
        _self.videoPopUp()
        _self.seletorSku()
        _self.GetTransaction()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        // Do stuff when the verification is throttled
                    }
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
      
        $(document).ready(function ($) {
            var owl = $("#owl-demo-2");
            owl.owlCarousel({
                autoplay: true,
                autoplayTimeout: 1000,
                autoplayHoverPause: true,
                items: 3,
                loop: true,
                center: false,
                rewind: false,
                mouseDrag: true,
                touchDrag: true,
                pullDrag: true,
                freeDrag: false,
                margin: 0,
                stagePadding: 0,
                merge: false,
                mergeFit: true,
                autoWidth: false,
                startPosition: 0,
                rtl: false,
                smartSpeed: 250,
                fluidSpeed: false,
                dragEndSpeed: false,
                responsive: {
                    0: {
                        items: 1
                        // nav: true
                    },
                    480: {
                        items: 2,
                        nav: false
                    },
                    768: {
                        items: 3,
                        // nav: true,
                        loop: false
                    },
                    992: {
                        items: 4,
                        // nav: true,
                        loop: false
                    }
                },
                responsiveRefreshRate: 200,
                responsiveBaseElement: window,
                fallbackEasing: "swing",
                info: false,
                nestedItemSelector: false,
                itemElement: "div",
                stageElement: "div",
                refreshClass: "owl-refresh",
                loadedClass: "owl-loaded",
                loadingClass: "owl-loading",
                rtlClass: "owl-rtl",
                responsiveClass: "owl-responsive",
                dragClass: "owl-drag",
                itemClass: "owl-item",
                stageClass: "owl-stage",
                stageOuterClass: "owl-stage-outer",
                grabClass: "owl-grab",
                autoHeight: false,
                lazyLoad: false
            });
        
            $(".next").click(function () {
                owl.trigger("owl.next");
            });
            $(".prev").click(function () {
                owl.trigger("owl.prev");
            });
        });
        $(document).ready(function (){
            $("#pasoUnoToVideo").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#queEsIqosVideo").offset().top
                }, 2000);
            });
            $("#queEsIqos").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#queEsIqosVideo").offset().top
                }, 2000);
            });
            $("#toPasos").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#pasos").offset().top
                }, 2000);
            });
            var myPlayer = document.querySelector('#myVideoModal')
            // myPlayer.ontimeupdate = function() {
            //     _self.getPercentage()
            // };
            $(function(){
                var count = 0
                
                $(document).click(function(e) {
                    if (!$(e.target).closest('#ex1').length && count > 0 ) {
                        _self.playButton = true
                        console.log("count should always be 1 in the if statement", count)
                       
                        myPlayer.pause()
                        
                        $("#playIcon").show("slow")
                        count = 0
                        console.log("count than we set it to 0 again", count)
                    } else {
                        count++
                        
                    }
                });   
            });
           
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this

        Vue.use(VueTheMask)
        window.addEventListener('resize', _self.handleResize)
        _self.handleResize()
        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});


var $adoptaBranded = `<div> 
                    <section class="coronavirus" style="order:1;">
                        <h4>
                            <span>Disponible solo en la Ciudad de México y área metropolitana.</span>
                        </h4>
                    </section>
                    <section id="adoptaBanner" v-bind:class="{ pagina }" class="principal version_adopta_branded" style="order:2;">
                        <span id="adopta">
                            <span style="display:flex;flex-direction:row;" >
                                <a id="tu_eres_tu_fumador2" href="#socialShare" rel="modal:open" style="width:100%;margin-bottom: 20px;" class='btn agendarllamada rgm' >Comparte ahora</a>
                            </span>
                        </span>
                        <a id="spanVideoPop" href="#ex1" rel="modal:open" >
                            <span id="playIcon"  class="container" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">  
                            </span>
                        </a>
                        <span id="ex1" class="modal" style="width:auto">
                            <video width="320" height="240" id="myVideoModal">
                            <source src="https://pmi.23video.com/64968568/65417230/d1674608d69d4c4cc83afe5b48c3db8e/video_hd/b235068iqoswhatisiqos24plusmxes-mx6-1-video.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                            </video>
                            <button id="playIconInModal" class="play">
                            </button>  
                             
                        </span>   
                    </section>
                    


                    <a id="tu_eres_tu_fumador" href="#socialShare" rel="modal:open">¿TU ERES TU <b style="margin-left: 4px;margin-right: 4px;"> FUMADOR FAVORITO? </b> DA CLICK AQUÍ.</a>
                    <span id="socialShare" class="modal" style="width:auto">
                        <div class="col-12 prueba" style="display:flex;justify-content: center;color:rgb(60,151,165);display: flex;flex-direction: column;text-align: center;margin-bottom: 0.5em;margin-top: 0.5em;">
                            <h1><b>COMPARTE EL CAMBIO</b>
                            <p>USANDO.</P></h1>
                        </div> 
                        <div class="col-12 prueba" style="display:flex;justify-content: space-around;color:rgb(60,151,165);">    
                            <div id="whatsClicked" class="col-4 prueba" style="text-align: center;padding-bottom: 3em;">
                                <a href="//api.whatsapp.com/send?phone=&text=
                                Tu eres mi fumador
                                favorito, descubre IQOS
                                que calienta tabaco real
                                en lugar de quemarlo.
                                Menos olor, sin humo y
                                sin ceniza. Te regalo una
                                prueba gratis por 15 días
                                ¿Aceptas el reto? Entra a:
                                
                                http://mxiqos.com/xxxxx">
                                    <img src="/arquivos/whatsUpIcon.png" />
                                </a>
                                <p style="font-size:20px">WhatsApp</p>
                            </div>
                            <div id="facebookClicked" class="col-4 prueba" style="text-align: center;padding-bottom: 3em;">
                                <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.probar-iqos.com/adopta" target="_blank">
                                    <img src="/arquivos/faceBookIcon.png" />
                                </a>
                                <p style="font-size:20px">Facebook</p>
                            </div>
                        </div>    
                    </span> 
                   
                    <section id="prueba" class="claro" >
                        <h4 class="adopt" style="margin-top:0px;">TU FUMADOR FAVORITO MERECE CONOCER MEJORES OPCIONES.</h4>
                        <h4 class="adopt" style="margin-top:0px;">SÉ UN ALIADO EN SU TRANSFORMACIÓN Y AYÚDALO A <span style="color:rgb(60,151,165);font-weight: bold;"> ELEGIR EL CAMBIO</span>.</h4>
                        <div v-if="mobile > 760">
                            <ul class="refer-a-friend__box-items">
                                <li class="refer-a-friend__box-item">
                                    <div class="refer-a-friend__item-icon col-5 prueba">
                                        <img src='/arquivos/iqosIcon.png' />                       
                                    </div>
                                    <div class="refer-a-friend__item-text"><b>IQOS lo cambia todo.</b></div>
                                    <p class="refer-a-friend__item--info">IQOS es un dispositivo electrónico que calienta tabaco real en lugar de quemarlo.</p>
                                </li>
                                <li class="refer-a-friend__box-item">
                                    <div class="refer-a-friend__item-icon col-5 prueba">
                                        <img src='/arquivos/nooseIcon.png' />
                                    </div>
                                    <div class="refer-a-friend__item-text"><b>Menos olor.</b></div>
                                    <p class="refer-a-friend__item--info">Con IQOS, tu fumador favorito ya no te molestará con su mal olor a cigarro.</p>
                                </li>
                                <li class="refer-a-friend__box-item">
                                    <div class="refer-a-friend__item-icon col-5 prueba">
                                        <img src='/arquivos/smokeIcon.png' />
                                    </div>
                                    <div class="refer-a-friend__item-text"><b>Sin humo. Sin ceniza.</b></div>
                                    <p class="refer-a-friend__item--info">Ya no más nubes de humo ni ceniza por todos lados.</p>
                                </li>
                            </ul>
                        </div>
                        <div v-else>
                            <div class="refer-a-friend__box-wrapper" style="padding-bottom:10px;">
                                <div class="col-12 prueba" style="display:flex;">
                                    <div class="col-4 prueba" style="display: flex;justify-content: end;">
                                        <img src='/arquivos/iqosIcon.png' />
                                    </div>
                                    <div class="col-8 prueba" style="display: flex;justify-content: center;text-align:left;flex-direction:column;">
                                        <div class="refer-a-friend__item-text" style="font-size:13px;font-weight: bold;">IQOS lo cambia todo.</div>
                                        <p class="refer-a-friend__item--info" style="opacity: 0.6;font-size:11px;padding-left: 0px !important;">IQOS es un dispositivo electrónico que calienta tabaco real en lugar de quemarlo.</p>
                                    </div>
                                </div>
                                <div class="col-12 prueba" 
                                style="display:flex;
                               
                                min-height: 40px;
                                margin-left: 10px;
                                margin-top: 13px;
                                margin-bottom: 13px;
                                border-color: #979797;">
                                    <div id="border" class="col-2 prueba"></div>
                                    <div class="col-12 prueba" style="display: flex;align-items: center;">
                                        
                                    </div>
                                </div>
        
        
                                <div class="col-12 prueba" style="display:flex">
                                    <div class="col-4 prueba" style="display: flex;justify-content: end;">
                                        <img src='/arquivos/nooseIcon.png' />
                                    </div>
                                    <div class="col-8 prueba" style="display: flex;justify-content: center;text-align:left;flex-direction:column;">
                                        <div class="refer-a-friend__item-text" style="font-size:13px;font-weight: bold;">Menos olor.</div>
                                        <p class="refer-a-friend__item--info" style="opacity: 0.6;padding-left: 0px !important;font-size:11px;">Con IQOS, tu fumador favorito ya no te molestará con su mal olor a cigarro.</p>
                                    </div>
                                </div>
                                <div class="col-12 prueba" 
                                style="display:flex;
                                min-height: 40px;
                                margin-left: 10px;
                                margin-top: 13px;
                                margin-bottom: 13px;
                                border-color: #979797;">
                                    <div id="border"  class="col-2 prueba"></div>
                                    <div class="col-12 prueba" style="display: flex;align-items: center;">
                                        
                                    </div>
                                </div>
        
        
                                <div class="col-12 prueba" style="display:flex">
                                    <div class="col-4 prueba" style="display: flex;justify-content: end;">
                                        <div class="refer-a-friend__item-icon">
                                            <img src='/arquivos/smokeIcon.png' />
                                        </div>
                                    </div>
                                    <div class="col-8 prueba" style="display: flex;justify-content: center;text-align:left;flex-direction:column;">
                                        <div class="refer-a-friend__item-text" style="font-size:13px;font-weight: bold;">Sin humo. Sin ceniza.</div>
                                        <p class="refer-a-friend__item--info" style="opacity: 0.6;padding-left: 0px !important;font-size:11px;">Ya no más nubes de humo ni ceniza por todos lados.</p>
                                    </div>
                                </div>
                               
                            </div>
                        </div>
                     <h4 class="adopt" style="color:rgb(60,151,165);font-weight: bold;">¿QUÉ ESPERAS? CAMBIA LA VIDA DE TU FUMADOR FAVORITO.</h4>
                    </section>


                    <section class="claro" style="background: #FFF;">
                        <div class="col-12 prueba" id="wraper">
                            <div id="adoptaBranded" class="col-6 prueba" style="display:flex;flex-direction:column;justify-content:center;align-items: center;">
                                <a id="tu_eres_tu_fumador3" href="#socialShare" rel="modal:open">
                                    <h4 style="text-transform: none;" class="adopt">Vivir la experiencia IQOS</h4>
                                    <h4 style="text-transform: none;" class="adopt">Gratis durante 15 días,</h4>
                                    <h4 style="text-transform: none; " class="adopt">lo <span style="color:rgb(60,151,165)">Cambia Todo</span>.</h4>
                                    <span style="display: flex; flex-direction: row;width:100%;justify-content: center;">
                                        <a 
                                        id="comparteAhoraBottom"
                                        style="width:70%;
                                        margin-bottom: 20px;
                                        background: lightgrey;width: 70%;
                                        margin-top: 20px;
                                        align-items: center;
                                        align-content: center;
                                        display: flex;
                                        justify-content: center;" class='btn agendarllamada rgm' >Comparte ahora <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="rgb(60,151,165)"></path></svg></a>
                                    </span>
                                    <img style="width: 100%;height: auto;border-bottom: 2px solid lightgrey;" src="/arquivos/adoptaBrandedIqosBlue.png"  />
                                </a>
                            </div>
                            <div v-if="mobile > 760" id="adoptaBranded" class="col-6 prueba" style="display:flex;flex-direction:column;justify-content: center;text-align:left;">
                                <div style="display:flex;flex-direction:column;padding: 2em;">
                                    <h4 style="padding-left: 0px;color:lightgrey;">IQOS EL RETO</h4>
                                    <p id="unirse" style="color:black;">Al unirse a IQOS El Reto, tus amigos fumadores podrán probar IQOS totalmente gratis durante 15 días, 
                                    antes de comprarlo. Además, contarán con atención personalizada por un Experto IQOS durante este tiempo.
                                    Al terminar el periodo de préstamo, podrán decidir si quieren comprarlo y/o prefieren devolverlo sin ningún compromiso.                                    
                                    </p>
                                </div>
                            </div>
                        </div>
                       
                    </section>

                    <style scoped>
                        .fadingVideo-enter-active, .fadingVideo-leave-active {
                            transition: opacity .9s;
                        }
                        .fadingVideo-enter, .fadingVideo-leave-to /* .fade-leave-active below version 2.1.8 */ {
                            opacity: 0;
                        }
                        .jquery-modal.blocker.current {
                            display: flex;
                            align-items: center;
                        }
                        .play {
                            content: "";
                            width: 100px;
                            border-radius: 100%;
                            background: #fff;
                            opacity: .50;
                            position: absolute;
                            left: 50%;
                            margin-left: -50px;
                            top: 50%;
                            margin-top: -50px;
                            height: 100px;
                            z-index: 99;
                            cursor: pointer;
                        }
                        .play:after {
                            z-index: 99;
                            content: "";
                            display: inline-block;
                            vertical-align: middle;
                            margin-right: 10px;
                            width: 0;
                            height: 0;
                            border-top: 25px solid transparent;
                            border-bottom: 25px solid transparent;
                            border-left: 40px solid #6f6d6d;
                            position: absolute;
                            left: 50%;
                            margin-left: -20px;
                            top: 50%;
                            margin-top: -23px;
                            transition: all linear .2s;
                            cursor: pointer;
                        }
                        #tu_eres_tu_fumador {
                            height:3rem;
                            color:#fff;
                            background-color:rgb(104,47,92);
                            display:flex;
                            justify-content:center;
                            align-items:center;
                        }
                        #wraper {
                            display:flex;
                            flex-direction:row;
                        }
                        @media (max-width:600px) {
                            #tu_eres_tu_fumador {
                                font-size:13px !important;
                            }
                            #tu_eres_tu_fumador3 {
                                padding:15px !important;
                            }
                            #adoptaBranded {
                                width:100% !important;
                            }
                            #wraper {
                                flex-direction:column !important;
                            }
                            p.refer-a-friend__item--info {
                                padding: 1em !important;
                            }
                            #unirse {
                                padding-left: 0em !important;
                            }
                        }
                        @media (min-width: 48em) {
                            section#prueba ul li.refer-a-friend__box-item:not(:first-child):before {
                            
                                top: 15% !important;
                               
                            }
                        }
                        
                        #tu_eres_tu_fumador3 svg {
                            margin-left:20px;
                        }
                        #border {
                            border-right: 1px solid rgb(151, 151, 151);
                        }
                    </style>
                    
                    
                    </div>`;
Vue.component('adopta-branded-component', {
    'template': $adoptaBranded,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "",
            "emailVerifiedNB":false,
            "promCode":"",
            "codigoDeReferidoValidado":false,
            "codigoReferidoFeedbackMessage":"Código de referido no válido, por favor verifícalo.",
            "showWarning":false,
            "utmEqualsB2b":false,
            "GAtransactionId":"",
            "sourceFromUtm":"",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "playButton": true,
            "modal":false,
            "mobile": window.innerWidth
        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                console.log(ga.getAll())
                console.log(tracker, "tracker")
                console.log(ga.getAll()[0])
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
       
        "videoPopUp": function () {
            var myPlayer = document.querySelector('#myVideoModal'),
                playVideo = false,
                _self = this
                
               
            // myPlayer.ontimeupdate = function() {
            //     _self.getPercentage()
            // };
            
            
            $("#playIcon").click(function(){
                var $this = $(this)
                $(this).toggleClass("play-pause")
                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    $this.hide("slow")
                    $("#playIconInModal").hide("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    _self.playButton = false
                    $this.show("slow")
                    $("#playIconInModal").show("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }    
            })
            $("#myVideoModal").click(function(){
                $(this).toggleClass("play-pause")
                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    $("#playIcon").hide("slow")
                    $("#playIconInModal").hide("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    _self.playButton = false
                    $("#playIcon").show("slow")
                    $("#playIconInModal").show("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }    
            })
            $("#playIconInModal").click(function(){
                $(this).toggleClass("play-pause")
                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    $("#playIcon").hide("slow")
                    $("#playIconInModal").hide("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    _self.playButton = false
                    $("#playIcon").show("slow")
                    $("#playIconInModal").show("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }    
            })
            $("#tu_eres_tu_fumador").click(function(){
                $("#playIcon").hide("slow")
            })
            $("#tu_eres_tu_fumador2").click(function(){
                $("#playIcon").hide("slow")
            })
            $("#tu_eres_tu_fumador3").click(function(){
                $("#playIcon").hide("slow")
            })
        },
        /*
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        */
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        /*
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        */
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    pageName: "home"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.term = utms.utm_term
                _self.sourceFromUtm = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([/^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "clickToVideo": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
     
       
      
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
       
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        //_self.video()
        _self.videoPopUp()
        //_self.seletorSku()
        _self.GetTransaction()
        
        window.onresize = () => {
            _self.mobile = window.innerWidth;
        };
       /* window.fbAsyncInit = () => {
            FB.init({appId: '1394854500848016', status: true, cookie: true,
            xfbml: true});
            };
            $(function() {
            var e = document.createElement('script'); e.async = true;
            e.src = document.location.protocol +
            '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
            }()); */
        $(document).ready(function (){
            $("#pasoUnoToVideo").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#queEsIqosVideo").offset().top
                }, 2000);
            });
            $("#queEsIqos").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#queEsIqosVideo").offset().top
                }, 2000);
            });
            $("#toPasos").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#pasos").offset().top
                }, 2000);
            });
            $("#tu_eres_tu_fumador2").click(function (){
                try {
                    window.dataLayer.push({
                        category: "Clicks",
                        event: "clic",
                        action: "Comparte ahora",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({
                        category: "Dialog (Share WhatsApp Facebook)",
                        event: "sharedialog",
                        action: "Display Share Dialog",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
            });
            $("#tu_eres_tu_fumador").click(function (){
                try {
                    window.dataLayer.push({
                        category: "Clicks",
                        event: "clic",
                        action: "Clic aqui",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({
                        category: "Dialog (Share WhatsApp Facebook)",
                        event: "sharedialog",
                        action: "Display Share Dialog",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
            });
            $("#tu_eres_tu_fumador3").click(function (){
                try {
                    window.dataLayer.push({
                        category: "Dialog (Share WhatsApp Facebook)",
                        event: "sharedialog",
                        action: "Display Share Dialog",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
            });
            $("#whatsClicked").click(function (){
                try {
                    window.dataLayer.push({
                        category: "Clicks",
                        event: "clic",
                        action: "WhatsApp",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
            });
            $("#facebookClicked").click(function (){
                try {
                    window.dataLayer.push({
                        category: "Clicks",
                        event: "clic",
                        action: "Facebook",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
            });
            $("#comparteAhoraBottom").click(function (){
                try {
                    window.dataLayer.push({
                        category: "Clicks",
                        event: "clic",
                        action: "Comparte Ahora",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
            });
            var myPlayer = document.querySelector('#myVideoModal')
            // myPlayer.ontimeupdate = function() {
            //     _self.getPercentage()
            // };
            $(function(){
                var count = 0
                
                $(document).click(function(e) {
                    if (!$(e.target).closest('#ex1').length && count > 0 ) {
                        _self.playButton = true
                        console.log("count should always be 1 in the if statement", count)
                       
                        myPlayer.pause()
                        
                        $("#playIcon").show("slow")
                        count = 0
                        console.log("count than we set it to 0 again", count)
                    } else if($(e.target).closest('#socialShare').length) {
                        $("#playIcon").show("slow")    
                    } else {
                        count++
                    }
                });   
            });
            /*
            $('#share_button').click(function(e){
                e.preventDefault();
                FB.ui(
                {
                method: 'feed',
                name: 'This is the content of the "name" field.',
                link: 'https://www.probar-iqos.com/adopta',
                picture: '',
                caption: 'this is the caption',
                description: "this is the description",
                message: "the message "
                });
            }); */
           
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this

        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)
       
        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    },
    "destroyed": function () {
        var _self = this
        window.removeEventListener('resize', _self.handleResize)
    }
});

// adopta sin humo
var $adoptaUnbranded = `<div> 
                    <section class="coronavirus" style="order:1;">
                        <h4>
                            <span>Disponible solo en la Ciudad de México y área metropolitana.</span>
                        </h4>
                    </section>
                    <section id="adoptaBanner" v-bind:class="{ pagina }" class="principal version_adopta_unbranded" style="order:2;">
                        <span id="adopta">
                            <span style="display:flex;flex-direction:row;" >
                                <a @click="comparteAhora()"  id="tu_eres_tu_fumador2" href="#socialShare" rel="modal:open" style="width:100%;margin-bottom: 20px;" class='btn agendarllamada rgm' >Comparte ahora</a>
                            </span>
                        </span>
                        <a id="spanVideoPop" href="#ex1" rel="modal:open" >
                            <span id="playIcon"  class="container" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">  
                            </span>
                        </a>
                        <span id="ex1" class="modal" style="width:auto">
                                <video width="320" height="240" id="myVideoModal">
                                <source src="https://pmi.23video.com/64968568/65417230/d1674608d69d4c4cc83afe5b48c3db8e/video_hd/b235068iqoswhatisiqos24plusmxes-mx6-1-video.mp4" type="video/mp4">
                                Your browser does not support the video tag.
                                </video>
                                <button id="playIconInModal" class="play">
                                </button>  
                             
                        </span>   
                    </section>
                    


                    <a @click="clickAqui()"  id="tu_eres_tu_fumador" href="#socialShare" rel="modal:open">¿TU ERES TU <b style="margin-left: 4px;margin-right: 4px;"> PERSONA FAVORITA? </b> DA CLICK AQUI.</a>
                    

                    <span id="socialShare" class="modal" style="width:auto">
                        <div class="col-12 prueba" style="display:flex;justify-content: center;color:rgb(60,151,165);display: flex;flex-direction: column;text-align: center;margin-bottom: 0.5em;margin-top: 0.5em;">
                            <h1><b>COMPARTE EL CAMBIO</b>
                            <p>USANDO.</P></h1>
                        </div> 
                        <div class="col-12 prueba" style="display:flex;justify-content: space-around;color:rgb(60,151,165);">    
                            <div id="whatsClicked" class="col-4 prueba" style="text-align: center;padding-bottom: 3em;">
                                <a href="//api.whatsapp.com/send?phone=&text=
                                Tu eres mi fumador
                                favorito, descubre IQOS
                                que calienta tabaco real
                                en lugar de quemarlo.
                                Menos olor, sin humo y
                                sin ceniza. Te regalo una
                                prueba gratis por 15 días
                                ¿Aceptas el reto? Entra a:
                                
                                http://mxiqos.com/xxxxx">
                                    <img src="/arquivos/whatsUpIcon.png" />
                                </a>
                                <p style="font-size:20px">WhatsApp</p>
                            </div>
                            <div id="facebookClicked" class="col-4 prueba" style="text-align: center;padding-bottom: 3em;">
                                <a href="https://www.facebook.com/sharer/sharer.php?u=https://www.probar-iqos.com/adopta" target="_blank">
                                    <img src="/arquivos/faceBookIcon.png" />
                                </a>
                                <p style="font-size:20px">Facebook</p>
                            </div>
                        </div>    
                    </span> 
                   
                    <section id="prueba" class="claro" >                       
                        <h4 class="adopt" style="margin-top:0px;">TU PERSONA FAVORITA MERECE CONOCER MEJORES OPCIONES.</h4>
                        <h4 class="adopt" style="margin-top:0px;">SÉ UN ALIADO EN SU TRANSFORMACIÓN Y AYÚDALO A <span style="color:rgb(60,151,165);font-weight: bold;"> ELEGIR EL CAMBIO</span>.</h4>
                        <div v-if="mobile > 760">
                            <ul class="refer-a-friend__box-items">
                                <li class="refer-a-friend__box-item">
                                    <div class="refer-a-friend__item-icon col-5 prueba">
                                        <img src='/arquivos/iqosIcon.png' />                       
                                    </div>
                                    <div class="refer-a-friend__item-text"><b>Cámbialo todo.</b></div>
                                    <p class="refer-a-friend__item--info">Rétalo a descubrir una nueva tecnologia que le cambiará la vida.</p>
                                </li>
                                <li class="refer-a-friend__box-item">
                                    <div class="refer-a-friend__item-icon col-5 prueba">
                                        <img src='/arquivos/nooseIcon.png' />
                                    </div>
                                    <div class="refer-a-friend__item-text"><b>Menos olor.</b></div>
                                    <p class="refer-a-friend__item--info">Adiós a las molestias generadas por el olor a humo.</p>
                                </li>
                                <li class="refer-a-friend__box-item">
                                    <div class="refer-a-friend__item-icon col-5 prueba">
                                        <img src='/arquivos/smokeIcon.png' />
                                    </div>
                                    <div class="refer-a-friend__item-text"><b>Sin humo. Sin ceniza.</b></div>
                                    <p class="refer-a-friend__item--info">Ya no más nubes de humo ni ceniza por todos lados.</p>
                                </li>
                            </ul>
                        </div>
                        <div v-else>
                            <div class="refer-a-friend__box-wrapper" style="padding-bottom:10px;">
                                <div class="col-12 prueba" style="display:flex;">
                                    <div class="col-4 prueba" style="display: flex;justify-content: end;">
                                        <img src='/arquivos/iqosIcon.png' />
                                    </div>
                                    <div class="col-8 prueba" style="display: flex;justify-content: center;text-align:left;flex-direction:column;">
                                        <div class="refer-a-friend__item-text" style="font-size:13px;font-weight: bold;">Cámbialo todo.</div>
                                        <p class="refer-a-friend__item--info" style="opacity: 0.6;font-size:11px;padding-left: 0px !important;">Rétalo a descubrir una nueva tecnologia que le cambiará la vida.</p>
                                    </div>
                                </div>
                                <div class="col-12 prueba" 
                                style="display:flex;
                               
                                min-height: 40px;
                                margin-left: 10px;
                                margin-top: 13px;
                                margin-bottom: 13px;
                                border-color: #979797;">
                                    <div id="border" class="col-2 prueba"></div>
                                    <div class="col-12 prueba" style="display: flex;align-items: center;">
                                        
                                    </div>
                                </div>
        
        
                                <div class="col-12 prueba" style="display:flex">
                                    <div class="col-4 prueba" style="display: flex;justify-content: end;">
                                        <img src='/arquivos/nooseIcon.png' />
                                    </div>
                                    <div class="col-8 prueba" style="display: flex;justify-content: center;text-align:left;flex-direction:column;">
                                        <div class="refer-a-friend__item-text" style="font-size:13px;font-weight: bold;">Menos olor.</div>
                                        <p class="refer-a-friend__item--info" style="opacity: 0.6;padding-left: 0px !important;font-size:11px;">Adiós a las molestias generadas por el olor a humo.</p>
                                    </div>
                                </div>
                                <div class="col-12 prueba" 
                                style="display:flex;
                                min-height: 40px;
                                margin-left: 10px;
                                margin-top: 13px;
                                margin-bottom: 13px;
                                border-color: #979797;">
                                    <div id="border"  class="col-2 prueba"></div>
                                    <div class="col-12 prueba" style="display: flex;align-items: center;">
                                        
                                    </div>
                                </div>
                                <div class="col-12 prueba" style="display:flex">
                                    <div class="col-4 prueba" style="display: flex;justify-content: end;">
                                        <div class="refer-a-friend__item-icon">
                                            <img src='/arquivos/smokeIcon.png' />
                                        </div>
                                    </div>
                                    <div class="col-8 prueba" style="display: flex;justify-content: center;text-align:left;flex-direction:column;">
                                        <div class="refer-a-friend__item-text" style="font-size:13px;font-weight: bold;">Sin humo. Sin ceniza.</div>
                                        <p class="refer-a-friend__item--info" style="opacity: 0.6;padding-left: 0px !important;font-size:11px;">Ya no más nubes de humo ni ceniza por todos lados.</p>
                                    </div>
                                </div>   
                            </div>
                        </div>
                    </section>
                    <section class="container boxes"
                    style="
                    padding-left: 0px;
                    margin-left: 0px;
                    margin-right: 0px;
                    width: 99.7%;
                    padding-top: 2em;
                    padding-bottom: 1em;">
                        <div class="col-12 prueba" id="wraper">
                            <div id="adoptaBranded" class="col-12 prueba" style="display:flex;flex-direction:column;justify-content:center;align-items: center;">
                               
                                <h4 class="adopt">VIVIR LA EXPERIENCIA DURANTE 15 DÍAS, LO <span style="color:rgb(60,151,165)">CAMBIA TODO</span>.</h4>
                                <span id="unbrandedButton" style="display: flex; flex-direction: row;">
                                    <a @click="comparteAhora()" id="tu_eres_tu_fumador3" href="#socialShare" rel="modal:open" 
                                    style="width:100%;
                                    margin-bottom: 20px;
                                    background: lightgrey;width: 100%;
                                    margin-top: 20px;
                                    align-items: center;
                                    align-content: center;
                                    display: flex;
                                    justify-content: center;" class='btn agendarllamada rgm' >Comparte ahora <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="rgb(60,151,165)"></path></svg></a>
                                </span>
                            </div>
                          
                        </div>
                       
                    </section>

                    <style scoped>
                        .fadingVideo-enter-active, .fadingVideo-leave-active {
                            transition: opacity .9s;
                        }
                        .fadingVideo-enter, .fadingVideo-leave-to /* .fade-leave-active below version 2.1.8 */ {
                            opacity: 0;
                        }
                        .jquery-modal.blocker.current {
                            display: flex;
                            align-items: center;
                        }
                        .play {
                            content: "";
                            width: 100px;
                            border-radius: 100%;
                            background: #fff;
                            opacity: .50;
                            position: absolute;
                            left: 50%;
                            margin-left: -50px;
                            top: 50%;
                            margin-top: -50px;
                            height: 100px;
                            z-index: 99;
                            cursor: pointer;
                        }
                        .play:after {
                            z-index: 99;
                            content: "";
                            display: inline-block;
                            vertical-align: middle;
                            margin-right: 10px;
                            width: 0;
                            height: 0;
                            border-top: 25px solid transparent;
                            border-bottom: 25px solid transparent;
                            border-left: 40px solid #6f6d6d;
                            position: absolute;
                            left: 50%;
                            margin-left: -20px;
                            top: 50%;
                            margin-top: -23px;
                            transition: all linear .2s;
                            cursor: pointer;
                        }
                        #tu_eres_tu_fumador {
                            height:3rem;
                            color:#fff;
                            background-color:rgb(104,47,92);
                            display:flex;
                            justify-content:center;
                            align-items:center;
                        }
                        #wraper {
                            display:flex;
                            flex-direction:row;
                        }
                        #unbrandedButton {
                            width:30%;
                        }
                        @media (max-width:600px) {
                            #tu_eres_tu_fumador {
                                font-size:13px !important;
                            }
                            #tu_eres_tu_fumador3 {
                                padding:15px !important;
                            }
                            #adoptaBranded {
                                width:100% !important;
                            }
                            #wraper {
                                flex-direction:column !important;
                            }
                            p.refer-a-friend__item--info {
                                padding: 1em !important;
                            }
                            #unirse {
                                padding-left: 0em !important;
                            }
                            #unbrandedButton {
                                width:70% !important;
                            }
                        }
                        @media (min-width: 48em) {
                            section#prueba ul li.refer-a-friend__box-item:not(:first-child):before {
                            
                                top: 15% !important;
                               
                            }
                        }
                        
                        #tu_eres_tu_fumador3 svg {
                            margin-left:20px;
                        }
                        #border {
                            border-right: 1px solid rgb(151, 151, 151);
                        }
                        
                        
                    
                    </style>
                    
                    
                    </div>`;
Vue.component('adopta-unbranded-component', {
    'template': $adoptaUnbranded,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "",
            "emailVerifiedNB":false,
            "promCode":"",
            "codigoDeReferidoValidado":false,
            "codigoReferidoFeedbackMessage":"Código de referido no válido, por favor verifícalo.",
            "showWarning":false,
            "utmEqualsB2b":false,
            "GAtransactionId":"",
            "sourceFromUtm":"",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "playButton": true,
            "modal":false,
            "mobile": window.innerWidth
        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                console.log(ga.getAll())
                console.log(tracker, "tracker")
                console.log(ga.getAll()[0])
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "share": function(type){

            if(type == "face"){
                window.dataLayer.push({
                    "category": "Dialog (Share Facebook)",
                    "action": "Display Share Dialog",
                    "label": "MX",
                    "event": "Sharedialog"
                })
                window.dataLayer.push({
                    "category": "Clicks",
                    "action": "Facebook",
                    "label": "MX",
                    "event": "Click"
                })
            } else {
                window.dataLayer.push({
                    "category": "Dialog (Share WhatsApp)",
                    "action": "Display Share Dialog",
                    "label": "MX",
                    "event": "Sharedialog"
                })
                window.dataLayer.push({
                    "category": "Clicks",
                    "action": "WhatsApp",
                    "label": "MX",
                    "event": "Click"
                })
            }
            
        },
        "videoPopUp": function () {
            var myPlayer = document.querySelector('#myVideoModal'),
                playVideo = false,
                _self = this
                
               
            // myPlayer.ontimeupdate = function() {
            //     _self.getPercentage()
            // };
            
            
            $("#playIcon").click(function(){
                var $this = $(this)
                $(this).toggleClass("play-pause")
                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    $this.hide("slow")
                    $("#playIconInModal").hide("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    _self.playButton = false
                    $this.show("slow")
                    $("#playIconInModal").show("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }    
            })
            $("#myVideoModal").click(function(){
                $(this).toggleClass("play-pause")
                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    $("#playIcon").hide("slow")
                    $("#playIconInModal").hide("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    _self.playButton = false
                    $("#playIcon").show("slow")
                    $("#playIconInModal").show("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }    
            })
            $("#playIconInModal").click(function(){
                $(this).toggleClass("play-pause")
                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    $("#playIcon").hide("slow")
                    $("#playIconInModal").hide("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    _self.playButton = false
                    $("#playIcon").show("slow")
                    $("#playIconInModal").show("slow")
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }    
            })
            $("#tu_eres_tu_fumador").click(function(){
                $("#playIcon").hide("slow")
            })
            $("#tu_eres_tu_fumador2").click(function(){
                $("#playIcon").hide("slow")
            })
            $("#tu_eres_tu_fumador3").click(function(){
                $("#playIcon").hide("slow")
            })
        },
        /*
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        */
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        /*
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        */
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "comparteAhora": function () {
            console.log("comparte ahora button clicked")
            try {
                window.dataLayer.push({
                    category: "Clicks",
                    action: "Comparte ahora",
                    event: "clic",
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "clickAqui": function () {
            console.log("click aqui button clicked")
            try {
                window.dataLayer.push({
                    category: "Clicks",
                    action: "Clic aqui",
                    event: "clic",
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.term = utms.utm_term
                _self.sourceFromUtm = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "clickToVideo": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
     
       
      
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
       
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        //_self.video()
        _self.videoPopUp()
        //_self.seletorSku()
        _self.GetTransaction()
        
        window.onresize = () => {
            _self.mobile = window.innerWidth;
        };
       /* window.fbAsyncInit = () => {
            FB.init({appId: '1394854500848016', status: true, cookie: true,
            xfbml: true});
            };
            $(function() {
            var e = document.createElement('script'); e.async = true;
            e.src = document.location.protocol +
            '//connect.facebook.net/en_US/all.js';
            document.getElementById('fb-root').appendChild(e);
            }()); */
        $(document).ready(function (){
            $("#pasoUnoToVideo").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#queEsIqosVideo").offset().top
                }, 2000);
            });
            $("#queEsIqos").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#queEsIqosVideo").offset().top
                }, 2000);
            });
            $("#toPasos").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#pasos").offset().top
                }, 2000);
            });
            $("#tu_eres_tu_fumador2").click(function (){
                try {
                    window.dataLayer.push({
                        category: "Dialog (Share WhatsApp Facebook)",
                        event: "sharedialog",
                        action: "Display Share Dialog",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
            });
            $("#tu_eres_tu_fumador").click(function (){
                try {
                    window.dataLayer.push({
                        category: "Dialog (Share WhatsApp Facebook)",
                        event: "sharedialog",
                        action: "Display Share Dialog",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
            });
            $("#tu_eres_tu_fumador3").click(function (){
                try {
                    window.dataLayer.push({
                        category: "Dialog (Share WhatsApp Facebook)",
                        event: "sharedialog",
                        action: "Display Share Dialog",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
            });
            $("#whatsClicked").click(function (){
                try {
                    window.dataLayer.push({
                        category: "Clicks",
                        event: "clic",
                        action: "WhatsApp",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
            });
            $("#facebookClicked").click(function (){
                try {
                    window.dataLayer.push({
                        category: "Clicks",
                        event: "clic",
                        action: "Facebook",
                        label: "MX"
                    })
                } catch (e) {console.log(e)}
            });
            var myPlayer = document.querySelector('#myVideoModal')
            // myPlayer.ontimeupdate = function() {
            //     _self.getPercentage()
            // };
            $(function(){
                var count = 0
                
                $(document).click(function(e) {
                    if (!$(e.target).closest('#ex1').length && count > 0 ) {
                        _self.playButton = true
                        console.log("count should always be 1 in the if statement", count)
                       
                        myPlayer.pause()
                        
                        $("#playIcon").show("slow")
                        count = 0
                        console.log("count than we set it to 0 again", count)
                    } else if($(e.target).closest('#socialShare').length) {
                        $("#playIcon").show("slow")    
                    } else {
                        count++
                    }
                });   
            });
            /*
            $('#share_button').click(function(e){
                e.preventDefault();
                FB.ui(
                {
                method: 'feed',
                name: 'This is the content of the "name" field.',
                link: 'https://www.probar-iqos.com/adopta',
                picture: '',
                caption: 'this is the caption',
                description: "this is the description",
                message: "the message "
                });
            }); */
           
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this

        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});



var $gettrital = `<div> 
                            <section class="coronavirus" style="order:1;">
                                <h4>
                                    <span>Por tiempo limitado, regístrate para recibir más información de IQOS y recibe 10% de descuento para la compra de tu primer Kit IQOS.</span>
                                </h4>
                            </section>
                            <section v-bind:class="{ pagina }" class="principal version_exitoMayo" style="order:2;">
                                <span v-if="screen > 800" class="agendaAtBottomExito col-2 prueba"></span>
                                <span v-if="screen > 800" class="agendaAtBottomExito col-4 prueba"><a id="toFormTop" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic" class="btn rgm" style="width: 100%; margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;cursor:pointer;">DEJAR MIS DATOS</a></span>
                                <span v-if="screen < 800"  class="agendaAtBottomExito col-2 prueba">
                                    <a id="toFormTop" style="width:70%;margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">DEJAR MIS DATOS</a>
                                </span>   
                            </section>
                            <section id="iqos-form" class="claro">
                                
                                <div class="two">
                                    <h4>Completa el formulario</h4>
                                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                        
                                        <input type=hidden name="oid" value="00D4P000000h9QV">
                                        <input type=hidden name="retURL" value="http://www.iqos.com">
                                        <input type=hidden id="00N4P00000HE6pF" name="00N4P00000HE6pF" :value="hostName" >


                                        <!--  ----------------------------------------------------------------------  -->
                                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                        <!--  these lines if you wish to test in debug mode.                          -->
                                        <!--  <input type="hidden" name="debug" value=1>                              -->
                                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                        <!--  ----------------------------------------------------------------------  -->
                                    
                                        <label class="lb-input" for="first_name">NOMBRE*</label>
                                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="25" class="field" name="first_name" size="20" type="text" />

                                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="25" name="last_name" class="field" size="20" type="text" />

                                        <label class="lb-input" for="email">Email*</label>
                                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                        
                                        <div class="tooltip">
                                            <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                            <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                            <span class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                        </div>
                                        
                                        <label class="lb-input" for="00N4P00000GOkeR">¿QUÉ DISPOSITIVO TE GUSTARÍA CONOCER?</label>
                                        <select class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                            <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>   
                                            <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                        </select>

                                        
                                        
                                        <div class="none">
                                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                            <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                        </div>

                                        <fieldset>
                                            <label for="aceptoterminos">
                                                <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                                <span>Acepto <a style="color:blue" target="_blank"  href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                            </label>

                                            <label for="00N4P00000GZEGJ">
                                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                                            </label>
                                            <label for="00N4P000008mN8e">
                                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                            </label>
                                        </fieldset>

                                        <div class="btn form-btn">
                                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                        </div>

                                        <transition name="fade">
                                            <div v-if="Msnenvio">
                                                <div class="background-modal" @click="closePopUp($event)"></div>
                                                <div class="envio errors">
                                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                    <b>{{ Msnenvio }}</b>
                                                </div>
                                            </div>
                                        </transition> 

                                    </form>
                                    <transition name="fade">
                                        <div v-if="errors.length" class="errors">
                                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                            <b>Para continuar, por favor revisa lo siguiente:</b>
                                            <ul>
                                                <li v-for="error in errors">{{ error }}</li>
                                            </ul>
                                        </div>    
                                    </transition>  
                                </div>
                            </section>

                            <section>
                                <div class="" style="padding-right: 15px;
                                padding-left: 15px;
                                margin-right: auto;
                                margin-left: auto;">
                                    <div id="owl-demo-2" class="owl-carousel owl-theme">

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘La mejor decisión de mi vida’</h4>
                                                <p class="flex-text">“En el momento que descubrí IQOS pensé que tal vez si era necesario experimentar y ver que tan cierto era todo lo que mi Coach personal mencionaba... En los primeros días me costó un poco de trabajo adaptarme a mi IQOS, pero con el paso del tiempo se hizo mi aliado y ahora ya no lo suelto...”</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Zabdiel</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star-o" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘Me encanta’</h4>
                                                <p class="flex-text">“Me costó unos días acostumbrarme al sabor pero una vez que lo hice no los cambio por nada, es muy práctico, es increíble que no haya ceniza, entonces lo puedes ocupar en el coche si llueve, y en cualquier lugar sin necesidad de un cenicero y sin el temor de quemar algo...”</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Esteban</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘Deje por completo el cigarro y el humo’</h4>
                                                <p class="flex-text">“Me gusta mucho, desde el primer día de uso. Despues de una semana ya no pude soportar el sabor de un cigarro normal. Una excelente alternativa y cambio de habito. Definitivamente no regresaría a fumar.”</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Carlos</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘La mejor decisión’</h4>
                                                <p class="flex-text">“...Ha sido una muy buena experiencia, dejé los cigarrillos al día 2 y llevo 6 meses con IQOS. La mejor decisión para quien no quiere dejar de fumar pero si quiere una experiencia distinta sin humo, sin ceniza. Lo recomiendo ampliamente.“</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Luis</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘No más olores desagradables’</h4>
                                                <p class="flex-text">"...Me dedico al ramo de bebidas y no podía estar trabajando con olor a cigarro. Fue una gran solución a mi problema. Ya las cosas saben distintos. Me olvide por completo de las críticas “apestas a cenicero” etc."</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Gabriel</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘Sin olor a humo de cigarro.’</h4>
                                                <p class="flex-text">“Me encantó porque no deja olor a humo de cigarro, que eso para mí al estar en el área de ventas es muy importante.“</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Miguel</p>
                                            </div>
                                        </article>

                                    </div><!-- #owl-demo-2 -->
                                </div><!-- .container -->
                            </section>

                            <section id="queEsIqosVideo" class="video">
                                <h3>¿Qué es IQOS?</h3>
                                <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                                <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                                    <img src="/arquivos/queEsIqosTumbnailMayo.png" />
                                    <video width="320" height="240" id="myVideo">
                                    <source src="https://pmi.23video.com/64968578/68793752/1423b77c21d366d862f03171afd1bcbe/video_hd/iqos-new-brand-world-brand-1-7-video.mp4" type="video/mp4">
                                    Your browser does not support the video tag.
                                    </video>  
                                </div>
                            </section>
                            <section class="video" >
                                <div style="position: relative;
                                text-align:center;">
                                    <a id="toFormBottom" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Dejar mis datos</a>
                                </div>
                            </section>



                            </div>`;

Vue.component('gettrital-component', {
    'template': $gettrital,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "hostName": window.location.hostname,
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "",
            "emailVerifiedNB":false,
            "promCode":"",
            "codigoDeReferidoValidado":false,
            "codigoReferidoFeedbackMessage":"Código de referido no válido, por favor verifícalo.",
            "showWarning":false,
            "utmEqualsB2b":false,
            "GAtransactionId":"",
            "sourceFromUtm":"",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "screen": window.innerWidth,
            "dispositivo": ""
        };

    },
    'methods': {
        "allowedCharacters":function(e){
            var reg = /^[a-zA-ZñÑÁáÉéÍíÓóÚú ÄäËëÏïÖöÜü"]*$/;
            var c = String.fromCharCode(e.which)
            if(reg.test(c))
            {
                return true;
            }
            else
            return false;
        },
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                console.log(ga.getAll())
                console.log(tracker, "tracker")
                console.log(ga.getAll()[0])
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.term = utms.utm_term
                _self.sourceFromUtm = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "clickToVideo": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        /*"agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },*/
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode si but field empty")
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length >= 1) {
                this.validateReferrCode($("#00N4P00000GOkeM").val())
            }

            if( this.promCode == "No"){
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode no")
            }

            if(this.promCode == ""){
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode not clicked")
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true && this.showWarning == false) {
                console.log("condition when tru")
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.dispositivo = $("#00N4P00000GOkeR").val()
                console.log(this.dispositivo, "dispositivo")
                _self.envio()
        
            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "validateReferrCode": function(codigoReferido) {
            console.log(codigoReferido.length,"length")
            if(codigoReferido.length == 1 || codigoReferido.length == 2){
                console.log(codigoReferido.length,"length less then 3")
                this.codigoDeReferidoValidado = false
                this.showWarning = true
            } else {

                let firstThreeLetters = codigoReferido.slice(0,3)

                if(firstThreeLetters == "MGM" 
                || firstThreeLetters == "EGM" 
                || firstThreeLetters == "B2B" 
                || firstThreeLetters == "RGM" 
                || firstThreeLetters == "IQO"
                || firstThreeLetters == "RET") {
                    this.codigoDeReferidoValidado = true
                    this.showWarning = false
                    this.descuento = codigoReferido
                } else {
                    this.codigoDeReferidoValidado = false
                    this.showWarning = true
                }
            }
            
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.sourceFromUtm + this.medium;

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            if( this.utmEqualsB2b == true && this.promCode == "No"){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == ""){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            console.log(_self.descuento, "final")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR"+"&00N4P00000GOgJP="+_self.GAtransactionId+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000HE6pF="+_self.hostName+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.GAtransactionId = ""
                _self.utmEqualsB2b = false
                _self.promCode = ""
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({ 'event': 'formTrySubmitted' });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.video()
        _self.seletorSku()
        _self.GetTransaction()
        window.onresize = () => {
            _self.screen = window.innerWidth;
        };
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        // Do stuff when the verification is throttled
                    }
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function ($) {
            var owl = $("#owl-demo-2");
            owl.owlCarousel({
                autoplay: true,
                autoplayTimeout: 1000,
                autoplayHoverPause: true,
                items: 3,
                loop: true,
                center: false,
                rewind: false,
                mouseDrag: true,
                touchDrag: true,
                pullDrag: true,
                freeDrag: false,
                margin: 0,
                stagePadding: 0,
                merge: false,
                mergeFit: true,
                autoWidth: false,
                startPosition: 0,
                rtl: false,
                smartSpeed: 250,
                fluidSpeed: false,
                dragEndSpeed: false,
                responsive: {
                    0: {
                        items: 1
                        // nav: true
                    },
                    480: {
                        items: 2,
                        nav: false
                    },
                    768: {
                        items: 3,
                        // nav: true,
                        loop: false
                    },
                    992: {
                        items: 4,
                        // nav: true,
                        loop: false
                    }
                },
                responsiveRefreshRate: 200,
                responsiveBaseElement: window,
                fallbackEasing: "swing",
                info: false,
                nestedItemSelector: false,
                itemElement: "div",
                stageElement: "div",
                refreshClass: "owl-refresh",
                loadedClass: "owl-loaded",
                loadingClass: "owl-loading",
                rtlClass: "owl-rtl",
                responsiveClass: "owl-responsive",
                dragClass: "owl-drag",
                itemClass: "owl-item",
                stageClass: "owl-stage",
                stageOuterClass: "owl-stage-outer",
                grabClass: "owl-grab",
                autoHeight: false,
                lazyLoad: false
            });
        
            $(".next").click(function () {
                owl.trigger("owl.next");
            });
            $(".prev").click(function () {
                owl.trigger("owl.prev");
            });
        });
        $(document).ready(function (){
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#iqos-form").offset().top
                }, 2000);
            });
            $("#toFormBottom").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#iqos-form").offset().top
                }, 2000);
            });
            $( "#first_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
            $( "#last_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this

        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
}); 


var $gettritalTest = `<div> 
                            <section class="coronavirus" style="order:1;">
                                <h4>
                                    <span>Por el momento el Programa de Préstamo IQOS no está disponible. En caso de estar interesado, por favor completa el formulario y nosotros te contactaremos.</span>
                                </h4>
                            </section>
                            <section v-bind:class="{ pagina }" class="principal version_exitoMayo" style="order:2;">
                                <span v-if="screen > 800" class="agendaAtBottomExito col-2 prueba"></span>
                                <span v-if="screen > 800" class="agendaAtBottomExito col-4 prueba"><a id="toFormTop" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic" class="btn rgm" style="width: 100%; margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;cursor:pointer;">DEJAR MIS DATOS</a></span>
                                <span v-if="screen < 800"  class="agendaAtBottomExito col-2 prueba">
                                    <a id="toFormTop" style="width:70%;margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">DEJAR MIS DATOS</a>
                                </span>   
                            </section>
                            <section id="iqos-form" class="claro">
                                
                                <div class="two">
                                    <h4>Completa el formulario</h4>
                                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                        
                                        <input type=hidden name="oid" value="00D4P000000h9QV">
                                        <input type=hidden name="retURL" value="http://www.iqos.com">
                                        <input type=hidden id="00N4P00000HE6pF" name="00N4P00000HE6pF" :value="hostName" >


                                        <!--  ----------------------------------------------------------------------  -->
                                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                        <!--  these lines if you wish to test in debug mode.                          -->
                                        <!--  <input type="hidden" name="debug" value=1>                              -->
                                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                        <!--  ----------------------------------------------------------------------  -->
                                    
                                        <label class="lb-input" for="first_name">NOMBRE*</label>
                                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="25" class="field" name="first_name" size="20" type="text" />

                                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="25" name="last_name" class="field" size="20" type="text" />

                                        <label class="lb-input" for="email">Email*</label>
                                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                        
                                        <div class="tooltip">
                                            <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                            <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                            <span class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                        </div>
                                        
                                        <label class="lb-input" for="00N4P00000GOkeR">¿QUÉ DISPOSITIVO TE GUSTARÍA CONOCER?</label>
                                        <select class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                            <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>   
                                            <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                        </select>

                                        
                                        
                                        <div class="none">
                                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                            <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                        </div>

                                        <fieldset>
                                            <label for="aceptoterminos">
                                                <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                                <span>Acepto <a style="color:blue" target="_blank"  href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                            </label>

                                            <label for="00N4P00000GZEGJ">
                                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                                            </label>
                                            <label for="00N4P000008mN8e">
                                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                            </label>
                                        </fieldset>

                                        <div class="btn form-btn">
                                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                        </div>

                                        <transition name="fade">
                                            <div v-if="Msnenvio">
                                                <div class="background-modal" @click="closePopUp($event)"></div>
                                                <div class="envio errors">
                                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                    <b>{{ Msnenvio }}</b>
                                                </div>
                                            </div>
                                        </transition> 

                                    </form>
                                    <transition name="fade">
                                        <div v-if="errors.length" class="errors">
                                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                            <b>Para continuar, por favor revisa lo siguiente:</b>
                                            <ul>
                                                <li v-for="error in errors">{{ error }}</li>
                                            </ul>
                                        </div>    
                                    </transition>  
                                </div>
                            </section>

                            <section>
                                <div class="" style="padding-right: 15px;
                                padding-left: 15px;
                                margin-right: auto;
                                margin-left: auto;">
                                    <div id="owl-demo-2" class="owl-carousel owl-theme">

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘La mejor decisión de mi vida’</h4>
                                                <p class="flex-text">“En el momento que descubrí IQOS pensé que tal vez si era necesario experimentar y ver que tan cierto era todo lo que mi Coach personal mencionaba... En los primeros días me costó un poco de trabajo adaptarme a mi IQOS, pero con el paso del tiempo se hizo mi aliado y ahora ya no lo suelto...”</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Zabdiel</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star-o" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘Me encanta’</h4>
                                                <p class="flex-text">“Me costó unos días acostumbrarme al sabor pero una vez que lo hice no los cambio por nada, es muy práctico, es increíble que no haya ceniza, entonces lo puedes ocupar en el coche si llueve, y en cualquier lugar sin necesidad de un cenicero y sin el temor de quemar algo...”</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Esteban</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘Deje por completo el cigarro y el humo’</h4>
                                                <p class="flex-text">“Me gusta mucho, desde el primer día de uso. Despues de una semana ya no pude soportar el sabor de un cigarro normal. Una excelente alternativa y cambio de habito. Definitivamente no regresaría a fumar.”</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Carlos</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘La mejor decisión’</h4>
                                                <p class="flex-text">“...Ha sido una muy buena experiencia, dejé los cigarrillos al día 2 y llevo 6 meses con IQOS. La mejor decisión para quien no quiere dejar de fumar pero si quiere una experiencia distinta sin humo, sin ceniza. Lo recomiendo ampliamente.“</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Luis</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘No más olores desagradables’</h4>
                                                <p class="flex-text">"...Me dedico al ramo de bebidas y no podía estar trabajando con olor a cigarro. Fue una gran solución a mi problema. Ya las cosas saben distintos. Me olvide por completo de las críticas “apestas a cenicero” etc."</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Gabriel</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘Sin olor a humo de cigarro.’</h4>
                                                <p class="flex-text">“Me encantó porque no deja olor a humo de cigarro, que eso para mí al estar en el área de ventas es muy importante.“</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Miguel</p>
                                            </div>
                                        </article>

                                    </div><!-- #owl-demo-2 -->
                                </div><!-- .container -->
                            </section>

                            <section id="queEsIqosVideo" class="video">
                                <h3>¿Qué es IQOS?</h3>
                                <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                                <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                                    <img src="/arquivos/queEsIqosTumbnailMayo.png" />
                                    <video width="320" height="240" id="myVideo">
                                    <source src="https://pmi.23video.com/64968578/68793752/1423b77c21d366d862f03171afd1bcbe/video_hd/iqos-new-brand-world-brand-1-7-video.mp4" type="video/mp4">
                                    Your browser does not support the video tag.
                                    </video>  
                                </div>
                            </section>
                            <section class="video" >
                                <div style="position: relative;
                                text-align:center;">
                                    <a id="toFormBottom" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Dejar mis datos</a>
                                </div>
                            </section>



                            </div>`;

Vue.component('gettrital-component-test', {
    'template': $gettritalTest,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "hostName": window.location.hostname,
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "",
            "emailVerifiedNB":false,
            "promCode":"",
            "codigoDeReferidoValidado":false,
            "codigoReferidoFeedbackMessage":"Código de referido no válido, por favor verifícalo.",
            "showWarning":false,
            "utmEqualsB2b":false,
            "GAtransactionId":"",
            "sourceFromUtm":"",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "screen": window.innerWidth,
            "dispositivo": ""
        };

    },
    'methods': {
        "allowedCharacters":function(e){
            var reg = /^[a-zA-ZñÑÁáÉéÍíÓóÚú ÄäËëÏïÖöÜü"]*$/;
            var c = String.fromCharCode(e.which)
            if(reg.test(c))
            {
                return true;
            }
            else
            return false;
        },
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                console.log(ga.getAll())
                console.log(tracker, "tracker")
                console.log(ga.getAll()[0])
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.term = utms.utm_term
                _self.sourceFromUtm = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "clickToVideo": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        /*"agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#iqos-form").offset().top - $(".coronavirus").height())});
            })
        },*/
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode si but field empty")
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length >= 1) {
                this.validateReferrCode($("#00N4P00000GOkeM").val())
            }

            if( this.promCode == "No"){
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode no")
            }

            if(this.promCode == ""){
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode not clicked")
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true && this.showWarning == false) {
                console.log("condition when tru")
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.dispositivo = $("#00N4P00000GOkeR").val()
                console.log(this.dispositivo, "dispositivo")
                _self.envio()
        
            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "validateReferrCode": function(codigoReferido) {
            console.log(codigoReferido.length,"length")
            if(codigoReferido.length == 1 || codigoReferido.length == 2){
                console.log(codigoReferido.length,"length less then 3")
                this.codigoDeReferidoValidado = false
                this.showWarning = true
            } else {

                let firstThreeLetters = codigoReferido.slice(0,3)

                if(firstThreeLetters == "MGM" 
                || firstThreeLetters == "EGM" 
                || firstThreeLetters == "B2B" 
                || firstThreeLetters == "RGM" 
                || firstThreeLetters == "IQO"
                || firstThreeLetters == "RET") {
                    this.codigoDeReferidoValidado = true
                    this.showWarning = false
                    this.descuento = codigoReferido
                } else {
                    this.codigoDeReferidoValidado = false
                    this.showWarning = true
                }
            }
            
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.sourceFromUtm + this.medium;

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            if( this.utmEqualsB2b == true && this.promCode == "No"){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == ""){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            console.log(_self.descuento, "final")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR"+"&00N4P00000GOgJP="+_self.GAtransactionId+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000HE6pF="+_self.hostName+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.GAtransactionId = ""
                _self.utmEqualsB2b = false
                _self.promCode = ""
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({ 'event': 'formTrySubmitted' });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.video()
        _self.seletorSku()
        _self.GetTransaction()
        window.onresize = () => {
            _self.screen = window.innerWidth;
        };
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        // Do stuff when the verification is throttled
                    }
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function ($) {
            var owl = $("#owl-demo-2");
            owl.owlCarousel({
                autoplay: true,
                autoplayTimeout: 1000,
                autoplayHoverPause: true,
                items: 3,
                loop: true,
                center: false,
                rewind: false,
                mouseDrag: true,
                touchDrag: true,
                pullDrag: true,
                freeDrag: false,
                margin: 0,
                stagePadding: 0,
                merge: false,
                mergeFit: true,
                autoWidth: false,
                startPosition: 0,
                rtl: false,
                smartSpeed: 250,
                fluidSpeed: false,
                dragEndSpeed: false,
                responsive: {
                    0: {
                        items: 1
                        // nav: true
                    },
                    480: {
                        items: 2,
                        nav: false
                    },
                    768: {
                        items: 3,
                        // nav: true,
                        loop: false
                    },
                    992: {
                        items: 4,
                        // nav: true,
                        loop: false
                    }
                },
                responsiveRefreshRate: 200,
                responsiveBaseElement: window,
                fallbackEasing: "swing",
                info: false,
                nestedItemSelector: false,
                itemElement: "div",
                stageElement: "div",
                refreshClass: "owl-refresh",
                loadedClass: "owl-loaded",
                loadingClass: "owl-loading",
                rtlClass: "owl-rtl",
                responsiveClass: "owl-responsive",
                dragClass: "owl-drag",
                itemClass: "owl-item",
                stageClass: "owl-stage",
                stageOuterClass: "owl-stage-outer",
                grabClass: "owl-grab",
                autoHeight: false,
                lazyLoad: false
            });
        
            $(".next").click(function () {
                owl.trigger("owl.next");
            });
            $(".prev").click(function () {
                owl.trigger("owl.prev");
            });
        });
        $(document).ready(function (){
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#iqos-form").offset().top
                }, 2000);
            });
            $("#toFormBottom").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#iqos-form").offset().top
                }, 2000);
            });
            $( "#first_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
            $( "#last_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this

        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});  

var $gettritalReferralTest = `<div> 
                    <section class="coronavirus" style="order:1;">
                    <h4>
                        <span>Programa de Préstamo IQOS disponible solo para usuarios en Cd. de México y área metropolitana. No es necesario hacer ningún pago ni dejar tu tarjeta de crédito en garantía.

                        </span>
                    </h4>
                    </section>
                    <section v-bind:class="{ pagina }" class="principal version_a" style="order:2;">
                    
                    <span class="agendaAtBottomRgmDec col-2 prueba">
                    <a href='#' style="width:100%;margin-bottom: 20px;" class='btn agendarllamada rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                    
                    </span>
                        <a href="#" @click.prevent="clickMouse()" class="mouse"></a>

                    </section>

                    <section id="pasos" class="claro">
                        <h4>Vive la experiencia IQOS durante 15 días</h4>
                        <ul>
                            <li><span>1</span> Escoge el color de tu IQOS y completa el formulario.</li>
                            <li><span>2</span> Te llamaremos para coordinar la entrega de tu dispositivo.</li>
                            <li><span>3</span> Recibelo y ¡vive la experiencia!</li>
                            <li><span>4</span> Decide si compras tu IQOS o prefieres devolverlo.</li>
                        </ul>

                    </section>

                    <section id="select-iqos">
                        <h4>Selecciona el color de tu dispositivo</h4>
                        <div class="selector">
                            <div class="imagem">
                                <img src="/arquivos/iqos-Azul.png?v=53534" />
                            </div>
                            <h2>IQOS 2.4 Plus</h2>
                            <div class="selector-sku">
                                <a href="#" class="azul active" color="IQOS 2.4 Azul" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - Blue" data-label="MX" data-event="Clic">
                                    <i></i><span>Azul Marino</span>
                                </a>
                                <a href="#" class="blanco" color="IQOS 2.4 Blanco" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - White" data-label="MX" data-event="Clic">
                                    <i></i><span>Blanco</span>
                                </a> 
                            </div>
                        </div>
                        <div class="container text">
                            <p>Quédate con tu dispositivo después del periodo de prueba¹ pagando $1,199 MXN.</p>
                            <p>Además, si decides comprarlo, puedes pagar en hasta 6 MSI con tarjetas de crédito participantes.</p>
                            <small style="font-size:10px">(1)El periodo de prueba es de hasta 15 días naturales a partir de la entrega del dispositivo. Programa exclusivo para usuarios adultos en la Ciudad de México y área metropolitana. Consulta <a href="/terminos-condiciones">Términos y Condiciones</a> del Programa de Préstamo IQOS.</small>
                        </div>
                    </section>

                    <section id="iqos-form" class="claro">
                        
                        <div class="two">
                            <h4>Completa el formulario</h4>
                            <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                
                                <input type=hidden name="oid" value="00D4P000000h9QV">
                                <input type=hidden name="retURL" value="http://www.iqos.com">


                                <!--  ----------------------------------------------------------------------  -->
                                <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                <!--  these lines if you wish to test in debug mode.                          -->
                                <!--  <input type="hidden" name="debug" value=1>                              -->
                                <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                <!--  ----------------------------------------------------------------------  -->
                            
                                <label class="lb-input" for="first_name">NOMBRE*</label>
                                <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                                <label class="lb-input" for="last_name">Apellido(s)*</label>
                                <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                                <label class="lb-input" for="email">Email*</label>
                                <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                
                                <div class="tooltip">
                                    <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                    <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                    <span class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                </div>
                                
                                <label class="lb-input" for="00N4P00000GOkeR">Color del dispositivo*</label>
                                <select class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                    <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>    
                                    <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                </select>

                                <label class="lb-input" style="margin-bottom:20px">¿TIENES UN CÓDIGO DE DESCUENTO?</label>
                                <div class="field" style="display: flex;max-width: inherit;align-items: baseline;">
                                    <label for="si">Si</label>
                                    <input type="radio" id="si" value="Si" v-model="promCode">
                            
                                    <label for="no">No</label>
                                    <input type="radio" id="no" value="No" v-model="promCode">
                                </div>
                                <div v-if="promCode == 'Si'">
                                    <label class="lb-input" for="00N4P00000GOkeM">Ingresa tu código de descuento</label>
                                    <input  id="00N4P00000GOkeM" maxlength="50" name="00N4P00000GOkeM" size="20" type="text" data-category="Form Local Lead" data-action="Código de descuento" data-label="MX" data-event="Clic" class="field" />
                                    <div v-if="showWarning" style="color:red;font-size:15px;text-align:left">
                                        {{ codigoReferidoFeedbackMessage }}
                                    </div>
                                </div>
                                
                                <div class="none">
                                    <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                    <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                    <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                    <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                    <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                    <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                    <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                    <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                    <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                    <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                </div>

                                <fieldset>
                                <label for="aceptoterminos">
                                    <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                    <span>Acepto <a style="color:blue" target="_blank" href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                </label>

                                    <label for="00N4P00000GZEGJ">
                                        <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                        <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                                    </label>
                                    <label for="00N4P000008mN8e">
                                        <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                        <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                    </label>
                                </fieldset>

                                <div class="btn form-btn">
                                    <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                    <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                </div>

                                <transition name="fade">
                                    <div v-if="Msnenvio">
                                        <div class="background-modal" @click="closePopUp($event)"></div>
                                        <div class="envio errors">
                                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                            <b>{{ Msnenvio }}</b>
                                        </div>
                                    </div>
                                </transition> 

                            </form>
                            <transition name="fade">
                                <div v-if="errors.length" class="errors">
                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errors">{{ error }}</li>
                                    </ul>
                                </div>    
                            </transition>  
                        </div>
                    </section>
                    
                    <section>
                        <div class="" style="padding-right: 15px;
                        padding-left: 15px;
                        margin-right: auto;
                        margin-left: auto;">
                            <div id="owl-demo-2" class="owl-carousel owl-theme">

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘La mejor decisión de mi vida’</h4>
                                        <p class="flex-text">“En el momento que descubrí IQOS pensé que tal vez si era necesario experimentar y ver que tan cierto era todo lo que mi Coach personal mencionaba... En los primeros días me costó un poco de trabajo adaptarme a mi IQOS, pero con el paso del tiempo se hizo mi aliado y ahora ya no lo suelto...”</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Zabdiel</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star-o" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘Me encanta’</h4>
                                        <p class="flex-text">“Me costó unos días acostumbrarme al sabor pero una vez que lo hice no los cambio por nada, es muy práctico, es increíble que no haya ceniza, entonces lo puedes ocupar en el coche si llueve, y en cualquier lugar sin necesidad de un cenicero y sin el temor de quemar algo...”</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Esteban</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘Deje por completo el cigarro y el humo’</h4>
                                        <p class="flex-text">“Me gusta mucho, desde el primer día de uso. Despues de una semana ya no pude soportar el sabor de un cigarro normal. Una excelente alternativa y cambio de habito. Definitivamente no regresaría a fumar.”</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Carlos</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘La mejor decisión’</h4>
                                        <p class="flex-text">“...Ha sido una muy buena experiencia, dejé los cigarrillos al día 2 y llevo 6 meses con IQOS. La mejor decisión para quien no quiere dejar de fumar pero si quiere una experiencia distinta sin humo, sin ceniza. Lo recomiendo ampliamente.“</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Luis</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘No más olores desagradables’</h4>
                                        <p class="flex-text">"...Me dedico al ramo de bebidas y no podía estar trabajando con olor a cigarro. Fue una gran solución a mi problema. Ya las cosas saben distintos. Me olvide por completo de las críticas “apestas a cenicero” etc."</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Gabriel</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘Sin olor a humo de cigarro.’</h4>
                                        <p class="flex-text">“Me encantó porque no deja olor a humo de cigarro, que eso para mí al estar en el área de ventas es muy importante.“</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Miguel</p>
                                    </div>
                                </article>

                            </div><!-- #owl-demo-2 -->
                        </div><!-- .container -->
                    </section>
                    <section id="queEsIqosVideo" class="video">
                        <h3>¿Qué es IQOS?</h3>
                        <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                        <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                            <img src="/arquivos/Thumbnail IQOS 2.4 (b).png" />
                            <video width="320" height="240" id="myVideo">
                            <source src="https://pmi.23video.com/60445188/64076978/2e13e86ee5ce47a80c7a2395b5cb687d/video_hd/vgt-iqos-24-plus-web-1-video.mp4 " type="video/mp4">
                            Your browser does not support the video tag.
                            </video>  
                        </div>
                    </section>
                    <section class="video" >
                        <div style="position: relative;
                         text-align:center;">
                            <a id="toPasos" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">PEDIR UN IQOS</a>
                        </div>
                    </section>
                    
                    </div>`;
Vue.component('gettrital-component-referraltest', {
    'template': $gettritalReferralTest,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "",
            "emailVerifiedNB":false,
            "promCode":"",
            "codigoDeReferidoValidado":false,
            "codigoReferidoFeedbackMessage":"Código de referido no válido, por favor verifícalo.",
            "showWarning":false,
            "utmEqualsB2b":false,
            "GAtransactionId":"",
            "dispositivo": ""
        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                _self.source = "Lending";
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            // if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
            //     this.errors.push("Ingresa tu codigo promocional")
            // }

            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode si but field empty")
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length >= 1) {
                this.validateReferrCode($("#00N4P00000GOkeM").val())
            }

            if( this.promCode == "No"){
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode no")
            }

            if(this.promCode == ""){
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode not clicked")
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true && this.showWarning == false) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.dispositivo = $("#00N4P00000GOkeR").val()
                // this.descuento= $("#00N4P00000GOkeM").val() 

                _self.envio()
                
        
            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "validateReferrCode": function(codigoReferido) {
            console.log(codigoReferido.length,"length")
            if(codigoReferido.length == 1 || codigoReferido.length == 2){
                console.log(codigoReferido.length,"length less then 3")
                this.codigoDeReferidoValidado = false
                this.showWarning = true
            } else {

                let firstThreeLetters = codigoReferido.slice(0,3)

                if(firstThreeLetters == "MGM" 
                || firstThreeLetters == "EGM" 
                || firstThreeLetters == "B2B" 
                || firstThreeLetters == "RGM" 
                || firstThreeLetters == "IQO") {
                    this.codigoDeReferidoValidado = true
                    this.showWarning = false
                    this.descuento = codigoReferido
                } else {
                    this.codigoDeReferidoValidado = false
                    this.showWarning = true
                }
            }
            
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            if( this.utmEqualsB2b == true && this.promCode == "No"){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == ""){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            console.log(this.descuento, "final")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR"+"&00N4P00000GOgJP="+_self.GAtransactionId+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.GAtransactionId = ""
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({ 'event': 'formTrySubmitted' });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.video()
        _self.seletorSku()
        _self.GetTransaction()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        // Do stuff when the verification is throttled
                    }
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function ($) {
            var owl = $("#owl-demo-2");
            owl.owlCarousel({
                autoplay: true,
                autoplayTimeout: 1000,
                autoplayHoverPause: true,
                items: 3,
                loop: true,
                center: false,
                rewind: false,
                mouseDrag: true,
                touchDrag: true,
                pullDrag: true,
                freeDrag: false,
                margin: 0,
                stagePadding: 0,
                merge: false,
                mergeFit: true,
                autoWidth: false,
                startPosition: 0,
                rtl: false,
                smartSpeed: 250,
                fluidSpeed: false,
                dragEndSpeed: false,
                responsive: {
                    0: {
                        items: 1
                        // nav: true
                    },
                    480: {
                        items: 2,
                        nav: false
                    },
                    768: {
                        items: 3,
                        // nav: true,
                        loop: false
                    },
                    992: {
                        items: 4,
                        // nav: true,
                        loop: false
                    }
                },
                responsiveRefreshRate: 200,
                responsiveBaseElement: window,
                fallbackEasing: "swing",
                info: false,
                nestedItemSelector: false,
                itemElement: "div",
                stageElement: "div",
                refreshClass: "owl-refresh",
                loadedClass: "owl-loaded",
                loadingClass: "owl-loading",
                rtlClass: "owl-rtl",
                responsiveClass: "owl-responsive",
                dragClass: "owl-drag",
                itemClass: "owl-item",
                stageClass: "owl-stage",
                stageOuterClass: "owl-stage-outer",
                grabClass: "owl-grab",
                autoHeight: false,
                lazyLoad: false
            });
        
            $(".next").click(function () {
                owl.trigger("owl.next");
            });
            $(".prev").click(function () {
                owl.trigger("owl.prev");
            });
        });
        $(document).ready(function (){
            
            $("#toPasos").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#pasos").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});


var $gettritalReferral = `<div> 
                    <section class="coronavirus" style="order:1;">
                    <h4>
                        <span>Programa de Préstamo IQOS disponible solo para usuarios en Cd. de México y área metropolitana. No es necesario hacer ningún pago ni dejar tu tarjeta de crédito en garantía.

                        </span>
                    </h4>
                    </section>
                    <section v-bind:class="{ pagina }" class="principal version_a" style="order:2;">
                    
                    <span class="agendaAtBottomRgmDec col-2 prueba">
                    <a href='#' style="width:100%;margin-bottom: 20px;" class='btn agendarllamada rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                    
                    </span>
                        <a href="#" @click.prevent="clickMouse()" class="mouse"></a>

                    </section>

                    <section id="pasos" class="claro">
                        <h4>Vive la experiencia IQOS durante 15 días</h4>
                        <ul>
                            <li><span>1</span> Escoge el color de tu IQOS y completa el formulario.</li>
                            <li><span>2</span> Te llamaremos para coordinar la entrega de tu dispositivo.</li>
                            <li><span>3</span> Recibelo y ¡vive la experiencia!</li>
                            <li><span>4</span> Decide si compras tu IQOS o prefieres devolverlo.</li>
                        </ul>

                    </section>

                    <section id="select-iqos">
                        <h4>Selecciona el color de tu dispositivo</h4>
                        <div class="selector">
                            <div class="imagem">
                                <img src="/arquivos/iqos-Azul.png?v=53534" />
                            </div>
                            <h2>IQOS 2.4 Plus</h2>
                            <div class="selector-sku">
                                <a href="#" class="azul active" color="IQOS 2.4 Azul" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - Blue" data-label="MX" data-event="Clic">
                                    <i></i><span>Azul Marino</span>
                                </a>
                                <a href="#" class="blanco" color="IQOS 2.4 Blanco" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - White" data-label="MX" data-event="Clic">
                                    <i></i><span>Blanco</span>
                                </a> 
                            </div>
                        </div>
                        <div class="container text">
                            <p>Quédate con tu dispositivo después del periodo de prueba¹ pagando $1,199 MXN.</p>
                            <p>Además, si decides comprarlo, puedes pagar en hasta 6 MSI con tarjetas de crédito participantes.</p>
                            <small style="font-size:10px">(1)El periodo de prueba es de hasta 15 días naturales a partir de la entrega del dispositivo. Programa exclusivo para usuarios adultos en la Ciudad de México y área metropolitana. Consulta <a href="/terminos-condiciones">Términos y Condiciones</a> del Programa de Préstamo IQOS.</small>
                        </div>
                    </section>

                    <section id="iqos-form" class="claro">
                        
                        <div class="two">
                            <h4>Completa el formulario</h4>
                            <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                
                                <input type=hidden name="oid" value="00D4P000000h9QV">
                                <input type=hidden name="retURL" value="http://www.iqos.com">


                                <!--  ----------------------------------------------------------------------  -->
                                <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                <!--  these lines if you wish to test in debug mode.                          -->
                                <!--  <input type="hidden" name="debug" value=1>                              -->
                                <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                <!--  ----------------------------------------------------------------------  -->
                            
                                <label class="lb-input" for="first_name">NOMBRE*</label>
                                <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                                <label class="lb-input" for="last_name">Apellido(s)*</label>
                                <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                                <label class="lb-input" for="email">Email*</label>
                                <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                
                                <div class="tooltip">
                                    <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                    <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                    <span class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                </div>
                                
                                <label class="lb-input" for="00N4P00000GOkeR">Color del dispositivo*</label>
                                <select class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                    <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>    
                                    <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                </select>

                                <label class="lb-input" style="margin-bottom:20px">¿TIENES UN CÓDIGO DE DESCUENTO?</label>
                                <div class="field" style="display: flex;max-width: inherit;align-items: baseline;">
                                    <label for="si">Si</label>
                                    <input type="radio" id="si" value="Si" v-model="promCode">
                            
                                    <label for="no">No</label>
                                    <input type="radio" id="no" value="No" v-model="promCode">
                                </div>
                                <div v-if="promCode == 'Si'">
                                    <label class="lb-input" for="00N4P00000GOkeM">Ingresa tu código de descuento</label>
                                    <input  id="00N4P00000GOkeM" maxlength="50" name="00N4P00000GOkeM" size="20" type="text" data-category="Form Local Lead" data-action="Código de descuento" data-label="MX" data-event="Clic" class="field" />
                                    <div v-if="showWarning" style="color:red;font-size:15px;text-align:left">
                                        {{ codigoReferidoFeedbackMessage }}
                                    </div>
                                </div>
                                
                                <div class="none">
                                    <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                    <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                    <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                    <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                    <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                    <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                    <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                    <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                    <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                    <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                </div>

                                <fieldset>
                                <label for="aceptoterminos">
                                    <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                    <span>Acepto <a style="color:blue" target="_blank" href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                </label>

                                    <label for="00N4P00000GZEGJ">
                                        <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                        <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                                    </label>
                                    <label for="00N4P000008mN8e">
                                        <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                        <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                    </label>
                                </fieldset>

                                <div class="btn form-btn">
                                    <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                    <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                </div>

                                <transition name="fade">
                                    <div v-if="Msnenvio">
                                        <div class="background-modal" @click="closePopUp($event)"></div>
                                        <div class="envio errors">
                                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                            <b>{{ Msnenvio }}</b>
                                        </div>
                                    </div>
                                </transition> 

                            </form>
                            <transition name="fade">
                                <div v-if="errors.length" class="errors">
                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errors">{{ error }}</li>
                                    </ul>
                                </div>    
                            </transition>  
                        </div>
                    </section>
                    
                    <section>
                        <div class="" style="padding-right: 15px;
                        padding-left: 15px;
                        margin-right: auto;
                        margin-left: auto;">
                            <div id="owl-demo-2" class="owl-carousel owl-theme">

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘La mejor decisión de mi vida’</h4>
                                        <p class="flex-text">“En el momento que descubrí IQOS pensé que tal vez si era necesario experimentar y ver que tan cierto era todo lo que mi Coach personal mencionaba... En los primeros días me costó un poco de trabajo adaptarme a mi IQOS, pero con el paso del tiempo se hizo mi aliado y ahora ya no lo suelto...”</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Zabdiel</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star-o" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘Me encanta’</h4>
                                        <p class="flex-text">“Me costó unos días acostumbrarme al sabor pero una vez que lo hice no los cambio por nada, es muy práctico, es increíble que no haya ceniza, entonces lo puedes ocupar en el coche si llueve, y en cualquier lugar sin necesidad de un cenicero y sin el temor de quemar algo...”</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Esteban</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘Deje por completo el cigarro y el humo’</h4>
                                        <p class="flex-text">“Me gusta mucho, desde el primer día de uso. Despues de una semana ya no pude soportar el sabor de un cigarro normal. Una excelente alternativa y cambio de habito. Definitivamente no regresaría a fumar.”</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Carlos</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘La mejor decisión’</h4>
                                        <p class="flex-text">“...Ha sido una muy buena experiencia, dejé los cigarrillos al día 2 y llevo 6 meses con IQOS. La mejor decisión para quien no quiere dejar de fumar pero si quiere una experiencia distinta sin humo, sin ceniza. Lo recomiendo ampliamente.“</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Luis</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘No más olores desagradables’</h4>
                                        <p class="flex-text">"...Me dedico al ramo de bebidas y no podía estar trabajando con olor a cigarro. Fue una gran solución a mi problema. Ya las cosas saben distintos. Me olvide por completo de las críticas “apestas a cenicero” etc."</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Gabriel</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘Sin olor a humo de cigarro.’</h4>
                                        <p class="flex-text">“Me encantó porque no deja olor a humo de cigarro, que eso para mí al estar en el área de ventas es muy importante.“</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Miguel</p>
                                    </div>
                                </article>

                            </div><!-- #owl-demo-2 -->
                        </div><!-- .container -->
                    </section>
                    <section id="queEsIqosVideo" class="video">
                        <h3>¿Qué es IQOS?</h3>
                        <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                        <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                            <img src="/arquivos/Thumbnail IQOS 2.4 (b).png" />
                            <video width="320" height="240" id="myVideo">
                            <source src="https://pmi.23video.com/60445188/64076978/2e13e86ee5ce47a80c7a2395b5cb687d/video_hd/vgt-iqos-24-plus-web-1-video.mp4 " type="video/mp4">
                            Your browser does not support the video tag.
                            </video>  
                        </div>
                    </section>
                    <section class="video" >
                        <div style="position: relative;
                         text-align:center;">
                            <a id="toPasos" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">PEDIR UN IQOS</a>
                        </div>
                    </section>
                    
                    </div>`;
Vue.component('gettrital-component-referral', {
    'template': $gettritalReferral,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "",
            "emailVerifiedNB":false,
            "promCode":"",
            "codigoDeReferidoValidado":false,
            "codigoReferidoFeedbackMessage":"Código de referido no válido, por favor verifícalo.",
            "showWarning":false,
            "utmEqualsB2b":false,
            "GAtransactionId":""
        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                _self.source = "Lending";
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            // if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
            //     this.errors.push("Ingresa tu codigo promocional")
            // }

            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode si but field empty")
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length >= 1) {
                this.validateReferrCode($("#00N4P00000GOkeM").val())
            }

            if( this.promCode == "No"){
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode no")
            }

            if(this.promCode == ""){
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode not clicked")
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }
            this.emailVerifiedNB = true
            
            if (!this.errors.length && this.emailVerifiedNB == true && this.showWarning == false) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                // this.descuento= $("#00N4P00000GOkeM").val() 

                _self.envio()
                
        
            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "validateReferrCode": function(codigoReferido) {
            console.log(codigoReferido.length,"length")
            if(codigoReferido.length == 1 || codigoReferido.length == 2){
                console.log(codigoReferido.length,"length less then 3")
                this.codigoDeReferidoValidado = false
                this.showWarning = true
            } else {

                let firstThreeLetters = codigoReferido.slice(0,3)

                if(firstThreeLetters == "MGM" 
                || firstThreeLetters == "EGM" 
                || firstThreeLetters == "B2B" 
                || firstThreeLetters == "RGM" 
                || firstThreeLetters == "IQO") {
                    this.codigoDeReferidoValidado = true
                    this.showWarning = false
                    this.descuento = codigoReferido
                } else {
                    this.codigoDeReferidoValidado = false
                    this.showWarning = true
                }
            }
            
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            if( this.utmEqualsB2b == true && this.promCode == "No"){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == ""){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            console.log(this.descuento, "final")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR"+"&00N4P00000GOgJP="+_self.GAtransactionId+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.colorDispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.GAtransactionId = ""
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({ 'event': 'formTrySubmitted' });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.video()
        _self.seletorSku()
        _self.GetTransaction()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        // Do stuff when the verification is throttled
                    }
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function ($) {
            var owl = $("#owl-demo-2");
            owl.owlCarousel({
                autoplay: true,
                autoplayTimeout: 1000,
                autoplayHoverPause: true,
                items: 3,
                loop: true,
                center: false,
                rewind: false,
                mouseDrag: true,
                touchDrag: true,
                pullDrag: true,
                freeDrag: false,
                margin: 0,
                stagePadding: 0,
                merge: false,
                mergeFit: true,
                autoWidth: false,
                startPosition: 0,
                rtl: false,
                smartSpeed: 250,
                fluidSpeed: false,
                dragEndSpeed: false,
                responsive: {
                    0: {
                        items: 1
                        // nav: true
                    },
                    480: {
                        items: 2,
                        nav: false
                    },
                    768: {
                        items: 3,
                        // nav: true,
                        loop: false
                    },
                    992: {
                        items: 4,
                        // nav: true,
                        loop: false
                    }
                },
                responsiveRefreshRate: 200,
                responsiveBaseElement: window,
                fallbackEasing: "swing",
                info: false,
                nestedItemSelector: false,
                itemElement: "div",
                stageElement: "div",
                refreshClass: "owl-refresh",
                loadedClass: "owl-loaded",
                loadingClass: "owl-loading",
                rtlClass: "owl-rtl",
                responsiveClass: "owl-responsive",
                dragClass: "owl-drag",
                itemClass: "owl-item",
                stageClass: "owl-stage",
                stageOuterClass: "owl-stage-outer",
                grabClass: "owl-grab",
                autoHeight: false,
                lazyLoad: false
            });
        
            $(".next").click(function () {
                owl.trigger("owl.next");
            });
            $(".prev").click(function () {
                owl.trigger("owl.prev");
            });
        });
        $(document).ready(function (){
            
            $("#toPasos").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#pasos").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});


var $gettritalQueEsIqos = `<div> 
                                    <section class="coronavirus" style="order:1;">
                                        <h4>
                                            <span>Por el momento el Programa de Préstamo IQOS no está disponible. En caso de estar interesado, por favor completa el formulario y nosotros te contactaremos.</span>
                                        </h4>
                                    </section>
                                    <section v-bind:class="{ pagina }" class="principal version_exito" style="order:2;">
                                        <span v-if="screen > 800" class="agendaAtBottomExito col-2 prueba"></span>
                                        <span v-if="screen > 800" class="agendaAtBottomExito col-4 prueba"><a id="toFormTop" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic" class="btn rgm" style="width: 100%; margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;cursor:pointer;">DEJAR MIS DATOS</a></span>
                                        <span v-if="screen < 800"  class="agendaAtBottomExito col-2 prueba">
                                            <a id="toFormTop" style="width:70%;margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">DEJAR MIS DATOS</a>
                                        </span>   
                                    </section>
                                    <section id="iqos-form" class="claro">
                                        
                                        <div class="two">
                                            <h4>Completa el formulario</h4>
                                            <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                                
                                                <input type=hidden name="oid" value="00D4P000000h9QV">
                                                <input type=hidden name="retURL" value="http://www.iqos.com">
                
                
                                                <!--  ----------------------------------------------------------------------  -->
                                                <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                                <!--  these lines if you wish to test in debug mode.                          -->
                                                <!--  <input type="hidden" name="debug" value=1>                              -->
                                                <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                                <!--  ----------------------------------------------------------------------  -->
                                            
                                                <label class="lb-input" for="first_name">NOMBRE*</label>
                                                <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />
                
                                                <label class="lb-input" for="last_name">Apellido(s)*</label>
                                                <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />
                
                                                <label class="lb-input" for="email">Email*</label>
                                                <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                                
                                                <div class="tooltip">
                                                    <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                                    <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                                    <span class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                                </div>
                                                
                                                <label class="lb-input" for="00N4P00000GOkeR">¿QUÉ DISPOSITIVO TE GUSTARÍA CONOCER?</label>
                                                <select class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                                    <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>  
                                                    <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                                </select>
                
                                                
                                                
                                                <div class="none">
                                                    <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                                    <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                                    <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                                    <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                                    <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                                    <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                                    <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                                    <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                                    <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                                    <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                                </div>
                
                                                <fieldset>
                                                <label for="aceptoterminos">
                                                    <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                                    <span>Acepto <a style="color:blue" target="_blank" href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                                </label>
                
                                                    <label for="00N4P00000GZEGJ">
                                                        <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                                        <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                                                    </label>
                                                    <label for="00N4P000008mN8e">
                                                        <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                                        <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                                    </label>
                                                </fieldset>
                
                                                <div class="btn form-btn">
                                                    <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                                    <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                                </div>
                
                                                <transition name="fade">
                                                    <div v-if="Msnenvio">
                                                        <div class="background-modal" @click="closePopUp($event)"></div>
                                                        <div class="envio errors">
                                                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                            <b>{{ Msnenvio }}</b>
                                                        </div>
                                                    </div>
                                                </transition> 
                
                                            </form>
                                            <transition name="fade">
                                                <div v-if="errors.length" class="errors">
                                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                                    <ul>
                                                        <li v-for="error in errors">{{ error }}</li>
                                                    </ul>
                                                </div>    
                                            </transition>  
                                        </div>
                                    </section>

                                    <section>
                                        <div class="" style="padding-right: 15px;
                                        padding-left: 15px;
                                        margin-right: auto;
                                        margin-left: auto;">
                                            <div id="owl-demo-2" class="owl-carousel owl-theme">

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘La mejor decisión de mi vida’</h4>
                                                        <p class="flex-text">“En el momento que descubrí IQOS pensé que tal vez si era necesario experimentar y ver que tan cierto era todo lo que mi Coach personal mencionaba... En los primeros días me costó un poco de trabajo adaptarme a mi IQOS, pero con el paso del tiempo se hizo mi aliado y ahora ya no lo suelto...”</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Zabdiel</p>
                                                    </div>
                                                </article>

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star-o" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘Me encanta’</h4>
                                                        <p class="flex-text">“Me costó unos días acostumbrarme al sabor pero una vez que lo hice no los cambio por nada, es muy práctico, es increíble que no haya ceniza, entonces lo puedes ocupar en el coche si llueve, y en cualquier lugar sin necesidad de un cenicero y sin el temor de quemar algo...”</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Esteban</p>
                                                    </div>
                                                </article>

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘Deje por completo el cigarro y el humo’</h4>
                                                        <p class="flex-text">“Me gusta mucho, desde el primer día de uso. Despues de una semana ya no pude soportar el sabor de un cigarro normal. Una excelente alternativa y cambio de habito. Definitivamente no regresaría a fumar.”</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Carlos</p>
                                                    </div>
                                                </article>

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘La mejor decisión’</h4>
                                                        <p class="flex-text">“...Ha sido una muy buena experiencia, dejé los cigarrillos al día 2 y llevo 6 meses con IQOS. La mejor decisión para quien no quiere dejar de fumar pero si quiere una experiencia distinta sin humo, sin ceniza. Lo recomiendo ampliamente.“</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Luis</p>
                                                    </div>
                                                </article>

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘No más olores desagradables’</h4>
                                                        <p class="flex-text">"...Me dedico al ramo de bebidas y no podía estar trabajando con olor a cigarro. Fue una gran solución a mi problema. Ya las cosas saben distintos. Me olvide por completo de las críticas “apestas a cenicero” etc."</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Gabriel</p>
                                                    </div>
                                                </article>

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘Sin olor a humo de cigarro.’</h4>
                                                        <p class="flex-text">“Me encantó porque no deja olor a humo de cigarro, que eso para mí al estar en el área de ventas es muy importante.“</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Miguel</p>
                                                    </div>
                                                </article>

                                            </div><!-- #owl-demo-2 -->
                                        </div><!-- .container -->
                                    </section>

                                    <section id="queEsIqosVideo" class="video">
                                        <h3>¿Qué es IQOS?</h3>
                                        <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                                        <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                                            <img src="/arquivos/Que es IQOS 2.4 Plus exito(Thumbnail).jpg" />
                                            <video width="320" height="240" id="myVideo">
                                            <source src="https://pmi.23video.com/64968568/65417230/d1674608d69d4c4cc83afe5b48c3db8e/video_hd/b235068iqoswhatisiqos24plusmxes-mx6-1-video.mp4 " type="video/mp4">
                                            Your browser does not support the video tag.
                                            </video>  
                                        </div>
                                    </section>
                                    <section class="video" >
                                        <div style="position: relative;
                                        text-align:center;">
                                            <a id="toFormBottom" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                                        </div>
                                    </section>
                                    </div>`;
Vue.component('gettrital-component-que-es-iqos', {
    'template': $gettritalQueEsIqos,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "MENOSOLOR200",
            "emailVerifiedNB":false,
            "promCode":"",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "GAtransactionId":"",
            "utmEqualsB2b":false,
            "sourceFromUtm":"",
            "screen": window.innerWidth,
            "dispositivo": ""
        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                _self.sourceFromUtm = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
       /* "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },*/
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            // if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
            //     this.errors.push("Ingresa tu codigo promocional")
            // }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.dispositivo = $("#00N4P00000GOkeR").val()
                // this.descuento= $("#00N4P00000GOkeM").val() 

                _self.envio()
                
        
            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.sourceFromUtm + this.medium;
            //  "&00N4P000008mN2Q="+concatination+

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            if( this.utmEqualsB2b == true ){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            console.log(_self.descuento, "final")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR"+"&00N4P00000GOgJP="+_self.GAtransactionId+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.GAtransactionId = ""
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({ 'event': 'formTrySubmitted' });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.video()
        _self.seletorSku()
        _self.GetTransaction()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        // Do stuff when the verification is throttled
                    }
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function ($) {
            var owl = $("#owl-demo-2");
            owl.owlCarousel({
                autoplay: true,
                autoplayTimeout: 1000,
                autoplayHoverPause: true,
                items: 3,
                loop: true,
                center: false,
                rewind: false,
                mouseDrag: true,
                touchDrag: true,
                pullDrag: true,
                freeDrag: false,
                margin: 0,
                stagePadding: 0,
                merge: false,
                mergeFit: true,
                autoWidth: false,
                startPosition: 0,
                rtl: false,
                smartSpeed: 250,
                fluidSpeed: false,
                dragEndSpeed: false,
                responsive: {
                    0: {
                        items: 1
                        // nav: true
                    },
                    480: {
                        items: 2,
                        nav: false
                    },
                    768: {
                        items: 3,
                        // nav: true,
                        loop: false
                    },
                    992: {
                        items: 4,
                        // nav: true,
                        loop: false
                    }
                },
                responsiveRefreshRate: 200,
                responsiveBaseElement: window,
                fallbackEasing: "swing",
                info: false,
                nestedItemSelector: false,
                itemElement: "div",
                stageElement: "div",
                refreshClass: "owl-refresh",
                loadedClass: "owl-loaded",
                loadingClass: "owl-loading",
                rtlClass: "owl-rtl",
                responsiveClass: "owl-responsive",
                dragClass: "owl-drag",
                itemClass: "owl-item",
                stageClass: "owl-stage",
                stageOuterClass: "owl-stage-outer",
                grabClass: "owl-grab",
                autoHeight: false,
                lazyLoad: false
            });
        
            $(".next").click(function () {
                owl.trigger("owl.next");
            });
            $(".prev").click(function () {
                owl.trigger("owl.prev");
            });
        });
        $(document).ready(function (){
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#first_name").offset().top
                }, 2000);
            });
            $("#toFormBottom").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#first_name").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});


var $gettritalQueEsIqosVersionTest = `<div> 
                                        <section class="coronavirus" style="order:1;">
                                            <h4>
                                                <span>Por el momento el Programa de Préstamo IQOS no está disponible. En caso de estar interesado, por favor completa el formulario y nosotros te contactaremos.</span>
                                            </h4>
                                        </section>
                                        <section v-bind:class="{ pagina }" class="principal version_exitoFeb" style="order:2;">
                                            <span v-if="screen > 800" class="agendaAtBottomExito col-2 prueba"></span>
                                            <span v-if="screen > 800" class="agendaAtBottomExito col-4 prueba"><a id="toFormTop" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic" class="btn rgm" style="width: 100%; margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;cursor:pointer;">DEJAR MIS DATOS</a></span>
                                            <span v-if="screen < 800"  class="agendaAtBottomExito col-2 prueba">
                                                <a id="toFormTop" style="width:70%;margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">DEJAR MIS DATOS</a>
                                            </span>   
                                        </section>
                                        <section id="iqos-form" class="claro">
                                            
                                            <div class="two">
                                                <h4>Completa el formulario</h4>
                                                <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                                    
                                                    <input type=hidden name="oid" value="00D4P000000h9QV">
                                                    <input type=hidden name="retURL" value="http://www.iqos.com">


                                                    <!--  ----------------------------------------------------------------------  -->
                                                    <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                                    <!--  these lines if you wish to test in debug mode.                          -->
                                                    <!--  <input type="hidden" name="debug" value=1>                              -->
                                                    <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                                    <!--  ----------------------------------------------------------------------  -->
                                                
                                                    <label class="lb-input" for="first_name">NOMBRE*</label>
                                                    <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                                                    <label class="lb-input" for="last_name">Apellido(s)*</label>
                                                    <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                                                    <label class="lb-input" for="email">Email*</label>
                                                    <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                                    
                                                    <div class="tooltip">
                                                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                                        <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                                        <span class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                                    </div>
                                                    
                                                    <label class="lb-input" for="00N4P00000GOkeR">¿QUÉ DISPOSITIVO TE GUSTARÍA CONOCER?</label>
                                                    <select class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                                        <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>  
                                                        <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                                    </select>

                                                    
                                                    
                                                    <div class="none">
                                                        <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                                        <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                                        <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                                        <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                                        <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                                        <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                                        <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                                        <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                                        <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                                        <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                                    </div>

                                                    <fieldset>
                                                    <label for="aceptoterminos">
                                                        <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                                        <span>Acepto <a style="color:blue" target="_blank" href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                                    </label>

                                                        <label for="00N4P00000GZEGJ">
                                                            <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                                            <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                                                        </label>
                                                        <label for="00N4P000008mN8e">
                                                            <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                                            <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                                        </label>
                                                    </fieldset>

                                                    <div class="btn form-btn">
                                                        <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                                        <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                                    </div>

                                                    <transition name="fade">
                                                        <div v-if="Msnenvio">
                                                            <div class="background-modal" @click="closePopUp($event)"></div>
                                                            <div class="envio errors">
                                                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                                <b>{{ Msnenvio }}</b>
                                                            </div>
                                                        </div>
                                                    </transition> 

                                                </form>
                                                <transition name="fade">
                                                    <div v-if="errors.length" class="errors">
                                                        <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                        <b>Para continuar, por favor revisa lo siguiente:</b>
                                                        <ul>
                                                            <li v-for="error in errors">{{ error }}</li>
                                                        </ul>
                                                    </div>    
                                                </transition>  
                                            </div>
                                        </section>

                                        <section>
                                            <div class="" style="padding-right: 15px;
                                            padding-left: 15px;
                                            margin-right: auto;
                                            margin-left: auto;">
                                                <div id="owl-demo-2" class="owl-carousel owl-theme">

                                                    <article class="thumbnail item">
                                                        <div style="display: flex;">
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        </div>
                                                        <div class="caption">
                                                            <h4 class="testimonials" style="padding:0px">‘La mejor decisión de mi vida’</h4>
                                                            <p class="flex-text">“En el momento que descubrí IQOS pensé que tal vez si era necesario experimentar y ver que tan cierto era todo lo que mi Coach personal mencionaba... En los primeros días me costó un poco de trabajo adaptarme a mi IQOS, pero con el paso del tiempo se hizo mi aliado y ahora ya no lo suelto...”</p>
                                                            <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Zabdiel</p>
                                                        </div>
                                                    </article>

                                                    <article class="thumbnail item">
                                                        <div style="display: flex;">
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star-o" style="font-size:35px;color:#c98224"></i>
                                                        </div>
                                                        <div class="caption">
                                                            <h4 class="testimonials" style="padding:0px">‘Me encanta’</h4>
                                                            <p class="flex-text">“Me costó unos días acostumbrarme al sabor pero una vez que lo hice no los cambio por nada, es muy práctico, es increíble que no haya ceniza, entonces lo puedes ocupar en el coche si llueve, y en cualquier lugar sin necesidad de un cenicero y sin el temor de quemar algo...”</p>
                                                            <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Esteban</p>
                                                        </div>
                                                    </article>

                                                    <article class="thumbnail item">
                                                        <div style="display: flex;">
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        </div>
                                                        <div class="caption">
                                                            <h4 class="testimonials" style="padding:0px">‘Deje por completo el cigarro y el humo’</h4>
                                                            <p class="flex-text">“Me gusta mucho, desde el primer día de uso. Despues de una semana ya no pude soportar el sabor de un cigarro normal. Una excelente alternativa y cambio de habito. Definitivamente no regresaría a fumar.”</p>
                                                            <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Carlos</p>
                                                        </div>
                                                    </article>

                                                    <article class="thumbnail item">
                                                        <div style="display: flex;">
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        </div>
                                                        <div class="caption">
                                                            <h4 class="testimonials" style="padding:0px">‘La mejor decisión’</h4>
                                                            <p class="flex-text">“...Ha sido una muy buena experiencia, dejé los cigarrillos al día 2 y llevo 6 meses con IQOS. La mejor decisión para quien no quiere dejar de fumar pero si quiere una experiencia distinta sin humo, sin ceniza. Lo recomiendo ampliamente.“</p>
                                                            <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Luis</p>
                                                        </div>
                                                    </article>

                                                    <article class="thumbnail item">
                                                        <div style="display: flex;">
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        </div>
                                                        <div class="caption">
                                                            <h4 class="testimonials" style="padding:0px">‘No más olores desagradables’</h4>
                                                            <p class="flex-text">"...Me dedico al ramo de bebidas y no podía estar trabajando con olor a cigarro. Fue una gran solución a mi problema. Ya las cosas saben distintos. Me olvide por completo de las críticas “apestas a cenicero” etc."</p>
                                                            <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Gabriel</p>
                                                        </div>
                                                    </article>

                                                    <article class="thumbnail item">
                                                        <div style="display: flex;">
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                            <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        </div>
                                                        <div class="caption">
                                                            <h4 class="testimonials" style="padding:0px">‘Sin olor a humo de cigarro.’</h4>
                                                            <p class="flex-text">“Me encantó porque no deja olor a humo de cigarro, que eso para mí al estar en el área de ventas es muy importante.“</p>
                                                            <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Miguel</p>
                                                        </div>
                                                    </article>

                                                </div><!-- #owl-demo-2 -->
                                            </div><!-- .container -->
                                        </section>

                                        <section id="queEsIqosVideo" class="video">
                                            <h3>¿Qué es IQOS?</h3>
                                            <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                                            <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                                                <img src="/arquivos/Que es IQOS 2.4 Plus exito(Thumbnail).jpg" />
                                                <video width="320" height="240" id="myVideo">
                                                <source src="https://pmi.23video.com/64968568/65417230/d1674608d69d4c4cc83afe5b48c3db8e/video_hd/b235068iqoswhatisiqos24plusmxes-mx6-1-video.mp4 " type="video/mp4">
                                                Your browser does not support the video tag.
                                                </video>  
                                            </div>
                                        </section>
                                        <section class="video" >
                                            <div style="position: relative;
                                            text-align:center;">
                                                <a id="toFormBottom" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                                            </div>
                                        </section>
                                        </div>`;
Vue.component('gettrital-component-gettritalqueesiqosversiontest', {
    'template': $gettritalQueEsIqosVersionTest,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "MENOSOLOR200",
            "emailVerifiedNB":false,
            "promCode":"",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "GAtransactionId":"",
            "utmEqualsB2b":false,
            "sourceFromUtm":"",
            "screen": window.innerWidth,
            "dispositivo": ""
        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                _self.sourceFromUtm = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
       /* "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },*/
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            // if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
            //     this.errors.push("Ingresa tu codigo promocional")
            // }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.dispositivo = $("#00N4P00000GOkeR").val()
                // this.descuento= $("#00N4P00000GOkeM").val() 

                _self.envio()
                
        
            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.sourceFromUtm + this.medium;
            //  "&00N4P000008mN2Q="+concatination+

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            if( this.utmEqualsB2b == true ){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            console.log(_self.descuento, "final")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR"+"&00N4P00000GOgJP="+_self.GAtransactionId+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.GAtransactionId = ""
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({ 'event': 'formTrySubmitted' });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.video()
        _self.seletorSku()
        _self.GetTransaction()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        // Do stuff when the verification is throttled
                    }
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function ($) {
            var owl = $("#owl-demo-2");
            owl.owlCarousel({
                autoplay: true,
                autoplayTimeout: 1000,
                autoplayHoverPause: true,
                items: 3,
                loop: true,
                center: false,
                rewind: false,
                mouseDrag: true,
                touchDrag: true,
                pullDrag: true,
                freeDrag: false,
                margin: 0,
                stagePadding: 0,
                merge: false,
                mergeFit: true,
                autoWidth: false,
                startPosition: 0,
                rtl: false,
                smartSpeed: 250,
                fluidSpeed: false,
                dragEndSpeed: false,
                responsive: {
                    0: {
                        items: 1
                        // nav: true
                    },
                    480: {
                        items: 2,
                        nav: false
                    },
                    768: {
                        items: 3,
                        // nav: true,
                        loop: false
                    },
                    992: {
                        items: 4,
                        // nav: true,
                        loop: false
                    }
                },
                responsiveRefreshRate: 200,
                responsiveBaseElement: window,
                fallbackEasing: "swing",
                info: false,
                nestedItemSelector: false,
                itemElement: "div",
                stageElement: "div",
                refreshClass: "owl-refresh",
                loadedClass: "owl-loaded",
                loadingClass: "owl-loading",
                rtlClass: "owl-rtl",
                responsiveClass: "owl-responsive",
                dragClass: "owl-drag",
                itemClass: "owl-item",
                stageClass: "owl-stage",
                stageOuterClass: "owl-stage-outer",
                grabClass: "owl-grab",
                autoHeight: false,
                lazyLoad: false
            });
        
            $(".next").click(function () {
                owl.trigger("owl.next");
            });
            $(".prev").click(function () {
                owl.trigger("owl.prev");
            });
        });
        $(document).ready(function (){
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#first_name").offset().top
                }, 2000);
            });
            $("#toFormBottom").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#first_name").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});

var $gettritalQueEsIqosReplica = `<div> 
                                    <section class="coronavirus" style="order:1;">
                                    <h4>
                                        <span>Programa de Préstamo IQOS disponible solo para usuarios en Cd. de México y área metropolitana. No es necesario hacer ningún pago ni dejar tu tarjeta de crédito en garantía.

                                        </span>
                                    </h4>
                                    </section>
                                    <section v-bind:class="{ pagina }" class="principal version_novrgm" style="order:2;">

                                        <span class="agendaAtBottomRgm col-2 prueba">
                                        <a href='#' style="width:100%;margin-bottom: 20px;" class='btn agendarllamada rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                                        
                                        </span>
                                        <a href="#" @click.prevent="clickMouse()" class="mouse"></a>

                                    </section>

                                    <section id="pasos" class="claro">
                                        <h4>Vive la experiencia IQOS durante 15 días, y recibe <b style="color:#c98224;"> $300</b><br><b style="color:#c98224;">MXN </b>de descuento² en la compra de tu primer KIT IQOS</h4>
                                        <ul>
                                            <li><span>1</span> Escoge el color de tu IQOS y completa el formulario.</li>
                                            <li><span>2</span> Te llamaremos para coordinar la entrega de tu dispositivo.</li>
                                            <li><span>3</span> Recibelo y ¡vive la experiencia!</li>
                                            <li><span>4</span> Decide si compras tu IQOS y aplicas tu descuento o prefieres devolverlo.</li>
                                        </ul>
                                    </section>
                                    <section id="select-iqos">
                                        <h4>Selecciona el color de tu dispositivo</h4>
                                        <div class="selector">
                                            <div class="imagem">
                                                <img src="/arquivos/iqos-Azul.png?v=53534" />
                                            </div>
                                            <h2>IQOS 2.4 Plus</h2>
                                            <div class="selector-sku">
                                                <a href="#" class="azul active" color="IQOS 2.4 Azul" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - Blue" data-label="MX" data-event="Clic">
                                                    <i></i><span>Azul Marino</span>
                                                </a>
                                                <a href="#" class="blanco" color="IQOS 2.4 Blanco" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - White" data-label="MX" data-event="Clic">
                                                    <i></i><span>Blanco</span>
                                                </a> 
                                            </div>
                                        </div>
                                        <div class="container text">
                                            <p>Quédate con tu dispositivo después del periodo de prueba pagando <b style="text-decoration:line-through;margin-right:5px;font-weight: normal;">$1,199 MXN </b></b>$899 MXN,</b> una vez aplicado tu descuento².</p>

                                            <small style="font-size:10px">1)El periodo de prueba es de hasta 15 días naturales a partir de la entrega del dispositivo. Programa exclusivo para usuarios adultos en la Ciudad de México y área metropolitana. Consulta <a href="/terminos-condiciones">Términos y Condiciones</a> del Programa de Préstamo IQOS. (2)Solo para fumadores adultos. Promoción vigente al 31 de diciembre de 2020. Si te registras para participar en el Programa de Préstamo IQOS durante dicho período, recibirás en tu correo electrónico un cupón con un código de descuento para la compra de tu primer Kit IQOS. Sujeto a disponibilidad de inventario, y a la vigencia del cupón de descuento, no es acumulable con otros códigos de descuento. Aplican restricciones. Consulta <a href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a></small>
                                        </div>
                                    </section>

                                    <section id="iqos-form" class="claro">
                                        
                                        <div class="two">
                                            <h4>Completa el formulario</h4>
                                            <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                                
                                                <input type=hidden name="oid" value="00D4P000000h9QV">
                                                <input type=hidden name="retURL" value="http://www.iqos.com">
                
                
                                                <!--  ----------------------------------------------------------------------  -->
                                                <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                                <!--  these lines if you wish to test in debug mode.                          -->
                                                <!--  <input type="hidden" name="debug" value=1>                              -->
                                                <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                                <!--  ----------------------------------------------------------------------  -->
                                            
                                                <label class="lb-input" for="first_name">NOMBRE*</label>
                                                <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />
                
                                                <label class="lb-input" for="last_name">Apellido(s)*</label>
                                                <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />
                
                                                <label class="lb-input" for="email">Email*</label>
                                                <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                                
                                                <div class="tooltip">
                                                    <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                                    <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                                    <span class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                                </div>
                                                
                                                <label class="lb-input" for="00N4P00000GOkeR">Color del dispositivo*</label>
                                                <select class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                                    <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>    
                                                    <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                                </select>
                
                                                
                                                
                                                <div class="none">
                                                    <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                                    <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                                    <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                                    <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                                    <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                                    <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                                    <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                                    <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                                    <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                                    <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                                </div>
                
                                                <fieldset>
                                                <label for="aceptoterminos">
                                                    <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                                    <span>Acepto <a style="color:blue" target="_blank" href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                                </label>
                
                                                    <label for="00N4P00000GZEGJ">
                                                        <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                                        <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                                                    </label>
                                                    <label for="00N4P000008mN8e">
                                                        <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                                        <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                                    </label>
                                                </fieldset>
                
                                                <div class="btn form-btn">
                                                    <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                                    <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                                </div>
                
                                                <transition name="fade">
                                                    <div v-if="Msnenvio">
                                                        <div class="background-modal" @click="closePopUp($event)"></div>
                                                        <div class="envio errors">
                                                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                            <b>{{ Msnenvio }}</b>
                                                        </div>
                                                    </div>
                                                </transition> 
                
                                            </form>
                                            <transition name="fade">
                                                <div v-if="errors.length" class="errors">
                                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                                    <ul>
                                                        <li v-for="error in errors">{{ error }}</li>
                                                    </ul>
                                                </div>    
                                            </transition>  
                                        </div>
                                    </section>

                                    <section>
                                        <div class="" style="padding-right: 15px;
                                        padding-left: 15px;
                                        margin-right: auto;
                                        margin-left: auto;">
                                            <div id="owl-demo-2" class="owl-carousel owl-theme">

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘La mejor decisión de mi vida’</h4>
                                                        <p class="flex-text">“En el momento que descubrí IQOS pensé que tal vez si era necesario experimentar y ver que tan cierto era todo lo que mi Coach personal mencionaba... En los primeros días me costó un poco de trabajo adaptarme a mi IQOS, pero con el paso del tiempo se hizo mi aliado y ahora ya no lo suelto...”</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Zabdiel</p>
                                                    </div>
                                                </article>

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star-o" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘Me encanta’</h4>
                                                        <p class="flex-text">“Me costó unos días acostumbrarme al sabor pero una vez que lo hice no los cambio por nada, es muy práctico, es increíble que no haya ceniza, entonces lo puedes ocupar en el coche si llueve, y en cualquier lugar sin necesidad de un cenicero y sin el temor de quemar algo...”</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Esteban</p>
                                                    </div>
                                                </article>

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘Deje por completo el cigarro y el humo’</h4>
                                                        <p class="flex-text">“Me gusta mucho, desde el primer día de uso. Despues de una semana ya no pude soportar el sabor de un cigarro normal. Una excelente alternativa y cambio de habito. Definitivamente no regresaría a fumar.”</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Carlos</p>
                                                    </div>
                                                </article>

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘La mejor decisión’</h4>
                                                        <p class="flex-text">“...Ha sido una muy buena experiencia, dejé los cigarrillos al día 2 y llevo 6 meses con IQOS. La mejor decisión para quien no quiere dejar de fumar pero si quiere una experiencia distinta sin humo, sin ceniza. Lo recomiendo ampliamente.“</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Luis</p>
                                                    </div>
                                                </article>

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘No más olores desagradables’</h4>
                                                        <p class="flex-text">"...Me dedico al ramo de bebidas y no podía estar trabajando con olor a cigarro. Fue una gran solución a mi problema. Ya las cosas saben distintos. Me olvide por completo de las críticas “apestas a cenicero” etc."</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Gabriel</p>
                                                    </div>
                                                </article>

                                                <article class="thumbnail item">
                                                    <div style="display: flex;">
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    </div>
                                                    <div class="caption">
                                                        <h4 class="testimonials" style="padding:0px">‘Sin olor a humo de cigarro.’</h4>
                                                        <p class="flex-text">“Me encantó porque no deja olor a humo de cigarro, que eso para mí al estar en el área de ventas es muy importante.“</p>
                                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Miguel</p>
                                                    </div>
                                                </article>

                                            </div><!-- #owl-demo-2 -->
                                        </div><!-- .container -->
                                    </section>

                                    <section id="queEsIqosVideo" class="video">
                                        <h3>¿Qué es IQOS?</h3>
                                        <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                                        <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                                            <img src="/arquivos/Thumbnail IQOS 2.4 (b).png" />
                                            <video width="320" height="240" id="myVideo">
                                            <source src="https://pmi.23video.com/60445188/64076978/2e13e86ee5ce47a80c7a2395b5cb687d/video_hd/vgt-iqos-24-plus-web-1-video.mp4 " type="video/mp4">
                                            Your browser does not support the video tag.
                                            </video>  
                                        </div>
                                    </section>
                                    <section class="video" >
                                        <div style="position: relative;
                                        text-align:center;">
                                            <a id="toPasos" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                                        </div>
                                    </section>
                                    </div>`;
Vue.component('gettrital-component-gettritalqueesiqos-replica', {
    'template': $gettritalQueEsIqosReplica,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "MENOSOLOR200",
            "emailVerifiedNB":false,
            "promCode":"",
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "GAtransactionId":"",
            "utmEqualsB2b":false,
            "sourceFromUtm":""
        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                _self.sourceFromUtm = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            // if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
            //     this.errors.push("Ingresa tu codigo promocional")
            // }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                // this.descuento= $("#00N4P00000GOkeM").val() 

                _self.envio()
                
        
            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.sourceFromUtm + this.medium;
            //  "&00N4P000008mN2Q="+concatination+

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            if( this.utmEqualsB2b == true ){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            console.log(_self.descuento, "final")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR"+"&00N4P00000GOgJP="+_self.GAtransactionId+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.colorDispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.GAtransactionId = ""
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({ 'event': 'formTrySubmitted' });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.video()
        _self.seletorSku()
        _self.GetTransaction()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        // Do stuff when the verification is throttled
                    }
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        var field = document.querySelector('[name="email"]');

        field.addEventListener('keypress', function ( event ) {  
        var key = event.keyCode;
            if (key === 32) {
            event.preventDefault();
            }
        });
        $(document).ready(function ($) {
            var owl = $("#owl-demo-2");
            owl.owlCarousel({
                autoplay: true,
                autoplayTimeout: 1000,
                autoplayHoverPause: true,
                items: 3,
                loop: true,
                center: false,
                rewind: false,
                mouseDrag: true,
                touchDrag: true,
                pullDrag: true,
                freeDrag: false,
                margin: 0,
                stagePadding: 0,
                merge: false,
                mergeFit: true,
                autoWidth: false,
                startPosition: 0,
                rtl: false,
                smartSpeed: 250,
                fluidSpeed: false,
                dragEndSpeed: false,
                responsive: {
                    0: {
                        items: 1
                        // nav: true
                    },
                    480: {
                        items: 2,
                        nav: false
                    },
                    768: {
                        items: 3,
                        // nav: true,
                        loop: false
                    },
                    992: {
                        items: 4,
                        // nav: true,
                        loop: false
                    }
                },
                responsiveRefreshRate: 200,
                responsiveBaseElement: window,
                fallbackEasing: "swing",
                info: false,
                nestedItemSelector: false,
                itemElement: "div",
                stageElement: "div",
                refreshClass: "owl-refresh",
                loadedClass: "owl-loaded",
                loadingClass: "owl-loading",
                rtlClass: "owl-rtl",
                responsiveClass: "owl-responsive",
                dragClass: "owl-drag",
                itemClass: "owl-item",
                stageClass: "owl-stage",
                stageOuterClass: "owl-stage-outer",
                grabClass: "owl-grab",
                autoHeight: false,
                lazyLoad: false
            });
        
            $(".next").click(function () {
                owl.trigger("owl.next");
            });
            $(".prev").click(function () {
                owl.trigger("owl.prev");
            });
        });
        $(document).ready(function (){
            $("#queEsIqos").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#queEsIqosVideo").offset().top
                }, 2000);
            });
            $("#toPasos").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#pasos").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});
 

var $gettritalEnvio = `<div> 
                            <section class="coronavirus" style="order:1;">
                                <h4>
                                    <span>Por el momento el Programa de Préstamo IQOS no está disponible. En caso de estar interesado, por favor completa el formulario y nosotros te contactaremos.</span>
                                </h4>
                            </section>
                            <section v-bind:class="{ pagina }" class="principal version_exito" style="order:2;">
                                <span v-if="screen > 800" class="agendaAtBottomExito col-2 prueba"></span>
                                <span v-if="screen > 800" class="agendaAtBottomExito col-4 prueba"><a id="toFormTop" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic" class="btn rgm" style="width: 100%; margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;cursor:pointer;">DEJAR MIS DATOS</a></span>
                                <span v-if="screen < 800"  class="agendaAtBottomExito col-2 prueba">
                                    <a id="toFormTop" style="width:70%;margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">DEJAR MIS DATOS</a>
                                </span>   
                            </section>

                            

                            

                            <section id="iqos-form" class="claro">
                                
                                <div class="two">
                                    <h4>Completa el formulario</h4>
                                    
                                    <form class="envio" id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                        
                                        <input type=hidden name="oid" value="00D4P000000h9QV">
                                        <input type=hidden name="retURL" value="http://www.iqos.com">


                                        <!--  ----------------------------------------------------------------------  -->
                                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                        <!--  these lines if you wish to test in debug mode.                          -->
                                        <!--  <input type="hidden" name="debug" value=1>                              -->
                                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                        <!--  ----------------------------------------------------------------------  -->
                                        
                                        <p v-show="datos" style="opacity:0.60;cursor:pointer;padding-bottom:1rem;" class="envio" @click="goBack()">1. Datos de contacto</p>
                                        <p v-show="!datos" class="envio">1. Datos de contacto</p>
                                        <br>
                                        <p v-show="datos" class="envio">2. Datos de envio</p>
                                        <br>
                                        <label v-show="!datos" class="lb-input" for="first_name">NOMBRE*</label>
                                        <input v-show="!datos" id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                                        <label v-show="!datos" class="lb-input" for="last_name">Apellido(s)*</label>
                                        <input v-show="!datos" data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                                        <label v-show="!datos" class="lb-input" for="email">Email*</label>
                                        <input v-show="!datos" id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                        
                                        <div v-show="!datos" class="tooltip envio">
                                            <label v-show="!datos" class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                            <the-mask v-show="!datos" class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                            <span v-show="!datos" class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                        </div>
                                        
                                        <label v-show="!datos" class="lb-input" for="00N4P00000GOkeR">¿QUÉ DISPOSITIVO TE GUSTARÍA CONOCER?</label>
                                        <select v-show="!datos" class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                            <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>   
                                            <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                        </select>

                                        
                                        <div v-show="!datos" class="none">
                                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                            <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                            <input  :value="transaction" id="00N4P00000GOkeC" maxlength="50" name="00N4P00000GOkeC" size="20" type="text" />
                                        </div>

                                        <fieldset v-show="!datos" >
                                        <label v-show="!datos" for="aceptoterminos">
                                            <input v-show="!datos" data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                            <span>Acepto <a style="color:blue" href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                        </label>

                                            <label for="00N4P00000GZEGJ">
                                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                                            </label>
                                            <label for="00N4P000008mN8e">
                                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                            </label>
                                        </fieldset>
                                        
                                        <div v-show="!datos" class="btn form-btn">
                                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Ir a datos de envio" class="save" name="submit">
                                            <svg style="margin-left: 75px;" width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                        </div>

                                        <br>
                                        <p v-show="!datos" style="opacity:0.60" class="envio">2. Datos de envio</p>
                                        <br>
                                        <label v-show="datos" class="lb-input" for="calle">Calle y número ext.*</label>
                                        <input v-show="datos" id="calle" class="field" maxlength="80" v-model="calle" name="calle" size="20" type="text" />

                                        <label v-show="datos" class="lb-input" for="nointerno">No. Int / Referencias</label>
                                        <input v-show="datos" id="nointerno" class="field" maxlength="80" name="nointerno" v-model="nointerno" size="20" type="text" />

                                        <label v-show="datos" class="lb-input" for="codigopostal">Código Postal*</label>
                                        <the-mask v-show="datos" class="field" type="text" id="codigopostal" maxlength="40" name="codigopostal" v-model="codigopostal" :mask="['#####']" />
                                        <div v-if="showWarningForInvalidZipCode" style="color:red;font-size:15px;text-align:left">
                                            {{ feedBackMessageForInvalidZipCode }}
                                        </div>

                                        <label v-show="datos" class="lb-input" for="estado">Estado </label>
                                        <select v-show="datos" id="estado" v-model="estado">
                                            <option disabled value="">CDMX </option>
                                            <option>CDMX</option>
                                            <option>Estado de México</option>
                                        </select>

                                        <label v-show="datos" class="lb-input" for="municipio">Alcaldía / Municipio*</label>
                                        <input v-show="datos" id="municipio" class="field" maxlength="80" name="municipio" v-model="municipio" size="20" type="text" />

                                        <label v-show="datos" class="lb-input" for="colonia">Colonia*</label>
                                        <input v-show="datos" id="colonia" class="field" maxlength="80" name="colonia" v-model="colonia" size="20" type="text" />

                                        <label v-show="datos" class="lb-input" for="obs">¿Entre qué calles está?</label>
                                        <textarea v-show="datos" id="obs" class="field" maxlength="80" name="obs" v-model="obs" size="20" type="text" />

                                        <div v-show="datos" class="btn form-btn">
                                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                        </div>
                                        


                                        <transition name="fade">
                                            <div v-if="Msnenvio">
                                                <div class="background-modal" @click="closePopUp($event)"></div>
                                                <div class="envio errors">
                                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                    <b>{{ Msnenvio }}</b>
                                                </div>
                                            </div>
                                        </transition> 

                                    </form>
                                    <transition name="fade">
                                        <div v-if="errors.length" class="errors">
                                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                            <b>Para continuar, por favor revisa lo siguiente:</b>
                                            <ul>
                                                <li v-for="error in errors">{{ error }}</li>
                                            </ul>
                                        </div>    
                                    </transition>  
                                </div>
                            </section>

                            <section>
                                <div class="" style="padding-right: 15px;
                                padding-left: 15px;
                                margin-right: auto;
                                margin-left: auto;">
                                    <div id="owl-demo-2" class="owl-carousel owl-theme">

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘La mejor decisión de mi vida’</h4>
                                                <p class="flex-text">“En el momento que descubrí IQOS pensé que tal vez si era necesario experimentar y ver que tan cierto era todo lo que mi Coach personal mencionaba... En los primeros días me costó un poco de trabajo adaptarme a mi IQOS, pero con el paso del tiempo se hizo mi aliado y ahora ya no lo suelto...”</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Zabdiel</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star-o" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘Me encanta’</h4>
                                                <p class="flex-text">“Me costó unos días acostumbrarme al sabor pero una vez que lo hice no los cambio por nada, es muy práctico, es increíble que no haya ceniza, entonces lo puedes ocupar en el coche si llueve, y en cualquier lugar sin necesidad de un cenicero y sin el temor de quemar algo...”</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Esteban</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘Deje por completo el cigarro y el humo’</h4>
                                                <p class="flex-text">“Me gusta mucho, desde el primer día de uso. Despues de una semana ya no pude soportar el sabor de un cigarro normal. Una excelente alternativa y cambio de habito. Definitivamente no regresaría a fumar.”</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Carlos</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘La mejor decisión’</h4>
                                                <p class="flex-text">“...Ha sido una muy buena experiencia, dejé los cigarrillos al día 2 y llevo 6 meses con IQOS. La mejor decisión para quien no quiere dejar de fumar pero si quiere una experiencia distinta sin humo, sin ceniza. Lo recomiendo ampliamente.“</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Luis</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘No más olores desagradables’</h4>
                                                <p class="flex-text">"...Me dedico al ramo de bebidas y no podía estar trabajando con olor a cigarro. Fue una gran solución a mi problema. Ya las cosas saben distintos. Me olvide por completo de las críticas “apestas a cenicero” etc."</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Gabriel</p>
                                            </div>
                                        </article>

                                        <article class="thumbnail item">
                                            <div style="display: flex;">
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                            </div>
                                            <div class="caption">
                                                <h4 class="testimonials" style="padding:0px">‘Sin olor a humo de cigarro.’</h4>
                                                <p class="flex-text">“Me encantó porque no deja olor a humo de cigarro, que eso para mí al estar en el área de ventas es muy importante.“</p>
                                                <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Miguel</p>
                                            </div>
                                        </article>

                                    </div><!-- #owl-demo-2 -->
                                </div><!-- .container -->
                            </section>
                            <section id="queEsIqosVideo" class="video">
                                <h3>¿Qué es IQOS?</h3>
                                <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                                <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                                    <img src="/arquivos/Que es IQOS 2.4 Plus exito(Thumbnail).jpg" />
                                    <video width="320" height="240" id="myVideo">
                                    <source src="https://pmi.23video.com/64968568/65417230/d1674608d69d4c4cc83afe5b48c3db8e/video_hd/b235068iqoswhatisiqos24plusmxes-mx6-1-video.mp4 " type="video/mp4">
                                    Your browser does not support the video tag.
                                    </video>  
                                </div>
                            </section>
                            <section class="video" >
                                <div style="position: relative;
                                text-align:center;">
                                    <a id="toFormBottom" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                                </div>
                            </section>

                            </div>`;
Vue.component('gettrital-component-envio', {
    'template': $gettritalEnvio,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "LendingWeb",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "calle": "",
            "codigopostal": "",
            "colonia": "",
            "estado": "",
            "municipio": "",
            "nointerno": "",
            "obs": "",
            "descuento": "",
            "emailVerifiedNB":false,
            "promCode":"",
            "codigoDeReferidoValidado":false,
            "codigoReferidoFeedbackMessage":"Código de referido no válido, por favor verifícalo.",
            "showWarning":null,
            "utmEqualsB2b":false,
            "datos":false,
            "firstFormChecked":false,
            "GAtransactionId":"",
            "showWarningForInvalidZipCode":false,
            "validZipCode":false,
            "feedBackMessageForInvalidZipCode":"Código postal no válido, por favor verifícalo.",
            "codestring":null,
            "sourceFromUtm":"",
            "promCodeselected":"",
            "firstTimeFormChecked":false,
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "userCode": false,
            "screen": window.innerWidth,
            "dispositivo": ""
        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "goBack":function(){
             this.datos = false
             this.firstFormChecked = false
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.term = utms.utm_term
                _self.source = "LendingWeb";
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "irADatosDeEnvio": function (){
            setTimeout(function (){
                var form =  $("#form").offset().top
                $("html, body").animate({scrollTop:form}, 'slow');
            },100)
        },
        "focusError": function (){
            setTimeout(function (){
                var errorId =  $("#00N4P00000GOkeM").offset().top
                $("html, body").animate({scrollTop:errorId}, 'slow');
            },100)
        },
        /*
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },
        */
        "checkForm": function (e) {
            console.log("checkform called")
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            // var codeValue = $("#00N4P00000GOkeM").val()
            // console.log(codevalue, "codevalue")
            // console.log(codevalue.length, "codevalue length")
            this.GA_clientId()
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
                this.promCodeselected = "Si"
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode si but field empty")
            }

            // if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == undefined) {
            //     this.promCodeselected = "Si"
            //     this.descuento = "MENOSOLOR20"
            //     console.log(this.descuento, "promcode si but field empty")
            // }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length >= 1) {
                this.promCodeselected = "Si"
                this.validateReferrCode($("#00N4P00000GOkeM").val())
                console.log(this.descuento, "promcode si and pass validation code function")
            }

            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length <= 0) {
                this.descuento = "MENOSOLOR200"
                this.promCodeselected = "Si"
                this.showWarning = false
                console.log(this.descuento, "promcode si but field empty 2")
            }

            if( this.promCode == "No" ){
                this.promCodeselected = "No"
                this.showWarning = false
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode no")
            }

            if(this.promCode == "" && this.firstTimeFormChecked == false ){
                this.promCodeselected = ""
                this.showWarning = false
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode not clicked")
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }

            // if( this.utmEqualsB2b == true && this.promCodeselected == "Si" && $("#00N4P00000GOkeM").val().length == 0){
            //     this.descuento = "CAMBIA20"
            //     console.log(this.descuento, "conditional 3 for people comming from utm b2b")
            // }

            if( this.utmEqualsB2b == true && this.promCodeselected == "Si" && $("#00N4P00000GOkeM").val() == undefined && this.userCode == false){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional 3 for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCodeselected == "Si" && $("#00N4P00000GOkeM").val() != undefined){
                if($("#00N4P00000GOkeM").val().length >= 1){
                    this.validateReferrCode($("#00N4P00000GOkeM").val())
                    this.userCode = true
                //     this.descuento = $("#00N4P00000GOkeM").val()
                // console.log(this.descuento, "conditional 4 for people comming from utm b2b")
                }
                
            } 

            if(this.promCodeselected == "" ){
                this.showWarning = false
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true && this.showWarning == false) {
                console.log("condition when tru", this.promCodeselected)
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.dispositivo = $("#00N4P00000GOkeR").val()
                this.firstTimeFormChecked = true
                _self.datos = true
                // _self.envio()
                _self.promCode = ""
                _self.checkSecondForm(e)
                _self.irADatosDeEnvio()

            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "checkSecondForm":function(e){
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            
            if(this.firstFormChecked == true){
                if ($("#calle").val().length < 1) {
                    this.errors.push("Ingresa tu calle y número ext.");
                }
    
                if ($("#codigopostal").val().length < 5) {
                    this.errors.push("Ingresa tu código postal");
                }

                if ($("#codigopostal").val().length == 5) {
                    this.validateZipCode($("#codigopostal").val());
                }
    
                if ($("#municipio").val().length < 1) {
                    this.errors.push("Ingresa tu alcaldía / municipio");
                }
    
                if ($("#colonia").val().length < 1) {
                    this.errors.push("Ingresa tu colonia");
                }
    
                // if ($("#estado").val().length < 1) {
                //     this.errors.push("Ingresa tu Estado/Municipio");
                // }
                if(!this.errors.length && this.validZipCode == true){
                    this.estado = $("#estado").val()
                    console.log(this.estado)
                    _self.envio()
                    _self.envioToLp()
                } else {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Failed",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
    
                    e.preventDefault()
                }
            } else {
                this.firstFormChecked = true
            } 
        },
        "validateReferrCode": function(codigoReferido) {
            console.log(codigoReferido.length,"length")
            if(codigoReferido.length == 1 || codigoReferido.length == 2){
                console.log(codigoReferido.length,"length less then 3")
                this.codigoDeReferidoValidado = false
                this.showWarning = true
                this.focusError()
            } else {

                let firstThreeLetters = codigoReferido.slice(0,3)

                if(firstThreeLetters == "MGM" 
                || firstThreeLetters == "EGM" 
                || firstThreeLetters == "B2B" 
                || firstThreeLetters == "RGM" 
                || firstThreeLetters == "IQO"
                || firstThreeLetters == "RET") {
                    this.codigoDeReferidoValidado = true
                    this.showWarning = false
                    this.descuento = codigoReferido
                    console.log(this.descuento, "should be the entered codigo referido 1")
                } else {
                    this.codigoDeReferidoValidado = false
                    this.showWarning = true
                    this.focusError()
                }
            }
            
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.sourceFromUtm + this.medium;
            //  "&00N4P000008mN2Q="+concatination+
            console.log(this.descuento, "should be the entered codigo referido 1")
            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            if( this.utmEqualsB2b == true && this.promCodeselected == "No"){
                console.log(this.descuento, "fall first condition")
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional 1 for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCodeselected == ""){
                console.log(this.descuento, "fall second condition")
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional 2 for people comming from utm b2b")
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            console.log(_self.descuento, "final")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR"+"&00N4P00000GOgJP="+_self.GAtransactionId+"&00N4P00000GOkeC="+_self.transaction+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                // $(_self.form).find(".loading").remove()
                // _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.GAtransactionId = ""
                _self.promCode = ""
                _self.promCodeselected = ""
                _self.userCode = false
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({ 'event': 'formTrySubmitted' });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "envioToLp": function() {  

            var _self = this

            var camposValores = [{
                apellido: this.apelido,
                direccion: this.direccion,
                dispositivo: this.dispositivo,
                email: this.email,
                nombre: this.nombre,
                telefone: this.telefone,
                orderID: this.transaction,
                calle: this.calle,
                codigopostal: this.codigopostal,
                colonia: this.colonia,
                estado: this.estado,
                municipio: this.municipio,
                nointerno: this.nointerno,
                descuento: this.descuento,
                obs: this.obs,
                dispositivo: this.colorDispositivo
            }]
           
            var settings = {
                "url": "/api/dataentities/LP/documents",
                "type": "POST",
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "data": JSON.stringify(camposValores[0]),
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "Order ID: "+_self.transaction+" \n\n¡Gracias por tu registro!";
            
                _self.apelido= ""
                _self.dispositivo= ""
                _self.email= ""
                _self.nombre= ""
                _self.telefone= ""
                _self.calle= ""
                _self.codigopostal= ""
                _self.colonia= ""
                _self.estado= ""
                _self.municipio= ""
                _self.nointerno= ""
                _self.descuento= ""
                _self.obs= ""
                _self.firstFormChecked = false
                _self.datos = false
                _self.showWarning = null
                
                _self.GetTransaction()

                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)
                    
            })        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "validateZipCode":function (zipCode) {
            var _self = this
            console.log("validatezipcode function called")
            var codes = [
                "56600",
                "56604",
                "56605",
                "56606",
                "56607",
                "56608",
                "56609",
                "56620",
                "56623",
                "56624",
                "56625",
                "56640",
                "56641",
                "56642",
                "56643",
                "56644",
                "56646",
                "56647",
                "56370",
                "56373",
                "56375",
                "56376",
                "56377",
                "56380",
                "56383",
                "56384",
                "56386",
                "56387",
                "56390",
                "56270",
                "56330",
                "56334",
                "56335",
                "56337",
                "56338",
                "56340",
                "56343",
                "56344",
                "56346",
                "56350",
                "56353",
                "56356",
                "56360",
                "56363",
                "56366",
                "52900",
                "52909",
                "52910",
                "52915",
                "52916",
                "52918",
                "52919",
                "52920",
                "52923",
                "52924",
                "52925",
                "52926",
                "52927",
                "52928",
                "52929",
                "52930",
                "52934",
                "52936",
                "52937",
                "52938",
                "52939",
                "52940",
                "52945",
                "52946",
                "52947",
                "52948",
                "52949",
                "52950",
                "52953",
                "52956",
                "52957",
                "52958",
                "52959",
                "52960",
                "52965",
                "52966",
                "52967",
                "52968",
                "52970",
                "52975",
                "52976",
                "52977",
                "52978",
                "52979",
                "52980",
                "52985",
                "52986",
                "52987",
                "52988",
                "52989",
                "52990",
                "52994",
                "52995",
                "52996",
                "52997",
                "52998",
                "57000",
                "57100",
                "57103",
                "57120",
                "57129",
                "57130",
                "57138",
                "57139",
                "57140",
                "57150",
                "57158",
                "57170",
                "57171",
                "57178",
                "57179",
                "57180",
                "57185",
                "57188",
                "57189",
                "57200",
                "57205",
                "57210",
                "57300",
                "57310",
                "57400",
                "57410",
                "57420",
                "57425",
                "57430",
                "57440",
                "57450",
                "57460",
                "57465",
                "57500",
                "57510",
                "57520",
                "57530",
                "57600",
                "57610",
                "57620",
                "57630",
                "57700",
                "57708",
                "57709",
                "57710",
                "57718",
                "57719",
                "57720",
                "57730",
                "57739",
                "57740",
                "57750",
                "57760",
                "57800",
                "57809",
                "57810",
                "57819",
                "57820",
                "57830",
                "57840",
                "57849",
                "57900",
                "57910",
                "57920",
                "57930",
                "57940",
                "57950",
                "54400",
                "54402",
                "54405",
                "54407",
                "54408",
                "54409",
                "54410",
                "54413",
                "54414",
                "54416",
                "54417",
                "54420",
                "54424",
                "54425",
                "54426",
                "54430",
                "54434",
                "54435",
                "54439",
                "54440",
                "54449",
                "54455",
                "54457",
                "54459",
                "54460",
                "54463",
                "54464",
                "54466",
                "54467",
                "54469",
                "54470",
                "54473",
                "54474",
                "54475",
                "54476",
                "54477",
                "55700",
                "55705",
                "55707",
                "55708",
                "55709",
                "55710",
                "55712",
                "55713",
                "55714",
                "55715",
                "55716",
                "55717",
                "55718",
                "55719",
                "55720",
                "55726",
                "55728",
                "55729",
                "55730",
                "55736",
                "55737",
                "55738",
                "55739",
                "54800",
                "54803",
                "54804",
                "54805",
                "54807",
                "54830",
                "54831",
                "54834",
                "54835",
                "54836",
                "54840",
                "54850",
                "54855",
                "54857",
                "54858",
                "54860",
                "54870",
                "54875",
                "54877",
                "54878",
                "54879",
                "54700",
                "54710",
                "54712",
                "54713",
                "54714",
                "54715",
                "54716",
                "54719",
                "54720",
                "54725",
                "54729",
                "54730",
                "54740",
                "54743",
                "54744",
                "54745",
                "54750",
                "54753",
                "54759",
                "54760",
                "54763",
                "54764",
                "54765",
                "54766",
                "54767",
                "54769",
                "55000",
                "55010",
                "55014",
                "55016",
                "55017",
                "55018",
                "55020",
                "55023",
                "55024",
                "55025",
                "55027",
                "55028",
                "55029",
                "55030",
                "55036",
                "55037",
                "55038",
                "55039",
                "55040",
                "55050",
                "55055",
                "55056",
                "55057",
                "55059",
                "55060",
                "55063",
                "55064",
                "55065",
                "55066",
                "55067",
                "55068",
                "55069",
                "55070",
                "55074",
                "55075",
                "55076",
                "55080",
                "55084",
                "55085",
                "55087",
                "55090",
                "55094",
                "55095",
                "55100",
                "55104",
                "55105",
                "55107",
                "55114",
                "55115",
                "55117",
                "55118",
                "55119",
                "55120",
                "55125",
                "55126",
                "55127",
                "55128",
                "55129",
                "55130",
                "55135",
                "55137",
                "55138",
                "55139",
                "55140",
                "55146",
                "55147",
                "55148",
                "55149",
                "55158",
                "55170",
                "55176",
                "55180",
                "55187",
                "55188",
                "55189",
                "55190",
                "55200",
                "55210",
                "55218",
                "55220",
                "55230",
                "55234",
                "55235",
                "55236",
                "55237",
                "55238",
                "55240",
                "55242",
                "55243",
                "55244",
                "55245",
                "55246",
                "55247",
                "55248",
                "55249",
                "55260",
                "55264",
                "55266",
                "55267",
                "55268",
                "55269",
                "55270",
                "55280",
                "55284",
                "55287",
                "55288",
                "55289",
                "55290",
                "55294",
                "55295",
                "55296",
                "55297",
                "55298",
                "55299",
                "55300",
                "55308",
                "55310",
                "55316",
                "55317",
                "55320",
                "55330",
                "55338",
                "55339",
                "55340",
                "55347",
                "55348",
                "55349",
                "55360",
                "55369",
                "55390",
                "55400",
                "55404",
                "55405",
                "55407",
                "55410",
                "55414",
                "55415",
                "55416",
                "55417",
                "55418",
                "55419",
                "55420",
                "55425",
                "55429",
                "55430",
                "55450",
                "55458",
                "55459",
                "55490",
                "55498",
                "55500",
                "55506",
                "55507",
                "55508",
                "55509",
                "55510",
                "55515",
                "55516",
                "55517",
                "55518",
                "55519",
                "55520",
                "55530",
                "55540",
                "55547",
                "55548",
                "55549",
                "52760",
                "52763",
                "52764",
                "52765",
                "52766",
                "52767",
                "52768",
                "52769",
                "52770",
                "52773",
                "52774",
                "52775",
                "52776",
                "52777",
                "52778",
                "52779",
                "52780",
                "52783",
                "52784",
                "52785",
                "52786",
                "52787",
                "52788",
                "52789",
                "52790",
                "52793",
                "52794",
                "52795",
                "52796",
                "52797",
                "52798",
                "52799",
                "56530",
                "56535",
                "56536",
                "56537",
                "56538",
                "56539",
                "56540",
                "56550",
                "56553",
                "56555",
                "56556",
                "56558",
                "56560",
                "56563",
                "56564",
                "56565",
                "56566",
                "56567",
                "56568",
                "56569",
                "56570",
                "56576",
                "56577",
                "56579",
                "56580",
                "56584",
                "56585",
                "56586",
                "56587",
                "56588",
                "56589",
                "56590",
                "56599",
                "56400",
                "56410",
                "56420",
                "56428",
                "56429",
                "56430",
                "56440",
                "56490",
                "56495",
                "56500",
                "56505",
                "56507",
                "56508",
                "56509",
                "56510",
                "56512",
                "56513",
                "56514",
                "56515",
                "56516",
                "56520",
                "56524",
                "56525",
                "56526",
                "56527",
                "56528",
                "56529",
                "54880",
                "54882",
                "54883",
                "54884",
                "53000",
                "53010",
                "53030",
                "53040",
                "53050",
                "53060",
                "53070",
                "53100",
                "53110",
                "53115",
                "53116",
                "53117",
                "53119",
                "53120",
                "53124",
                "53125",
                "53126",
                "53127",
                "53128",
                "53129",
                "53130",
                "53138",
                "53140",
                "53150",
                "53160",
                "53170",
                "53177",
                "53178",
                "53179",
                "53200",
                "53215",
                "53216",
                "53217",
                "53218",
                "53219",
                "53220",
                "53224",
                "53227",
                "53228",
                "53230",
                "53237",
                "53239",
                "53240",
                "53247",
                "53248",
                "53250",
                "53260",
                "53270",
                "53278",
                "53279",
                "53280",
                "53283",
                "53290",
                "53296",
                "53297",
                "53298",
                "53300",
                "53309",
                "53310",
                "53320",
                "53329",
                "53330",
                "53338",
                "53339",
                "53340",
                "53348",
                "53350",
                "53370",
                "53378",
                "53390",
                "53398",
                "53400",
                "53410",
                "53420",
                "53425",
                "53426",
                "53427",
                "53428",
                "53430",
                "53440",
                "53450",
                "53458",
                "53459",
                "53460",
                "53470",
                "53489",
                "53490",
                "53500",
                "53519",
                "53520",
                "53529",
                "53530",
                "53533",
                "53550",
                "53560",
                "53569",
                "53570",
                "53580",
                "53598",
                "53640",
                "53650",
                "53653",
                "53654",
                "53655",
                "53660",
                "53664",
                "53670",
                "53680",
                "53687",
                "53688",
                "53689",
                "53690",
                "53694",
                "53695",
                "53696",
                "53697",
                "53698",
                "53700",
                "53708",
                "53710",
                "53713",
                "53714",
                "53716",
                "53717",
                "53718",
                "53719",
                "53730",
                "53760",
                "53770",
                "53780",
                "53787",
                "53788",
                "53790",
                '53798',
                "53799",
                "53800",
                "53809",
                "53810",
                "53819",
                "53820",
                "53830",
                "53839",
                "53840",
                "53900",
                "53909",
                "53910",
                "53930",
                "53940",
                "53950",
                "53960",
                "53970",
                '52100',
                '52104',
                "52105",
                "52106",
                "52107",
                "54960",
                "54962",
                "54963",
                "54964",
                "54965",
                "54966",
                "54967",
                "54970",
                "54972",
                "54974",
                "54975",
                '54976',
                "54977",
                "54980",
                "54983",
                "54984",
                "54985",
                "54986",
                "54987",
                "54990",
                "55740",
                '55743',
                '55744',
                "55745",
                "55746",
                '55747',
                "55748",
                '55749',
                "55750",
                "55752",
                '55754',
                "55755",
                "55757",
                "55758",
                "55760",
                "55763",
                '55764',
                '55765',
                '55766',
                '55767',
                "55768",
                '55769',
                '55770',
                "55773",
                '55776',
                '55778',
                '54600',
                '54602',
                '54603',
                '54604',
                "54605",
                "54607",
                '54608',
                '54610',
                "54614",
                "54615",
                '54616',
                "54640",
                '54645',
                '54650',
                '54655',
                '54656',
                "54658",
                '56100',
                "56103",
                "56105",
                "56106",
                "56110",
                "56120",
                "56130",
                '56140',
                '56150',
                "56160",
                '56170',
                '54000',
                "54009",
                '54010',
                '54015',
                '54016',
                '54017',
                '54020',
                '54021',
                '54022',
                '54023',
                "54025",
                "54026",
                '54028',
                "54030",
                '54033',
                '54037',
                "54038",
                '54040',
                '54049',
                '54050',
                "54054",
                "54055",
                "54057",
                "54059",
                "54060",
                "54063",
                "54067",
                "54068",
                "54069",
                "54070",
                "54073",
                "54075",
                "54076",
                "54080",
                "54090",
                "54092",
                "54093",
                "54094",
                "54098",
                "54100",
                "54108",
                "54109",
                "54110",
                "54118",
                "54119",
                "54120",
                "54124",
                "54126",
                "54127",
                "54128",
                "54130",
                "54134",
                "54135",
                "54136",
                "54140",
                "54142",
                "54143",
                "54145",
                "54146",
                "54147",
                "54149",
                "54150",
                "54152",
                "54158",
                "54160",
                "54162",
                "54168",
                "54170",
                "54172",
                "54173",
                "54180",
                "54187",
                "54189",
                "54190",
                "54193",
                "54195",
                "54196",
                "54197",
                "54198",
                "54900",
                "54910",
                "54913",
                "54914",
                "54915",
                "54916",
                "54918",
                "54920",
                "54924",
                "54925",
                "54926",
                "54927",
                "54929",
                "54930",
                "54932",
                "54933",
                "54934",
                "54935",
                "54938",
                "54939",
                "54940",
                "54942",
                "54943",
                "54944",
                "54945",
                "54946",
                "54948",
                "54949",
                "54950",
                "54954",
                "54955",
                "54957",
                "54958",
                "54959",
                "56610",
                "56613",
                "56614",
                "56615",
                "56616",
                "56617",
                "56618",
                "56619",
                "55600",
                "55603",
                "55604",
                "55605",
                "55606",
                "55607",
                "55609",
                "55610",
                "55613",
                "55614",
                "55615",
                "55616",
                "55619",
                "55620",
                "55628",
                "55629",
                "55630",
                "55634",
                "55635",
                "55636",
                "55637",
                "55640",
                "52500",
                "52503",
                "52504",
                "52505",
                "52506",
                "53229",
                "53658",
                "53659",
                "54448",
                "54539",
                "54570",
                "54571",
                "54573",
                "54574",
                "54575",
                "54660",
                "54665",
                "54666",
                "54667",
                "54668",
                "54770",
                "54783",
                "54784",
                "54785",
                "54786",
                "54890",
                "54893",
                "54894",
                "55643",
                "55644",
                "55646",
                "55785",
                "55786",
                "55787",
                "55790",
                "55793",
                "55794",
                "55795",
                "55796",
                "55797",
                "55799",
                "55800",
                "55803",
                "55804",
                "55805",
                "55806",
                "55807",
                "55810",
                "55816",
                "55817",
                "55820",
                "55823",
                "55824",
                "55825",
                "55826",
                "55829",
                "55830",
                "55833",
                "55834",
                "55835",
                "55836",
                "55837",
                "55838",
                "55840",
                "55843",
                "55844",
                "55845",
                "55846",
                "55847",
                "55850",
                "55852",
                "55853",
                "55854",
                "55855",
                "55856",
                "55859",
                "55870",
                "55873",
                "55874",
                "55875",
                "55877",
                "55878",
                "55880",
                "55882",
                "55883",
                "55884",
                "55885",
                "55886",
                "55887",
                "55888",
                "55890",
                "55893",
                "55894",
                "55895",
                "55899",
                "55900",
                "55913",
                "55914",
                "55916",
                "55920",
                "55923",
                "55924",
                "55925",
                "55926",
                "55927",
                "55930",
                "55934",
                "55935",
                "55936",
                "55937",
                "55940",
                "55943",
                "55950",
                "55952",
                "55954",
                "55955",
                "55956",
                "55960",
                "55963",
                "55965",
                "55966",
                "55970",
                "55974",
                "55975",
                "55976",
                "55977",
                "55978",
                "56000",
                "56003",
                "56004",
                "56005",
                "56006",
                "56007",
                "56010",
                "56020",
                "56023",
                "56024",
                "56030",
                "56033",
                "56034",
                "56035",
                "56036",
                "56037",
                "56038",
                "56040",
                "56050",
                "56053",
                "56054",
                "56055",
                "56056",
                "56057",
                "56070",
                "56074",
                "56077",
                "56080",
                "56083",
                "56085",
                "56086",
                "56087",
                "56093",
                "56094",
                "56096",
                "56200",
                "56203",
                "56204",
                "56205",
                "56207",
                "56208",
                "56210",
                "56213",
                "56214",
                "56215",
                "56216",
                "56217",
                "56220",
                "56223",
                "56224",
                "56225",
                "56226",
                "56227",
                "56230",
                "56233",
                "56235",
                "56236",
                "56237",
                "56240",
                "56243",
                "56244",
                "56245",
                "56246",
                "56247",
                "56250",
                "56253",
                "56254",
                "56255",
                "56256",
                "56257",
                "56260",
                "56263",
                "56264",
                "56265",
                "56266",
                "56267",
                "56268",
                "56272",
                "56273",
                "56274",
                "56280",
                "56300",
                "56303",
                "56304",
                "56305",
                "56306",
                "56310",
                "56314",
                "56315",
                "56396",
                "01000",
                "01010",
                "01020",
                "01030",
                "01040",
                "01049",
                "01050",
                "01060",
                "01070",
                "01080",
                "01089",
                "01090",
                "01100",
                "01109",
                "01110",
                "01120",
                "01125",
                "01130",
                "01139",
                "01140",
                "01150",
                "01160",
                "01170",
                "01180",
                "01200",
                "01210",
                "01219",
                "01220",
                "01230",
                "01239",
                "01240",
                "01250",
                "01259",
                "01260",
                "01269",
                "01270",
                "01275",
                "01276",
                "01278",
                "01279",
                "01280",
                "01285",
                "01289",
                "01290",
                "01296",
                "01298",
                "01299",
                "01310",
                "01320",
                "01330",
                "01340",
                "01376",
                "01377",
                "01389",
                "01400",
                "01407",
                "01408",
                "01410",
                "01419",
                "01420",
                "01430",
                "01450",
                "01460",
                "01470",
                "01480",
                "01490",
                "01500",
                "01509",
                "01510",
                "01520",
                "01530",
                "01538",
                "01539",
                "01540",
                "01548",
                "01549",
                "01550",
                "01560",
                "01566",
                "01569",
                "01588",
                "01590",
                "01600",
                "01610",
                "01618",
                "01619",
                "01620",
                "01630",
                "01640",
                "01645",
                "01650",
                "01700",
                "01708",
                "01710",
                "01720",
                "01729",
                "01730",
                "01740",
                "01750",
                "01759",
                "01760",
                "01770",
                "01780",
                "01789",
                "01790",
                "01800",
                "01807",
                "01810",
                "01820",
                "01830",
                "01840",
                "01849",
                "01857",
                "01859",
                "01860",
                "01863",
                "01870",
                "01900",
                "01904",
                "02000",
                "02010",
                "02020",
                "02040",
                "02050",
                "02060",
                "02070",
                "02080",
                "02090",
                "02099",
                "02100",
                "02120",
                "02128",
                "02129",
                "02130",
                "02140",
                "02150",
                "02160",
                "02200",
                "02230",
                "02240",
                "02250",
                "02300",
                "02310",
                "02320",
                "02330",
                "02340",
                "02360",
                "02400",
                "02410",
                "02420",
                "02440",
                "02459",
                "02460",
                "02470",
                "02480",
                "02490",
                "02500",
                "02519",
                "02520",
                "02530",
                "02600",
                "02630",
                "02640",
                "02650",
                "02660",
                "02670",
                "02680",
                "02700",
                "02710",
                "02719",
                "02720",
                "02730",
                "02750",
                "02760",
                "02770",
                "02780",
                "02790",
                "02800",
                "02810",
                "02830",
                "02840",
                "02860",
                "02870",
                "02900",
                "02910",
                "02920",
                "02930",
                "02940",
                "02950",
                "02960",
                "02970",
                "02980",
                "02990",
                "03000",
                "03010",
                "03020",
                "03023",
                "03100",
                "03103",
                "03104",
                "03200",
                "03230",
                "03240",
                "03300",
                "03303",
                "03310",
                "03320",
                "03330",
                "03340",
                "03400",
                "03410",
                "03420",
                "03430",
                "03440",
                "03500",
                "03510",
                "03520",
                "03530",
                "03540",
                "03550",
                "03560",
                "03570",
                "03580",
                "03590",
                "03600",
                "03610",
                "03620",
                "03630",
                "03640",
                "03650",
                "03660",
                "03700",
                "03710",
                "03720",
                "03730",
                "03740",
                "03800",
                "03810",
                "03820",
                "03840",
                "03900",
                "03910",
                "03920",
                "03930",
                "03940",
                "04000",
                "04010",
                "04020",
                "04030",
                "04040",
                "04100",
                "04120",
                "04200",
                "04210",
                "04230",
                "04240",
                "04250",
                "04260",
                "04300",
                "04310",
                "04318",
                "04320",
                "04330",
                "04340",
                "04360",
                "04369",
                "04370",
                "04380",
                "04390",
                "04400",
                "04410",
                "04420",
                "04440",
                "04450",
                "04460",
                "04470",
                "04480",
                "04489",
                "04490",
                "04500",
                "04510",
                "04519",
                "04530",
                "04600",
                "04610",
                "04620",
                "04630",
                "04640",
                "04650",
                "04660",
                "04700",
                "04710",
                "04730",
                "04739",
                "04800",
                "04810",
                "04815",
                "04830",
                "04840",
                "04870",
                "04890",
                "04899",
                "04909",
                "04910",
                "04918",
                "04919",
                "04920",
                "04929",
                "04930",
                "04938",
                "04939",
                "04940",
                "04950",
                "04960",
                "04970",
                "04980",
                "05000",
                "05010",
                "05020",
                "05030",
                "05039",
                "05050",
                "05100",
                "05110",
                "05118",
                "05119",
                "05120",
                "05129",
                "05200",
                "05219",
                "05220",
                "05230",
                "05240",
                "05260",
                "05269",
                "05270",
                "05280",
                "05310",
                "05320",
                "05330",
                "05348",
                "05360",
                "05370",
                "05379",
                "05400",
                "05410",
                "05500",
                "05520",
                "05530",
                "05600",
                "05610",
                "05700",
                "05710",
                "05730",
                "05750",
                "05760",
                "05780",
                "06000",
                "06010",
                "06020",
                "06030",
                "06040",
                "06050",
                "06060",
                "06070",
                "06080",
                "06090",
                "06100",
                "06140",
                "06170",
                "06200",
                "06220",
                "06240",
                "06250",
                "06270",
                "06280",
                "06300",
                "06350",
                "06400",
                "06430",
                "06450",
                "06470",
                "06500",
                "06600",
                "06700",
                "06720",
                "06760",
                "06780",
                "06800",
                "06820",
                "06840",
                "06850",
                "06860",
                "06870",
                "06880",
                "06890",
                "06900",
                "06920",
                "07000",
                "07010",
                "07020",
                "07040",
                "07050",
                "07058",
                "07060",
                "07069",
                "07070",
                "07080",
                "07089",
                "07090",
                "07100",
                "07109",
                "07110",
                "07119",
                "07130",
                "07140",
                "07144",
                "07149",
                "07150",
                "07160",
                "07164",
                "07170",
                "07180",
                "07183",
                "07187",
                "07188",
                "07189",
                "07190",
                "07199",
                "07200",
                "07207",
                "07209",
                "07210",
                "07214",
                "07220",
                "07224",
                "07230",
                "07239",
                "07240",
                "07250",
                "07259",
                "07268",
                "07270",
                "07279",
                "07280",
                "07290",
                "07300",
                "07310",
                "07320",
                "07330",
                "07340",
                "07350",
                "07359",
                "07360",
                "07363",
                "07369",
                "07370",
                "07380",
                "07400",
                "07410",
                "07420",
                "07430",
                "07440",
                "07450",
                "07455",
                "07456",
                "07460",
                "07469",
                "07470",
                "07480",
                "07500",
                "07509",
                "07510",
                "07520",
                "07530",
                "07540",
                "07550",
                "07560",
                "07570",
                "07580",
                "07600",
                "07620",
                "07630",
                "07640",
                "07650",
                "07670",
                "07680",
                "07700",
                "07707",
                "07708",
                "07720",
                "07730",
                "07739",
                "07740",
                "07750",
                "07754",
                "07755",
                "07760",
                "07770",
                "07780",
                "07790",
                "07800",
                "07810",
                "07820",
                "07830",
                "07838",
                "07839",
                "07840",
                "07850",
                "07858",
                "07859",
                "07860",
                "07869",
                "07870",
                "07880",
                "07889",
                "07890",
                "07899",
                "07900",
                "07910",
                "07918",
                "07919",
                "07920",
                "07930",
                "07939",
                "07940",
                "07950",
                "07960",
                "07969",
                "07970",
                "07979",
                "07980",
                "07990",
                "08000",
                "08010",
                "08020",
                "08030",
                "08040",
                "08100",
                "08200",
                "08210",
                "08220",
                "08230",
                "08240",
                "08300",
                "08310",
                "08320",
                "08400",
                "08420",
                "08500",
                "08510",
                "08600",
                "08610",
                "08620",
                "08650",
                "08700",
                "08710",
                "08720",
                "08730",
                "08760",
                "08770",
                "08800",
                "08810",
                "08830",
                "08840",
                "08900",
                "08910",
                "08920",
                "08930",
                "09000",
                "09010",
                "09020",
                "09030",
                "09040",
                "09060",
                "09070",
                "09080",
                "09089",
                "09090",
                "09099",
                "09100",
                "09130",
                "09140",
                "09180",
                "09200",
                "09208",
                "09209",
                "09210",
                "09220",
                "09230",
                "09239",
                "09240",
                "09250",
                "09260",
                "09270",
                "09280",
                "09290",
                "09300",
                "09310",
                "09319",
                "09320",
                "09350",
                "09359",
                "09360",
                "09400",
                "09410",
                "09420",
                "09429",
                "09430",
                "09438",
                "09440",
                "09450",
                "09460",
                "09470",
                "09479",
                "09480",
                "09500",
                "09510",
                "09520",
                "09530",
                "09550",
                "09560",
                "09570",
                "09578",
                "09600",
                "09608",
                "09609",
                "09620",
                "09630",
                "09637",
                "09638",
                "09640",
                "09648",
                "09660",
                "09670",
                "09680",
                "09689",
                "09690",
                "09696",
                "09698",
                "09700",
                "09704",
                "09705",
                "09706",
                "09708",
                "09709",
                "09710",
                "09720",
                "09730",
                "09740",
                "09750",
                "09760",
                "09769",
                "09770",
                "09780",
                "09790",
                "09800",
                "09810",
                "09819",
                "09820",
                "09828",
                "09829",
                "09830",
                "09837",
                "09838",
                "09839",
                "09840",
                "09849",
                "09850",
                "09856",
                "09858",
                "09859",
                "09860",
                "09868",
                "09870",
                "09880",
                "09890",
                "09897",
                "09900",
                "09910",
                "09920",
                "09930",
                "09940",
                "09960",
                "09969",
                "09970",
                "10000",
                "10010",
                "10020",
                "10130",
                "10200",
                "10300",
                "10320",
                "10330",
                "10340",
                "10350",
                "10360",
                "10368",
                "10369",
                "10370",
                "10378",
                "10379",
                "10380",
                "10400",
                "10500",
                "10580",
                "10600",
                "10610",
                "10620",
                "10630",
                "10640",
                "10660",
                "10700",
                "10710",
                "10800",
                "10810",
                "10820",
                "10830",
                "10840",
                "10900",
                "10910",
                "10920",
                "10926",
                "11000",
                "11040",
                "11100",
                "11200",
                "11210",
                "11220",
                "11230",
                "11240",
                "11250",
                "11260",
                "11270",
                "11280",
                "11289",
                "11290",
                "11300",
                "11310",
                "11320",
                "11330",
                "11340",
                "11350",
                "11360",
                "11370",
                "11400",
                "11410",
                "11420",
                "11430",
                "11440",
                "11450",
                "11460",
                "11470",
                "11480",
                "11489",
                "11490",
                "11500",
                "11510",
                "11520",
                "11529",
                "11530",
                "11540",
                "11550",
                "11560",
                "11580",
                "11590",
                "11600",
                "11610",
                "11619",
                "11650",
                "11700",
                "11800",
                "11810",
                "11820",
                "11830",
                "11840",
                "11850",
                "11860",
                "11870",
                "11910",
                "11920",
                "11930",
                "11950",
                "12000",
                "12070",
                "12080",
                "12100",
                "12110",
                "12200",
                "12250",
                "12300",
                "12400",
                "12410",
                "12500",
                "12600",
                "12700",
                "12800",
                "12910",
                "12920",
                "12930",
                "12940",
                "12950",
                "13000",
                "13010",
                "13020",
                "13030",
                "13040",
                "13050",
                "13060",
                "13070",
                "13080",
                "13090",
                "13093",
                "13094",
                "13099",
                "13100",
                "13110",
                "13119",
                "13120",
                "13123",
                "13129",
                "13150",
                "13180",
                "13200",
                "13210",
                "13219",
                "13220",
                "13230",
                "13250",
                "13270",
                "13273",
                "13278",
                "13280",
                "13300",
                "13310",
                "13315",
                "13319",
                "13360",
                "13400",
                "13410",
                "13419",
                "13420",
                "13430",
                "13440",
                "13450",
                "13460",
                "13508",
                "13509",
                "13510",
                "13520",
                "13529",
                "13530",
                "13540",
                "13545",
                "13546",
                "13549",
                "13550",
                "13600",
                "13610",
                "13625",
                "13630",
                "13640",
                "13700",
                "14000",
                "14010",
                "14020",
                "14030",
                "14039",
                "14040",
                "14049",
                "14050",
                "14060",
                "14070",
                "14080",
                "14090",
                "14100",
                "14108",
                "14110",
                "14120",
                "14140",
                "14150",
                "14160",
                "14200",
                "14208",
                "14209",
                "14210",
                "14219",
                "14220",
                "14230",
                "14239",
                "14240",
                "14248",
                "14250",
                "14260",
                "14266",
                "14267",
                "14268",
                "14269",
                "14270",
                "14273",
                "14275",
                "14276",
                "14300",
                "14308",
                "14310",
                "14320",
                "14325",
                "14326",
                "14330",
                "14340",
                "14350",
                "14357",
                "14360",
                "14370",
                "14376",
                "14377",
                "14380",
                "14386",
                "14387",
                "14388",
                "14389",
                "14390",
                "14400",
                "14406",
                "14408",
                "14409",
                "14410",
                "14420",
                "14426",
                "14427",
                "14429",
                "14430",
                "14438",
                "14439",
                "14440",
                "14449",
                "14456",
                "14460",
                "14470",
                "14476",
                "14479",
                "14480",
                "14490",
                "14500",
                "14520",
                "14529",
                "14550",
                "14600",
                "14608",
                "14609",
                "14610",
                "14620",
                "14629",
                "14630",
                "14640",
                "14643",
                "14646",
                "14647",
                "14650",
                "14653",
                "14654",
                "14655",
                "14657",
                "14658",
                "14659",
                "14700",
                "14710",
                "14720",
                "14730",
                "14734",
                "14735",
                "14737",
                "14738",
                "14739",
                "14740",
                "14748",
                "14749",
                "14750",
                "14760",
                "14780",
                "14790",
                "14900",
                "15000",
                "15010",
                "15020",
                "15100",
                "15200",
                "15210",
                "15220",
                "15230",
                "15240",
                "15250",
                "15260",
                "15270",
                "15280",
                "15290",
                "15300",
                "15309",
                "15310",
                "15320",
                "15330",
                "15339",
                "15340",
                "15350",
                "15370",
                "15380",
                "15390",
                "15400",
                "15410",
                "15420",
                "15430",
                "15440",
                "15450",
                "15460",
                "15470",
                "15500",
                "15510",
                "15520",
                "15530",
                "15540",
                "15600",
                "15610",
                "15620",
                "15630",
                "15640",
                "15650",
                "15660",
                "15670",
                "15680",
                "15700",
                "15710",
                "15730",
                "15740",
                "15750",
                "15800",
                "15810",
                "15820",
                "15830",
                "15840",
                "15850",
                "15860",
                "15870",
                "15900",
                "15960",
                "15970",
                "15980",
                "15990",
                "16000",
                "16010",
                "16020",
                "16029",
                "16030",
                "16034",
                "16035",
                "16036",
                "16038",
                "16040",
                "16050",
                "16059",
                "16060",
                "16070",
                "16080",
                "16090",
                "16100",
                "16200",
                "16210",
                "16300",
                "16310",
                "16320",
                "16340",
                "16400",
                "16410",
                "16420",
                "16428",
                "16429",
                "16430",
                "16440",
                "16443",
                "16450",
                "16457",
                "16459",
                "16500",
                "16513",
                "16514",
                "16520",
                "16530",
                "16533",
                "16550",
                "16600",
                "16604",
                "16605",
                "16606",
                "16607",
                "16609",
                "16610",
                "16614",
                "16615",
                "16616",
                "16617",
                "16620",
                "16629",
                "16630",
                "16640",
                "16710",
                "16720",
                "16739",
                "16740",
                "16749",
                "16750",
                "16770",
                "16776",
                "16780",
                "16797",
                "16799",
                "16800",
                "16810",
                "16813",
                "16840",
                "16850",
                "16860",
                "16880",
                "16900"
            ]
            
            var totalCodes = codes.length - 1
            console.log(totalCodes)
            for (let i = 0; i < codes.length; i++) {
                
                if (zipCode == codes[i]) {
                    console.log(zipCode, codes[i])
                    console.log("matched")
                    this.validZipCode = true
                    this.showWarningForInvalidZipCode = false
                    break
                } 
                if (totalCodes == [i]) {
                    console.log(zipCode, codes[i])
                    if (zipCode != codes[i]) {
                        console.log("not matched")
                        _self.validZipCode = false
                        _self.showWarningForInvalidZipCode = true
                    setTimeout(function () {
                        _self.showWarningForInvalidZipCode = false
                    },2000)
                    }
                }
            }
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.video()
        _self.seletorSku()
        _self.GetTransaction()
        window.onresize = () => {
            _self.screen = window.innerWidth;
        };
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        // Do stuff when the verification is throttled
                    }
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        $(document).ready(function ($) {

            var owl = $("#owl-demo-2");
    
            owl.owlCarousel({
                autoplay: true,
                autoplayTimeout: 1000,
                autoplayHoverPause: true,
                items: 3,
                loop: true,
                center: false,
                rewind: false,
                mouseDrag: true,
                touchDrag: true,
                pullDrag: true,
                freeDrag: false,
                margin: 0,
                stagePadding: 0,
                merge: false,
                mergeFit: true,
                autoWidth: false,
                startPosition: 0,
                rtl: false,
                smartSpeed: 250,
                fluidSpeed: false,
                dragEndSpeed: false,
                responsive: {
                    0: {
                        items: 1
                        // nav: true
                    },
                    480: {
                        items: 2,
                        nav: false
                    },
                    768: {
                        items: 3,
                        // nav: true,
                        loop: false
                    },
                    992: {
                        items: 4,
                        // nav: true,
                        loop: false
                    }
                },
                responsiveRefreshRate: 200,
                responsiveBaseElement: window,
                fallbackEasing: "swing",
                info: false,
                nestedItemSelector: false,
                itemElement: "div",
                stageElement: "div",
                refreshClass: "owl-refresh",
                loadedClass: "owl-loaded",
                loadingClass: "owl-loading",
                rtlClass: "owl-rtl",
                responsiveClass: "owl-responsive",
                dragClass: "owl-drag",
                itemClass: "owl-item",
                stageClass: "owl-stage",
                stageOuterClass: "owl-stage-outer",
                grabClass: "owl-grab",
                autoHeight: false,
                lazyLoad: false
            });
        
            $(".next").click(function () {
                owl.trigger("owl.next");
            });
            $(".prev").click(function () {
                owl.trigger("owl.prev");
            });
        });
        $(document).ready(function (){
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#first_name").offset().top
                }, 2000);
            });
            $("#toFormBottom").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#first_name").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});


var $gettritalEnvioTest = `<div> 
                                <section class="coronavirus" style="order:1;">
                                    <h4>
                                        <span>Por el momento el Programa de Préstamo IQOS no está disponible. En caso de estar interesado, por favor completa el formulario y nosotros te contactaremos.</span>
                                    </h4>
                                </section>
                                <section v-bind:class="{ pagina }" class="principal version_exitoFeb" style="order:2;">
                                    <span v-if="screen > 800" class="agendaAtBottomExito col-2 prueba"></span>
                                    <span v-if="screen > 800" class="agendaAtBottomExito col-4 prueba"><a id="toFormTop" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic" class="btn rgm" style="width: 100%; margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;cursor:pointer;">DEJAR MIS DATOS</a></span>
                                    <span v-if="screen < 800"  class="agendaAtBottomExito col-2 prueba">
                                        <a id="toFormTop" style="width:70%;margin-bottom: 20px;background: #fff;color: #272a23;font-size: 12px;letter-spacing: 2.5px;font-weight: bold;" class='btn  rgm' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">DEJAR MIS DATOS</a>
                                    </span>   
                                </section>





                                <section id="iqos-form" class="claro">
                                    
                                    <div class="two">
                                        <h4>Completa el formulario</h4>
                                        
                                        <form class="envio" id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                            
                                            <input type=hidden name="oid" value="00D4P000000h9QV">
                                            <input type=hidden name="retURL" value="http://www.iqos.com">


                                            <!--  ----------------------------------------------------------------------  -->
                                            <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                            <!--  these lines if you wish to test in debug mode.                          -->
                                            <!--  <input type="hidden" name="debug" value=1>                              -->
                                            <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                            <!--  ----------------------------------------------------------------------  -->
                                            
                                            <p v-show="datos" style="opacity:0.60;cursor:pointer;padding-bottom:1rem;" class="envio" @click="goBack()">1. Datos de contacto</p>
                                            <p v-show="!datos" class="envio">1. Datos de contacto</p>
                                            <br>
                                            <p v-show="datos" class="envio">2. Datos de envio</p>
                                            <br>
                                            <label v-show="!datos" class="lb-input" for="first_name">NOMBRE*</label>
                                            <input v-show="!datos" id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                                            <label v-show="!datos" class="lb-input" for="last_name">Apellido(s)*</label>
                                            <input v-show="!datos" data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                                            <label v-show="!datos" class="lb-input" for="email">Email*</label>
                                            <input v-show="!datos" id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                            
                                            <div v-show="!datos" class="tooltip envio">
                                                <label v-show="!datos" class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                                <the-mask v-show="!datos" class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                                <span v-show="!datos" class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                            </div>
                                            
                                            <label v-show="!datos" class="lb-input" for="00N4P00000GOkeR">¿QUÉ DISPOSITIVO TE GUSTARÍA CONOCER?</label>
                                            <select v-show="!datos" class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                                <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>   
                                                <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                            </select>

                                            
                                            <div v-show="!datos" class="none">
                                                <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                                <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                                <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                                <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                                <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                                <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                                <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                                <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                                <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                                <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                                <input  :value="transaction" id="00N4P00000GOkeC" maxlength="50" name="00N4P00000GOkeC" size="20" type="text" />
                                            </div>

                                            <fieldset v-show="!datos" >
                                            <label v-show="!datos" for="aceptoterminos">
                                                <input v-show="!datos" data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                                <span>Acepto <a style="color:blue" href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                            </label>

                                                <label for="00N4P00000GZEGJ">
                                                    <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                                    <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                                                </label>
                                                <label for="00N4P000008mN8e">
                                                    <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                                    <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                                </label>
                                            </fieldset>
                                            
                                            <div v-show="!datos" class="btn form-btn">
                                                <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Ir a datos de envio" class="save" name="submit">
                                                <svg style="margin-left: 75px;" width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                            </div>

                                            <br>
                                            <p v-show="!datos" style="opacity:0.60" class="envio">2. Datos de envio</p>
                                            <br>
                                            <label v-show="datos" class="lb-input" for="calle">Calle y número ext.*</label>
                                            <input v-show="datos" id="calle" class="field" maxlength="80" v-model="calle" name="calle" size="20" type="text" />

                                            <label v-show="datos" class="lb-input" for="nointerno">No. Int / Referencias</label>
                                            <input v-show="datos" id="nointerno" class="field" maxlength="80" name="nointerno" v-model="nointerno" size="20" type="text" />

                                            <label v-show="datos" class="lb-input" for="codigopostal">Código Postal*</label>
                                            <the-mask v-show="datos" class="field" type="text" id="codigopostal" maxlength="40" name="codigopostal" v-model="codigopostal" :mask="['#####']" />
                                            <div v-if="showWarningForInvalidZipCode" style="color:red;font-size:15px;text-align:left">
                                                {{ feedBackMessageForInvalidZipCode }}
                                            </div>

                                            <label v-show="datos" class="lb-input" for="estado">Estado </label>
                                            <select v-show="datos" id="estado" v-model="estado">
                                                <option disabled value="">CDMX </option>
                                                <option>CDMX</option>
                                                <option>Estado de México</option>
                                            </select>

                                            <label v-show="datos" class="lb-input" for="municipio">Alcaldía / Municipio*</label>
                                            <input v-show="datos" id="municipio" class="field" maxlength="80" name="municipio" v-model="municipio" size="20" type="text" />

                                            <label v-show="datos" class="lb-input" for="colonia">Colonia*</label>
                                            <input v-show="datos" id="colonia" class="field" maxlength="80" name="colonia" v-model="colonia" size="20" type="text" />

                                            <label v-show="datos" class="lb-input" for="obs">¿Entre qué calles está?</label>
                                            <textarea v-show="datos" id="obs" class="field" maxlength="80" name="obs" v-model="obs" size="20" type="text" />

                                            <div v-show="datos" class="btn form-btn">
                                                <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                                <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                            </div>
                                            


                                            <transition name="fade">
                                                <div v-if="Msnenvio">
                                                    <div class="background-modal" @click="closePopUp($event)"></div>
                                                    <div class="envio errors">
                                                        <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                        <b>{{ Msnenvio }}</b>
                                                    </div>
                                                </div>
                                            </transition> 

                                        </form>
                                        <transition name="fade">
                                            <div v-if="errors.length" class="errors">
                                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                <b>Para continuar, por favor revisa lo siguiente:</b>
                                                <ul>
                                                    <li v-for="error in errors">{{ error }}</li>
                                                </ul>
                                            </div>    
                                        </transition>  
                                    </div>
                                </section>

                                <section>
                                    <div class="" style="padding-right: 15px;
                                    padding-left: 15px;
                                    margin-right: auto;
                                    margin-left: auto;">
                                        <div id="owl-demo-2" class="owl-carousel owl-theme">

                                            <article class="thumbnail item">
                                                <div style="display: flex;">
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                </div>
                                                <div class="caption">
                                                    <h4 class="testimonials" style="padding:0px">‘La mejor decisión de mi vida’</h4>
                                                    <p class="flex-text">“En el momento que descubrí IQOS pensé que tal vez si era necesario experimentar y ver que tan cierto era todo lo que mi Coach personal mencionaba... En los primeros días me costó un poco de trabajo adaptarme a mi IQOS, pero con el paso del tiempo se hizo mi aliado y ahora ya no lo suelto...”</p>
                                                    <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Zabdiel</p>
                                                </div>
                                            </article>

                                            <article class="thumbnail item">
                                                <div style="display: flex;">
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star-o" style="font-size:35px;color:#c98224"></i>
                                                </div>
                                                <div class="caption">
                                                    <h4 class="testimonials" style="padding:0px">‘Me encanta’</h4>
                                                    <p class="flex-text">“Me costó unos días acostumbrarme al sabor pero una vez que lo hice no los cambio por nada, es muy práctico, es increíble que no haya ceniza, entonces lo puedes ocupar en el coche si llueve, y en cualquier lugar sin necesidad de un cenicero y sin el temor de quemar algo...”</p>
                                                    <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Esteban</p>
                                                </div>
                                            </article>

                                            <article class="thumbnail item">
                                                <div style="display: flex;">
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                </div>
                                                <div class="caption">
                                                    <h4 class="testimonials" style="padding:0px">‘Deje por completo el cigarro y el humo’</h4>
                                                    <p class="flex-text">“Me gusta mucho, desde el primer día de uso. Despues de una semana ya no pude soportar el sabor de un cigarro normal. Una excelente alternativa y cambio de habito. Definitivamente no regresaría a fumar.”</p>
                                                    <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Carlos</p>
                                                </div>
                                            </article>

                                            <article class="thumbnail item">
                                                <div style="display: flex;">
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                </div>
                                                <div class="caption">
                                                    <h4 class="testimonials" style="padding:0px">‘La mejor decisión’</h4>
                                                    <p class="flex-text">“...Ha sido una muy buena experiencia, dejé los cigarrillos al día 2 y llevo 6 meses con IQOS. La mejor decisión para quien no quiere dejar de fumar pero si quiere una experiencia distinta sin humo, sin ceniza. Lo recomiendo ampliamente.“</p>
                                                    <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Luis</p>
                                                </div>
                                            </article>

                                            <article class="thumbnail item">
                                                <div style="display: flex;">
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                </div>
                                                <div class="caption">
                                                    <h4 class="testimonials" style="padding:0px">‘No más olores desagradables’</h4>
                                                    <p class="flex-text">"...Me dedico al ramo de bebidas y no podía estar trabajando con olor a cigarro. Fue una gran solución a mi problema. Ya las cosas saben distintos. Me olvide por completo de las críticas “apestas a cenicero” etc."</p>
                                                    <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Gabriel</p>
                                                </div>
                                            </article>

                                            <article class="thumbnail item">
                                                <div style="display: flex;">
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                    <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                                </div>
                                                <div class="caption">
                                                    <h4 class="testimonials" style="padding:0px">‘Sin olor a humo de cigarro.’</h4>
                                                    <p class="flex-text">“Me encantó porque no deja olor a humo de cigarro, que eso para mí al estar en el área de ventas es muy importante.“</p>
                                                    <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:fixed;bottom:20px;">Miguel</p>
                                                </div>
                                            </article>

                                        </div><!-- #owl-demo-2 -->
                                    </div><!-- .container -->
                                </section>
                                <section id="queEsIqosVideo" class="video">
                                    <h3>¿Qué es IQOS?</h3>
                                    <p>IQOS es una mejor opción para consumir tabaco ya que lo calienta en lugar de quemarlo. Al calentar el tabaco se produce vapor, no hay olor a cigarro y por lo tanto, menos molestias a la gente a tu alrededor.</p>
                                    <div class="container ambiente_prueba" data-category="Clicks" data-action="Play" data-label="que-es-iqos-3-duo-caracteristicas-y-video" data-event="Video">
                                        <img src="/arquivos/Que es IQOS 2.4 Plus exito(Thumbnail).jpg" />
                                        <video width="320" height="240" id="myVideo">
                                        <source src="https://pmi.23video.com/64968568/65417230/d1674608d69d4c4cc83afe5b48c3db8e/video_hd/b235068iqoswhatisiqos24plusmxes-mx6-1-video.mp4 " type="video/mp4">
                                        Your browser does not support the video tag.
                                        </video>  
                                    </div>
                                </section>
                                <section class="video" >
                                    <div style="position: relative;
                                    text-align:center;">
                                        <a id="toFormBottom" style="cursor:pointer;background-color: black;letter-spacing: 2px;text-transform: uppercase;" class="btn btn-form" data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                                    </div>
                                </section>

                                </div>`;

Vue.component('gettrital-component-enviotest', {
    'template': $gettritalEnvioTest,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "LendingWeb",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "calle": "",
            "codigopostal": "",
            "colonia": "",
            "estado": "",
            "municipio": "",
            "nointerno": "",
            "obs": "",
            "descuento": "",
            "emailVerifiedNB":false,
            "promCode":"",
            "codigoDeReferidoValidado":false,
            "codigoReferidoFeedbackMessage":"Código de referido no válido, por favor verifícalo.",
            "showWarning":null,
            "utmEqualsB2b":false,
            "datos":false,
            "firstFormChecked":false,
            "GAtransactionId":"",
            "showWarningForInvalidZipCode":false,
            "validZipCode":false,
            "feedBackMessageForInvalidZipCode":"Código postal no válido, por favor verifícalo.",
            "codestring":null,
            "sourceFromUtm":"",
            "promCodeselected":"",
            "firstTimeFormChecked":false,
            "percentageCompleted": 0,
            "totalLength": 0,
            "video10": false,
            "video20": false,
            "video30": false,
            "video40": false,
            "video50": false,
            "video60": false, 
            "video70": false,
            "video80": false,
            "video90": false,
            "video99": false,
            "userCode": false,
            "screen": window.innerWidth,
            "dispositivo": ""
        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "video": function () {
            var myPlayer = document.querySelector('#myVideo'),
                playVideo = false,
                _self = this
            
            myPlayer.ontimeupdate = function() {
                _self.getPercentage()
            };

            $("section.video .container").click(function(){
                
                $(this).toggleClass("play-pause")
                $(this).find("img").hide()
                $(this).find("video").fadeIn()

                if (!playVideo) {
                    myPlayer.play()
                    playVideo = true
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Play",
                        "label": "que-es-iqos-3-duo-caracteriAviso sticas-y-video",
                        "event": "video"
                    })
                } else {
                    myPlayer.pause()
                    playVideo = false
                    window.dataLayer.push({
                        "category": "Video (clicks)",
                        "action": "Pause",
                        "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                        "event": "video"
                    })
                }
                
            })
        }, 
        "getPercentage": function () {
            var myPlayer = document.querySelector('#myVideo');
                
            this.totalLength = myPlayer.duration;   
            this.percentageCompleted = (myPlayer.currentTime / this.totalLength) * 100;

            // is 10   
            if (!this.video10 && this.percentageCompleted.toFixed() == 10) {
                this.video10 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (10%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            
            
            // is 20
            if (!this.video20 && this.percentageCompleted.toFixed() == 20) {
                this.video20 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (20%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 30
            if ((!this.video30) && (this.percentageCompleted.toFixed() == 30)) {
                this.video30 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (30%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 40
            if ((!this.video40) && (this.percentageCompleted.toFixed() == 40)) {
                this.video40 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (40%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 50
            if ((!this.video50) && (this.percentageCompleted.toFixed() == 50)) {
                this.video50 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (50%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 60
            if ((!this.video60) && (this.percentageCompleted.toFixed() == 60)) {
                this.video60 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (60%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 70
            if ((!this.video70) && (this.percentageCompleted.toFixed() == 70)) {
                this.video70 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (70%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 80
            if ((!this.video80) && (this.percentageCompleted.toFixed() == 80)) {
                this.video80 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (80%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 90
            if ((!this.video90) && (this.percentageCompleted.toFixed() == 90)) {
                this.video90 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (90%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
            // is 100
            if ((!this.video99) && (this.percentageCompleted.toFixed() == 99)) {
                this.video99 = true;
                window.dataLayer.push({
                    "category": "Video (clicks)",
                    "action": "Percentile (100%)",
                    "label": "que-es-iqos-3-duo-caracteristicas-y-video",
                    "event": "video"
                })
            }
        },
        "goBack":function(){
             this.datos = false
             this.firstFormChecked = false
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.term = utms.utm_term
                _self.source = "LendingWeb";
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "irADatosDeEnvio": function (){
            setTimeout(function (){
                var form =  $("#form").offset().top
                $("html, body").animate({scrollTop:form}, 'slow');
            },100)
        },
        "focusError": function (){
            setTimeout(function (){
                var errorId =  $("#00N4P00000GOkeM").offset().top
                $("html, body").animate({scrollTop:errorId}, 'slow');
            },100)
        },
        /*
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },
        */
        "checkForm": function (e) {
            console.log("checkform called")
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            // var codeValue = $("#00N4P00000GOkeM").val()
            // console.log(codevalue, "codevalue")
            // console.log(codevalue.length, "codevalue length")
            this.GA_clientId()
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
                this.promCodeselected = "Si"
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode si but field empty")
            }

            // if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == undefined) {
            //     this.promCodeselected = "Si"
            //     this.descuento = "MENOSOLOR20"
            //     console.log(this.descuento, "promcode si but field empty")
            // }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length >= 1) {
                this.promCodeselected = "Si"
                this.validateReferrCode($("#00N4P00000GOkeM").val())
                console.log(this.descuento, "promcode si and pass validation code function")
            }

            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length <= 0) {
                this.descuento = "MENOSOLOR200"
                this.promCodeselected = "Si"
                this.showWarning = false
                console.log(this.descuento, "promcode si but field empty 2")
            }

            if( this.promCode == "No" ){
                this.promCodeselected = "No"
                this.showWarning = false
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode no")
            }

            if(this.promCode == "" && this.firstTimeFormChecked == false ){
                this.promCodeselected = ""
                this.showWarning = false
                this.descuento = "MENOSOLOR200"
                console.log(this.descuento, "promcode not clicked")
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }

            // if( this.utmEqualsB2b == true && this.promCodeselected == "Si" && $("#00N4P00000GOkeM").val().length == 0){
            //     this.descuento = "CAMBIA20"
            //     console.log(this.descuento, "conditional 3 for people comming from utm b2b")
            // }

            if( this.utmEqualsB2b == true && this.promCodeselected == "Si" && $("#00N4P00000GOkeM").val() == undefined && this.userCode == false){
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional 3 for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCodeselected == "Si" && $("#00N4P00000GOkeM").val() != undefined){
                if($("#00N4P00000GOkeM").val().length >= 1){
                    this.validateReferrCode($("#00N4P00000GOkeM").val())
                    this.userCode = true
                //     this.descuento = $("#00N4P00000GOkeM").val()
                // console.log(this.descuento, "conditional 4 for people comming from utm b2b")
                }
                
            } 

            if(this.promCodeselected == "" ){
                this.showWarning = false
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true && this.showWarning == false) {
                console.log("condition when tru", this.promCodeselected)
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.dispositivo = $("#00N4P00000GOkeR").val()
                this.firstTimeFormChecked = true
                _self.datos = true
                // _self.envio()
                _self.promCode = ""
                _self.checkSecondForm(e)
                _self.irADatosDeEnvio()

            } else {
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "checkSecondForm":function(e){
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            
            if(this.firstFormChecked == true){
                if ($("#calle").val().length < 1) {
                    this.errors.push("Ingresa tu calle y número ext.");
                }
    
                if ($("#codigopostal").val().length < 5) {
                    this.errors.push("Ingresa tu código postal");
                }

                if ($("#codigopostal").val().length == 5) {
                    this.validateZipCode($("#codigopostal").val());
                }
    
                if ($("#municipio").val().length < 1) {
                    this.errors.push("Ingresa tu alcaldía / municipio");
                }
    
                if ($("#colonia").val().length < 1) {
                    this.errors.push("Ingresa tu colonia");
                }
    
                // if ($("#estado").val().length < 1) {
                //     this.errors.push("Ingresa tu Estado/Municipio");
                // }
                if(!this.errors.length && this.validZipCode == true){
                    this.estado = $("#estado").val()
                    console.log(this.estado)
                    _self.envio()
                    _self.envioToLp()
                } else {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Failed",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
    
                    e.preventDefault()
                }
            } else {
                this.firstFormChecked = true
            } 
        },
        "validateReferrCode": function(codigoReferido) {
            console.log(codigoReferido.length,"length")
            if(codigoReferido.length == 1 || codigoReferido.length == 2){
                console.log(codigoReferido.length,"length less then 3")
                this.codigoDeReferidoValidado = false
                this.showWarning = true
                this.focusError()
            } else {

                let firstThreeLetters = codigoReferido.slice(0,3)

                if(firstThreeLetters == "MGM" 
                || firstThreeLetters == "EGM" 
                || firstThreeLetters == "B2B" 
                || firstThreeLetters == "RGM" 
                || firstThreeLetters == "IQO"
                || firstThreeLetters == "RET") {
                    this.codigoDeReferidoValidado = true
                    this.showWarning = false
                    this.descuento = codigoReferido
                    console.log(this.descuento, "should be the entered codigo referido 1")
                } else {
                    this.codigoDeReferidoValidado = false
                    this.showWarning = true
                    this.focusError()
                }
            }
            
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
       
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.sourceFromUtm + this.medium;
            //  "&00N4P000008mN2Q="+concatination+
            console.log(this.descuento, "should be the entered codigo referido 1")
            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            if( this.utmEqualsB2b == true && this.promCodeselected == "No"){
                console.log(this.descuento, "fall first condition")
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional 1 for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCodeselected == ""){
                console.log(this.descuento, "fall second condition")
                this.descuento = "CAMBIA21"
                console.log(this.descuento, "conditional 2 for people comming from utm b2b")
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            console.log(_self.descuento, "final")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR"+"&00N4P00000GOgJP="+_self.GAtransactionId+"&00N4P00000GOkeC="+_self.transaction+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                // $(_self.form).find(".loading").remove()
                // _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.GAtransactionId = ""
                _self.promCode = ""
                _self.promCodeselected = ""
                _self.userCode = false
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({ 'event': 'formTrySubmitted' });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "envioToLp": function() {  

            var _self = this

            var camposValores = [{
                apellido: this.apelido,
                direccion: this.direccion,
                dispositivo: this.dispositivo,
                email: this.email,
                nombre: this.nombre,
                telefone: this.telefone,
                orderID: this.transaction,
                calle: this.calle,
                codigopostal: this.codigopostal,
                colonia: this.colonia,
                estado: this.estado,
                municipio: this.municipio,
                nointerno: this.nointerno,
                descuento: this.descuento,
                obs: this.obs,
                dispositivo: this.colorDispositivo
            }]
           
            var settings = {
                "url": "/api/dataentities/LP/documents",
                "type": "POST",
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "data": JSON.stringify(camposValores[0]),
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "Order ID: "+_self.transaction+" \n\n¡Gracias por tu registro!";
            
                _self.apelido= ""
                _self.dispositivo= ""
                _self.email= ""
                _self.nombre= ""
                _self.telefone= ""
                _self.calle= ""
                _self.codigopostal= ""
                _self.colonia= ""
                _self.estado= ""
                _self.municipio= ""
                _self.nointerno= ""
                _self.descuento= ""
                _self.obs= ""
                _self.firstFormChecked = false
                _self.datos = false
                _self.showWarning = null
                
                _self.GetTransaction()

                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)
                    
            })        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        },
        "validateZipCode":function (zipCode) {
            var _self = this
            console.log("validatezipcode function called")
            var codes = [
                "56600",
                "56604",
                "56605",
                "56606",
                "56607",
                "56608",
                "56609",
                "56620",
                "56623",
                "56624",
                "56625",
                "56640",
                "56641",
                "56642",
                "56643",
                "56644",
                "56646",
                "56647",
                "56370",
                "56373",
                "56375",
                "56376",
                "56377",
                "56380",
                "56383",
                "56384",
                "56386",
                "56387",
                "56390",
                "56270",
                "56330",
                "56334",
                "56335",
                "56337",
                "56338",
                "56340",
                "56343",
                "56344",
                "56346",
                "56350",
                "56353",
                "56356",
                "56360",
                "56363",
                "56366",
                "52900",
                "52909",
                "52910",
                "52915",
                "52916",
                "52918",
                "52919",
                "52920",
                "52923",
                "52924",
                "52925",
                "52926",
                "52927",
                "52928",
                "52929",
                "52930",
                "52934",
                "52936",
                "52937",
                "52938",
                "52939",
                "52940",
                "52945",
                "52946",
                "52947",
                "52948",
                "52949",
                "52950",
                "52953",
                "52956",
                "52957",
                "52958",
                "52959",
                "52960",
                "52965",
                "52966",
                "52967",
                "52968",
                "52970",
                "52975",
                "52976",
                "52977",
                "52978",
                "52979",
                "52980",
                "52985",
                "52986",
                "52987",
                "52988",
                "52989",
                "52990",
                "52994",
                "52995",
                "52996",
                "52997",
                "52998",
                "57000",
                "57100",
                "57103",
                "57120",
                "57129",
                "57130",
                "57138",
                "57139",
                "57140",
                "57150",
                "57158",
                "57170",
                "57171",
                "57178",
                "57179",
                "57180",
                "57185",
                "57188",
                "57189",
                "57200",
                "57205",
                "57210",
                "57300",
                "57310",
                "57400",
                "57410",
                "57420",
                "57425",
                "57430",
                "57440",
                "57450",
                "57460",
                "57465",
                "57500",
                "57510",
                "57520",
                "57530",
                "57600",
                "57610",
                "57620",
                "57630",
                "57700",
                "57708",
                "57709",
                "57710",
                "57718",
                "57719",
                "57720",
                "57730",
                "57739",
                "57740",
                "57750",
                "57760",
                "57800",
                "57809",
                "57810",
                "57819",
                "57820",
                "57830",
                "57840",
                "57849",
                "57900",
                "57910",
                "57920",
                "57930",
                "57940",
                "57950",
                "54400",
                "54402",
                "54405",
                "54407",
                "54408",
                "54409",
                "54410",
                "54413",
                "54414",
                "54416",
                "54417",
                "54420",
                "54424",
                "54425",
                "54426",
                "54430",
                "54434",
                "54435",
                "54439",
                "54440",
                "54449",
                "54455",
                "54457",
                "54459",
                "54460",
                "54463",
                "54464",
                "54466",
                "54467",
                "54469",
                "54470",
                "54473",
                "54474",
                "54475",
                "54476",
                "54477",
                "55700",
                "55705",
                "55707",
                "55708",
                "55709",
                "55710",
                "55712",
                "55713",
                "55714",
                "55715",
                "55716",
                "55717",
                "55718",
                "55719",
                "55720",
                "55726",
                "55728",
                "55729",
                "55730",
                "55736",
                "55737",
                "55738",
                "55739",
                "54800",
                "54803",
                "54804",
                "54805",
                "54807",
                "54830",
                "54831",
                "54834",
                "54835",
                "54836",
                "54840",
                "54850",
                "54855",
                "54857",
                "54858",
                "54860",
                "54870",
                "54875",
                "54877",
                "54878",
                "54879",
                "54700",
                "54710",
                "54712",
                "54713",
                "54714",
                "54715",
                "54716",
                "54719",
                "54720",
                "54725",
                "54729",
                "54730",
                "54740",
                "54743",
                "54744",
                "54745",
                "54750",
                "54753",
                "54759",
                "54760",
                "54763",
                "54764",
                "54765",
                "54766",
                "54767",
                "54769",
                "55000",
                "55010",
                "55014",
                "55016",
                "55017",
                "55018",
                "55020",
                "55023",
                "55024",
                "55025",
                "55027",
                "55028",
                "55029",
                "55030",
                "55036",
                "55037",
                "55038",
                "55039",
                "55040",
                "55050",
                "55055",
                "55056",
                "55057",
                "55059",
                "55060",
                "55063",
                "55064",
                "55065",
                "55066",
                "55067",
                "55068",
                "55069",
                "55070",
                "55074",
                "55075",
                "55076",
                "55080",
                "55084",
                "55085",
                "55087",
                "55090",
                "55094",
                "55095",
                "55100",
                "55104",
                "55105",
                "55107",
                "55114",
                "55115",
                "55117",
                "55118",
                "55119",
                "55120",
                "55125",
                "55126",
                "55127",
                "55128",
                "55129",
                "55130",
                "55135",
                "55137",
                "55138",
                "55139",
                "55140",
                "55146",
                "55147",
                "55148",
                "55149",
                "55158",
                "55170",
                "55176",
                "55180",
                "55187",
                "55188",
                "55189",
                "55190",
                "55200",
                "55210",
                "55218",
                "55220",
                "55230",
                "55234",
                "55235",
                "55236",
                "55237",
                "55238",
                "55240",
                "55242",
                "55243",
                "55244",
                "55245",
                "55246",
                "55247",
                "55248",
                "55249",
                "55260",
                "55264",
                "55266",
                "55267",
                "55268",
                "55269",
                "55270",
                "55280",
                "55284",
                "55287",
                "55288",
                "55289",
                "55290",
                "55294",
                "55295",
                "55296",
                "55297",
                "55298",
                "55299",
                "55300",
                "55308",
                "55310",
                "55316",
                "55317",
                "55320",
                "55330",
                "55338",
                "55339",
                "55340",
                "55347",
                "55348",
                "55349",
                "55360",
                "55369",
                "55390",
                "55400",
                "55404",
                "55405",
                "55407",
                "55410",
                "55414",
                "55415",
                "55416",
                "55417",
                "55418",
                "55419",
                "55420",
                "55425",
                "55429",
                "55430",
                "55450",
                "55458",
                "55459",
                "55490",
                "55498",
                "55500",
                "55506",
                "55507",
                "55508",
                "55509",
                "55510",
                "55515",
                "55516",
                "55517",
                "55518",
                "55519",
                "55520",
                "55530",
                "55540",
                "55547",
                "55548",
                "55549",
                "52760",
                "52763",
                "52764",
                "52765",
                "52766",
                "52767",
                "52768",
                "52769",
                "52770",
                "52773",
                "52774",
                "52775",
                "52776",
                "52777",
                "52778",
                "52779",
                "52780",
                "52783",
                "52784",
                "52785",
                "52786",
                "52787",
                "52788",
                "52789",
                "52790",
                "52793",
                "52794",
                "52795",
                "52796",
                "52797",
                "52798",
                "52799",
                "56530",
                "56535",
                "56536",
                "56537",
                "56538",
                "56539",
                "56540",
                "56550",
                "56553",
                "56555",
                "56556",
                "56558",
                "56560",
                "56563",
                "56564",
                "56565",
                "56566",
                "56567",
                "56568",
                "56569",
                "56570",
                "56576",
                "56577",
                "56579",
                "56580",
                "56584",
                "56585",
                "56586",
                "56587",
                "56588",
                "56589",
                "56590",
                "56599",
                "56400",
                "56410",
                "56420",
                "56428",
                "56429",
                "56430",
                "56440",
                "56490",
                "56495",
                "56500",
                "56505",
                "56507",
                "56508",
                "56509",
                "56510",
                "56512",
                "56513",
                "56514",
                "56515",
                "56516",
                "56520",
                "56524",
                "56525",
                "56526",
                "56527",
                "56528",
                "56529",
                "54880",
                "54882",
                "54883",
                "54884",
                "53000",
                "53010",
                "53030",
                "53040",
                "53050",
                "53060",
                "53070",
                "53100",
                "53110",
                "53115",
                "53116",
                "53117",
                "53119",
                "53120",
                "53124",
                "53125",
                "53126",
                "53127",
                "53128",
                "53129",
                "53130",
                "53138",
                "53140",
                "53150",
                "53160",
                "53170",
                "53177",
                "53178",
                "53179",
                "53200",
                "53215",
                "53216",
                "53217",
                "53218",
                "53219",
                "53220",
                "53224",
                "53227",
                "53228",
                "53230",
                "53237",
                "53239",
                "53240",
                "53247",
                "53248",
                "53250",
                "53260",
                "53270",
                "53278",
                "53279",
                "53280",
                "53283",
                "53290",
                "53296",
                "53297",
                "53298",
                "53300",
                "53309",
                "53310",
                "53320",
                "53329",
                "53330",
                "53338",
                "53339",
                "53340",
                "53348",
                "53350",
                "53370",
                "53378",
                "53390",
                "53398",
                "53400",
                "53410",
                "53420",
                "53425",
                "53426",
                "53427",
                "53428",
                "53430",
                "53440",
                "53450",
                "53458",
                "53459",
                "53460",
                "53470",
                "53489",
                "53490",
                "53500",
                "53519",
                "53520",
                "53529",
                "53530",
                "53533",
                "53550",
                "53560",
                "53569",
                "53570",
                "53580",
                "53598",
                "53640",
                "53650",
                "53653",
                "53654",
                "53655",
                "53660",
                "53664",
                "53670",
                "53680",
                "53687",
                "53688",
                "53689",
                "53690",
                "53694",
                "53695",
                "53696",
                "53697",
                "53698",
                "53700",
                "53708",
                "53710",
                "53713",
                "53714",
                "53716",
                "53717",
                "53718",
                "53719",
                "53730",
                "53760",
                "53770",
                "53780",
                "53787",
                "53788",
                "53790",
                '53798',
                "53799",
                "53800",
                "53809",
                "53810",
                "53819",
                "53820",
                "53830",
                "53839",
                "53840",
                "53900",
                "53909",
                "53910",
                "53930",
                "53940",
                "53950",
                "53960",
                "53970",
                '52100',
                '52104',
                "52105",
                "52106",
                "52107",
                "54960",
                "54962",
                "54963",
                "54964",
                "54965",
                "54966",
                "54967",
                "54970",
                "54972",
                "54974",
                "54975",
                '54976',
                "54977",
                "54980",
                "54983",
                "54984",
                "54985",
                "54986",
                "54987",
                "54990",
                "55740",
                '55743',
                '55744',
                "55745",
                "55746",
                '55747',
                "55748",
                '55749',
                "55750",
                "55752",
                '55754',
                "55755",
                "55757",
                "55758",
                "55760",
                "55763",
                '55764',
                '55765',
                '55766',
                '55767',
                "55768",
                '55769',
                '55770',
                "55773",
                '55776',
                '55778',
                '54600',
                '54602',
                '54603',
                '54604',
                "54605",
                "54607",
                '54608',
                '54610',
                "54614",
                "54615",
                '54616',
                "54640",
                '54645',
                '54650',
                '54655',
                '54656',
                "54658",
                '56100',
                "56103",
                "56105",
                "56106",
                "56110",
                "56120",
                "56130",
                '56140',
                '56150',
                "56160",
                '56170',
                '54000',
                "54009",
                '54010',
                '54015',
                '54016',
                '54017',
                '54020',
                '54021',
                '54022',
                '54023',
                "54025",
                "54026",
                '54028',
                "54030",
                '54033',
                '54037',
                "54038",
                '54040',
                '54049',
                '54050',
                "54054",
                "54055",
                "54057",
                "54059",
                "54060",
                "54063",
                "54067",
                "54068",
                "54069",
                "54070",
                "54073",
                "54075",
                "54076",
                "54080",
                "54090",
                "54092",
                "54093",
                "54094",
                "54098",
                "54100",
                "54108",
                "54109",
                "54110",
                "54118",
                "54119",
                "54120",
                "54124",
                "54126",
                "54127",
                "54128",
                "54130",
                "54134",
                "54135",
                "54136",
                "54140",
                "54142",
                "54143",
                "54145",
                "54146",
                "54147",
                "54149",
                "54150",
                "54152",
                "54158",
                "54160",
                "54162",
                "54168",
                "54170",
                "54172",
                "54173",
                "54180",
                "54187",
                "54189",
                "54190",
                "54193",
                "54195",
                "54196",
                "54197",
                "54198",
                "54900",
                "54910",
                "54913",
                "54914",
                "54915",
                "54916",
                "54918",
                "54920",
                "54924",
                "54925",
                "54926",
                "54927",
                "54929",
                "54930",
                "54932",
                "54933",
                "54934",
                "54935",
                "54938",
                "54939",
                "54940",
                "54942",
                "54943",
                "54944",
                "54945",
                "54946",
                "54948",
                "54949",
                "54950",
                "54954",
                "54955",
                "54957",
                "54958",
                "54959",
                "56610",
                "56613",
                "56614",
                "56615",
                "56616",
                "56617",
                "56618",
                "56619",
                "55600",
                "55603",
                "55604",
                "55605",
                "55606",
                "55607",
                "55609",
                "55610",
                "55613",
                "55614",
                "55615",
                "55616",
                "55619",
                "55620",
                "55628",
                "55629",
                "55630",
                "55634",
                "55635",
                "55636",
                "55637",
                "55640",
                "52500",
                "52503",
                "52504",
                "52505",
                "52506",
                "53229",
                "53658",
                "53659",
                "54448",
                "54539",
                "54570",
                "54571",
                "54573",
                "54574",
                "54575",
                "54660",
                "54665",
                "54666",
                "54667",
                "54668",
                "54770",
                "54783",
                "54784",
                "54785",
                "54786",
                "54890",
                "54893",
                "54894",
                "55643",
                "55644",
                "55646",
                "55785",
                "55786",
                "55787",
                "55790",
                "55793",
                "55794",
                "55795",
                "55796",
                "55797",
                "55799",
                "55800",
                "55803",
                "55804",
                "55805",
                "55806",
                "55807",
                "55810",
                "55816",
                "55817",
                "55820",
                "55823",
                "55824",
                "55825",
                "55826",
                "55829",
                "55830",
                "55833",
                "55834",
                "55835",
                "55836",
                "55837",
                "55838",
                "55840",
                "55843",
                "55844",
                "55845",
                "55846",
                "55847",
                "55850",
                "55852",
                "55853",
                "55854",
                "55855",
                "55856",
                "55859",
                "55870",
                "55873",
                "55874",
                "55875",
                "55877",
                "55878",
                "55880",
                "55882",
                "55883",
                "55884",
                "55885",
                "55886",
                "55887",
                "55888",
                "55890",
                "55893",
                "55894",
                "55895",
                "55899",
                "55900",
                "55913",
                "55914",
                "55916",
                "55920",
                "55923",
                "55924",
                "55925",
                "55926",
                "55927",
                "55930",
                "55934",
                "55935",
                "55936",
                "55937",
                "55940",
                "55943",
                "55950",
                "55952",
                "55954",
                "55955",
                "55956",
                "55960",
                "55963",
                "55965",
                "55966",
                "55970",
                "55974",
                "55975",
                "55976",
                "55977",
                "55978",
                "56000",
                "56003",
                "56004",
                "56005",
                "56006",
                "56007",
                "56010",
                "56020",
                "56023",
                "56024",
                "56030",
                "56033",
                "56034",
                "56035",
                "56036",
                "56037",
                "56038",
                "56040",
                "56050",
                "56053",
                "56054",
                "56055",
                "56056",
                "56057",
                "56070",
                "56074",
                "56077",
                "56080",
                "56083",
                "56085",
                "56086",
                "56087",
                "56093",
                "56094",
                "56096",
                "56200",
                "56203",
                "56204",
                "56205",
                "56207",
                "56208",
                "56210",
                "56213",
                "56214",
                "56215",
                "56216",
                "56217",
                "56220",
                "56223",
                "56224",
                "56225",
                "56226",
                "56227",
                "56230",
                "56233",
                "56235",
                "56236",
                "56237",
                "56240",
                "56243",
                "56244",
                "56245",
                "56246",
                "56247",
                "56250",
                "56253",
                "56254",
                "56255",
                "56256",
                "56257",
                "56260",
                "56263",
                "56264",
                "56265",
                "56266",
                "56267",
                "56268",
                "56272",
                "56273",
                "56274",
                "56280",
                "56300",
                "56303",
                "56304",
                "56305",
                "56306",
                "56310",
                "56314",
                "56315",
                "56396",
                "01000",
                "01010",
                "01020",
                "01030",
                "01040",
                "01049",
                "01050",
                "01060",
                "01070",
                "01080",
                "01089",
                "01090",
                "01100",
                "01109",
                "01110",
                "01120",
                "01125",
                "01130",
                "01139",
                "01140",
                "01150",
                "01160",
                "01170",
                "01180",
                "01200",
                "01210",
                "01219",
                "01220",
                "01230",
                "01239",
                "01240",
                "01250",
                "01259",
                "01260",
                "01269",
                "01270",
                "01275",
                "01276",
                "01278",
                "01279",
                "01280",
                "01285",
                "01289",
                "01290",
                "01296",
                "01298",
                "01299",
                "01310",
                "01320",
                "01330",
                "01340",
                "01376",
                "01377",
                "01389",
                "01400",
                "01407",
                "01408",
                "01410",
                "01419",
                "01420",
                "01430",
                "01450",
                "01460",
                "01470",
                "01480",
                "01490",
                "01500",
                "01509",
                "01510",
                "01520",
                "01530",
                "01538",
                "01539",
                "01540",
                "01548",
                "01549",
                "01550",
                "01560",
                "01566",
                "01569",
                "01588",
                "01590",
                "01600",
                "01610",
                "01618",
                "01619",
                "01620",
                "01630",
                "01640",
                "01645",
                "01650",
                "01700",
                "01708",
                "01710",
                "01720",
                "01729",
                "01730",
                "01740",
                "01750",
                "01759",
                "01760",
                "01770",
                "01780",
                "01789",
                "01790",
                "01800",
                "01807",
                "01810",
                "01820",
                "01830",
                "01840",
                "01849",
                "01857",
                "01859",
                "01860",
                "01863",
                "01870",
                "01900",
                "01904",
                "02000",
                "02010",
                "02020",
                "02040",
                "02050",
                "02060",
                "02070",
                "02080",
                "02090",
                "02099",
                "02100",
                "02120",
                "02128",
                "02129",
                "02130",
                "02140",
                "02150",
                "02160",
                "02200",
                "02230",
                "02240",
                "02250",
                "02300",
                "02310",
                "02320",
                "02330",
                "02340",
                "02360",
                "02400",
                "02410",
                "02420",
                "02440",
                "02459",
                "02460",
                "02470",
                "02480",
                "02490",
                "02500",
                "02519",
                "02520",
                "02530",
                "02600",
                "02630",
                "02640",
                "02650",
                "02660",
                "02670",
                "02680",
                "02700",
                "02710",
                "02719",
                "02720",
                "02730",
                "02750",
                "02760",
                "02770",
                "02780",
                "02790",
                "02800",
                "02810",
                "02830",
                "02840",
                "02860",
                "02870",
                "02900",
                "02910",
                "02920",
                "02930",
                "02940",
                "02950",
                "02960",
                "02970",
                "02980",
                "02990",
                "03000",
                "03010",
                "03020",
                "03023",
                "03100",
                "03103",
                "03104",
                "03200",
                "03230",
                "03240",
                "03300",
                "03303",
                "03310",
                "03320",
                "03330",
                "03340",
                "03400",
                "03410",
                "03420",
                "03430",
                "03440",
                "03500",
                "03510",
                "03520",
                "03530",
                "03540",
                "03550",
                "03560",
                "03570",
                "03580",
                "03590",
                "03600",
                "03610",
                "03620",
                "03630",
                "03640",
                "03650",
                "03660",
                "03700",
                "03710",
                "03720",
                "03730",
                "03740",
                "03800",
                "03810",
                "03820",
                "03840",
                "03900",
                "03910",
                "03920",
                "03930",
                "03940",
                "04000",
                "04010",
                "04020",
                "04030",
                "04040",
                "04100",
                "04120",
                "04200",
                "04210",
                "04230",
                "04240",
                "04250",
                "04260",
                "04300",
                "04310",
                "04318",
                "04320",
                "04330",
                "04340",
                "04360",
                "04369",
                "04370",
                "04380",
                "04390",
                "04400",
                "04410",
                "04420",
                "04440",
                "04450",
                "04460",
                "04470",
                "04480",
                "04489",
                "04490",
                "04500",
                "04510",
                "04519",
                "04530",
                "04600",
                "04610",
                "04620",
                "04630",
                "04640",
                "04650",
                "04660",
                "04700",
                "04710",
                "04730",
                "04739",
                "04800",
                "04810",
                "04815",
                "04830",
                "04840",
                "04870",
                "04890",
                "04899",
                "04909",
                "04910",
                "04918",
                "04919",
                "04920",
                "04929",
                "04930",
                "04938",
                "04939",
                "04940",
                "04950",
                "04960",
                "04970",
                "04980",
                "05000",
                "05010",
                "05020",
                "05030",
                "05039",
                "05050",
                "05100",
                "05110",
                "05118",
                "05119",
                "05120",
                "05129",
                "05200",
                "05219",
                "05220",
                "05230",
                "05240",
                "05260",
                "05269",
                "05270",
                "05280",
                "05310",
                "05320",
                "05330",
                "05348",
                "05360",
                "05370",
                "05379",
                "05400",
                "05410",
                "05500",
                "05520",
                "05530",
                "05600",
                "05610",
                "05700",
                "05710",
                "05730",
                "05750",
                "05760",
                "05780",
                "06000",
                "06010",
                "06020",
                "06030",
                "06040",
                "06050",
                "06060",
                "06070",
                "06080",
                "06090",
                "06100",
                "06140",
                "06170",
                "06200",
                "06220",
                "06240",
                "06250",
                "06270",
                "06280",
                "06300",
                "06350",
                "06400",
                "06430",
                "06450",
                "06470",
                "06500",
                "06600",
                "06700",
                "06720",
                "06760",
                "06780",
                "06800",
                "06820",
                "06840",
                "06850",
                "06860",
                "06870",
                "06880",
                "06890",
                "06900",
                "06920",
                "07000",
                "07010",
                "07020",
                "07040",
                "07050",
                "07058",
                "07060",
                "07069",
                "07070",
                "07080",
                "07089",
                "07090",
                "07100",
                "07109",
                "07110",
                "07119",
                "07130",
                "07140",
                "07144",
                "07149",
                "07150",
                "07160",
                "07164",
                "07170",
                "07180",
                "07183",
                "07187",
                "07188",
                "07189",
                "07190",
                "07199",
                "07200",
                "07207",
                "07209",
                "07210",
                "07214",
                "07220",
                "07224",
                "07230",
                "07239",
                "07240",
                "07250",
                "07259",
                "07268",
                "07270",
                "07279",
                "07280",
                "07290",
                "07300",
                "07310",
                "07320",
                "07330",
                "07340",
                "07350",
                "07359",
                "07360",
                "07363",
                "07369",
                "07370",
                "07380",
                "07400",
                "07410",
                "07420",
                "07430",
                "07440",
                "07450",
                "07455",
                "07456",
                "07460",
                "07469",
                "07470",
                "07480",
                "07500",
                "07509",
                "07510",
                "07520",
                "07530",
                "07540",
                "07550",
                "07560",
                "07570",
                "07580",
                "07600",
                "07620",
                "07630",
                "07640",
                "07650",
                "07670",
                "07680",
                "07700",
                "07707",
                "07708",
                "07720",
                "07730",
                "07739",
                "07740",
                "07750",
                "07754",
                "07755",
                "07760",
                "07770",
                "07780",
                "07790",
                "07800",
                "07810",
                "07820",
                "07830",
                "07838",
                "07839",
                "07840",
                "07850",
                "07858",
                "07859",
                "07860",
                "07869",
                "07870",
                "07880",
                "07889",
                "07890",
                "07899",
                "07900",
                "07910",
                "07918",
                "07919",
                "07920",
                "07930",
                "07939",
                "07940",
                "07950",
                "07960",
                "07969",
                "07970",
                "07979",
                "07980",
                "07990",
                "08000",
                "08010",
                "08020",
                "08030",
                "08040",
                "08100",
                "08200",
                "08210",
                "08220",
                "08230",
                "08240",
                "08300",
                "08310",
                "08320",
                "08400",
                "08420",
                "08500",
                "08510",
                "08600",
                "08610",
                "08620",
                "08650",
                "08700",
                "08710",
                "08720",
                "08730",
                "08760",
                "08770",
                "08800",
                "08810",
                "08830",
                "08840",
                "08900",
                "08910",
                "08920",
                "08930",
                "09000",
                "09010",
                "09020",
                "09030",
                "09040",
                "09060",
                "09070",
                "09080",
                "09089",
                "09090",
                "09099",
                "09100",
                "09130",
                "09140",
                "09180",
                "09200",
                "09208",
                "09209",
                "09210",
                "09220",
                "09230",
                "09239",
                "09240",
                "09250",
                "09260",
                "09270",
                "09280",
                "09290",
                "09300",
                "09310",
                "09319",
                "09320",
                "09350",
                "09359",
                "09360",
                "09400",
                "09410",
                "09420",
                "09429",
                "09430",
                "09438",
                "09440",
                "09450",
                "09460",
                "09470",
                "09479",
                "09480",
                "09500",
                "09510",
                "09520",
                "09530",
                "09550",
                "09560",
                "09570",
                "09578",
                "09600",
                "09608",
                "09609",
                "09620",
                "09630",
                "09637",
                "09638",
                "09640",
                "09648",
                "09660",
                "09670",
                "09680",
                "09689",
                "09690",
                "09696",
                "09698",
                "09700",
                "09704",
                "09705",
                "09706",
                "09708",
                "09709",
                "09710",
                "09720",
                "09730",
                "09740",
                "09750",
                "09760",
                "09769",
                "09770",
                "09780",
                "09790",
                "09800",
                "09810",
                "09819",
                "09820",
                "09828",
                "09829",
                "09830",
                "09837",
                "09838",
                "09839",
                "09840",
                "09849",
                "09850",
                "09856",
                "09858",
                "09859",
                "09860",
                "09868",
                "09870",
                "09880",
                "09890",
                "09897",
                "09900",
                "09910",
                "09920",
                "09930",
                "09940",
                "09960",
                "09969",
                "09970",
                "10000",
                "10010",
                "10020",
                "10130",
                "10200",
                "10300",
                "10320",
                "10330",
                "10340",
                "10350",
                "10360",
                "10368",
                "10369",
                "10370",
                "10378",
                "10379",
                "10380",
                "10400",
                "10500",
                "10580",
                "10600",
                "10610",
                "10620",
                "10630",
                "10640",
                "10660",
                "10700",
                "10710",
                "10800",
                "10810",
                "10820",
                "10830",
                "10840",
                "10900",
                "10910",
                "10920",
                "10926",
                "11000",
                "11040",
                "11100",
                "11200",
                "11210",
                "11220",
                "11230",
                "11240",
                "11250",
                "11260",
                "11270",
                "11280",
                "11289",
                "11290",
                "11300",
                "11310",
                "11320",
                "11330",
                "11340",
                "11350",
                "11360",
                "11370",
                "11400",
                "11410",
                "11420",
                "11430",
                "11440",
                "11450",
                "11460",
                "11470",
                "11480",
                "11489",
                "11490",
                "11500",
                "11510",
                "11520",
                "11529",
                "11530",
                "11540",
                "11550",
                "11560",
                "11580",
                "11590",
                "11600",
                "11610",
                "11619",
                "11650",
                "11700",
                "11800",
                "11810",
                "11820",
                "11830",
                "11840",
                "11850",
                "11860",
                "11870",
                "11910",
                "11920",
                "11930",
                "11950",
                "12000",
                "12070",
                "12080",
                "12100",
                "12110",
                "12200",
                "12250",
                "12300",
                "12400",
                "12410",
                "12500",
                "12600",
                "12700",
                "12800",
                "12910",
                "12920",
                "12930",
                "12940",
                "12950",
                "13000",
                "13010",
                "13020",
                "13030",
                "13040",
                "13050",
                "13060",
                "13070",
                "13080",
                "13090",
                "13093",
                "13094",
                "13099",
                "13100",
                "13110",
                "13119",
                "13120",
                "13123",
                "13129",
                "13150",
                "13180",
                "13200",
                "13210",
                "13219",
                "13220",
                "13230",
                "13250",
                "13270",
                "13273",
                "13278",
                "13280",
                "13300",
                "13310",
                "13315",
                "13319",
                "13360",
                "13400",
                "13410",
                "13419",
                "13420",
                "13430",
                "13440",
                "13450",
                "13460",
                "13508",
                "13509",
                "13510",
                "13520",
                "13529",
                "13530",
                "13540",
                "13545",
                "13546",
                "13549",
                "13550",
                "13600",
                "13610",
                "13625",
                "13630",
                "13640",
                "13700",
                "14000",
                "14010",
                "14020",
                "14030",
                "14039",
                "14040",
                "14049",
                "14050",
                "14060",
                "14070",
                "14080",
                "14090",
                "14100",
                "14108",
                "14110",
                "14120",
                "14140",
                "14150",
                "14160",
                "14200",
                "14208",
                "14209",
                "14210",
                "14219",
                "14220",
                "14230",
                "14239",
                "14240",
                "14248",
                "14250",
                "14260",
                "14266",
                "14267",
                "14268",
                "14269",
                "14270",
                "14273",
                "14275",
                "14276",
                "14300",
                "14308",
                "14310",
                "14320",
                "14325",
                "14326",
                "14330",
                "14340",
                "14350",
                "14357",
                "14360",
                "14370",
                "14376",
                "14377",
                "14380",
                "14386",
                "14387",
                "14388",
                "14389",
                "14390",
                "14400",
                "14406",
                "14408",
                "14409",
                "14410",
                "14420",
                "14426",
                "14427",
                "14429",
                "14430",
                "14438",
                "14439",
                "14440",
                "14449",
                "14456",
                "14460",
                "14470",
                "14476",
                "14479",
                "14480",
                "14490",
                "14500",
                "14520",
                "14529",
                "14550",
                "14600",
                "14608",
                "14609",
                "14610",
                "14620",
                "14629",
                "14630",
                "14640",
                "14643",
                "14646",
                "14647",
                "14650",
                "14653",
                "14654",
                "14655",
                "14657",
                "14658",
                "14659",
                "14700",
                "14710",
                "14720",
                "14730",
                "14734",
                "14735",
                "14737",
                "14738",
                "14739",
                "14740",
                "14748",
                "14749",
                "14750",
                "14760",
                "14780",
                "14790",
                "14900",
                "15000",
                "15010",
                "15020",
                "15100",
                "15200",
                "15210",
                "15220",
                "15230",
                "15240",
                "15250",
                "15260",
                "15270",
                "15280",
                "15290",
                "15300",
                "15309",
                "15310",
                "15320",
                "15330",
                "15339",
                "15340",
                "15350",
                "15370",
                "15380",
                "15390",
                "15400",
                "15410",
                "15420",
                "15430",
                "15440",
                "15450",
                "15460",
                "15470",
                "15500",
                "15510",
                "15520",
                "15530",
                "15540",
                "15600",
                "15610",
                "15620",
                "15630",
                "15640",
                "15650",
                "15660",
                "15670",
                "15680",
                "15700",
                "15710",
                "15730",
                "15740",
                "15750",
                "15800",
                "15810",
                "15820",
                "15830",
                "15840",
                "15850",
                "15860",
                "15870",
                "15900",
                "15960",
                "15970",
                "15980",
                "15990",
                "16000",
                "16010",
                "16020",
                "16029",
                "16030",
                "16034",
                "16035",
                "16036",
                "16038",
                "16040",
                "16050",
                "16059",
                "16060",
                "16070",
                "16080",
                "16090",
                "16100",
                "16200",
                "16210",
                "16300",
                "16310",
                "16320",
                "16340",
                "16400",
                "16410",
                "16420",
                "16428",
                "16429",
                "16430",
                "16440",
                "16443",
                "16450",
                "16457",
                "16459",
                "16500",
                "16513",
                "16514",
                "16520",
                "16530",
                "16533",
                "16550",
                "16600",
                "16604",
                "16605",
                "16606",
                "16607",
                "16609",
                "16610",
                "16614",
                "16615",
                "16616",
                "16617",
                "16620",
                "16629",
                "16630",
                "16640",
                "16710",
                "16720",
                "16739",
                "16740",
                "16749",
                "16750",
                "16770",
                "16776",
                "16780",
                "16797",
                "16799",
                "16800",
                "16810",
                "16813",
                "16840",
                "16850",
                "16860",
                "16880",
                "16900"
            ]
            
            var totalCodes = codes.length - 1
            console.log(totalCodes)
            for (let i = 0; i < codes.length; i++) {
                
                if (zipCode == codes[i]) {
                    console.log(zipCode, codes[i])
                    console.log("matched")
                    this.validZipCode = true
                    this.showWarningForInvalidZipCode = false
                    break
                } 
                if (totalCodes == [i]) {
                    console.log(zipCode, codes[i])
                    if (zipCode != codes[i]) {
                        console.log("not matched")
                        _self.validZipCode = false
                        _self.showWarningForInvalidZipCode = true
                    setTimeout(function () {
                        _self.showWarningForInvalidZipCode = false
                    },2000)
                    }
                }
            }
        }
    },
    'mounted': function(){
        var _self =  this
        //_self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.video()
        _self.seletorSku()
        _self.GetTransaction()
        window.onresize = () => {
            _self.screen = window.innerWidth;
        };
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        // Do stuff when the verification is throttled
                    }
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        $(document).ready(function ($) {

            var owl = $("#owl-demo-2");
    
            owl.owlCarousel({
                autoplay: true,
                autoplayTimeout: 1000,
                autoplayHoverPause: true,
                items: 3,
                loop: true,
                center: false,
                rewind: false,
                mouseDrag: true,
                touchDrag: true,
                pullDrag: true,
                freeDrag: false,
                margin: 0,
                stagePadding: 0,
                merge: false,
                mergeFit: true,
                autoWidth: false,
                startPosition: 0,
                rtl: false,
                smartSpeed: 250,
                fluidSpeed: false,
                dragEndSpeed: false,
                responsive: {
                    0: {
                        items: 1
                        // nav: true
                    },
                    480: {
                        items: 2,
                        nav: false
                    },
                    768: {
                        items: 3,
                        // nav: true,
                        loop: false
                    },
                    992: {
                        items: 4,
                        // nav: true,
                        loop: false
                    }
                },
                responsiveRefreshRate: 200,
                responsiveBaseElement: window,
                fallbackEasing: "swing",
                info: false,
                nestedItemSelector: false,
                itemElement: "div",
                stageElement: "div",
                refreshClass: "owl-refresh",
                loadedClass: "owl-loaded",
                loadingClass: "owl-loading",
                rtlClass: "owl-rtl",
                responsiveClass: "owl-responsive",
                dragClass: "owl-drag",
                itemClass: "owl-item",
                stageClass: "owl-stage",
                stageOuterClass: "owl-stage-outer",
                grabClass: "owl-grab",
                autoHeight: false,
                lazyLoad: false
            });
        
            $(".next").click(function () {
                owl.trigger("owl.next");
            });
            $(".prev").click(function () {
                owl.trigger("owl.prev");
            });
        });
        $(document).ready(function (){
            $("#toFormTop").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#first_name").offset().top
                }, 2000);
            });
            $("#toFormBottom").click(function (){
                console.log("should work")
                $('html, body').animate({
                    scrollTop: $("#first_name").offset().top
                }, 2000);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});


var $agendagettritalAdminTest = `<div>
            <header v-bind:class="{ pagina }">
                <div class="container">
                    <img src="/arquivos/iqoslogo.png" alt="iqos" title="iqos" />
                </div>
            </header>
            
            <section id="iqos-form" class="claro">
                
                <div class="two" v-if="acesso.length > 0">
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" >

                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" maxlength="40" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" class="field" maxlength="80" name="email" size="20" type="text" />

                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                        <the-mask class="field" type="text" id="phone" maxlength="40" name="phone" :mask="['##########']" :value="telefone" />

                        <label class="lb-input" for="00N4P00000GOkeR">Dispositivo*</label>
                        <select class="color-dispositivo" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo" >
                            <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>
                            <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                        </select>

                        <label class="lb-input" for="descuento">¿Tienes un código promocional?</label>
                        <input id="descuento" class="field" maxlength="80" name="descuento" size="20" type="text" />

                        <label class="lb-input" for="calle">Calle y número ext.*</label>
                        <input id="calle" class="field" maxlength="80" name="calle" size="20" type="text" />

                        <label class="lb-input" for="nointerno">No. Int / Referencias</label>
                        <input id="nointerno" class="field" maxlength="80" name="nointerno" size="20" type="text" />

                        <label class="lb-input" for="codigopostal">Código Postal*</label>
                        <the-mask class="field" type="text" id="codigopostal" maxlength="40" name="codigopostal" :value="codigopostal" :mask="['#####']" />

                        <label class="lb-input" for="estado">Estado</label>
                        <input id="estado" class="field" maxlength="80" name="estado" size="20" type="text" />

                        <label class="lb-input" for="municipio">Alcaldía / Municipio*</label>
                        <input id="municipio" class="field" maxlength="80" name="municipio" size="20" type="text" />

                        <label class="lb-input" for="colonia">Colonia*</label>
                        <input id="colonia" class="field" maxlength="80" name="colonia" size="20" type="text" />

                        <label class="lb-input" for="obs">¿Entre qué calles está?</label>
                        <textarea id="obs" class="field" maxlength="80" name="obs" size="20" type="text" />

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition> 

                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
                </div>
                
                <div class="two" v-else>
                    <h5>Tu no tienes acceso a esta página</h5>
                </div>
            </section>
            </div>`;
Vue.component('agendagettrital-try_admin_test-component', {
    'template': $agendagettritalAdminTest,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "orderID": "",
            "dispositivo": "",
            "calle": "",
            "codigopostal": "",
            "colonia": "",
            "estado": "",
            "municipio": "",
            "nointerno": "",
            "descuento": "",
            "obs": "",
            "form": "#form",
            "lista": window.lista,
            "acesso": [],
            "source":"LendingCSC"
        };

    },
    'methods': {
        "liberarAcesso": function() {
            var _self = this
            vtexjs.checkout.getOrderForm().done(function(orderForm) {

                var totalList = _self.lista.length - 1;


                for (let i = 0; i < _self.lista.length; i++) {
                    if (orderForm.loggedIn && orderForm.clientProfileData.email == _self.lista[i]) {
                        _self.acesso= ["liberado"]
                        break
                    }

                    if (totalList == [i]) {
                        if (orderForm.loggedIn && orderForm.clientProfileData.email != _self.lista[i]) {
                            _self.acesso=[]
                        }
                    }
                }
            });
        },
        "getOrderid": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.orderID = "PMI-"+date
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#calle").val().length < 1) {
                this.errors.push("Ingresa tu calle y número ext.");
            }

            if ($("#codigopostal").val().length < 1) {
                this.errors.push("Ingresa tu código postal");
            }

            if ($("#municipio").val().length < 1) {
                this.errors.push("Ingresa tu alcaldía / municipio");
            }

            if ($("#colonia").val().length < 1) {
                this.errors.push("Ingresa tu colonia");
            }

            if (!this.errors.length) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.dispositivo = $("#00N4P00000GOkeR").val()
                this.calle= $("#calle").val()
                this.codigopostal= $("#codigopostal").val()
                this.colonia= $("#colonia").val()
                this.estado= $("#estado").val()
                this.municipio= $("#municipio").val()
                this.nointerno= $("#nointerno").val()
                this.descuento = $("#descuento").val()
                this.obs= $("#obs").val()

                _self.envio()
                
            } else {
                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  

            var _self = this
            if($("#descuento").val().length == 0){
                this.descuento = "RETOCT20"
            }
            var camposValores = [{
                apellido: this.apelido,
                direccion: this.direccion,
                dispositivo: this.dispositivo,
                email: this.email,
                nombre: this.nombre,
                telefone: this.telefone,
                orderID: this.orderID,
                calle: this.calle,
                codigopostal: this.codigopostal,
                colonia: this.colonia,
                estado: this.estado,
                municipio: this.municipio,
                nointerno: this.nointerno,
                descuento: this.descuento,
                obs: this.obs
            }]
            
            var settings = {
                "url": "/api/dataentities/LP/documents",
                "type": "POST",
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "data": JSON.stringify(camposValores[0]),
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                console.log(_self.email,"correo enviado")
                _self.envio_sales_force()
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "Order ID: "+_self.orderID+" \n\n¡Gracias por tu registro!";
            
                _self.apelido= ""
                _self.dispositivo= ""
                _self.email= ""
                _self.nombre= ""
                _self.telefone= ""
                _self.calle= ""
                _self.codigopostal= ""
                _self.colonia= ""
                _self.estado= ""
                _self.municipio= ""
                _self.nointerno= ""
                _self.descuento= ""
                _self.obs= ""
                
                _self.getOrderid()

                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)
                    
            })        
        },
        "envio_sales_force": function() {  
            
            // if ($("#00N4P000008mN8e").prop("checked") == true){
            //     this.publicidad = true
            // }

            var _self = this

            // if ($("#00N4P000008mN8e").prop("checked") == true){
            //     _self.publicidad = "1"
            // } else {
            //     _self.publicidad = "0"
            // }
            
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()

            settings_salesforce = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN13=FUMADOR&00N4P00000GOkeC="+_self.orderID+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GOkeH=1"+"&00N4P000008mN8e=1"+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
            }

            _self.ajaxrequest2(settings_salesforce, function() {
                console.log(_self.email,"correo enviado")
                console.log("after ajax call",_self.orderID)
                _self.declaracao = false
                _self.publicidad = false
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                try {
                    window.dataLayer.push({
                        "category": "Form try-coach testing",
                        "action": "Success",
                        "label": "MX",
                        "event": "try-coach"
                    })
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    console.log(response)
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    console.log(err)
                    if (callback) {
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "ajaxrequest2": function(settings_salesforce, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings_salesforce)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {                        
                        fn(false, err);
                    }
                })
    
            return null;
        }
    },
    'mounted': function(){
        this.getOrderid()
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        _self.paginaStatus()
        _self.liberarAcesso()
    }
});


var $agendagettrital_try_coach_test = `<div>
            <header v-bind:class="{ pagina }">
                <div class="container">
                    <img src="/arquivos/iqoslogo.png" alt="iqos" title="iqos" />
                </div>
            </header>
            
            <section id="iqos-form" class="claro">
                
                <div class="two" v-if="acesso.length > 0">
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" >
             
                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" maxlength="40" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" class="field" maxlength="80" name="email" size="20" type="text" />

                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                        <the-mask class="field" type="text" id="phone" maxlength="40" name="phone" :mask="['##########']" :value="telefone" />

                        <label class="lb-input" for="00N4P00000GOkeR">Dispositivo*</label>
                        <select class="color-dispositivo" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo" >
                            <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>
                            <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                        </select>

                        <label class="lb-input" for="descuento">¿Tienes un código promocional?</label>
                        <input id="descuento" class="field" maxlength="80" name="descuento" size="20" type="text" />

                        <label class="lb-input" for="calle">Calle y número ext.*</label>
                        <input id="calle" class="field" maxlength="80" name="calle" size="20" type="text" />

                        <label class="lb-input" for="nointerno">No. Int / Referencias</label>
                        <input id="nointerno" class="field" maxlength="80" name="nointerno" size="20" type="text" />

                        <label class="lb-input" for="codigopostal">Código Postal*</label>
                        <the-mask class="field" type="text" id="codigopostal" maxlength="40" name="codigopostal" :value="codigopostal" :mask="['#####']" />

                        <label class="lb-input" for="estado">Estado</label>
                        <input id="estado" class="field" maxlength="80" name="estado" size="20" type="text" />

                        <label class="lb-input" for="municipio">Alcaldía / Municipio*</label>
                        <input id="municipio" class="field" maxlength="80" name="municipio" size="20" type="text" />

                        <label class="lb-input" for="colonia">Colonia*</label>
                        <input id="colonia" class="field" maxlength="80" name="colonia" size="20" type="text" />

                        <label class="lb-input" for="obs">¿Entre qué calles está?</label>
                        <textarea id="obs" class="field" maxlength="80" name="obs" size="20" type="text" />

                        <label class="lb-input" style="margin-bottom:20px">Género</label>
                        <div class="field" style="display: flex;max-width: inherit;align-items: baseline;">
                            <label for="hombre">Hombre</label>
                            <input type="radio" id="hombre" value="Masculino" v-model="genero">
                    
                            <label for="Mujer">Mujer</label>
                            <input type="radio" id="mujer" value="Femenino" v-model="genero">
                        </div>

                        <label class="lb-input" for="marcaCigarros">Marca de cigarros</label>
                        <select id="marcaCigarros" v-model="marcaCigarros">
                            <option disabled value="">Seleccionar marca de cigarros</option>
                            <option>Marlboro</option>
                            <option>Lucky Strike</option>
                            <option>Pall Mall</option>
                            <option>Camel</option>
                            <option>Benson & Hedges </option>
                            <option>Otros</option>
                        </select>

                        <label class="lb-input" style="margin-bottom:20px">¿Compro HEETS?</label>
                        <div class="field" style="display: flex;max-width: inherit;align-items: baseline;">
                            <label for="si">Si</label>
                            <input type="radio" id="si" value="Si" v-model="comproHeets">
                    
                            <label for="no">No</label>
                            <input type="radio" id="no" value="No" v-model="comproHeets">
                        </div>

                        <div v-if="comproHeets == 'Si'">
                            <label class="lb-input" for="amberInicial">Amber Inicial</label>
                            <input id="amberInicial" class="field" maxlength="200" name="amberInicial" size="20" v-model="amberInicial"  type="number" />

                            <label class="lb-input" for="siennaInicial">Sienna Inicial</label>
                            <input id="siennaInicial" class="field" maxlength="200" name="siennaInicial" size="20" v-model="siennaInicial" type="number" />

                            <label class="lb-input" for="turquoiseInicial">Turquoise Inicial</label>
                            <input id="turquoiseInicial" class="field" maxlength="200" name="turquoiseInicial" size="20" v-model="turquoiseInicial" type="number" />

                            <label class="lb-input" for="blueInicial">Blue Inicial</label>
                            <input id="blueInicial" class="field" maxlength="200" name="blueInicial" size="20" v-model="blueInicial" type="number" />

                            <label class="lb-input" for="purpleInicial">Purple Inicial</label>
                            <input id="purpleInicial" class="field" maxlength="200" name="purpleInicial" size="20" v-model="purpleInicial" type="number" />

                            <label class="lb-input" for="yellowInicial">Yellow Inicial</label>
                            <input id="yellowInicial" class="field" maxlength="200" name="yellowInicial" size="20" v-model="yellowInicial" type="number" />
                            
                        </div>

                        <label class="lb-input" for="llamada1fecha">Llamada 1 fecha*</label>
                        <input class="field" type="date" maxlength="80" size="20" id="llamada1fecha" name="llamada1fecha" value="" v-model="llamada1fecha" min="2020-01-01" />

                        <label class="lb-input" for="llamada1comentarios">Comentarios llamada 1</label>
                        <textarea v-model="llamada1comentarios" id="llamada1comentarios" class="field" maxlength="800" name="llamada1comentarios" size="20" type="text" />

                        

                        
                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                            <input class="TRANSACTION_ID" :value="orderID" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                            <input class="Checkbox_Lending"  id="00N4P00000GOkeH" name="00N4P00000GOkeH" type="checkbox" value="1" />
                        </div>

                        <label class="lb-input" for="coach_alta_email">Coach Alta Email</label>
                        <input :value="loged_in_mail" id="coach_alta_email" class="field" maxlength="80" name="coach_alta_email" size="20" data-nb type="text" />

                        <label class="lb-input" for="coach_seguimiento_email">Coach Seguimiento Email</label>
                        <input id="coach_seguimiento_email" class="field" maxlength="80" name="coach_seguimiento_email" data-nb size="20" type="text" />

                        <fieldset>
                            <label for="aceptoterminos">
                                <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                <span>Acepto <a href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                            </label>

                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition> 

                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
                </div>
                
                <div class="two" v-else>
                    <h5>Tu no tienes acceso a esta página</h5>
                </div>
            </section>
            </div>`;
Vue.component('agendagettrital-try_coach_test-component', {
    'template': $agendagettrital_try_coach_test,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "coach_alta_email": "",
            "coach_seguimiento_email": "",
            "orderID": "",
            "dispositivo": "",
            "calle": "",
            "codigopostal": "",
            "colonia": "",
            "estado": "",
            "municipio": "",
            "nointerno": "",
            "descuento": "",
            "obs": "",
            "form": "#form",
            "lista": window.lista_coach,
            "acesso": [],
            "source":"LendingCoach",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "declaracao": false,
            "publicidad": false,
            "loged_in_mail": "",
            "llamada1fecha":"",
            "llamada1comentarios":"",
            "estatusOrden":"Pendiente  de entrega",
            "genero":"",
            "marcaCigarros":"",
            "comproHeets":"",
            "amberInicial":null,
            "turquoiseInicial":null,
            "siennaInicial":null,
            "blueInicial":null,
            "purpleInicial":null,
            "yellowInicial":null
        };

    },
    'methods': {
        "liberarAcesso": function() {
            var _self = this
            vtexjs.checkout.getOrderForm().done(function(orderForm) {
                console.log(orderForm.clientProfileData.email)
                _self.loged_in_mail = orderForm.clientProfileData.email;
                var totalList = _self.lista.length - 1;


                for (let i = 0; i < _self.lista.length; i++) {
                    if (orderForm.loggedIn && orderForm.clientProfileData.email == _self.lista[i]) {
                        _self.acesso= ["liberado"]
                        break
                    }

                    if (totalList == [i]) {
                        if (orderForm.loggedIn && orderForm.clientProfileData.email != _self.lista[i]) {
                            _self.acesso=[]
                        }
                    }
                }
            });
        },
        // "mesyano": function (){  
        //     if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
        //         this.mes = this.$cookies.get("mes");
        //         this.ano = this.$cookies.get("ano");
        //     }
        // },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                _self.source = "LendingCoach";
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "getOrderid": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.orderID = "PMI-"+date
                console.log(this.orderID)
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            console.log(this.llamada1fecha, "fecha llamada 1")
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#calle").val().length < 1) {
                this.errors.push("Ingresa tu calle y número ext.");
            }

            if ($("#codigopostal").val().length < 1) {
                this.errors.push("Ingresa tu código postal");
            }

            if ($("#municipio").val().length < 1) {
                this.errors.push("Ingresa tu alcaldía / municipio");
            }

            if ($("#llamada1fecha").val().length < 1) {
                this.errors.push("Ingresa la fecha de la llamada 1");
            }

            if ($("#colonia").val().length < 1) {
                this.errors.push("Ingresa tu colonia");
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }

            if ($("#coach_alta_email").val().length > 1) {
                if(!this.validEmail($("#coach_alta_email").val())){
                    this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
                }
            } 

            if ($("#coach_seguimiento_email").val().length > 1) {
                if(!this.validEmail($("#coach_seguimiento_email").val())){
                    this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
                }
            } 

            if (this.comproHeets == "" ) {
                this.errors.push("Indica si compro HEETS");
            }

            if (this.comproHeets == "Si" && $("#amberInicial").val().length <= 0 && $("#turquoiseInicial").val().length <= 0 && $("#yellowInicial").val().length <= 0 && $("#purpleInicial").val().length <= 0 && $("#blueInicial").val().length <= 0  && $("#siennaInicial").val().length <= 0 ) {
                this.errors.push("Indica cantidad de HEETS comprados");
            }

            
            if (this.comproHeets == "Si"){
                if ( $("#amberInicial").val().length <= 0 ) { 
                    this.amberInicial = 0
                }
    
                if ($("#turquoiseInicial").val().length <= 0){
                    this.turquoiseInicial = 0
                }
                
                if ($("#yellowInicial").val().length <= 0){
                    this.yellowInicial = 0
                }
    
                if ($("#purpleInicial").val().length <= 0){
                    this.purpleInicial = 0
                }
    
                if ($("#blueInicial").val().length <= 0){
                    this.blueInicial = 0
                }
    
                if ($("#siennaInicial").val().length <= 0){
                    this.siennaInicial = 0
                }
            } else if (this.comproHeets == "No"){
                this.amberInicial = 0
                this.siennaInicial = 0
                this.turquoiseInicial = 0
                this.blueInicial = 0
                this.yellowInicial = 0
                this.purpleInicial = 0
            }

            if (!this.errors.length) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.coach_alta_email= $("#coach_alta_email").val()
                
                this.coach_seguimiento_email= $("#coach_seguimiento_email").val()
                
                
                this.dispositivo = $("#00N4P00000GOkeR").val()
                this.calle= $("#calle").val()
                this.codigopostal= $("#codigopostal").val()
                this.colonia= $("#colonia").val()
                this.estado= $("#estado").val()
                this.municipio= $("#municipio").val()
                this.nointerno= $("#nointerno").val()
                this.descuento = $("#descuento").val()
                this.obs= $("#obs").val()
                this.marcaCigarros = $("#marcaCigarros").val()
                console.log('alta',this.coach_alta_email)
                console.log('seg',this.coach_seguimiento_email)
                _self.envio()
                
            } else {
                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  

            var _self = this
            console.log('before envio',this.coach_alta_email, this.coach_seguimiento_email)
            if (this.coach_seguimiento_email.length == 0 ){
                this.coach_seguimiento_email = "default@mail.com"
            }

            if($("#descuento").val().length <= 0){this.descuento = "RETOCT20"}

            var camposValores = [{
                apellido: this.apelido,
                dispositivo: this.dispositivo,
                email: this.email,
                nombre: this.nombre,
                telefone: this.telefone,
                orderID: this.orderID,
                calle: this.calle,
                codigopostal: this.codigopostal,
                colonia: this.colonia,
                estado: this.estado,
                municipio: this.municipio,
                nointerno: this.nointerno,
                descuento: this.descuento,
                obs: this.obs,
                emailaltacoach: this.coach_alta_email,
                realemailseguimientocoach: this.coach_seguimiento_email,
                llamada1fecha:this.llamada1fecha,
                llamada1comentarios:this.llamada1comentarios,
                estatusorden:this.estatusOrden,
                amberinicial:this.amberInicial,
                siennainicial:this.siennaInicial,
                turquoiseinicial:this.turquoiseInicial,
                blueinicial:this.blueInicial,
                yellowinicial:this.yellowInicial,
                purplewaveinicial:this.purpleInicial,
                comproheets:this.comproHeets,
                marcacigarros:this.marcaCigarros,
                sexo:this.genero,
            }]
            console.log('before envio campos',camposValores[0])
            var settings = {
                "url": "/api/dataentities/LP/documents",
                "type": "POST",
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "data": JSON.stringify(camposValores[0]),
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                console.log(_self.email,"correo enviado")
                // _self.envio_sales_force()
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "Order ID: "+_self.orderID+" \n\n¡Gracias por tu registro!";


                _self.apelido= ""
                _self.dispositivo= ""
                _self.email= ""
                _self.nombre= ""
                _self.telefone= ""
                _self.calle= ""
                _self.codigopostal= ""
                _self.colonia= ""
                _self.estado= ""
                _self.municipio= ""
                _self.nointerno= ""
                _self.descuento= ""
                _self.obs= ""
                _self.coach_seguimiento_email= ""
                _self.coach_alta_email= _self.loged_in_mail
                _self.llamada1fecha = ""
                _self.llamada1comentarios = ""
                _self.comproHeets= ""
                _self.marcaCigarros=""
                _self.genero= ""
                _self.turquoiseInicial= 0
                _self.amberInicial = 0
                _self.blueInicial = 0
                _self.purpleInicial= 0
                _self.yellowInicial = 0
                _self.siennaInicial = 0
                _self.orderID = ""
                
                _self.getOrderid()

                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)
                    
            })        
        },
        "envio_sales_force": function() {  
            
            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()

            settings_salesforce = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GOkeC="+_self.orderID+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GOkeH=1"+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
            }

            _self.ajaxrequest2(settings_salesforce, function() {
                console.log("after ajax call",_self.orderID)
                _self.declaracao = false
                _self.publicidad = false
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                try {
                    window.dataLayer.push({
                        "category": "Form try-coach testing",
                        "action": "Success",
                        "label": "MX",
                        "event": "try-coach"
                    })
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    console.log(response)
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    console.log(errorThrown)
                    console.log(textStatus)
                    console.log(jqXHR)
                    if (callback) {
                        console.log(errorThrown)
                        console.log(textStatus)
                        console.log(jqXHR)
                        fn(false, errorThrown);
                    }
                })
    
            return null;
        },
        "ajaxrequest2": function(settings_salesforce, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings_salesforce)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {                        
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        }
    },
    'mounted': function(){
        this.getOrderid()
        // this.mesyano()
        this.utms()
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        _self.paginaStatus()
        _self.liberarAcesso()
        _self.geoFencing()
    }
});


var $gettritalAvOpt1 = `<div> 
                        <section class="coronavirus" style="order:1;">
                        <h4>
                            <span>Programa de Préstamo IQOS¹ solo disponible para usuarios en Cd. de México y área metropolitana.

                            </span>
                        </h4>
                        </section>
                        <section v-bind:class="{ pagina }" class="principal version_a" style="order:2;">
                        <div class="prueba_version" style="
                        display: flex;
                        flex-direction: column;
                        box-sizing: border-box;
                        justify-content: center;
                        padding-top: 1rem;
                        padding-left: 3rem;
                        padding-bottom: 1rem;
                        ">   
                            <h1>Prueba IQOS gratis</h1>
                            <p>No es necesario hacer ningún pago ni dejar tu tarjeta de crédito en garantía.
                            </p>
                            <p>¡Acepta el reto y cámbialo todo!
                            </p>
                            <a href='#' class='btn agendarllamada' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                            <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                        </div>
                        </section>

                        <section id="pasos" class="claro">
                        <h4>Vive la experiencia IQOS durante 15 días, y recibe <b style="color:#c98224;"> $500</b><br><b style="color:#c98224;">MXN </b>de descuento² en la compra de tu primer KIT IQOS</h4>
                        <ul>
                            <li><span>1</span> Escoge el color de tu IQOS y completa el formulario.</li>
                            <li><span>2</span> Te llamaremos para coordinar la entrega de tu dispositivo.</li>
                            <li><span>3</span> Recibelo y ¡vive la experiencia!</li>
                            <li><span>4</span> Decide si compras tu IQOS y aplicas tu descuento o prefieres devolverlo.</li>
                        </ul>

                        </section>

                        <section id="select-iqos">
                        <h4>Selecciona el color de tu dispositivo</h4>
                        <div class="selector">
                            <div class="imagem">
                                <img src="/arquivos/iqos-Azul.png?v=53534" />
                            </div>
                            <h2>IQOS 2.4 Plus</h2>
                            <div class="selector-sku">
                                <a href="#" class="azul active" color="IQOS 2.4 Azul" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - Blue" data-label="MX" data-event="Clic">
                                    <i></i><span>Azul Marino</span>
                                </a>
                                <a href="#" class="blanco" color="IQOS 2.4 Blanco" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - White" data-label="MX" data-event="Clic">
                                    <i></i><span>Blanco</span>
                                </a> 
                            </div>
                        </div>
                        <div class="container text">
                            <p>Quédate con tu dispositivo después del periodo de prueba pagando <b style="text-decoration:line-through;margin-right:5px;font-weight: normal;">$1,199 MXN </b></b>$699 MXN,</b> una vez aplicado tu descuento².</p>

                            <small style="font-size:10px">1)El periodo de prueba es de hasta 15 días naturales a partir de la entrega del dispositivo. Programa exclusivo para usuarios adultos en la Ciudad de México y área metropolitana. Consulta <a href="/terminos-condiciones">Términos y Condiciones</a> del Programa de Préstamo IQOS. (2)Solo para fumadores adultos. Promoción vigente al 31 de diciembre de 2020. Si te registras para participar en el Programa de Préstamo IQOS durante dicho período, recibirás en tu correo electrónico un cupón con un código de descuento para la compra de tu primer Kit IQOS. Sujeto a disponibilidad de inventario, y a la vigencia del cupón de descuento, no es acumulable con otros códigos de descuento. Aplican restricciones. Consulta <a href="https://www.iqos.com/mx/es/terminos-condiciones.html">Términos y Condiciones</a></small>
                        </div>
                        </section>

                        <section id="iqos-form" class="claro">

                        <div class="two">
                            <h4>Completa el formulario</h4>
                            <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                
                                <input type=hidden name="oid" value="00D4P000000h9QV">
                                <input type=hidden name="retURL" value="http://www.iqos.com">


                                <!--  ----------------------------------------------------------------------  -->
                                <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                <!--  these lines if you wish to test in debug mode.                          -->
                                <!--  <input type="hidden" name="debug" value=1>                              -->
                                <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                <!--  ----------------------------------------------------------------------  -->
                            
                                <label class="lb-input" for="first_name">NOMBRE*</label>
                                <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                                <label class="lb-input" for="last_name">Apellido(s)*</label>
                                <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                                <label class="lb-input" for="email">Email*</label>
                                <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" size="20" type="text" />
                                
                                <label class="lb-input" for="00N4P00000GOkeR">Color del dispositivo*</label>
                                <select class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                    <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>    
                                    <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                </select>

                                <label class="lb-input" style="margin-bottom:20px">¿Ya tienes un código de referido?</label>
                                <div class="field" style="display: flex;max-width: inherit;align-items: baseline;">
                                    <label for="si">Si</label>
                                    <input type="radio" id="si" value="Si" v-model="promCode">
                            
                                    <label for="no">No</label>
                                    <input type="radio" id="no" value="No" v-model="promCode">
                                </div>
                                <div v-if="promCode == 'Si'">
                                    <label class="lb-input" for="00N4P00000GOkeM">Ingresa tu código de referido</label>
                                    <input  id="00N4P00000GOkeM" maxlength="50" name="00N4P00000GOkeM" size="20" type="text" data-category="Form Local Lead" data-action="Código de descuento" data-label="MX" data-event="Clic" class="field" />
                                    <div v-if="showWarning" style="color:red;font-size:15px;text-align:left">
                                        {{ codigoReferidoFeedbackMessage }}
                                    </div>
                                </div>

                                <div class="tooltip">
                                    <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                    <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                    <span class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                </div>
                                
                                <div class="none">
                                    <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                    <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                    <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                    <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                    <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                    <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                    <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                    <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                    <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                    <input :value="GAtransactionId" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                </div>

                                <fieldset>
                                    <label for="aceptoterminos">
                                        <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                        <span>Acepto <a style="color:blue" target="_blank"  href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                    </label>

                                    <label for="00N4P00000GZEGJ">
                                        <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                        <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a style="color:blue" target="_blank" href="https://www.pmiprivacy.com/es-la/consumer">Aviso de Privacidad</a>.</span>
                                    </label>
                                    <label for="00N4P000008mN8e">
                                        <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                        <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                    </label>
                                </fieldset>

                                <div class="btn form-btn">
                                    <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                    <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                </div>

                                <transition name="fade">
                                    <div v-if="Msnenvio">
                                        <div class="background-modal" @click="closePopUp($event)"></div>
                                        <div class="envio errors">
                                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                            <b>{{ Msnenvio }}</b>
                                        </div>
                                    </div>
                                </transition> 

                            </form>
                            <transition name="fade">
                                <div v-if="errors.length" class="errors">
                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                    <b>Para continuar, por favor revisa lo siguiente:</b>
                                    <ul>
                                        <li v-for="error in errors">{{ error }}</li>
                                    </ul>
                                </div>    
                            </transition>  
                        </div>
                        </section>

                        <section>
                        <div class="" style="padding-right: 15px;
                        padding-left: 15px;
                        margin-right: auto;
                        margin-left: auto;">
                            <div id="owl-demo-2" class="owl-carousel owl-theme">

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘La mejor decisión de mi vida’</h4>
                                        <p class="flex-text">“En el momento que descubrí IQOS pensé que tal vez si era necesario experimentar y ver que tan cierto era todo lo que mi Coach personal mencionaba... En los primeros días me costó un poco de trabajo adaptarme a mi IQOS, pero con el paso del tiempo se hizo mi aliado y ahora ya no lo suelto...”</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Zabdiel</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star-o" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘Me encanta’</h4>
                                        <p class="flex-text">“Me costó unos días acostumbrarme al sabor pero una vez que lo hice no los cambio por nada, es muy práctico, es increíble que no haya ceniza, entonces lo puedes ocupar en el coche si llueve, y en cualquier lugar sin necesidad de un cenicero y sin el temor de quemar algo...”</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Esteban</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘Deje por completo el cigarro y el humo’</h4>
                                        <p class="flex-text">“Me gusta mucho, desde el primer día de uso. Despues de una semana ya no pude soportar el sabor de un cigarro normal. Una excelente alternativa y cambio de habito. Definitivamente no regresaría a fumar.”</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Carlos</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘La mejor decisión’</h4>
                                        <p class="flex-text">“...Ha sido una muy buena experiencia, dejé los cigarrillos al día 2 y llevo 6 meses con IQOS. La mejor decisión para quien no quiere dejar de fumar pero si quiere una experiencia distinta sin humo, sin ceniza. Lo recomiendo ampliamente.“</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Luis</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘No más olores desagradables’</h4>
                                        <p class="flex-text">"...Me dedico al ramo de bebidas y no podía estar trabajando con olor a cigarro. Fue una gran solución a mi problema. Ya las cosas saben distintos. Me olvide por completo de las críticas “apestas a cenicero” etc."</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Gabriel</p>
                                    </div>
                                </article>

                                <article class="thumbnail item">
                                    <div style="display: flex;">
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                        <i class="fa fa-star" style="font-size:35px;color:#c98224"></i>
                                    </div>
                                    <div class="caption">
                                        <h4 class="testimonials" style="padding:0px">‘Sin olor a humo de cigarro.’</h4>
                                        <p class="flex-text">“Me encantó porque no deja olor a humo de cigarro, que eso para mí al estar en el área de ventas es muy importante.“</p>
                                        <p class="flex-text" style="font-weight: bolder;opacity:0.6;position:absolute;bottom:20px;">Miguel</p>
                                    </div>
                                </article>

                            </div><!-- #owl-demo-2 -->
                        </div><!-- .container -->
                        </section>
                    
                    </div>`;
Vue.component('gettrital-home-av-opt1-component', {
    'template': $gettritalAvOpt1,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "",
            "emailVerifiedNB":false,
            "promCode":"",
            "codigoDeReferidoValidado":false,
            "codigoReferidoFeedbackMessage":"Código de referido no válido, por favor verifícalo.",
            "showWarning":false,
            "utmEqualsB2b":false,
            "GAtransactionId":"",
            "sourceFromUtm":""
        };

    },
    'methods': {
        "GA_clientId":function(){
            try{
                var tracker = ga.getAll()[0];
                this.GAtransactionId = tracker.get('clientId');
                console.log("GA_clientId =",this.GAtransactionId)
                return tracker.get('clientId');
            } catch (e){
                console.log("GA_clientId error =",e)
                // return "";
            }
        },
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                console.log(utms, "utms")
                _self.term = utms.utm_term
                _self.sourceFromUtm = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
                if(utms.utm_source == "b2b"){
                    _self.utmEqualsB2b = true
                }
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
            this.GA_clientId()
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
                this.descuento = "RETOCT20"
                console.log(this.descuento, "promcode si but field empty")
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length >= 1) {
                this.validateReferrCode($("#00N4P00000GOkeM").val())
            }

            if( this.promCode == "No"){
                this.descuento = "RETOCT20"
                console.log(this.descuento, "promcode no")
            }

            if(this.promCode == ""){
                this.descuento = "RETOCT20"
                console.log(this.descuento, "promcode not clicked")
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true && this.showWarning == false) {
                console.log("condition when tru")
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                _self.envio()
        
            } else {
                alert("fail checkform")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "envioIphone": async function (){
            alert("called 03")
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            

            

            var _self = this

            
            
            $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
            $.ajax({
                url: "https://webto.salesforce.com/servlet/servlet.WebToLead",
                type: "POST",
                cache: false,
                dataType: 'json',
                mode: 'no-cors',
                contentType: 'application/json',
                enctype: 'mutipart/form-data',
	            headers: { "cache-control": "no-cache", "Content-Type": "application/json" },
                data: {
                    'oid': oid, 'retURL': urlIqos, "first_name": _self.nombre
                },
                success: function(response){
                    console.log(response);
                     $(_self.form).find(".loading").remove()
                    _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
                },
                error: function(response){
                    console.log(response)
                }
            });
           
            
              
        },
        "validateReferrCode": function(codigoReferido) {
            alert("validate code function called ")
            console.log(codigoReferido.length,"length")
            if(codigoReferido.length == 1 || codigoReferido.length == 2){
                console.log(codigoReferido.length,"length less then 3")
                this.codigoDeReferidoValidado = false
                this.showWarning = true
            } else {

                let firstThreeLetters = codigoReferido.slice(0,3)

                if(firstThreeLetters == "MGM" 
                || firstThreeLetters == "EGM" 
                || firstThreeLetters == "B2B" 
                || firstThreeLetters == "RGM" 
                || firstThreeLetters == "IQO"
                || firstThreeLetters == "RET") {
                    this.codigoDeReferidoValidado = true
                    this.showWarning = false
                    this.descuento = codigoReferido
                } else {
                    this.codigoDeReferidoValidado = false
                    this.showWarning = true
                }
            }
            
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            var concatination = this.sourceFromUtm + this.medium;

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            if( this.utmEqualsB2b == true && this.promCode == "No"){
                this.descuento = "B2BOCT20"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == ""){
                this.descuento = "B2BOCT20"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            if( this.utmEqualsB2b == true && this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0){
                this.descuento = "B2BOCT20"
                console.log(this.descuento, "conditional for people comming from utm b2b")
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            console.log(_self.descuento, "final")
            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+concatination+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR"+"&00N4P00000GOgJP="+_self.GAtransactionId+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.colorDispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "cache": false,
                "headers": {
                    "cache-control": "no-cache",
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                // alert("ajax call return four")
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                _self.GAtransactionId = ""
                _self.utmEqualsB2b = false
                _self.promCode = ""
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                try {
                    window.dataLayer.push({ 'event': 'formTrySubmitted' });
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {
            // alert("ajax function called one")
            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
           
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        // alert("done response",response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        // alert("fail response three",textStatus)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, jqXHR);
                    }
                })
                // .always(function() {
                //     alert("always response five")
                //     fn()
                // });
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.seletorSku()
        _self.GetTransaction()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        // Do stuff when the verification is throttled
                    }
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
        $(document).ready(function(){
            $.ajaxSetup({ cache: false }); // or iPhones don't get fresh data
        });
        $(document).ready(function ($) {
            var owl = $("#owl-demo-2");
            owl.owlCarousel({
                autoplay: true,
                autoplayTimeout: 1000,
                autoplayHoverPause: true,
                items: 3,
                loop: true,
                center: false,
                rewind: false,
                mouseDrag: true,
                touchDrag: true,
                pullDrag: true,
                freeDrag: false,
                margin: 0,
                stagePadding: 0,
                merge: false,
                mergeFit: true,
                autoWidth: false,
                startPosition: 0,
                rtl: false,
                smartSpeed: 250,
                fluidSpeed: false,
                dragEndSpeed: false,
                responsive: {
                    0: {
                        items: 1
                        // nav: true
                    },
                    480: {
                        items: 2,
                        nav: false
                    },
                    768: {
                        items: 3,
                        // nav: true,
                        loop: false
                    },
                    992: {
                        items: 4,
                        // nav: true,
                        loop: false
                    }
                },
                responsiveRefreshRate: 200,
                responsiveBaseElement: window,
                fallbackEasing: "swing",
                info: false,
                nestedItemSelector: false,
                itemElement: "div",
                stageElement: "div",
                refreshClass: "owl-refresh",
                loadedClass: "owl-loaded",
                loadingClass: "owl-loading",
                rtlClass: "owl-rtl",
                responsiveClass: "owl-responsive",
                dragClass: "owl-drag",
                itemClass: "owl-item",
                stageClass: "owl-stage",
                stageOuterClass: "owl-stage-outer",
                grabClass: "owl-grab",
                autoHeight: false,
                lazyLoad: false
            });
        
            $(".next").click(function () {
                owl.trigger("owl.next");
            });
            $(".prev").click(function () {
                owl.trigger("owl.prev");
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this

        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});

var $gettritalreplica = `<div>
                            <section v-bind:class="{ pagina }" class="principal">
                                <div>
                                    <h1>Prueba IQOS gratis</h1>
                                    <p>No es necesario hacer ningún pago ni dejar tu tarjeta de crédito en garantía.</p>
                                    <a href='#' class='btn agendarllamada' data-category="Clicks" data-action="Pedir un iqos" data-label="MX" data-event="Clic">Pedir un iqos</a>
                                    <a href="#" @click.prevent="clickMouse()" class="mouse"></a>
                                </div>
                            </section>
                            <section class="coronavirus">
                                <h4><span>¡Llevamos IQOS a tu casa! Programa de Préstamo IQOS solo disponible para usuarios en Cd. de México y área metropolitana.</span></h4>
                            </section>

                            <section id="pasos" class="claro">
                                <h4>Vive la experiencia IQOS durante 15 días</h4>
                                <ul>
                                    <li><span>1</span> Escoge el color de tu IQOS y completa el formulario.</li>
                                    <li><span>2</span> Te llamaremos para coordinar la entrega de tu dispositivo.</li>
                                    <li><span>3</span> Recibelo y ¡vive la experiencia!</li>
                                    <li><span>4</span> Decide si compras tu IQOS o prefieres devolverlo.</li>
                                </ul>

                            </section>

                            <section id="select-iqos">
                                <h4>Selecciona el color de tu dispositivo</h4>
                                <div class="selector">
                                    <div class="imagem">
                                        <img src="/arquivos/iqos-Azul.png?v=53534" />
                                    </div>
                                    <h2>IQOS 2.4 Plus</h2>
                                    <div class="selector-sku">
                                        <a href="#" class="azul active" color="IQOS 2.4 Azul" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - Blue" data-label="MX" data-event="Clic">
                                            <i></i><span>Azul Marino</span>
                                        </a>
                                        <a href="#" class="blanco" color="IQOS 2.4 Blanco" data-category="Form Local Lead" data-action="IQOS 2.4 Plus - White" data-label="MX" data-event="Clic">
                                            <i></i><span>Blanco</span>
                                        </a> 
                                    </div>
                                </div>
                                <div class="container text">
                                    <p>Quédate con tu dispositivo después del periodo de prueba* pagando $1,199 MXN.</p>
                                    <p>Además, si decides comprarlo, puedes pagar en hasta 6 MSI con tarjetas de crédito participantes.</p>

                                    <small>*El periodo de prueba es de hasta 15 días naturales a partir de la entrega del dispositivo. Sujeto a disponibilidad de inventario. Programa exclusivo para usuarios  en la Ciudad de México y área metropolitana. Consulta <a href="/terminos-condiciones">Términos y Condiciones</a> del Programa de Préstamo IQOS.</small>
                                </div>
                            </section>

                            <section id="iqos-form" class="claro">
                                
                                <div class="two">
                                    <h4>Completa el formulario</h4>
                                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8">
                                        
                                        <input type=hidden name="oid" value="00D4P000000h9QV">
                                        <input type=hidden name="retURL" value="http://www.iqos.com">


                                        <!--  ----------------------------------------------------------------------  -->
                                        <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                                        <!--  these lines if you wish to test in debug mode.                          -->
                                        <!--  <input type="hidden" name="debug" value=1>                              -->
                                        <!--  <input type="hidden" name="debugEmail" value="alfredo.ramos@pmi.com">   -->
                                        <!--  ----------------------------------------------------------------------  -->
                                    
                                        <label class="lb-input" for="first_name">NOMBRE*</label>
                                        <input  id="first_name" data-category="Form Local Lead" data-action="Name" data-label="MX" data-event="Clic" maxlength="40" class="field" name="first_name" size="20" type="text" />

                                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                                        <input data-category="Form Local Lead" data-action="Last Name" data-label="MX" data-event="Clic" id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                                        <label class="lb-input" for="email">Email*</label>
                                        <input id="email" data-category="Form Local Lead" data-action="Email" data-label="MX" data-event="Clic" class="field" maxlength="80" name="email" data-nb size="20" type="text" />
                                        
                                        <div class="tooltip">
                                            <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                                            <the-mask class="field" data-category="Form Local Lead" data-action="Phone" data-label="MX" data-event="Clic" type="text" id="phone" maxlength="10" name="phone" :mask="['##########']" :value="telefone" />
                                            <span class="tooltiptext">Te llamaremos para coordinar la entrega de tu IQOS</span>
                                        </div>
                                        
                                        <label class="lb-input" for="00N4P00000GOkeR">Color del dispositivo*</label>
                                        <select class="color-dispositivo" data-action="IQOS 2.4 Plus - White" data-category="Form Local Lead" data-label="MX" data-event="Clic" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo">
                                            <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>    
                                            <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                                        </select>

                                        <label class="lb-input" style="margin-bottom:20px">¿Tienes un código promocional?</label>
                                        <div class="field" style="display: flex;max-width: inherit;align-items: baseline;">
                                            <label for="si">Si</label>
                                            <input type="radio" id="si" value="Si" v-model="promCode">
                                    
                                            <label for="no">No</label>
                                            <input type="radio" id="no" value="No" v-model="promCode">
                                        </div>
                                        <div v-if="promCode == 'Si'">
                                            <label class="lb-input" for="00N4P00000GOkeM">Ingresa tu código promocional</label>
                                            <input  id="00N4P00000GOkeM" maxlength="50" name="00N4P00000GOkeM" size="20" type="text" data-category="Form Local Lead" data-action="Código de descuento" data-label="MX" data-event="Clic" class="field" />
                                        </div>

                                        <div class="none">
                                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                                            <input class="TRANSACTION_ID" :value="transaction" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                                        </div>

                                        <fieldset>
                                            <label for="aceptoterminos">
                                                <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                                <span>Acepto <a href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                                            </label>

                                            <label for="00N4P00000GZEGJ">
                                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                                            </label>
                                            <label for="00N4P000008mN8e">
                                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                                            </label>
                                        </fieldset>

                                        <div class="btn form-btn">
                                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                                        </div>

                                        <transition name="fade">
                                            <div v-if="Msnenvio">
                                                <div class="background-modal" @click="closePopUp($event)"></div>
                                                <div class="envio errors">
                                                    <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                                    <b>{{ Msnenvio }}</b>
                                                </div>
                                            </div>
                                        </transition> 

                                    </form>
                                    <transition name="fade">
                                        <div v-if="errors.length" class="errors">
                                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                            <b>Para continuar, por favor revisa lo siguiente:</b>
                                            <ul>
                                                <li v-for="error in errors">{{ error }}</li>
                                            </ul>
                                        </div>    
                                    </transition>  
                                </div>
                            </section>
                            </div>`;
Vue.component('gettritalreplica-component', {
    'template': $gettritalreplica,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "declaracao": false,
            "publicidad": false,
            "source": "Lending",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "form": "#form",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "transaction": "",
            "colorDispositivo": "",
            "descuento": "",
            "emailVerifiedNB":false,
            "promCode":""
        };

    },
    'methods': {
        "GetTransaction": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.transaction = "PMI-"+date
        },
        "seletorSku": function (){
            var _self = this
            $(".selector-sku").each(function () {
                $(this).find("a").click(function(e) {
                    e.preventDefault();
                    var color = $(this).attr("color")
                    $(this)
                        .addClass("active")
                        .siblings()
                            .removeClass("active")
                        .parents(".selector").find(".imagem img").attr("src","/arquivos/iqos-"+color.replace("IQOS 2.4 ","")+".png?v=53534")
                        $('#00N4P00000GOkeR [value="'+color+'"]').prop("selected","selected");
                        $("#00N4P00000GOkeR").attr("data-action", color)
                    _self.colorDispositivo = color
                })
            })

            $("#00N4P00000GOkeR").change(function () {
                $(".selector-sku a").removeClass("active")

                $(".selector-sku a[color='"+$(this).val()+"'").addClass("active")
                $(".selector .imagem img").attr("src","/arquivos/iqos-"+$(this).val().replace("IQOS 2.4 ","").replace("B","b").replace("A","a")+".png?v=53534")
                var colorSelected = "";
            
                if ($(this).val() == "IQOS 2.4 Blanco") {
                    colorSelected = "White"
                } else {
                    colorSelected = "Blue"
                }
                $(this).attr("data-action", "IQOS 2.4 Plus - "+colorSelected)
                _self.colorDispositivo = $(this).val()
            })

            _self.colorDispositivo = $(".selector-sku a.active").attr("color")

        },
        "mesyano": function (){
            if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
                this.mes = this.$cookies.get("mes");
                this.ano = this.$cookies.get("ano");
            }
        },
        "datapushPag": function () {
            try {
                window.dataLayer.push({
                    event: "PV",
                    category: window.location.href.toS,
                    action: $("title").text(),
                    label: "MX"
                })
            } catch (e) {console.log(e)}            
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                _self.source = "Lending";
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
            }
        },
        "fixedCorona": function () {
            var corona =  ""
            setTimeout(function (){
                corona =  $(".coronavirus").offset().top
                coronaFixed()
            },500)
            
            $(document).scroll(function() {
                coronaFixed()
            });

            function coronaFixed() {
                if (corona != "" && $(this).scrollTop() > corona) {
                    $("section.coronavirus").addClass("fixed")
                } else {
                    $("section.coronavirus").removeClass("fixed")
                }
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }

            $(document).scroll(function() {
                if ($(this).scrollTop() > 180) {
                    $(".mouse").css("opacity","0");
                    $(".mouse").hide()
                }else{
                    if (window.innerHeight < 960) {
                        $(".mouse").css("opacity","1");
                        $(".mouse").show()
                    }
                }
            });

            if (window.innerHeight < 960) {
                $(".mouse").css("opacity","1");
                $(".mouse").show()
            }
        },
        "clickMouse": function (){
            setTimeout(function (){
                var corona =  $(".coronavirus").offset().top
                $("html, body").animate({scrollTop:corona}, 'slow');
            },100)
            
        },
        "agendarllamada": function () {
            var _self = this
            $(".agendarllamada").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - ($(".coronavirus").height()*1))});
            })
            $(".coronavirus").click(function(e) {
                e.preventDefault()
                $('html,body').animate({ scrollTop: ($("#pasos").offset().top - $(".coronavirus").height())});
            })
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#phone").val().length <= 10) {
                this.count_phone_element($("#phone").val());
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }
            
            if( this.promCode == "Si" && $("#00N4P00000GOkeM").val().length == 0) {
                this.errors.push("Ingresa tu codigo promocional")
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }
            this.emailVerifiedNB = true
            if (!this.errors.length && this.emailVerifiedNB == true) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.descuento= $("#00N4P00000GOkeM").val() 

                _self.envio()
                
       
            } else {
                console.log("if statement failed")
                window.dataLayer.push({
                    "category": "Form Local Lead",
                    "action": "Failed",
                    "label": "MX",
                    "event": "TYPLanding"
                })

                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()

            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }

            settings = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P00000GZHnH="+_self.mes+"&00N4P00000GZEGY="+_self.ano+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GOgJP="+_self.transaction+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.colorDispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "¡Tu solicitud ha sido recibida! \n Un experto IQOS te llamará por teléfono para coordinar la entrega de tu dispositivo";
            
                _self.nombre = ""
                _self.telefone = ""
                _self.email = ""
                _self.apelido = ""
                _self.descuento = ""
                _self.declaracao = false
                _self.publicidad = false
                
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)

                try {
                    window.dataLayer.push({
                        "category": "Form Local Lead",
                        "action": "Success",
                        "label": "MX",
                        "event": "TYPLanding"
                    })
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "count_phone_element":function (string) {
            let arr = string.split("")
            let current = null;
            let cnt = 0;
            for (let i = 0; i <= arr.length; i++) {
                if (arr[i] != current) {
                    if (cnt >= 4) {
                        this.errors.push("El número de teléfono agregado es invalido");
                    }
                    current = arr[i];
                    cnt = 1;
                } else {
                    cnt++;
                }
            }
            return false
        },
        "check_if_cookies_allowed": function () {
            var ret = document.cookie != -1;
            function readCookie(name) {
                var nameEQ = name + "=";
                var ca = document.cookie.split(';');
                for(var i=0;i < ca.length;i++) {
                    var c = ca[i];
                    while (c.charAt(0)==' ') c = c.substring(1,c.length);
                    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
                }
                return null;
            }
            var exp = (new Date(Date.now()+ 86400*90000)).toUTCString();
            var Performance = readCookie('Performance')
            var Technical = readCookie('Technical')
            var Tracking = readCookie('Tracking')
            if(ret == false){
                return (document.cookie = 'Technical=false;expires='+exp+'; path=/',
                document.cookie = 'Tracking=false;expires='+exp+'; path=/',
                document.cookie = 'Performance=false;expires='+exp+'; path=/')
            } else if(Technical == null || Performance == null || Tracking == null){
                return (document.cookie = 'Performance=true;expires='+exp+'; path=/',
                document.cookie = 'Tracking=False;expires='+exp+'; path=/',
                document.cookie = 'Technical=true;expires='+exp+'; path=/')
            }
        }
    },
    'mounted': function(){
        var _self =  this
        _self.agendarllamada()
        _self.utms()
        _self.fixedCorona()
        _self.mesyano()
        _self.seletorSku()
        _self.GetTransaction()
        document.querySelector('body').addEventListener('nb:registered', function (event) {

            // Get field using id from registered event
            let field = document.querySelector('[data-nb-id="' + event.detail.id + '"]');
        
            // Handle clear events (input has changed or an API error was returned)
            field.addEventListener('nb:clear', function(e) {      
                // Check for errors
                if (e.detail.result && e.detail.result.isError()) {
                    if (e.detail.result.isThrottled()) {
                        console.log('error from error handler')
                        // Do stuff when the verification is throttled
                    }
                    console.log('other error occurs')
                    _self.emailVerifiedNB = true 
                    // Do stuff when other API errors occur
                    // - Our recommendation is to hide any loaders and treat these emails the same way you would treat an Unknown email
                }
                console.log('input changed')
                // Do stuff when input changes, (e.g. hide loader)
            });
        
            // Handle loading status (API request has been made)
            field.addEventListener('nb:loading', function(e) {
                // Do stuff while waiting on API response
            });
        
            // Handle results (API call has succeeded)
            field.addEventListener('nb:result', function(e) {
                if (e.detail.result.is(_nb.settings.getAcceptedStatusCodes())) {
                    // Do stuff for good email
                    _self.emailVerifiedNB = true
                }
                else {
                    console.log('bad to send')
                    _self.errors.push('Ingresa un correo electrónico válido');
                    _self.emailVerifiedNB = false
                    // Do stuff for bad email
                }
            });
        
            // Handle soft results (fails regex; doesn't bother making API request)
            field.addEventListener('nb:soft-result', function(e) {
                // Do stuff when input doesn't even look like an email (i.e. missing @ or no .com/.net/etc...)
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)

        setTimeout(function () {
            _self.datapushPag()
        },1500)

        _self.geoFencing()
        _self.paginaStatus()
        _self.check_if_cookies_allowed()

        VueEvent.$on('mes', (mesEvent) => {
            _self.mes = mesEvent
            console.log("....", mes)
        });

        VueEvent.$on('ano', (anoEvent) => {
            _self.ano = anoEvent
            console.log("....", ano)
        });
    }
});

var $agendagettrital = `<div>
            <header v-bind:class="{ pagina }">
                <div class="container">
                    <img src="/arquivos/iqoslogo.png" alt="iqos" title="iqos" />
                </div>
            </header>
            
            <section id="iqos-form" class="claro">
                
                <div class="two" v-if="acesso.length > 0">
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)">

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" maxlength="40" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" class="field" maxlength="80" name="email" size="20" type="text" />

                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                        <the-mask class="field" type="text" id="phone" maxlength="40" name="phone" :mask="['##########']" :value="telefone" />

                        <label class="lb-input" for="00N4P00000GOkeR">Dispositivo*</label>
                        <select class="color-dispositivo" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo" >
                            <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>
                            <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                        </select>

                        <label class="lb-input" for="descuento">¿Tienes un código promocional?</label>
                        <input id="descuento" class="field" maxlength="80" name="descuento" size="20" type="text" />

                        <label class="lb-input" for="calle">Calle y número ext.*</label>
                        <input id="calle" class="field" maxlength="80" name="calle" size="20" type="text" />

                        <label class="lb-input" for="nointerno">No. Int / Referencias</label>
                        <input id="nointerno" class="field" maxlength="80" name="nointerno" size="20" type="text" />

                        <label class="lb-input" for="codigopostal">Código Postal*</label>
                        <the-mask class="field" type="text" id="codigopostal" maxlength="40" name="codigopostal" :value="codigopostal" :mask="['#####']" />

                        <label class="lb-input" for="estado">Estado</label>
                        <input id="estado" class="field" maxlength="80" name="estado" size="20" type="text" />

                        <label class="lb-input" for="municipio">Alcaldía / Municipio*</label>
                        <input id="municipio" class="field" maxlength="80" name="municipio" size="20" type="text" />

                        <label class="lb-input" for="colonia">Colonia*</label>
                        <input id="colonia" class="field" maxlength="80" name="colonia" size="20" type="text" />

                        <label class="lb-input" for="obs">¿Entre qué calles está?</label>
                        <textarea id="obs" class="field" maxlength="80" name="obs" size="20" type="text" />

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition> 

                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
                </div>
                
                <div class="two" v-else>
                    <h5>Tu no tienes acceso a esta página</h5>
                </div>
            </section>
            </div>`;
Vue.component('agendagettrital-component', {
    'template': $agendagettrital,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "orderID": "",
            "dispositivo": "",
            "calle": "",
            "codigopostal": "",
            "colonia": "",
            "estado": "",
            "municipio": "",
            "nointerno": "",
            "descuento": "",
            "obs": "",
            "form": "#form",
            "lista": window.lista,
            "acesso": []
        };

    },
    'methods': {
        "liberarAcesso": function() {
            var _self = this
            vtexjs.checkout.getOrderForm().done(function(orderForm) {

                var totalList = _self.lista.length - 1;


                for (let i = 0; i < _self.lista.length; i++) {
                    if (orderForm.loggedIn && orderForm.clientProfileData.email == _self.lista[i]) {
                        _self.acesso= ["liberado"]
                        break
                    }

                    if (totalList == [i]) {
                        if (orderForm.loggedIn && orderForm.clientProfileData.email != _self.lista[i]) {
                            _self.acesso=[]
                        }
                    }
                }
            });
        },
        "getOrderid": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.orderID = "PMI-"+date
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#calle").val().length < 1) {
                this.errors.push("Ingresa tu calle y número ext.");
            }

            if ($("#codigopostal").val().length < 1) {
                this.errors.push("Ingresa tu código postal");
            }

            if ($("#municipio").val().length < 1) {
                this.errors.push("Ingresa tu alcaldía / municipio");
            }

            if ($("#colonia").val().length < 1) {
                this.errors.push("Ingresa tu colonia");
            }

            if (!this.errors.length) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.dispositivo = $("#00N4P00000GOkeR").val()
                this.calle= $("#calle").val()
                this.codigopostal= $("#codigopostal").val()
                this.colonia= $("#colonia").val()
                this.estado= $("#estado").val()
                this.municipio= $("#municipio").val()
                this.nointerno= $("#nointerno").val()
                this.descuento = $("#descuento").val()
                this.obs= $("#obs").val()

                _self.envio()
                
            } else {
                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  

            var _self = this

            var camposValores = [{
                apellido: this.apelido,
                direccion: this.direccion,
                dispositivo: this.dispositivo,
                email: this.email,
                nombre: this.nombre,
                telefone: this.telefone,
                orderID: this.orderID,
                calle: this.calle,
                codigopostal: this.codigopostal,
                colonia: this.colonia,
                estado: this.estado,
                municipio: this.municipio,
                nointerno: this.nointerno,
                descuento: this.descuento,
                obs: this.obs
            }]
           
            var settings = {
                "url": "/api/dataentities/LP/documents",
                "type": "POST",
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "data": JSON.stringify(camposValores[0]),
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                console.log(_self.email,"correo enviado")
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "Order ID: "+_self.orderID+" \n\n¡Gracias por tu registro!";
            
                _self.apelido= ""
                _self.dispositivo= ""
                _self.email= ""
                _self.nombre= ""
                _self.telefone= ""
                _self.calle= ""
                _self.codigopostal= ""
                _self.colonia= ""
                _self.estado= ""
                _self.municipio= ""
                _self.nointerno= ""
                _self.descuento= ""
                _self.obs= ""
                
                _self.getOrderid()

                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)
                    
            })        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    console.log(response)
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    console.log(err)
                    if (callback) {
                        fn(false, err);
                    }
                })
    
            return null;
        }
    },
    'mounted': function(){
        this.getOrderid()
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        _self.paginaStatus()
        _self.liberarAcesso()
    }
});

var $agendagettrital_coach = `<div>
            <header v-bind:class="{ pagina }">
                <div class="container">
                    <img src="/arquivos/iqoslogo.png" alt="iqos" title="iqos" />
                </div>
            </header>
            
            <section id="iqos-form" class="claro">
                
                <div class="two" v-if="acesso.length > 0">
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" >
             
                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        

                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" maxlength="40" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" class="field" maxlength="80" name="email" size="20" type="text" />

                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                        <the-mask class="field" type="text" id="phone" maxlength="40" name="phone" :mask="['##########']" :value="telefone" />

                        <label class="lb-input" for="00N4P00000GOkeR">Dispositivo*</label>
                        <select class="color-dispositivo" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo" >
                            <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>
                            <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                        </select>

                        <label class="lb-input" for="descuento">¿Tienes un código promocional?</label>
                        <input id="descuento" class="field" maxlength="80" name="descuento" size="20" type="text" />

                        <label class="lb-input" for="calle">Calle y número ext.*</label>
                        <input id="calle" class="field" maxlength="80" name="calle" size="20" type="text" />

                        <label class="lb-input" for="nointerno">No. Int / Referencias</label>
                        <input id="nointerno" class="field" maxlength="80" name="nointerno" size="20" type="text" />

                        <label class="lb-input" for="codigopostal">Código Postal*</label>
                        <the-mask class="field" type="text" id="codigopostal" maxlength="40" name="codigopostal" :value="codigopostal" :mask="['#####']" />

                        <label class="lb-input" for="estado">Estado</label>
                        <input id="estado" class="field" maxlength="80" name="estado" size="20" type="text" />

                        <label class="lb-input" for="municipio">Alcaldía / Municipio*</label>
                        <input id="municipio" class="field" maxlength="80" name="municipio" size="20" type="text" />

                        <label class="lb-input" for="colonia">Colonia*</label>
                        <input id="colonia" class="field" maxlength="80" name="colonia" size="20" type="text" />

                        <label class="lb-input" for="obs">¿Entre qué calles está?</label>
                        <textarea id="obs" class="field" maxlength="80" name="obs" size="20" type="text" />

                        
                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                            <input class="TRANSACTION_ID" :value="orderID" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                            <input class="Checkbox_Lending"  id="00N4P00000GOkeH" name="00N4P00000GOkeH" type="checkbox" value="1" />
                        </div>

                        <label class="lb-input" for="coach_alta_email">Coach Alta Email</label>
                        <input :value="loged_in_mail" id="coach_alta_email" class="field" maxlength="80" name="coach_alta_email" size="20" data-nb type="text" />

                        <label class="lb-input" for="coach_seguimiento_email">Coach Seguimiento Email</label>
                        <input id="coach_seguimiento_email" class="field" maxlength="80" name="coach_seguimiento_email" data-nb size="20" type="text" />

                        <fieldset>
                            <label for="aceptoterminos">
                                <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                <span>Acepto <a href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                            </label>

                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition> 

                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
                </div>
                
                <div class="two" v-else>
                    <h5>Tu no tienes acceso a esta página</h5>
                </div>
            </section>
            </div>`;
Vue.component('agendagettrital-coach-component', {
    'template': $agendagettrital_coach,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "coach_alta_email": "",
            "coach_seguimiento_email": "",
            "orderID": "",
            "dispositivo": "",
            "calle": "",
            "codigopostal": "",
            "colonia": "",
            "estado": "",
            "municipio": "",
            "nointerno": "",
            "descuento": "",
            "obs": "",
            "form": "#form",
            "lista": window.lista_coach,
            "acesso": [],
            "source":"LendingCoach",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "declaracao": false,
            "publicidad": false,
            "loged_in_mail": ""
        };

    },
    'methods': {
        "liberarAcesso": function() {
            var _self = this
            vtexjs.checkout.getOrderForm().done(function(orderForm) {
                console.log(orderForm.clientProfileData.email)
                _self.loged_in_mail = orderForm.clientProfileData.email;
                var totalList = _self.lista.length - 1;


                for (let i = 0; i < _self.lista.length; i++) {
                    if (orderForm.loggedIn && orderForm.clientProfileData.email == _self.lista[i]) {
                        _self.acesso= ["liberado"]
                        break
                    }

                    if (totalList == [i]) {
                        if (orderForm.loggedIn && orderForm.clientProfileData.email != _self.lista[i]) {
                            _self.acesso=[]
                        }
                    }
                }
            });
        },
        // "mesyano": function (){  
        //     if (this.$cookies.get("mes") && this.$cookies.get("ano")) {
        //         this.mes = this.$cookies.get("mes");
        //         this.ano = this.$cookies.get("ano");
        //     }
        // },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                _self.source = "LendingCoach";
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "getOrderid": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.orderID = "PMI-"+date
                console.log(this.orderID)
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
      
            if ($("#first_name").val().length < 3) {
              this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
              this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
              this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#calle").val().length < 1) {
                this.errors.push("Ingresa tu calle y número ext.");
            }

            if ($("#codigopostal").val().length < 1) {
                this.errors.push("Ingresa tu código postal");
            }

            if ($("#municipio").val().length < 1) {
                this.errors.push("Ingresa tu alcaldía / municipio");
            }

            if ($("#colonia").val().length < 1) {
                this.errors.push("Ingresa tu colonia");
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }

            if ($("#coach_alta_email").val().length > 1) {
                if(!this.validEmail($("#coach_alta_email").val())){
                    this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
                }
            } 

            if ($("#coach_seguimiento_email").val().length > 1) {
                if(!this.validEmail($("#coach_seguimiento_email").val())){
                    this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
                }
            } 

            if (!this.errors.length) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.coach_alta_email= $("#coach_alta_email").val()
                
                this.coach_seguimiento_email= $("#coach_seguimiento_email").val()
                
                
                this.dispositivo = $("#00N4P00000GOkeR").val()
                this.calle= $("#calle").val()
                this.codigopostal= $("#codigopostal").val()
                this.colonia= $("#colonia").val()
                this.estado= $("#estado").val()
                this.municipio= $("#municipio").val()
                this.nointerno= $("#nointerno").val()
                this.descuento = $("#descuento").val()
                this.obs= $("#obs").val()
                console.log('alta',this.coach_alta_email)
                console.log('seg',this.coach_seguimiento_email)
                _self.envio()
                
            } else {
                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  

            var _self = this
            console.log('before envio',this.coach_alta_email, this.coach_seguimiento_email)
            if (this.coach_seguimiento_email.length == 0 ){
                this.coach_seguimiento_email = "default@mail.com"
            }

            if($("#descuento").val().length <= 0){this.descuento = "RETOCT20"}

            var camposValores = [{
                apellido: this.apelido,
                direccion: this.direccion,
                dispositivo: this.dispositivo,
                email: this.email,
                nombre: this.nombre,
                telefone: this.telefone,
                orderID: this.orderID,
                calle: this.calle,
                codigopostal: this.codigopostal,
                colonia: this.colonia,
                estado: this.estado,
                municipio: this.municipio,
                nointerno: this.nointerno,
                descuento: this.descuento,
                obs: this.obs,
                emailaltacoach: this.coach_alta_email,
                realemailseguimientocoach: this.coach_seguimiento_email
            }]
            console.log('before envio campos',camposValores[0])
            var settings = {
                "url": "/api/dataentities/LP/documents",
                "type": "POST",
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "data": JSON.stringify(camposValores[0]),
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                console.log(_self.email,"correo enviado")
                _self.envio_sales_force()
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "Order ID: "+_self.orderID+" \n\n¡Gracias por tu registro!";


                _self.apelido= ""
                _self.dispositivo= ""
                _self.email= ""
                _self.nombre= ""
                _self.telefone= ""
                _self.calle= ""
                _self.codigopostal= ""
                _self.colonia= ""
                _self.estado= ""
                _self.municipio= ""
                _self.nointerno= ""
                _self.descuento= ""
                _self.obs= ""
                _self.coach_seguimiento_email= ""
                _self.coach_alta_email= _self.loged_in_mail
                
                _self.getOrderid()

                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)
                    
            })        
        },
        "envio_sales_force": function() {  
            
            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()

            settings_salesforce = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GOkeC="+_self.orderID+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GOkeH=1"+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
            }

            _self.ajaxrequest2(settings_salesforce, function() {
                console.log(_self.email,"correo enviado")
                console.log("after ajax call",_self.orderID)
                _self.declaracao = false
                _self.publicidad = false
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                try {
                    window.dataLayer.push({
                        "category": "Form try-coach testing",
                        "action": "Success",
                        "label": "MX",
                        "event": "try-coach"
                    })
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    console.log(response)
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    console.log(errorThrown)
                    console.log(textStatus)
                    console.log(jqXHR)
                    if (callback) {
                        console.log(errorThrown)
                        console.log(textStatus)
                        console.log(jqXHR)
                        fn(false, errorThrown);
                    }
                })
    
            return null;
        },
        "ajaxrequest2": function(settings_salesforce, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings_salesforce)
                .done(function(response) {
                    if (callback) {
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {                        
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        }
    },
    'mounted': function(){
        this.getOrderid()
        // this.mesyano()
        this.utms()
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        _self.paginaStatus()
        _self.liberarAcesso()
        _self.geoFencing()
    }
});

var $agendagettrital_store_coach = `<div>
            <header v-bind:class="{ pagina }">
                <div class="container">
                    <img src="/arquivos/iqoslogo.png" alt="iqos" title="iqos" />
                </div>
            </header>
            
            <section id="iqos-form" class="claro">
                
                <div class="two" v-if="acesso.length > 0">
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" >
             
                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        
                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" maxlength="40" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" class="field" maxlength="80" name="email" size="20" type="text" />

                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                        <the-mask class="field" type="text" id="phone" maxlength="40" name="phone" :mask="['##########']" :value="telefone" />

                        <label class="lb-input" for="00N4P00000GOkeR">Dispositivo*</label>
                        <select class="color-dispositivo" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo" >
                            <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>
                            <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                        </select>





                        <label class="lb-input" for="tienda">Tienda*</label>
                        <select id="tienda" v-model="Tienda">
                        <option disabled value="">Seleccionar tienda</option>
                        <option>IQOS Shop Antara</option>
                        <option>IQOS Shop Capital Reforma</option>
                        <option>IQOS Shop Chedraui Irrigación.</option>
                        <option>IQOS Shop Oasis Coyoacán</option>
                        <option>IQOS Shop Parque Delta</option>
                        <option>IQOS Shop Parque Lindavista</option>
                        <option>IQOS Shop Plaza Satélite</option>
                        <option>IQOS Store Perisur</option>
                        <option>IQOS Store Santa Fe</option>
                        <option>IQOS Corner La Europea Pedregal San Jeronimo</option>
                        <option>IQOS Corner La Europea Interlomas</option>
                        <option>IQOS Corner La Europea Reforma Diana</option>
                        <option>IQOS Corner La Europea Roma Norte</option>
                        <option>IQOS Corner Sanborns Atizapan</option>
                        <option>IQOS Corner Sanborns Azcapotzalco</option>
                        <option>IQOS Corner Sanborns Centenario</option>
                        <option>IQOS Corner Sanborns Del Valle</option>
                        <option>IQOS Corner Sanborns Ecatepec Las Américas</option>
                        <option>IQOS Corner Sanborns Galerias Coapa</option>
                        <option>IQOS Corner Sanborns Galerias Insurgentes</option>
                        <option>IQOS Corner Sanborns Gran Sur</option>
                        <option>IQOS Corner Sanborns Interlomas</option>
                        <option>IQOS Corner Sanborns Las Aguilas</option>
                        <option>IQOS Corner Sanborns Lomas Plaza</option>
                        <option>IQOS Corner Sanborns Loreto</option>
                        <option>IQOS Corner Sanborns Madero</option>
                        <option>IQOS Corner Sanborns Masaryk</option>
                        <option>IQOS Corner Sanborns Metropoli</option>
                        <option>IQOS Corner Sanborns Nuevo Tlalnepantla</option>
                        <option>IQOS Corner Sanborns Pabellon Bosques</option>
                        <option>IQOS Corner Sanborns Pabellon Polanco</option>
                        <option>IQOS Corner Sanborns Palmas</option>
                        <option>IQOS Corner Sanborns Parque Delta</option>
                        <option>IQOS Corner Sanborns Parque el Toreo</option>
                        <option>IQOS Corner Sanborns Parque Lindavista</option>
                        <option>IQOS Corner Sanborns Parque Tezontle</option>
                        <option>IQOS Corner Sanborns Pedregal</option>
                        <option>IQOS Corner Sanborns Perisur</option>
                        <option>IQOS Corner Sanborns Plaza Carso</option>
                        <option>IQOS Corner Sanborns Plaza Inbursa</option>
                        <option>IQOS Corner Sanborns Plaza Insurgentes</option>
                        <option>IQOS Corner Sanborns Reforma 222</option>
                        <option>IQOS Corner Sanborns San Antonio</option>
                        <option>IQOS Corner Sanborns Santa Fe</option>
                        <option>IQOS Corner Sanborns Santa Fe Samara</option>
                        <option>IQOS Corner Sanborns Satelite</option>
                        <option>IQOS Corner Sanborns Universidad</option>
                        <option>IQOS Corner Sanborns Via Vallejo</option>
                        <option>IQOS Corner Sanborns Villa Coapa</option>
                        <option>IQOS Corner Sanborns San Mateo</option>
                        </select>

                        <label class="lb-input" style="margin-bottom:20px">Género</label>
                        <div class="field" style="display: flex;max-width: inherit;align-items: baseline;">
                            <label for="hombre">Hombre</label>
                            <input type="radio" id="hombre" value="Masculino" v-model="genero">
                    
                            <label for="Mujer">Mujer</label>
                            <input type="radio" id="mujer" value="Femenino" v-model="genero">
                        </div>

                        <label class="lb-input" for="codigoCaja">Ingresa código de kit de prestamo*</label>
                        <input id="codigoCaja" maxlength="200" name="codigoCaja" class="field" size="20" type="text" />

                        <label class="lb-input" for="marcaCigarros">Marca de cigarros</label>
                        <select id="marcaCigarros" v-model="marcaCigarros">
                            <option disabled value="">Seleccionar marca de cigarros</option>
                            <option>Marlboro</option>
                            <option>Lucky Strike</option>
                            <option>Pall Mall</option>
                            <option>Camel</option>
                            <option>Benson & Hedges </option>
                            <option>Otros</option>
                        </select>

                        <label class="lb-input" style="margin-bottom:20px">¿Compro HEETS?</label>
                        <div class="field" style="display: flex;max-width: inherit;align-items: baseline;">
                            <label for="si">Si</label>
                            <input type="radio" id="si" value="Si" v-model="comproHeets">
                    
                            <label for="no">No</label>
                            <input type="radio" id="no" value="No" v-model="comproHeets">
                        </div>

                        <div v-if="comproHeets == 'Si'">
                            <label class="lb-input" for="amberInicial">Amber Inicial</label>
                            <input id="amberInicial" class="field" maxlength="200" name="amberInicial" size="20" v-model="amberInicial"  type="number" />

                            <label class="lb-input" for="siennaInicial">Sienna Inicial</label>
                            <input id="siennaInicial" class="field" maxlength="200" name="siennaInicial" size="20" v-model="siennaInicial" type="number" />

                            <label class="lb-input" for="turquoiseInicial">Turquoise Inicial</label>
                            <input id="turquoiseInicial" class="field" maxlength="200" name="turquoiseInicial" size="20" v-model="turquoiseInicial" type="number" />

                            <label class="lb-input" for="blueInicial">Blue Inicial</label>
                            <input id="blueInicial" class="field" maxlength="200" name="blueInicial" size="20" v-model="blueInicial" type="number" />

                            <label class="lb-input" for="purpleInicial">Purple Inicial</label>
                            <input id="purpleInicial" class="field" maxlength="200" name="purpleInicial" size="20" v-model="purpleInicial" type="number" />

                            <label class="lb-input" for="yellowInicial">Yellow Inicial</label>
                            <input id="yellowInicial" class="field" maxlength="200" name="yellowInicial" size="20" v-model="yellowInicial" type="number" />
                            
                        </div>

                        <label class="lb-input" for="descuento">¿Tienes un código promocional?</label>
                        <input id="descuento" class="field" maxlength="80" name="descuento" size="20" type="text" />

                        <label class="lb-input" for="codigopostal">Código Postal*</label>
                        <the-mask class="field" type="text" id="codigopostal" maxlength="40" name="codigopostal" :value="codigopostal" :mask="['#####']" />

                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                            <input class="TRANSACTION_ID" :value="orderID" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                            <input class="Checkbox_Lending"  id="00N4P00000GOkeH" name="00N4P00000GOkeH" type="checkbox" value="1" />
                        </div>

                        <label class="lb-input" for="coach_alta_email">Coach Alta Email</label>
                        <input :value="loged_in_mail" id="coach_alta_email" class="field" maxlength="80" name="coach_alta_email" size="20" data-nb type="text" />

                        <fieldset>
                            <label for="aceptoterminos">
                                <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                <span>Acepto <a href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                            </label>

                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition> 

                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
                </div>
                <div class="two" v-else>
                    <h5>Tu no tienes acceso a esta página</h5>
                </div>
            </section>
            </div>`;
Vue.component('agendagettrital-store-coach-component', {
    'template': $agendagettrital_store_coach,
    'data': function() {
        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "coach_alta_email": "",
            "coach_seguimiento_email": "",
            "orderID": "",
            "dispositivo": "",
            "codigopostal": "",
            "descuento": "",
            "form": "#form",
            "lista": window.lista_coach,
            "acesso": [],
            "source":"LendingTiendasIQOS",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "declaracao": false,
            "publicidad": false,
            "loged_in_mail": "",
            "Tienda":"",
            "genero":"",
            "codigoCaja":"",
            "marcaCigarros":"",
            "comproHeets":"",
            "amberInicial":null,
            "turquoiseInicial":null,
            "siennaInicial":null,
            "blueInicial":null,
            "purpleInicial":null,
            "yellowInicial":null
        };

    },
    'methods': {
        "liberarAcesso": function() {
            var _self = this
            vtexjs.checkout.getOrderForm().done(function(orderForm) {
                console.log(orderForm.clientProfileData.email)
                _self.loged_in_mail = orderForm.clientProfileData.email;
                var totalList = _self.lista.length - 1;
                console.log(window.lista_coach)
                console.log(window)
                console.log(totalList)


                for (let i = 0; i < _self.lista.length; i++) {
                    if (orderForm.loggedIn && orderForm.clientProfileData.email == _self.lista[i]) {
                        _self.acesso= ["liberado"]
                        break
                    }

                    if (totalList == [i]) {
                        if (orderForm.loggedIn && orderForm.clientProfileData.email != _self.lista[i]) {
                            _self.acesso=[]
                        }
                    }
                }
            });
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                _self.source = "LendingTiendasIQOS";
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "getOrderid": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.orderID = "PMI-"+date
                console.log(this.orderID)
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#codigopostal").val().length < 1) {
                this.errors.push("Ingresa tu código postal");
            }

            if ($("#codigoCaja").val().length < 1) {
                this.errors.push("Ingresa tu código de kit de prestamo");
            }

            
            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }
            
            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }
            
            if ($("#coach_alta_email").val().length > 1) {
                if(!this.validEmail($("#coach_alta_email").val())){
                    this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
                }
            } 
            
            if ($("#tienda").val() == null ) {
                this.errors.push("Ingresa tu tienda");
            }
            
            if (this.comproHeets == "" ) {
                this.errors.push("Indica si compro HEETS");
            }

            if (this.comproHeets == "Si" && $("#amberInicial").val().length <= 0 && $("#turquoiseInicial").val().length <= 0 && $("#yellowInicial").val().length <= 0 && $("#purpleInicial").val().length <= 0 && $("#blueInicial").val().length <= 0  && $("#siennaInicial").val().length <= 0 ) {
                this.errors.push("Indica cantidad de HEETS comprados");
            }

            
            if (this.comproHeets == "Si"){
                if ( $("#amberInicial").val().length <= 0 ) { 
                    this.amberInicial = 0
                }
    
                if ($("#turquoiseInicial").val().length <= 0){
                    this.turquoiseInicial = 0
                }
                
                if ($("#yellowInicial").val().length <= 0){
                    this.yellowInicial = 0
                }
    
                if ($("#purpleInicial").val().length <= 0){
                    this.purpleInicial = 0
                }
    
                if ($("#blueInicial").val().length <= 0){
                    this.blueInicial = 0
                }
    
                if ($("#siennaInicial").val().length <= 0){
                    this.siennaInicial = 0
                }
            } else if (this.comproHeets == "No"){
                this.amberInicial = 0
                this.siennaInicial = 0
                this.turquoiseInicial = 0
                this.blueInicial = 0
                this.yellowInicial = 0
                this.purpleInicial = 0
            }

            if (!this.errors.length) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.coach_alta_email= $("#coach_alta_email").val()                
                this.dispositivo = $("#00N4P00000GOkeR").val()
                this.codigopostal= $("#codigopostal").val()
                this.descuento = $("#descuento").val()
                this.Tienda = $("#tienda").val()
                this.codigoCaja = $("#codigoCaja").val()
                this.marcaCigarros = $("#marcaCigarros").val()
                if($("#tienda").val() == "IQOS Shop Antara" ||
                    $("#tienda").val() == "IQOS Shop Capital Reforma" ||
                    $("#tienda").val() == "IQOS Shop Chedraui Irrigación."  ||
                    $("#tienda").val() == "IQOS Shop Oasis Coyoacán" ||
                    $("#tienda").val() == "IQOS Shop Parque Delta" ||
                    $("#tienda").val() == "IQOS Shop Parque Lindavista" ||
                     $("#tienda").val() == "IQOS Shop Plaza Satélite" ||
                    $("#tienda").val() == "IQOS Store Perisur" ||
                    $("#tienda").val() == "IQOS Store Santa Fe") {
                        _self.envioCompraDirecto()
                } else {
                    _self.envio()
                }     
                
            } else {
                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  

            var _self = this
            console.log('before envio',this.coach_alta_email, this.coach_seguimiento_email)
            if (this.coach_seguimiento_email.length == 0 ){
                this.coach_seguimiento_email = "default@mail.com"
            }

            if($("#descuento").val().length <= 0){this.descuento = "RETOCT20"}

            var camposValores = [{
                apellido: this.apelido,
                dispositivo: this.dispositivo,
                email: this.email,
                nombre: this.nombre,
                telefone: this.telefone,
                orderID: this.orderID,
                codigopostal: this.codigopostal,
                descuento: this.descuento,
                emailaltacoach: this.coach_alta_email,
                realemailseguimientocoach: this.coach_seguimiento_email,
                amberinicial:this.amberInicial,
                siennainicial:this.siennaInicial,
                turquoiseinicial:this.turquoiseInicial,
                blueinicial:this.blueInicial,
                yellowinicial:this.yellowInicial,
                purplewaveinicial:this.purpleInicial,
                comproheets:this.comproHeets,
                marcacigarros:this.marcaCigarros,
                codigocaja:this.codigoCaja,
                sexo:this.genero,
                // directocompra:this.Tienda,
                prestamoenindirecto:this.Tienda,
                estatusorden: "Prestamo en proceso"
            }]
            console.log(camposValores[0])
            var settings = {
                "url": "/api/dataentities/LP/documents",
                "type": "POST",
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "data": JSON.stringify(camposValores[0]),
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                _self.envio_sales_force()
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "Order ID: "+_self.orderID+" \n\n¡Gracias por tu registro!";
                _self.apelido= ""
                _self.dispositivo= ""
                _self.email= ""
                _self.nombre= ""
                _self.telefone= ""
                _self.codigopostal= ""
                _self.descuento= ""
                _self.coach_seguimiento_email= ""
                _self.coach_alta_email= _self.loged_in_mail,
                _self.Tienda = "",
                _self.comproHeets= "",
                _self.marcaCigarros="",
                _self.codigoCaja = "",
                _self.genero= "",
                _self.turquoiseInicial= null,
                _self.amberInicial = null,
                _self.blueInicial = null,
                _self.purpleInicial= null,
                _self.yellowInicial = null,
                _self.siennaInicial = null
                
                _self.getOrderid()

                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)
                    
            })        
        },
        "envioCompraDirecto": function() {  

            var _self = this
            console.log('before envio',this.coach_alta_email, this.coach_seguimiento_email)
            if (this.coach_seguimiento_email.length == 0 ){
                this.coach_seguimiento_email = "default@mail.com"
            }

            if($("#descuento").val().length <= 0){this.descuento = "RETOCT20"}

            var camposValores = [{
                apellido: this.apelido,
                dispositivo: this.dispositivo,
                email: this.email,
                nombre: this.nombre,
                telefone: this.telefone,
                orderID: this.orderID,
                codigopostal: this.codigopostal,
                descuento: this.descuento,
                emailaltacoach: this.coach_alta_email,
                realemailseguimientocoach: this.coach_seguimiento_email,
                amberinicial:this.amberInicial,
                siennainicial:this.siennaInicial,
                turquoiseinicial:this.turquoiseInicial,
                blueinicial:this.blueInicial,
                yellowinicial:this.yellowInicial,
                purplewaveinicial:this.purpleInicial,
                comproheets:this.comproHeets,
                marcacigarros:this.marcaCigarros,
                codigocaja:this.codigoCaja,
                sexo:this.genero,
                prestamoendirecto:this.Tienda,
                estatusorden: "Prestamo en proceso"
                // indirectocompra:this.Tienda
            }]
            console.log(camposValores[0])
            var settings = {
                "url": "/api/dataentities/LP/documents",
                "type": "POST",
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "data": JSON.stringify(camposValores[0]),
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                _self.envio_sales_force()
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "Order ID: "+_self.orderID+" \n\n¡Gracias por tu registro!";
                _self.apelido= ""
                _self.dispositivo= ""
                _self.email= ""
                _self.nombre= ""
                _self.telefone= ""
                _self.codigopostal= ""
                _self.descuento= ""
                _self.coach_seguimiento_email= ""
                _self.coach_alta_email= _self.loged_in_mail,
                _self.Tienda = "",
                _self.comproHeets= "",
                _self.marcaCigarros="",
                _self.codigoCaja = "",
                _self.genero= "",
                _self.turquoiseInicial= 0,
                _self.amberInicial = 0,
                _self.blueInicial = 0,
                _self.purpleInicial= 0,
                _self.yellowInicial = 0,
                _self.siennaInicial = 0
                
                _self.getOrderid()

                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)
                    
            })        
        },
        "envio_sales_force": function() {  
            
            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()

            settings_salesforce = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GOkeC="+_self.orderID+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GOkeH=1"+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
            }

            _self.ajaxrequest2(settings_salesforce, function() {
                console.log("after ajax call",_self.orderID)
                _self.declaracao = false
                _self.publicidad = false
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                try {
                    window.dataLayer.push({
                        "category": "Form try-coach testing",
                        "action": "Success",
                        "label": "MX",
                        "event": "try-coach"
                    })
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        console.log(jqXHR)
                        console.log(textStatus)
                        console.log(errorThrown)
                        fn(false, errorThrown);
                    }
                })
    
            return null;
        },
        "ajaxrequest2": function(settings_salesforce, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings_salesforce)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {                        
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        }
    },
    'mounted': function(){
        this.getOrderid()
        this.utms()
        $(document).ready(function() {
            $("#amberInicial").on("keyup", function() {
              var value = $(this).val();
              $(this).val($(this).data("initial") + value.substring(1));
            });
            $("#turquoiseInicial").on("keyup", function() {
                var value = $(this).val();
                $(this).val($(this).data("initial") + value.substring(1));
            });
            $("#siennaInicial").on("keyup", function() {
                var value = $(this).val();
                $(this).val($(this).data("initial") + value.substring(1));
            });
            $("#blueInicial").on("keyup", function() {
                var value = $(this).val();
                $(this).val($(this).data("initial") + value.substring(1));
            });
            $("#yellowInicial").on("keyup", function() {
                var value = $(this).val();
                $(this).val($(this).data("initial") + value.substring(1));
            });
            $("#purpleInicial").on("keyup", function() {
                var value = $(this).val();
                $(this).val($(this).data("initial") + value.substring(1));
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        _self.paginaStatus()
        _self.liberarAcesso()
        _self.geoFencing()
    }
});

var $agendagettrital_indirect = `<div>
            <header v-bind:class="{ pagina }">
                <div class="container">
                    <img src="/arquivos/iqoslogo.png" alt="iqos" title="iqos" />
                </div>
            </header>
            
            <section id="iqos-form" class="claro">
                
                <div class="two" v-if="acesso.length > 0">
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" >
             
                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        
                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" maxlength="40" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input id="last_name" maxlength="80" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" class="field" maxlength="80" name="email" size="20" type="text" />

                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                        <the-mask class="field" type="text" id="phone" maxlength="40" name="phone" :mask="['##########']" :value="telefone" />

                        <label class="lb-input" for="00N4P00000GOkeR">Dispositivo*</label>
                        <select class="color-dispositivo" id="00N4P00000GOkeR" name="00N4P00000GOkeR" title="Tipo de dispositivo" >
                            <option value="IQOS 2.4 Azul">IQOS 2.4 Azul</option>
                            <option value="IQOS 2.4 Blanco">IQOS 2.4 Blanco</option>
                        </select>

                        
                        <label class="lb-input" for="tienda">Tienda*</label>
                        <select id="tienda" v-model="Tienda">
                        <option disabled value="">Seleccionar tienda</option>
                        <option>IQOS Shop Antara</option>
                        <option>IQOS Shop Capital Reforma</option>
                        <option>IQOS Shop Chedraui Irrigación.</option>
                        <option>IQOS Shop Oasis Coyoacán</option>
                        <option>IQOS Shop Parque Delta</option>
                        <option>IQOS Shop Parque Lindavista</option>
                        <option>IQOS Shop Plaza Satélite</option>
                        <option>IQOS Store Perisur</option>
                        <option>IQOS Store Santa Fe</option>
                        <option>IQOS Corner La Europea Pedregal San Jeronimo</option>
                        <option>IQOS Corner La Europea Interlomas</option>
                        <option>IQOS Corner La Europea Reforma Diana</option>
                        <option>IQOS Corner La Europea Roma Norte</option>
                        <option>IQOS Corner Sanborns Atizapan</option>
                        <option>IQOS Corner Sanborns Azcapotzalco</option>
                        <option>IQOS Corner Sanborns Centenario</option>
                        <option>IQOS Corner Sanborns Del Valle</option>
                        <option>IQOS Corner Sanborns Ecatepec Las Américas</option>
                        <option>IQOS Corner Sanborns Galerias Coapa</option>
                        <option>IQOS Corner Sanborns Galerias Insurgentes</option>
                        <option>IQOS Corner Sanborns Gran Sur</option>
                        <option>IQOS Corner Sanborns Interlomas</option>
                        <option>IQOS Corner Sanborns Las Aguilas</option>
                        <option>IQOS Corner Sanborns Lomas Plaza</option>
                        <option>IQOS Corner Sanborns Loreto</option>
                        <option>IQOS Corner Sanborns Madero</option>
                        <option>IQOS Corner Sanborns Masaryk</option>
                        <option>IQOS Corner Sanborns Metropoli</option>
                        <option>IQOS Corner Sanborns Nuevo Tlalnepantla</option>
                        <option>IQOS Corner Sanborns Pabellon Bosques</option>
                        <option>IQOS Corner Sanborns Pabellon Polanco</option>
                        <option>IQOS Corner Sanborns Palmas</option>
                        <option>IQOS Corner Sanborns Parque Delta</option>
                        <option>IQOS Corner Sanborns Parque el Toreo</option>
                        <option>IQOS Corner Sanborns Parque Lindavista</option>
                        <option>IQOS Corner Sanborns Parque Tezontle</option>
                        <option>IQOS Corner Sanborns Pedregal</option>
                        <option>IQOS Corner Sanborns Perisur</option>
                        <option>IQOS Corner Sanborns Plaza Carso</option>
                        <option>IQOS Corner Sanborns Plaza Inbursa</option>
                        <option>IQOS Corner Sanborns Plaza Insurgentes</option>
                        <option>IQOS Corner Sanborns Reforma 222</option>
                        <option>IQOS Corner Sanborns San Antonio</option>
                        <option>IQOS Corner Sanborns Santa Fe</option>
                        <option>IQOS Corner Sanborns Santa Fe Samara</option>
                        <option>IQOS Corner Sanborns Satelite</option>
                        <option>IQOS Corner Sanborns Universidad</option>
                        <option>IQOS Corner Sanborns Via Vallejo</option>
                        <option>IQOS Corner Sanborns Villa Coapa</option>
                        <option>IQOS Corner Sanborns San Mateo</option>
                        </select>

                        <label class="lb-input" style="margin-bottom:20px">Género</label>
                        <div class="field" style="display: flex;max-width: inherit;align-items: baseline;">
                            <label for="hombre">Hombre</label>
                            <input type="radio" id="hombre" value="Masculino" v-model="genero">
                    
                            <label for="Mujer">Mujer</label>
                            <input type="radio" id="mujer" value="Femenino" v-model="genero">
                        </div>

                        <label class="lb-input" for="codigoCaja">Ingresa código de kit de prestamo*</label>
                        <input id="codigoCaja" maxlength="200" name="codigoCaja" class="field" size="20" type="text" />

                        <label class="lb-input" for="marcaCigarros">Marca de cigarros</label>
                        <select id="marcaCigarros" v-model="marcaCigarros">
                            <option disabled value="">Seleccionar marca de cigarros</option>
                            <option>Marlboro</option>
                            <option>Lucky Strike</option>
                            <option>Pall Mall</option>
                            <option>Camel</option>
                            <option>Benson & Hedges </option>
                            <option>Otros</option>
                        </select>

                        <label class="lb-input" style="margin-bottom:20px">¿Compro HEETS?</label>
                        <div class="field" style="display: flex;max-width: inherit;align-items: baseline;">
                            <label for="si">Si</label>
                            <input type="radio" id="si" value="Si" v-model="comproHeets">
                    
                            <label for="no">No</label>
                            <input type="radio" id="no" value="No" v-model="comproHeets">
                        </div>

                        <div v-if="comproHeets == 'Si'">
                            <label class="lb-input" for="amberInicial">Amber Inicial</label>
                            <input id="amberInicial" class="field" maxlength="200" name="amberInicial" size="20" v-model="amberInicial"  type="number" />

                            <label class="lb-input" for="siennaInicial">Sienna Inicial</label>
                            <input id="siennaInicial" class="field" maxlength="200" name="siennaInicial" size="20" v-model="siennaInicial" type="number" />

                            <label class="lb-input" for="turquoiseInicial">Turquoise Inicial</label>
                            <input id="turquoiseInicial" class="field" maxlength="200" name="turquoiseInicial" size="20" v-model="turquoiseInicial" type="number" />

                            <label class="lb-input" for="blueInicial">Blue Inicial</label>
                            <input id="blueInicial" class="field" maxlength="200" name="blueInicial" size="20" v-model="blueInicial" type="number" />

                            <label class="lb-input" for="purpleInicial">Purple Inicial</label>
                            <input id="purpleInicial" class="field" maxlength="200" name="purpleInicial" size="20" v-model="purpleInicial" type="number" />

                            <label class="lb-input" for="yellowInicial">Yellow Inicial</label>
                            <input id="yellowInicial" class="field" maxlength="200" name="yellowInicial" size="20" v-model="yellowInicial" type="number" />
                            
                        </div>





                        <label class="lb-input" for="descuento">¿Tienes un código promocional?</label>
                        <input id="descuento" class="field" maxlength="80" name="descuento" size="20" type="text" />

                        <label class="lb-input" for="codigopostal">Código Postal*</label>
                        <the-mask class="field" type="text" id="codigopostal" maxlength="40" name="codigopostal" :value="codigopostal" :mask="['#####']" />

                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                            <input class="TRANSACTION_ID" :value="orderID" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                            <input class="Checkbox_Lending"  id="00N4P00000GOkeH" name="00N4P00000GOkeH" type="checkbox" value="1" />
                        </div>

                        <label class="lb-input" for="coach_alta_email">Coach Alta Email</label>
                        <input :value="loged_in_mail" id="coach_alta_email" class="field" maxlength="80" name="coach_alta_email" size="20" data-nb type="text" />

                        <fieldset>
                            <label for="aceptoterminos">
                                <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                <span>Acepto <a href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                            </label>

                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition> 

                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
                </div>
                <div class="two" v-else>
                    <h5>Tu no tienes acceso a esta página</h5>
                </div>
            </section>
            </div>`;
Vue.component('agendagettrital-indirect-component', {
    'template': $agendagettrital_indirect,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "email": "",
            "coach_alta_email": "",
            "coach_seguimiento_email": "",
            "orderID": "",
            "dispositivo": "",
            "codigopostal": "",
            "descuento": "",
            "form": "#form",
            "lista": window.lista_indirect,
            "acesso": [],
            "source":"LendingIndirect",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "declaracao": false,
            "publicidad": false,
            "loged_in_mail": "",
            "Tienda":"",
            "genero":"",
            "codigoCaja":"",
            "marcaCigarros":"",
            "comproHeets":"",
            "amberInicial":null,
            "turquoiseInicial":null,
            "siennaInicial":null,
            "blueInicial":null,
            "purpleInicial":null,
            "yellowInicial":null
        };

    },
    'methods': {
        "liberarAcesso": function() {
            var _self = this
            vtexjs.checkout.getOrderForm().done(function(orderForm) {
                console.log(orderForm.clientProfileData.email)
                _self.loged_in_mail = orderForm.clientProfileData.email;
                console.log(_self.lista)
                console.log(window.lista_indirect)
                console.log(window)
                var totalList = _self.lista.length - 1;


                for (let i = 0; i < _self.lista.length; i++) {
                    if (orderForm.loggedIn && orderForm.clientProfileData.email == _self.lista[i]) {
                        _self.acesso= ["liberado"]
                        break
                    }

                    if (totalList == [i]) {
                        if (orderForm.loggedIn && orderForm.clientProfileData.email != _self.lista[i]) {
                            _self.acesso=[]
                        }
                    }
                }
            });
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                _self.source = "LendingIndirect";
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_medium;
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "getOrderid": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.orderID = "PMI-"+date
                console.log(this.orderID)
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#codigopostal").val().length < 1) {
                this.errors.push("Ingresa tu código postal");
            }

            if ($("#codigoCaja").val().length < 1) {
                this.errors.push("Ingresa tu código de kit de prestamo");
            }

            if (this.comproHeets == "" ) {
                this.errors.push("Indica si compro HEETS");
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }

            if ($("#coach_alta_email").val().length > 1) {
                if(!this.validEmail($("#coach_alta_email").val())){
                    this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
                }
            }
            
            if ($("#tienda").val() == null ) {
                this.errors.push("Ingresa tu tienda");
            }

            if (this.comproHeets == "Si" && $("#amberInicial").val().length <= 0 && $("#turquoiseInicial").val().length <= 0 && $("#yellowInicial").val().length <= 0 && $("#purpleInicial").val().length <= 0 && $("#blueInicial").val().length <= 0  && $("#siennaInicial").val().length <= 0 ) {
                this.errors.push("Indica cantidad de HEETS comprados");
            }

            if (this.comproHeets == "Si"){
                if ( $("#amberInicial").val().length <= 0 ) { 
                    this.amberInicial = 0
                }
    
                if ($("#turquoiseInicial").val().length <= 0){
                    this.turquoiseInicial = 0
                }
                
                if ($("#yellowInicial").val().length <= 0){
                    this.yellowInicial = 0
                }
    
                if ($("#purpleInicial").val().length <= 0){
                    this.purpleInicial = 0
                }
    
                if ($("#blueInicial").val().length <= 0){
                    this.blueInicial = 0
                }
    
                if ($("#siennaInicial").val().length <= 0){
                    this.siennaInicial = 0
                }
            } else if (this.comproHeets == "No"){
                this.amberInicial = 0
                this.siennaInicial = 0
                this.turquoiseInicial = 0
                this.blueInicial = 0
                this.yellowInicial = 0
                this.purpleInicial = 0
            }

            

            if (!this.errors.length) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.coach_alta_email= $("#coach_alta_email").val()                
                this.dispositivo = $("#00N4P00000GOkeR").val()
                this.codigopostal= $("#codigopostal").val()
                this.descuento = $("#descuento").val()
                this.Tienda = $("#tienda").val()
                this.codigoCaja = $("#codigoCaja").val()
                this.marcaCigarros = $("#marcaCigarros").val()
                if($("#tienda").val() == "IQOS Shop Antara" ||
                    $("#tienda").val() == "IQOS Shop Capital Reforma" ||
                    $("#tienda").val() == "IQOS Shop Chedraui Irrigación."  ||
                    $("#tienda").val() == "IQOS Shop Oasis Coyoacán" ||
                    $("#tienda").val() == "IQOS Shop Parque Delta" ||
                    $("#tienda").val() == "IQOS Shop Parque Lindavista" ||
                     $("#tienda").val() == "IQOS Shop Plaza Satélite" ||
                    $("#tienda").val() == "IQOS Store Perisur" ||
                    $("#tienda").val() == "IQOS Store Santa Fe") {
                        _self.envioCompraDirecto()
                } else {
                    _self.envio()
                }
                
            } else {
                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        "envio": function() {  

            var _self = this
            console.log('before envio',this.coach_alta_email, this.coach_seguimiento_email)
            if (this.coach_seguimiento_email.length == 0 ){
                this.coach_seguimiento_email = "default@mail.com"
            }

            if($("#descuento").val().length <= 0){this.descuento = "RETOCT20"}

            var camposValores = [{
                apellido: this.apelido,
                dispositivo: this.dispositivo,
                email: this.email,
                nombre: this.nombre,
                telefone: this.telefone,
                orderID: this.orderID,
                codigopostal: this.codigopostal,
                descuento: this.descuento,
                emailaltacoach: this.coach_alta_email,
                realemailseguimientocoach: this.coach_seguimiento_email,
                amberinicial:this.amberInicial,
                siennainicial:this.siennaInicial,
                turquoiseinicial:this.turquoiseInicial,
                blueinicial:this.blueInicial,
                yellowinicial:this.yellowInicial,
                purplewaveinicial:this.purpleInicial,
                comproheets:this.comproHeets,
                marcacigarros:this.marcaCigarros,
                codigocaja:this.codigoCaja,
                sexo:this.genero,
                // directocompra:this.Tienda,
                prestamoenindirecto:this.Tienda,
                estatusorden: "Prestamo en proceso"
            }]
            console.log(camposValores[0])
            var settings = {
                "url": "/api/dataentities/LP/documents",
                "type": "POST",
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "data": JSON.stringify(camposValores[0]),
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                _self.envio_sales_force()
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "Order ID: "+_self.orderID+" \n\n¡Gracias por tu registro!";
                _self.apelido= ""
                _self.dispositivo= ""
                _self.email= ""
                _self.nombre= ""
                _self.telefone= ""
                _self.codigopostal= ""
                _self.descuento= ""
                _self.coach_seguimiento_email= ""
                _self.coach_alta_email= _self.loged_in_mail,
                _self.Tienda = "",
                _self.comproHeets= "",
                _self.marcaCigarros="",
                _self.codigoCaja = "",
                _self.genero= "",
                _self.turquoiseInicial= null,
                _self.amberInicial = null,
                _self.blueInicial = null,
                _self.purpleInicial= null,
                _self.yellowInicial = null,
                _self.siennaInicial = null
                
                _self.getOrderid()

                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)
                    
            })        
        },
        "envioCompraDirecto": function() {  

            var _self = this
            console.log('before envio',this.coach_alta_email, this.coach_seguimiento_email)
            if (this.coach_seguimiento_email.length == 0 ){
                this.coach_seguimiento_email = "default@mail.com"
            }
            console.log("length of field descount",$("#descuento").val().length)
            if($("#descuento").val().length <= 0){this.descuento = "RETOCT20"}

            var camposValores = [{
                apellido: this.apelido,
                dispositivo: this.dispositivo,
                email: this.email,
                nombre: this.nombre,
                telefone: this.telefone,
                orderID: this.orderID,
                codigopostal: this.codigopostal,
                descuento: this.descuento,
                emailaltacoach: this.coach_alta_email,
                realemailseguimientocoach: this.coach_seguimiento_email,
                amberinicial:this.amberInicial,
                siennainicial:this.siennaInicial,
                turquoiseinicial:this.turquoiseInicial,
                blueinicial:this.blueInicial,
                yellowinicial:this.yellowInicial,
                purplewaveinicial:this.purpleInicial,
                comproheets:this.comproHeets,
                marcacigarros:this.marcaCigarros,
                codigocaja:this.codigoCaja,
                sexo:this.genero,
                prestamoendirecto:this.Tienda,
                estatusorden: "Prestamo en proceso"
                // indirectocompra:this.Tienda
            }]
            console.log(camposValores[0])
            var settings = {
                "url": "/api/dataentities/LP/documents",
                "type": "POST",
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "data": JSON.stringify(camposValores[0]),
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest(settings, function() {
                console.log(_self.email,"correo enviado")
                _self.envio_sales_force()
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "Order ID: "+_self.orderID+" \n\n¡Gracias por tu registro!";
                _self.apelido= ""
                _self.dispositivo= ""
                _self.email= ""
                _self.nombre= ""
                _self.telefone= ""
                _self.codigopostal= ""
                _self.descuento= ""
                _self.coach_seguimiento_email= ""
                _self.coach_alta_email= _self.loged_in_mail,
                _self.Tienda = "",
                _self.comproHeets= "",
                _self.marcaCigarros="",
                _self.codigoCaja = "",
                _self.genero= "",
                _self.turquoiseInicial= 0,
                _self.amberInicial = 0,
                _self.blueInicial = 0,
                _self.purpleInicial= 0,
                _self.yellowInicial = 0,
                _self.siennaInicial = 0
                
                _self.getOrderid()

                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)
                    
            })        
        },
        "envio_sales_force": function() {  
            
            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }
            
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()

            settings_salesforce = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P000008mN2L="+_self.source+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GOkeC="+_self.orderID+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000GOkeR="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000GOkeM="+_self.descuento+"&00N4P00000GOkeH=1"+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
            }

            _self.ajaxrequest2(settings_salesforce, function() {
                console.log(_self.email,"correo enviado")
                console.log("after ajax call",_self.orderID)
                _self.declaracao = false
                _self.publicidad = false
                $("#00N4P00000GZEGJ, #aceptoterminos").attr("checked", false)
                try {
                    window.dataLayer.push({
                        "category": "Form try-coach testing",
                        "action": "Success",
                        "label": "MX",
                        "event": "try-coach"
                    })
                } catch (e) {console.log(e)}
                    
            })
        
        },
        "ajaxrequest": function(settings, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(jqXHR, textStatus, errorThrown) {
                    if (callback) {
                        fn(false, errorThrown);
                    }
                })
    
            return null;
        },
        "ajaxrequest2": function(settings_salesforce, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings_salesforce)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {                        
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        }
    },
    'mounted': function(){
        this.getOrderid()
        this.utms()
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        _self.paginaStatus()
        _self.liberarAcesso()
        _self.geoFencing()
    }
});


var $TiendasWL = `<div>
            <header v-bind:class="{ pagina }">
                <div class="container">
                    <img src="/arquivos/newIqosLogoMay.png" alt="iqos" title="iqos" />
                </div>
            </header>
            
            <section id="iqos-form" class="claro">
                
                <div class="two" >
                    <form id="form" autocomplete="off" method="POST" novalidate="false" @submit.prevent="checkForm($event)" action="https://webto.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" >
             
                        <input type=hidden name="oid" value="00D4P000000h9QV">
                        <input type=hidden name="retURL" value="http://www.iqos.com">
                        <input type=hidden id="00N4P00000HE6pF" name="00N4P00000HE6pF" :value="hostName" >
                        
                        <label class="lb-input" for="first_name">NOMBRE*</label>
                        <input  id="first_name" maxlength="25" class="field" name="first_name" size="20" type="text" />

                        <label class="lb-input" for="last_name">Apellido(s)*</label>
                        <input id="last_name" maxlength="25" name="last_name" class="field" size="20" type="text" />

                        <label class="lb-input" for="email">Email*</label>
                        <input id="email" class="field" maxlength="80" name="email" size="20" type="text" />

                        <label class="lb-input" for="phone">TELÉFONO (10 DÍGITOS)*</label>
                        <the-mask class="field" type="text" id="phone" maxlength="40" name="phone" :mask="['##########']" :value="telefone" />

                       
                        <label class="lb-input" for="00N4P00000HHy8K">¿En que dispositivo está interesado?*</label>
                        <select class="color-dispositivo"  id="00N4P00000HHy8K" name="00N4P00000HHy8K" title="¿En que dispositivo está interesado?">
                            <option value=""></option>
                            <option value="IQOS 2.4">IQOS 2.4</option>
                            <option value="IQOS 3 DUO">IQOS 3 DUO</option>
                            <option value="IQOS 3 MULTI">IQOS 3 MULTI</option>
                        </select>

                        <label class="lb-input" for="00N4P00000HMAIz">Elige tu tienda más cercana*</label>
                        <select class="color-dispositivo"  id="00N4P00000HMAIz" name="00N4P00000HMAIz" title="Elige tu tienda más cercana">
                            <option value=""></option>
                            <option value="IQOS Corner Sanborns Atizapán">IQOS Corner Sanborns Atizapán</option>
                            <option value="IQOS Corner Sanborns Centenario">IQOS Corner Sanborns Centenario</option>
                            <option value="IQOS Corner Sanborns Del Valle">IQOS Corner Sanborns Del Valle</option>
                            <option value="IQOS Corner Sanborns Galerías Coapa">IQOS Corner Sanborns Galerías Coapa</option>
                            <option value="IQOS Corner Sanborns Galerías Insurgentes">IQOS Corner Sanborns Galerías Insurgentes</option>
                            <option value="IQOS Corner Sanborns Interlomas">IQOS Corner Sanborns Interlomas</option>
                            <option value="IQOS Corner Sanborns Loreto">IQOS Corner Sanborns Loreto</option>
                            <option value="IQOS Corner Sanborns Madero">IQOS Corner Sanborns Madero</option>
                            <option value="IQOS Corner Sanborns Masaryk">IQOS Corner Sanborns Masaryk</option>
                            <option value="IQOS Corner Sanborns Metropoli">IQOS Corner Sanborns Metropoli</option>
                            <option value="IQOS Corner Sanborns Nuevo Tlalnepantla">IQOS Corner Sanborns Nuevo Tlalnepantla</option>
                            <option value="IQOS Corner Sanborns Pabellón Bosques">IQOS Corner Sanborns Pabellón Bosques</option>
                            <option value="IQOS Corner Sanborns Pabellón Polanco">IQOS Corner Sanborns Pabellón Polanco</option>
                            <option value="IQOS Corner Sanborns Palmas">IQOS Corner Sanborns Palmas</option>
                            <option value="IQOS Corner Sanborns Parque El Toreo">IQOS Corner Sanborns Parque El Toreo</option>
                            <option value="IQOS Corner Sanborns Parque Lindavista">IQOS Corner Sanborns Parque Lindavista</option>
                            <option value="IQOS Corner Sanborns Pedregal">IQOS Corner Sanborns Pedregal</option>
                            <option value="IQOS Corner Sanborns Perisur">IQOS Corner Sanborns Perisur</option>
                            <option value="IQOS Corner Sanborns Plaza Carso">IQOS Corner Sanborns Plaza Carso</option>
                            <option value="IQOS Corner Sanborns Plaza Inbursa">IQOS Corner Sanborns Plaza Inbursa</option>
                            <option value="IQOS Corner Sanborns Reforma 222">IQOS Corner Sanborns Reforma 222</option>
                            <option value="IQOS Corner Sanborns Santa Fé">IQOS Corner Sanborns Santa Fé</option>
                            <option value="IQOS Corner Sanborns Satélite">IQOS Corner Sanborns Satélite</option>
                            <option value="IQOS Corner Sanborns Universidad">IQOS Corner Sanborns Universidad</option>
                            <option value="IQOS Corner Sanborns Vía Vallejo">IQOS Corner Sanborns Vía Vallejo</option>
                            <option value="IQOS Shop Antara">IQOS Shop Antara</option>
                            <option value="IQOS Shop Mundo E">IQOS Shop Mundo E</option>
                            <option value="IQOS Shop Oasis Coyoacán">IQOS Shop Oasis Coyoacán</option>
                            <option value="IQOS Shop Plaza Satélite">IQOS Shop Plaza Satélite</option>
                            <option value="IQOS Store Centro Santa Fe">IQOS Store Centro Santa Fe</option>
                            <option value="IQOS Store Perisur">IQOS Store Perisur</option>
                            <option value="Iqos Store Guadalajara Empleados">Iqos Store Guadalajara Empleados</option>
                            <option value="Iqos Corner Chedraui Interlomas">Iqos Corner Chedraui Interlomas</option>
                            <option value="Iqos Corner Chedraui Interlomas Hills">Iqos Corner Chedraui Interlomas Hills</option>
                            <option value="Iqos Corner Chedraui Polanco">Iqos Corner Chedraui Polanco</option>
                            <option value="Iqos Corner Chedraui Samara">Iqos Corner Chedraui Samara</option>
                            <option value="Iqos Corner Chedraui Universidad">Iqos Corner Chedraui Universidad</option>
                            <option value="Iqos Corner Go Mart Colegio Militar">Iqos Corner Go Mart Colegio Militar</option>
                            <option value="Iqos Corner Go Mart Amora">Iqos Corner Go Mart Amora</option>
                            <option value="Iqos Corner Go Mart Erizo">Iqos Corner Go Mart Erizo</option>
                            <option value="Iqos Corner Go Mart Pachuca">Iqos Corner Go Mart Pachuca</option>
                            <option value="Iqos Corner Go Mart Perseo">Iqos Corner Go Mart Perseo</option>
                            <option value="Iqos Corner Go Mart Socrates">Iqos Corner Go Mart Socrates</option>
                            <option value="Iqos Corner Sanborns Azcapotzalco">Iqos Corner Sanborns Azcapotzalco</option>
                            <option value="Iqos Corner Sanborns Ecatepec">Iqos Corner Sanborns Ecatepec</option>
                            <option value="Iqos Corner Sanborns Parque Delta">Iqos Corner Sanborns Parque Delta</option>
                            <option value="Iqos Corner Sanborns Parque Tezontle">Iqos Corner Sanborns Parque Tezontle</option>
                            <option value="Iqos Corner Sanborns Plaza Insurgentes">Iqos Corner Sanborns Plaza Insurgentes</option>
                            <option value="Iqos Corner Sanborns San Antonio">Iqos Corner Sanborns San Antonio</option>
                            <option value="Iqos Corner Sanborns Santa Fe Samara">Iqos Corner Sanborns Santa Fe Samara</option>
                            <option value="Iqos Corner Sanborns Villa Coapa">Iqos Corner Sanborns Villa Coapa</option>
                            <option value="ETs WL">ETs WL</option>
                        </select>


                        <label class="lb-input" for="source">Source*</label>
                        <select class="color-dispositivo"  id="source" name="source" title="Source">
                            <option value=""></option>
                            <option value="Tiendas WL">Tiendas WL</option>
                            <option value="ETs WL">ETs WL</option>
                        </select>



                        <div class="none">
                            <input class="state" :value="state" id="00N4P000008mN1c" maxlength="255" name="00N4P000008mN1c" size="20" type="text" />
                            <input class="city" :value="city" id="00N4P000008mN26" maxlength="255" name="00N4P000008mN26" size="20" type="text" />
                            <input class="mes" :value="mes" id="00N4P00000GZHnH" name="00N4P00000GZHnH" size="20" type="text" />
                            <input class="ano" :value="ano" id="00N4P00000GZEGY" name="00N4P00000GZEGY" size="20" type="text" />
                            <input class="source" :value="source" id="00N4P000008mN2L" maxlength="255" name="00N4P000008mN2L" size="20" type="text" />
                            <input class="medium" :value="medium" id="00N4P000008mN2Q" maxlength="255" name="00N4P000008mN2Q" size="20" type="text" />
                            <input class="campaign":value="campaign"  id="00N4P000008mN2a" maxlength="255" name="00N4P000008mN2a" size="20" type="text" />
                            <input value="FUMADOR" id="00N4P000008mN13" maxlength="255" name="00N4P000008mN13" size="20" type="text" />
                            <input class="term field" :value="term" id="00N4P00000GZEGd" value="true" maxlength="255" name="00N4P00000GZEGd" size="20" type="text" />
                            <input class="TRANSACTION_ID" :value="orderID" id="00N4P00000GOgJP" name="00N4P00000GOgJP" size="20" type="text" />
                            <input class="Checkbox_Lending"  id="00N4P00000GOkeH" name="00N4P00000GOkeH" type="checkbox" value="1" />
                        </div>

                        

                        <fieldset>
                            
                            <label for="declaro">
                                <input data-category="Form Local Lead" data-action="Declaro" data-label="MX" data-event="Clic" id="declaro" name="declaro" type="checkbox" value="1" />
                                <span>Declaro
                                que soy adulto
                                fumador o usuario de
                                nicotina mayor de 18
                                años.</span>
                            </label>

                            <label for="00N4P00000HHxFK">
                                <input data-category="Form Local Lead" data-action="Demostración de Producto" data-label="MX" data-event="Clic" id="00N4P00000HHxFK" name="00N4P00000HHxFK" type="checkbox" value="1" />
                                <span>Demostración de Producto</span>
                            </label>

                            <label for="aceptoterminos">
                                <input data-category="Form Local Lead" data-action="Data Acepto Términos y Condiciones" data-label="MX" data-event="Clic" id="aceptoterminos" name="aceptoterminos" type="checkbox" value="1" />
                                <span>Acepto <a href="/terminos-condiciones">Términos y Condiciones</a>.</span>
                            </label>

                            <label for="00N4P00000GZEGJ">
                                <input data-category="Form Local Lead" data-action="Data Privacy Agreement Acceptance" data-label="MX" data-event="Clic" id="00N4P00000GZEGJ" name="00N4P00000GZEGJ" type="checkbox" value="1" />
                                <span>Acepto que los datos que recopilen sean utilizados como se establece en su <a href="https://www.pmiprivacy.com/es-la/consumer" target="_blank">Aviso de Privacidad</a>.</span>
                            </label>
                            <label for="00N4P000008mN8e">
                                <input checked="checked" data-category="Form Local Lead" data-action="Opt-in Mktg" data-label="MX" data-event="Clic" id="00N4P000008mN8e" name="00N4P000008mN8e" type="checkbox" value="1" />
                                <span>Quiero recibir información sobre IQOS y productos relacionados por correo electrónico, SMS y similares.</span>
                            </label>
                        </fieldset>

                        <div class="btn form-btn">
                            <input data-category="Form Local Lead" data-action="Send Form" data-label="MX" data-event="Clic" type="submit" value="Enviar" class="save" name="submit">
                            <svg width="20" height="20"><path data-name="Trazado 40" d="M10 0L8.182 1.818 15.065 8.7H0v2.6h15.065l-6.883 6.882L10 20l10-10z" fill="#c2984e"></path></svg>
                        </div>

                        <transition name="fade">
                            <div v-if="Msnenvio" class="envio errors">
                                <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                                <b>{{ Msnenvio }}</b>
                            </div>
                        </transition> 

                    </form>
                    <transition name="fade">
                        <div v-if="errors.length" class="errors">
                            <a href="#" @click="closePopUp($event)" class='close'><svg aria-hidden="true" focusable="false" data-prefix="fal" data-icon="times" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" class="svg-inline--fa fa-times fa-w-10"><path fill="currentColor" d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z" class=""></path></svg></a>
                            <b>Para continuar, por favor revisa lo siguiente:</b>
                            <ul>
                                <li v-for="error in errors">{{ error }}</li>
                            </ul>
                        </div>    
                    </transition>  
                </div>
               
            </section>
            </div>`;
Vue.component('tiendas-wl-component', {
    'template': $TiendasWL,
    'data': function() {

        return {
            "pagina": "lp1",
            "Msnenvio": null,
            "errors": [],
            "nombre": "",
            "apelido": "",
            "telefone": "",
            "hostName": window.location.hostname,
            "email": "",
            "coach_alta_email": "",
            "coach_seguimiento_email": "",
            "orderID": "",
            "dispositivo": "",
            "codigopostal": "",
            "descuento": "",
            "form": "#form",
           
            "acesso": [],
            "source":"",
            "medium": "",
            "campaign": "",
            "fechaNacimiento": "",
            "city": "",
            "state": "",
            "mes": window.mes,
            "ano": window.ano,
            "term": "",
            "declaracao": false,
            "publicidad": false,
            "loged_in_mail": "",
            "Tienda":"",
            "genero":"",
            "codigoCaja":"",
            "marcaCigarros":"",
            "comproHeets":"",
            "amberInicial":null,
            "turquoiseInicial":null,
            "siennaInicial":null,
            "blueInicial":null,
            "purpleInicial":null,
            "yellowInicial":null,
            "tienda": "",
            "sourceSelected":"",
            "demostracionDeProducto":""
        };

    },
    'methods': {
        "allowedCharacters":function(e){
            var reg = /^[a-zA-ZñÑÁáÉéÍíÓóÚú ÄäËëÏïÖöÜü"]*$/;
            var c = String.fromCharCode(e.which)
            if(reg.test(c))
            {
                return true;
            }
            else
            return false;
        },
        "utms": function () {
            var _self = this
            if (window.location.search != "") {
                var utms = _self.getQueryParams(window.location.search.split("?")[1])
                _self.term = utms.utm_term
                //_self.source = utms.utm_source;
                _self.campaign = utms.utm_campaign;
                _self.medium = utms.utm_source + utms.utm_medium;
                console.log(_self.medium)
            }
        },
        'getQueryParams': function (qs) {

            qs = qs.split("+").join(" ");

            var params = {},
                tokens,
                re = /[?&]?([^=]+)=([^&]*)/g;

            while ((tokens = re.exec(qs))) {
                params[decodeURIComponent(tokens[1])] = decodeURIComponent(
                    tokens[2]
                );
            }

            return params;
        },
        "getOrderid": function () {
            var date = new Date().toISOString()
                date = date.replace(/:/g,"").replace(/-/g,"").replace(/\./g,"")

                this.orderID = "PMI-"+date
                console.log(this.orderID)
        },
        "paginaStatus": function(){
            if ($("body").hasClass("get-trial")) {
                this.pagina = "get-trial"
            }
        },
        "checkForm": function (e) {
            var _self = this
            this.errors = [];
            this.Msnenvio = null
        
            if ($("#first_name").val().length < 3) {
                this.errors.push("Tu nombre debe tener más de 3 caracteres");
            }

            if ($("#last_name").val().length < 3) {
                this.errors.push("Tu apellido debe tener más de 3 caracteres");
            }
            
            if ($("#phone").val().length < 10) {
                this.errors.push("Ingresa tu teléfono a 10 dígitos");
            }

            if ($("#email").val().length < 1) {
                this.errors.push('Ingresa tu correo electrónico');
            } else if (!this.validEmail($("#email").val())) {
                this.errors.push('Ingresa un correo electrónico válido (ej. emiliano@iqos.com)');
            }

            if ($("#00N4P00000HHy8K").val().length == 0) {
                this.errors.push("Elige un dispositivo");
            }

            if ($("#00N4P00000HMAIz").val().length == 0) {
                this.errors.push("Elige una tienda");
            }

            if ($("#source").val().length == 0) {
                this.errors.push("Elige un Source");
            }

            if ($("#source").val().length > 0) {
                console.log($("#source").val(), "source")
                _self.sourceSelected = $("#source").val()
            }

            if ($("#00N4P00000GZEGJ").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Aviso de Privacidad");
            }
            if ($("#declaro").prop("checked") == false){
                this.errors.push("Marca la casilla para declarar que eres mayor de 18 años");
            }

            if ($("#aceptoterminos").prop("checked") == false){
                this.errors.push("Marca la casilla para aceptar nuestro Términos y Condiciones.");
            }

          
            if (!this.errors.length) {
                this.nombre = $("#first_name").val()
                this.apelido = $("#last_name").val()
                this.telefone = $("#phone").val()
                this.email= $("#email").val()
                this.tienda = $("#00N4P00000HMAIz").val()              
                this.dispositivo = $("#00N4P00000HHy8K").val()
                
                _self.envio_sales_force()
                
                
            } else {
                e.preventDefault()
            }
        },
        "closePopUp": function(e) {
            this.errors = [];
            this.Msnenvio = null;
            e.preventDefault();
        },
        "validEmail": function (email) {
            var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        },
        
        
        "envio_sales_force": function() {  
            
            if ($("#00N4P000008mN8e").prop("checked") == true){
                this.publicidad = true
            }

            var _self = this

            if ($("#00N4P000008mN8e").prop("checked") == true){
                _self.publicidad = "1"
            } else {
                _self.publicidad = "0"
            }

            if ($("#00N4P00000HHxFK").prop("checked") == true){
                _self.demostracionDeProducto = "Si"
            } else {
                _self.demostracionDeProducto = "No"
            }
            
            var urlIqos = $("input[name=retURL").val()
            var oid = $("input[name=oid").val()
            settings_salesforce = {
                "url": "https://webto.salesforce.com/servlet/servlet.WebToLead?oid="+oid+"&retURL="+urlIqos+"&first_name="+_self.nombre+"&last_name="+_self.apelido+"&phone="+_self.telefone+"&email="+_self.email+"&00N4P000008mN1c="+_self.state+"&00N4P000008mN26="+_self.city+"&00N4P000008mN2L="+_self.sourceSelected+"&00N4P000008mN2Q="+_self.medium+"&00N4P000008mN2a="+_self.campaign+"&00N4P000008mN13=FUMADOR&00N4P00000GOkeC="+_self.orderID+"&00N4P00000GZEGd="+_self.term+"&00N4P00000GZEGJ=1&00N4P00000HHy8K="+_self.dispositivo+"&00N4P000008mN8e="+_self.publicidad+"&00N4P00000HHxFK="+_self.demostracionDeProducto+"&00N4P00000HMAIz="+_self.tienda+"&00N4P00000HE6pF="+_self.hostName+"&00N4P00000GOkeH=1"+"&submit=Enviar",
                "type": "POST",
                "dataType": 'jsonp',
                "async": false,
                "headers": {
                    "content-type": "application/json",
                    "accept": "application/vnd.vtex.ds.v10+json"
                },
                "beforeSend": function() {
                    $(_self.form).find(".loading").length < 1 ? $(_self.form).append('<div class="loading" style="display: inline-block;position: relative;width: 100%;"><img src="/arquivos/amiqos-loading.gif?v=432" style=" position: absolute; right: 0; width: 40px; height: 40px;"></div>') : ""
                }
            }

            _self.ajaxrequest2(settings_salesforce, function() {
               
                $(_self.form).find(".loading").remove()
                _self.Msnenvio = "Order ID: "+_self.orderID+" \n\n¡Gracias por tu registro!\n\n Nos pondremos en contacto contigo.";
                console.log(_self.email,"correo enviado")
                console.log("after ajax call",_self.orderID)
                _self.declaracao = false
                _self.publicidad = false
                _self.nombre = ""
                _self.apelido = ""
                _self.email = ""
                _self.telefone = ""
                _self.tienda = ""
                _self.source = ""

                $("#00N4P00000GZEGJ, #aceptoterminos, #declaro, #00N4P00000HHxFK").attr("checked", false)
               
                $("#00N4P00000HHy8K").val("")
                $("#source").val("")
                $("#00N4P00000HMAIz").val("")
                $(".field").val("")
                
                setTimeout(function (){
                    $(".field").val("")
                },200)
                try {
                    window.dataLayer.push({
                        "category": "Form tiendas aw",
                        "action": "Success",
                        "label": "MX",
                        "event": "try-coach"
                    })
                } catch (e) {console.log(e)}
                    
            })
        
        },
       
        "ajaxrequest2": function(settings_salesforce, fn, type) {

            var callback = (typeof fn === "function") ? true : false;
    
            $.ajax(settings_salesforce)
                .done(function(response) {
                    if (callback) {
                        console.log(response)
                        fn(response);
                    }
                })
                .fail(function(err) {
                    if (callback) {                        
                        fn(false, err);
                    }
                })
    
            return null;
        },
        "geoFencing": function () {
            var _self = this
            $.get( "https://get.geojs.io/v1/ip/geo.json", function (data){
                    _self.city = data.city
                    _self.state = data.region
            })
        }
    },
    'mounted': function(){
        var _self = this
        this.getOrderid()
        this.utms()
        $(document).ready(function (){
            $( "#first_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
            $( "#last_name" ).keypress(function( e) {
                return _self.allowedCharacters(e);
            });
        });
    },
    'computed': {},
    "created":function(){ 
        var _self = this
        
        Vue.use(VueTheMask)
        _self.paginaStatus()
        
        _self.geoFencing()
    }
});

window.VueEvent = new Vue();
new Vue({
    'el': '#app'
}); 


